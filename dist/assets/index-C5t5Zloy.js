function O8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function JD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ov={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function P8(){if(NE)return Ou;NE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Ou.Fragment=e,Ou.jsx=n,Ou.jsxs=n,Ou}var LE;function U8(){return LE||(LE=1,Ov.exports=P8()),Ov.exports}var u=U8(),Pv={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function V8(){if(OE)return je;OE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function A(R,X,ue){this.props=R,this.context=X,this.refs=C,this.updater=ue||x}A.prototype.isReactComponent={},A.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},A.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function _(){}_.prototype=A.prototype;function L(R,X,ue){this.props=R,this.context=X,this.refs=C,this.updater=ue||x}var I=L.prototype=new _;I.constructor=L,T(I,A.prototype),I.isPureReactComponent=!0;var q=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function $(R,X,ue,le,ve,qe){return ue=qe.ref,{$$typeof:t,type:R,key:X,ref:ue!==void 0?ue:null,props:qe}}function Q(R,X){return $(R.type,X,void 0,void 0,void 0,R.props)}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function he(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ue){return X[ue]})}var Ie=/\/+/g;function ne(R,X){return typeof R=="object"&&R!==null&&R.key!=null?he(""+R.key):X.toString(36)}function ke(){}function ae(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ke,ke):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function Ae(R,X,ue,le,ve){var qe=typeof R;(qe==="undefined"||qe==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(qe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case t:case e:Ee=!0;break;case g:return Ee=R._init,Ae(Ee(R._payload),X,ue,le,ve)}}if(Ee)return ve=ve(R),Ee=le===""?"."+ne(R,0):le,q(ve)?(ue="",Ee!=null&&(ue=Ee.replace(Ie,"$&/")+"/"),Ae(ve,X,ue,"",function(Qi){return Qi})):ve!=null&&(ie(ve)&&(ve=Q(ve,ue+(ve.key==null||R&&R.key===ve.key?"":(""+ve.key).replace(Ie,"$&/")+"/")+Ee)),X.push(ve)),1;Ee=0;var Wn=le===""?".":le+":";if(q(R))for(var ut=0;ut<R.length;ut++)le=R[ut],qe=Wn+ne(le,ut),Ee+=Ae(le,X,ue,qe,ve);else if(ut=w(R),typeof ut=="function")for(R=ut.call(R),ut=0;!(le=R.next()).done;)le=le.value,qe=Wn+ne(le,ut++),Ee+=Ae(le,X,ue,qe,ve);else if(qe==="object"){if(typeof R.then=="function")return Ae(ae(R),X,ue,le,ve);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function H(R,X,ue){if(R==null)return R;var le=[],ve=0;return Ae(R,le,"","",function(qe){return X.call(ue,qe,ve++)}),le}function W(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(ue){(R._status===0||R._status===-1)&&(R._status=1,R._result=ue)},function(ue){(R._status===0||R._status===-1)&&(R._status=2,R._result=ue)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var se=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function Se(){}return je.Children={map:H,forEach:function(R,X,ue){H(R,function(){X.apply(this,arguments)},ue)},count:function(R){var X=0;return H(R,function(){X++}),X},toArray:function(R){return H(R,function(X){return X})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},je.Component=A,je.Fragment=n,je.Profiler=i,je.PureComponent=L,je.StrictMode=r,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,je.__COMPILER_RUNTIME={__proto__:null,c:function(R){return D.H.useMemoCache(R)}},je.cache=function(R){return function(){return R.apply(null,arguments)}},je.cloneElement=function(R,X,ue){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var le=T({},R.props),ve=R.key,qe=void 0;if(X!=null)for(Ee in X.ref!==void 0&&(qe=void 0),X.key!==void 0&&(ve=""+X.key),X)!M.call(X,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&X.ref===void 0||(le[Ee]=X[Ee]);var Ee=arguments.length-2;if(Ee===1)le.children=ue;else if(1<Ee){for(var Wn=Array(Ee),ut=0;ut<Ee;ut++)Wn[ut]=arguments[ut+2];le.children=Wn}return $(R.type,ve,void 0,void 0,qe,le)},je.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},je.createElement=function(R,X,ue){var le,ve={},qe=null;if(X!=null)for(le in X.key!==void 0&&(qe=""+X.key),X)M.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=X[le]);var Ee=arguments.length-2;if(Ee===1)ve.children=ue;else if(1<Ee){for(var Wn=Array(Ee),ut=0;ut<Ee;ut++)Wn[ut]=arguments[ut+2];ve.children=Wn}if(R&&R.defaultProps)for(le in Ee=R.defaultProps,Ee)ve[le]===void 0&&(ve[le]=Ee[le]);return $(R,qe,void 0,void 0,null,ve)},je.createRef=function(){return{current:null}},je.forwardRef=function(R){return{$$typeof:d,render:R}},je.isValidElement=ie,je.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:W}},je.memo=function(R,X){return{$$typeof:m,type:R,compare:X===void 0?null:X}},je.startTransition=function(R){var X=D.T,ue={};D.T=ue;try{var le=R(),ve=D.S;ve!==null&&ve(ue,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,se)}catch(qe){se(qe)}finally{D.T=X}},je.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},je.use=function(R){return D.H.use(R)},je.useActionState=function(R,X,ue){return D.H.useActionState(R,X,ue)},je.useCallback=function(R,X){return D.H.useCallback(R,X)},je.useContext=function(R){return D.H.useContext(R)},je.useDebugValue=function(){},je.useDeferredValue=function(R,X){return D.H.useDeferredValue(R,X)},je.useEffect=function(R,X,ue){var le=D.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(R,X)},je.useId=function(){return D.H.useId()},je.useImperativeHandle=function(R,X,ue){return D.H.useImperativeHandle(R,X,ue)},je.useInsertionEffect=function(R,X){return D.H.useInsertionEffect(R,X)},je.useLayoutEffect=function(R,X){return D.H.useLayoutEffect(R,X)},je.useMemo=function(R,X){return D.H.useMemo(R,X)},je.useOptimistic=function(R,X){return D.H.useOptimistic(R,X)},je.useReducer=function(R,X,ue){return D.H.useReducer(R,X,ue)},je.useRef=function(R){return D.H.useRef(R)},je.useState=function(R){return D.H.useState(R)},je.useSyncExternalStore=function(R,X,ue){return D.H.useSyncExternalStore(R,X,ue)},je.useTransition=function(){return D.H.useTransition()},je.version="19.1.0",je}var PE;function Qw(){return PE||(PE=1,Pv.exports=V8()),Pv.exports}var k=Qw();const ej=JD(k),UE=O8({__proto__:null,default:ej},[k]);var Uv={exports:{}},Pu={},Vv={exports:{}},zv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function z8(){return VE||(VE=1,function(t){function e(H,W){var se=H.length;H.push(W);e:for(;0<se;){var Se=se-1>>>1,R=H[Se];if(0<i(R,W))H[Se]=W,H[se]=R,se=Se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var W=H[0],se=H.pop();if(se!==W){H[0]=se;e:for(var Se=0,R=H.length,X=R>>>1;Se<X;){var ue=2*(Se+1)-1,le=H[ue],ve=ue+1,qe=H[ve];if(0>i(le,se))ve<R&&0>i(qe,le)?(H[Se]=qe,H[ve]=se,Se=ve):(H[Se]=le,H[ue]=se,Se=ue);else if(ve<R&&0>i(qe,se))H[Se]=qe,H[ve]=se,Se=ve;else break e}}return W}function i(H,W){var se=H.sortIndex-W.sortIndex;return se!==0?se:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var f=[],m=[],g=1,y=null,w=3,x=!1,T=!1,C=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function q(H){for(var W=n(m);W!==null;){if(W.callback===null)r(m);else if(W.startTime<=H)r(m),W.sortIndex=W.expirationTime,e(f,W);else break;W=n(m)}}function D(H){if(C=!1,q(H),!T)if(n(f)!==null)T=!0,M||(M=!0,ne());else{var W=n(m);W!==null&&Ae(D,W.startTime-H)}}var M=!1,$=-1,Q=5,ie=-1;function he(){return A?!0:!(t.unstable_now()-ie<Q)}function Ie(){if(A=!1,M){var H=t.unstable_now();ie=H;var W=!0;try{e:{T=!1,C&&(C=!1,L($),$=-1),x=!0;var se=w;try{t:{for(q(H),y=n(f);y!==null&&!(y.expirationTime>H&&he());){var Se=y.callback;if(typeof Se=="function"){y.callback=null,w=y.priorityLevel;var R=Se(y.expirationTime<=H);if(H=t.unstable_now(),typeof R=="function"){y.callback=R,q(H),W=!0;break t}y===n(f)&&r(f),q(H)}else r(f);y=n(f)}if(y!==null)W=!0;else{var X=n(m);X!==null&&Ae(D,X.startTime-H),W=!1}}break e}finally{y=null,w=se,x=!1}W=void 0}}finally{W?ne():M=!1}}}var ne;if(typeof I=="function")ne=function(){I(Ie)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ae=ke.port2;ke.port1.onmessage=Ie,ne=function(){ae.postMessage(null)}}else ne=function(){_(Ie,0)};function Ae(H,W){$=_(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(H){switch(w){case 1:case 2:case 3:var W=3;break;default:W=w}var se=w;w=W;try{return H()}finally{w=se}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=w;w=H;try{return W()}finally{w=se}},t.unstable_scheduleCallback=function(H,W,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,H){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=se+R,H={id:g++,callback:W,priorityLevel:H,startTime:se,expirationTime:R,sortIndex:-1},se>Se?(H.sortIndex=se,e(m,H),n(f)===null&&H===n(m)&&(C?(L($),$=-1):C=!0,Ae(D,se-Se))):(H.sortIndex=R,e(f,H),T||x||(T=!0,M||(M=!0,ne()))),H},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(H){var W=w;return function(){var se=w;w=W;try{return H.apply(this,arguments)}finally{w=se}}}}(zv)),zv}var zE;function B8(){return zE||(zE=1,Vv.exports=z8()),Vv.exports}var Bv={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function $8(){if(BE)return yn;BE=1;var t=Qw();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:y==null?null:""+y,children:f,containerInfo:m,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(f,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(f,m,null,g)},yn.flushSync=function(f){var m=l.T,g=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=m,r.p=g,r.d.f()}},yn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},yn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},yn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var g=m.as,y=d(g,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:x}):g==="script"&&r.d.X(f,{crossOrigin:y,integrity:w,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},yn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=d(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},yn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=d(g,m.crossOrigin);r.d.L(f,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},yn.preloadModule=function(f,m){if(typeof f=="string")if(m){var g=d(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},yn.requestFormReset=function(f){r.d.r(f)},yn.unstable_batchedUpdates=function(f,m){return f(m)},yn.useFormState=function(f,m,g){return l.H.useFormState(f,m,g)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var $E;function F8(){if($E)return Bv.exports;$E=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bv.exports=$8(),Bv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function q8(){if(FE)return Pu;FE=1;var t=B8(),e=Qw(),n=F8();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var c=s,h=o;;){var p=c.return;if(p===null)break;var v=p.alternate;if(v===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===c)return d(p),s;if(v===h)return d(p),o;v=v.sibling}throw Error(r(188))}if(c.return!==h.return)c=p,h=v;else{for(var S=!1,E=p.child;E;){if(E===c){S=!0,c=p,h=v;break}if(E===h){S=!0,h=p,c=v;break}E=E.sibling}if(!S){for(E=v.child;E;){if(E===c){S=!0,c=v,h=p;break}if(E===h){S=!0,h=v,c=p;break}E=E.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:o}function m(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=m(s),o!==null)return o;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function ne(s){return s===null||typeof s!="object"?null:(s=Ie&&s[Ie]||s["@@iterator"],typeof s=="function"?s:null)}var ke=Symbol.for("react.client.reference");function ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ke?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case ie:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case I:return(s.displayName||"Context")+".Provider";case L:return(s._context.displayName||"Context")+".Consumer";case q:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return o=s.displayName||null,o!==null?o:ae(s.type)||"Memo";case Q:o=s._payload,s=s._init;try{return ae(s(o))}catch{}}return null}var Ae=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Se=[],R=-1;function X(s){return{current:s}}function ue(s){0>R||(s.current=Se[R],Se[R]=null,R--)}function le(s,o){R++,Se[R]=s.current,s.current=o}var ve=X(null),qe=X(null),Ee=X(null),Wn=X(null);function ut(s,o){switch(le(Ee,o),le(qe,s),le(ve,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?lE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=lE(o),s=cE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ue(ve),le(ve,s)}function Qi(){ue(ve),ue(qe),ue(Ee)}function xy(s){s.memoizedState!==null&&le(Wn,s);var o=ve.current,c=cE(o,s.type);o!==c&&(le(qe,s),le(ve,c))}function Zh(s){qe.current===s&&(ue(ve),ue(qe)),Wn.current===s&&(ue(Wn),Iu._currentValue=se)}var Ty=Object.prototype.hasOwnProperty,Sy=t.unstable_scheduleCallback,Cy=t.unstable_cancelCallback,m9=t.unstable_shouldYield,p9=t.unstable_requestPaint,Ur=t.unstable_now,g9=t.unstable_getCurrentPriorityLevel,$5=t.unstable_ImmediatePriority,F5=t.unstable_UserBlockingPriority,Jh=t.unstable_NormalPriority,y9=t.unstable_LowPriority,q5=t.unstable_IdlePriority,v9=t.log,b9=t.unstable_setDisableYieldValue,Vc=null,Yn=null;function Xi(s){if(typeof v9=="function"&&b9(s),Yn&&typeof Yn.setStrictMode=="function")try{Yn.setStrictMode(Vc,s)}catch{}}var Kn=Math.clz32?Math.clz32:T9,w9=Math.log,x9=Math.LN2;function T9(s){return s>>>=0,s===0?32:31-(w9(s)/x9|0)|0}var ef=256,tf=4194304;function oo(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function nf(s,o,c){var h=s.pendingLanes;if(h===0)return 0;var p=0,v=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var E=h&134217727;return E!==0?(h=E&~v,h!==0?p=oo(h):(S&=E,S!==0?p=oo(S):c||(c=E&~s,c!==0&&(p=oo(c))))):(E=h&~v,E!==0?p=oo(E):S!==0?p=oo(S):c||(c=h&~s,c!==0&&(p=oo(c)))),p===0?0:o!==0&&o!==p&&(o&v)===0&&(v=p&-p,c=o&-o,v>=c||v===32&&(c&4194048)!==0)?o:p}function zc(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function S9(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H5(){var s=ef;return ef<<=1,(ef&4194048)===0&&(ef=256),s}function G5(){var s=tf;return tf<<=1,(tf&62914560)===0&&(tf=4194304),s}function Ey(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Bc(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function C9(s,o,c,h,p,v){var S=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var E=s.entanglements,j=s.expirationTimes,U=s.hiddenUpdates;for(c=S&~c;0<c;){var G=31-Kn(c),K=1<<G;E[G]=0,j[G]=-1;var V=U[G];if(V!==null)for(U[G]=null,G=0;G<V.length;G++){var B=V[G];B!==null&&(B.lane&=-536870913)}c&=~K}h!==0&&W5(s,h,0),v!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=v&~(S&~o))}function W5(s,o,c){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-Kn(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function Y5(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var h=31-Kn(c),p=1<<h;p&o|s[h]&o&&(s[h]|=o),c&=~p}}function ky(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ay(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function K5(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:_E(s.type))}function E9(s,o){var c=W.p;try{return W.p=s,o()}finally{W.p=c}}var Zi=Math.random().toString(36).slice(2),pn="__reactFiber$"+Zi,In="__reactProps$"+Zi,Na="__reactContainer$"+Zi,_y="__reactEvents$"+Zi,k9="__reactListeners$"+Zi,A9="__reactHandles$"+Zi,Q5="__reactResources$"+Zi,$c="__reactMarker$"+Zi;function Dy(s){delete s[pn],delete s[In],delete s[_y],delete s[k9],delete s[A9]}function La(s){var o=s[pn];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Na]||c[pn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=fE(s);s!==null;){if(c=s[pn])return c;s=fE(s)}return o}s=c,c=s.parentNode}return null}function Oa(s){if(s=s[pn]||s[Na]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Fc(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function Pa(s){var o=s[Q5];return o||(o=s[Q5]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ft(s){s[$c]=!0}var X5=new Set,Z5={};function ao(s,o){Ua(s,o),Ua(s+"Capture",o)}function Ua(s,o){for(Z5[s]=o,s=0;s<o.length;s++)X5.add(o[s])}var _9=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),J5={},eT={};function D9(s){return Ty.call(eT,s)?!0:Ty.call(J5,s)?!1:_9.test(s)?eT[s]=!0:(J5[s]=!0,!1)}function rf(s,o,c){if(D9(o))if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+c)}}function sf(s,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+c)}}function gi(s,o,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(o,c,""+h)}}var jy,tT;function Va(s){if(jy===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);jy=o&&o[1]||"",tT=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jy+s+tT}var Iy=!1;function Ry(s,o){if(!s||Iy)return"";Iy=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var V=B}Reflect.construct(s,[],K)}else{try{K.call()}catch(B){V=B}s.call(K.prototype)}}else{try{throw Error()}catch(B){V=B}(K=s())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&V&&typeof B.stack=="string")return[B.stack,V.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),S=v[0],E=v[1];if(S&&E){var j=S.split(`
`),U=E.split(`
`);for(p=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(h===j.length||p===U.length)for(h=j.length-1,p=U.length-1;1<=h&&0<=p&&j[h]!==U[p];)p--;for(;1<=h&&0<=p;h--,p--)if(j[h]!==U[p]){if(h!==1||p!==1)do if(h--,p--,0>p||j[h]!==U[p]){var G=`
`+j[h].replace(" at new "," at ");return s.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",s.displayName)),G}while(1<=h&&0<=p);break}}}finally{Iy=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Va(c):""}function j9(s){switch(s.tag){case 26:case 27:case 5:return Va(s.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 15:return Ry(s.type,!1);case 11:return Ry(s.type.render,!1);case 1:return Ry(s.type,!0);case 31:return Va("Activity");default:return""}}function nT(s){try{var o="";do o+=j9(s),s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function lr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function rT(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function I9(s){var o=rT(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function of(s){s._valueTracker||(s._valueTracker=I9(s))}function iT(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return s&&(h=rT(s)?s.checked?"true":"false":s.value),s=h,s!==c?(o.setValue(s),!0):!1}function af(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var R9=/[\n"\\]/g;function cr(s){return s.replace(R9,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function My(s,o,c,h,p,v,S,E){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),o!=null?S==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+lr(o)):s.value!==""+lr(o)&&(s.value=""+lr(o)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),o!=null?Ny(s,S,lr(o)):c!=null?Ny(s,S,lr(c)):h!=null&&s.removeAttribute("value"),p==null&&v!=null&&(s.defaultChecked=!!v),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+lr(E):s.removeAttribute("name")}function sT(s,o,c,h,p,v,S,E){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||o!=null))return;c=c!=null?""+lr(c):"",o=o!=null?""+lr(o):c,E||o===s.value||(s.value=o),s.defaultValue=o}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=E?s.checked:!!h,s.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Ny(s,o,c){o==="number"&&af(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function za(s,o,c,h){if(s=s.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<s.length;c++)p=o.hasOwnProperty("$"+s[c].value),s[c].selected!==p&&(s[c].selected=p),p&&h&&(s[c].defaultSelected=!0)}else{for(c=""+lr(c),o=null,p=0;p<s.length;p++){if(s[p].value===c){s[p].selected=!0,h&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function oT(s,o,c){if(o!=null&&(o=""+lr(o),o!==s.value&&(s.value=o),c==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=c!=null?""+lr(c):""}function aT(s,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(Ae(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=lr(o),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function Ba(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var M9=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lT(s,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,c):typeof c!="number"||c===0||M9.has(o)?o==="float"?s.cssFloat=c:s[o]=(""+c).trim():s[o]=c+"px"}function cT(s,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var p in o)h=o[p],o.hasOwnProperty(p)&&c[p]!==h&&lT(s,p,h)}else for(var v in o)o.hasOwnProperty(v)&&lT(s,v,o[v])}function Ly(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),L9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lf(s){return L9.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Oy=null;function Py(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $a=null,Fa=null;function uT(s){var o=Oa(s);if(o&&(s=o.stateNode)){var c=s[In]||null;e:switch(s=o.stateNode,o.type){case"input":if(My(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==s&&h.form===s.form){var p=h[In]||null;if(!p)throw Error(r(90));My(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===s.form&&iT(h)}break e;case"textarea":oT(s,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&za(s,!!c.multiple,o,!1)}}}var Uy=!1;function dT(s,o,c){if(Uy)return s(o,c);Uy=!0;try{var h=s(o);return h}finally{if(Uy=!1,($a!==null||Fa!==null)&&(Wf(),$a&&(o=$a,s=Fa,Fa=$a=null,uT(o),s)))for(o=0;o<s.length;o++)uT(s[o])}}function qc(s,o){var c=s.stateNode;if(c===null)return null;var h=c[In]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vy=!1;if(yi)try{var Hc={};Object.defineProperty(Hc,"passive",{get:function(){Vy=!0}}),window.addEventListener("test",Hc,Hc),window.removeEventListener("test",Hc,Hc)}catch{Vy=!1}var Ji=null,zy=null,cf=null;function hT(){if(cf)return cf;var s,o=zy,c=o.length,h,p="value"in Ji?Ji.value:Ji.textContent,v=p.length;for(s=0;s<c&&o[s]===p[s];s++);var S=c-s;for(h=1;h<=S&&o[c-h]===p[v-h];h++);return cf=p.slice(s,1<h?1-h:void 0)}function uf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function df(){return!0}function fT(){return!1}function Rn(s){function o(c,h,p,v,S){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(c=s[E],this[E]=c?c(v):v[E]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?df:fT,this.isPropagationStopped=fT,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=df)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=df)},persist:function(){},isPersistent:df}),o}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hf=Rn(lo),Gc=g({},lo,{view:0,detail:0}),O9=Rn(Gc),By,$y,Wc,ff=g({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qy,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Wc&&(Wc&&s.type==="mousemove"?(By=s.screenX-Wc.screenX,$y=s.screenY-Wc.screenY):$y=By=0,Wc=s),By)},movementY:function(s){return"movementY"in s?s.movementY:$y}}),mT=Rn(ff),P9=g({},ff,{dataTransfer:0}),U9=Rn(P9),V9=g({},Gc,{relatedTarget:0}),Fy=Rn(V9),z9=g({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),B9=Rn(z9),$9=g({},lo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),F9=Rn($9),q9=g({},lo,{data:0}),pT=Rn(q9),H9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y9(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=W9[s])?!!o[s]:!1}function qy(){return Y9}var K9=g({},Gc,{key:function(s){if(s.key){var o=H9[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=uf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?G9[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qy,charCode:function(s){return s.type==="keypress"?uf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?uf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Q9=Rn(K9),X9=g({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gT=Rn(X9),Z9=g({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qy}),J9=Rn(Z9),eN=g({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),tN=Rn(eN),nN=g({},ff,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),rN=Rn(nN),iN=g({},lo,{newState:0,oldState:0}),sN=Rn(iN),oN=[9,13,27,32],Hy=yi&&"CompositionEvent"in window,Yc=null;yi&&"documentMode"in document&&(Yc=document.documentMode);var aN=yi&&"TextEvent"in window&&!Yc,yT=yi&&(!Hy||Yc&&8<Yc&&11>=Yc),vT=" ",bT=!1;function wT(s,o){switch(s){case"keyup":return oN.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xT(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qa=!1;function lN(s,o){switch(s){case"compositionend":return xT(o);case"keypress":return o.which!==32?null:(bT=!0,vT);case"textInput":return s=o.data,s===vT&&bT?null:s;default:return null}}function cN(s,o){if(qa)return s==="compositionend"||!Hy&&wT(s,o)?(s=hT(),cf=zy=Ji=null,qa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yT&&o.locale!=="ko"?null:o.data;default:return null}}var uN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TT(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!uN[s.type]:o==="textarea"}function ST(s,o,c,h){$a?Fa?Fa.push(h):Fa=[h]:$a=h,o=Jf(o,"onChange"),0<o.length&&(c=new hf("onChange","change",null,c,h),s.push({event:c,listeners:o}))}var Kc=null,Qc=null;function dN(s){rE(s,0)}function mf(s){var o=Fc(s);if(iT(o))return s}function CT(s,o){if(s==="change")return o}var ET=!1;if(yi){var Gy;if(yi){var Wy="oninput"in document;if(!Wy){var kT=document.createElement("div");kT.setAttribute("oninput","return;"),Wy=typeof kT.oninput=="function"}Gy=Wy}else Gy=!1;ET=Gy&&(!document.documentMode||9<document.documentMode)}function AT(){Kc&&(Kc.detachEvent("onpropertychange",_T),Qc=Kc=null)}function _T(s){if(s.propertyName==="value"&&mf(Qc)){var o=[];ST(o,Qc,s,Py(s)),dT(dN,o)}}function hN(s,o,c){s==="focusin"?(AT(),Kc=o,Qc=c,Kc.attachEvent("onpropertychange",_T)):s==="focusout"&&AT()}function fN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return mf(Qc)}function mN(s,o){if(s==="click")return mf(o)}function pN(s,o){if(s==="input"||s==="change")return mf(o)}function gN(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Qn=typeof Object.is=="function"?Object.is:gN;function Xc(s,o){if(Qn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!Ty.call(o,p)||!Qn(s[p],o[p]))return!1}return!0}function DT(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function jT(s,o){var c=DT(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=o&&h>=o)return{node:c,offset:o-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=DT(c)}}function IT(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?IT(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function RT(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=af(s.document);o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=af(s.document)}return o}function Yy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var yN=yi&&"documentMode"in document&&11>=document.documentMode,Ha=null,Ky=null,Zc=null,Qy=!1;function MT(s,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qy||Ha==null||Ha!==af(h)||(h=Ha,"selectionStart"in h&&Yy(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Zc&&Xc(Zc,h)||(Zc=h,h=Jf(Ky,"onSelect"),0<h.length&&(o=new hf("onSelect","select",null,o,c),s.push({event:o,listeners:h}),o.target=Ha)))}function co(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Ga={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},Xy={},NT={};yi&&(NT=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function uo(s){if(Xy[s])return Xy[s];if(!Ga[s])return s;var o=Ga[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in NT)return Xy[s]=o[c];return s}var LT=uo("animationend"),OT=uo("animationiteration"),PT=uo("animationstart"),vN=uo("transitionrun"),bN=uo("transitionstart"),wN=uo("transitioncancel"),UT=uo("transitionend"),VT=new Map,Zy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zy.push("scrollEnd");function kr(s,o){VT.set(s,o),ao(o,[s])}var zT=new WeakMap;function ur(s,o){if(typeof s=="object"&&s!==null){var c=zT.get(s);return c!==void 0?c:(o={value:s,source:o,stack:nT(o)},zT.set(s,o),o)}return{value:s,source:o,stack:nT(o)}}var dr=[],Wa=0,Jy=0;function pf(){for(var s=Wa,o=Jy=Wa=0;o<s;){var c=dr[o];dr[o++]=null;var h=dr[o];dr[o++]=null;var p=dr[o];dr[o++]=null;var v=dr[o];if(dr[o++]=null,h!==null&&p!==null){var S=h.pending;S===null?p.next=p:(p.next=S.next,S.next=p),h.pending=p}v!==0&&BT(c,p,v)}}function gf(s,o,c,h){dr[Wa++]=s,dr[Wa++]=o,dr[Wa++]=c,dr[Wa++]=h,Jy|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function e0(s,o,c,h){return gf(s,o,c,h),yf(s)}function Ya(s,o){return gf(s,null,null,o),yf(s)}function BT(s,o,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var p=!1,v=s.return;v!==null;)v.childLanes|=c,h=v.alternate,h!==null&&(h.childLanes|=c),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(p=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,p&&o!==null&&(p=31-Kn(c),s=v.hiddenUpdates,h=s[p],h===null?s[p]=[o]:h.push(o),o.lane=c|536870912),v):null}function yf(s){if(50<Su)throw Su=0,ov=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ka={};function xN(s,o,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(s,o,c,h){return new xN(s,o,c,h)}function t0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function vi(s,o){var c=s.alternate;return c===null?(c=Xn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function $T(s,o){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,o=c.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function vf(s,o,c,h,p,v){var S=0;if(h=s,typeof s=="function")t0(s)&&(S=1);else if(typeof s=="string")S=S8(s,c,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ie:return s=Xn(31,c,o,p),s.elementType=ie,s.lanes=v,s;case T:return ho(c.children,p,v,o);case C:S=8,p|=24;break;case A:return s=Xn(12,c,o,p|2),s.elementType=A,s.lanes=v,s;case D:return s=Xn(13,c,o,p),s.elementType=D,s.lanes=v,s;case M:return s=Xn(19,c,o,p),s.elementType=M,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:case I:S=10;break e;case L:S=9;break e;case q:S=11;break e;case $:S=14;break e;case Q:S=16,h=null;break e}S=29,c=Error(r(130,s===null?"null":typeof s,"")),h=null}return o=Xn(S,c,o,p),o.elementType=s,o.type=h,o.lanes=v,o}function ho(s,o,c,h){return s=Xn(7,s,h,o),s.lanes=c,s}function n0(s,o,c){return s=Xn(6,s,null,o),s.lanes=c,s}function r0(s,o,c){return o=Xn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Qa=[],Xa=0,bf=null,wf=0,hr=[],fr=0,fo=null,bi=1,wi="";function mo(s,o){Qa[Xa++]=wf,Qa[Xa++]=bf,bf=s,wf=o}function FT(s,o,c){hr[fr++]=bi,hr[fr++]=wi,hr[fr++]=fo,fo=s;var h=bi;s=wi;var p=32-Kn(h)-1;h&=~(1<<p),c+=1;var v=32-Kn(o)+p;if(30<v){var S=p-p%5;v=(h&(1<<S)-1).toString(32),h>>=S,p-=S,bi=1<<32-Kn(o)+p|c<<p|h,wi=v+s}else bi=1<<v|c<<p|h,wi=s}function i0(s){s.return!==null&&(mo(s,1),FT(s,1,0))}function s0(s){for(;s===bf;)bf=Qa[--Xa],Qa[Xa]=null,wf=Qa[--Xa],Qa[Xa]=null;for(;s===fo;)fo=hr[--fr],hr[fr]=null,wi=hr[--fr],hr[fr]=null,bi=hr[--fr],hr[fr]=null}var Cn=null,bt=null,Ge=!1,po=null,Vr=!1,o0=Error(r(519));function go(s){var o=Error(r(418,""));throw tu(ur(o,s)),o0}function qT(s){var o=s.stateNode,c=s.type,h=s.memoizedProps;switch(o[pn]=s,o[In]=h,c){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(c=0;c<Eu.length;c++)Le(Eu[c],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),sT(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),of(o);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),aT(o,h.value,h.defaultValue,h.children),of(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||aE(o.textContent,c)?(h.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),h.onScroll!=null&&Le("scroll",o),h.onScrollEnd!=null&&Le("scrollend",o),h.onClick!=null&&(o.onclick=em),o=!0):o=!1,o||go(s)}function HT(s){for(Cn=s.return;Cn;)switch(Cn.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Cn=Cn.return}}function Jc(s){if(s!==Cn)return!1;if(!Ge)return HT(s),Ge=!0,!1;var o=s.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Tv(s.type,s.memoizedProps)),c=!c),c&&bt&&go(s),HT(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(o===0){bt=_r(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;s=s.nextSibling}bt=null}}else o===27?(o=bt,ps(s.type)?(s=kv,kv=null,bt=s):bt=o):bt=Cn?_r(s.stateNode.nextSibling):null;return!0}function eu(){bt=Cn=null,Ge=!1}function GT(){var s=po;return s!==null&&(Ln===null?Ln=s:Ln.push.apply(Ln,s),po=null),s}function tu(s){po===null?po=[s]:po.push(s)}var a0=X(null),yo=null,xi=null;function es(s,o,c){le(a0,o._currentValue),o._currentValue=c}function Ti(s){s._currentValue=a0.current,ue(a0)}function l0(s,o,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===c)break;s=s.return}}function c0(s,o,c,h){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var v=p.dependencies;if(v!==null){var S=p.child;v=v.firstContext;e:for(;v!==null;){var E=v;v=p;for(var j=0;j<o.length;j++)if(E.context===o[j]){v.lanes|=c,E=v.alternate,E!==null&&(E.lanes|=c),l0(v.return,c,s),h||(S=null);break e}v=E.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(r(341));S.lanes|=c,v=S.alternate,v!==null&&(v.lanes|=c),l0(S,c,s),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===s){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function nu(s,o,c,h){s=null;for(var p=o,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var E=p.type;Qn(p.pendingProps.value,S.value)||(s!==null?s.push(E):s=[E])}}else if(p===Wn.current){if(S=p.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Iu):s=[Iu])}p=p.return}s!==null&&c0(o,s,c,h),o.flags|=262144}function xf(s){for(s=s.firstContext;s!==null;){if(!Qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function vo(s){yo=s,xi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return WT(yo,s)}function Tf(s,o){return yo===null&&vo(s),WT(s,o)}function WT(s,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},xi===null){if(s===null)throw Error(r(308));xi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else xi=xi.next=o;return c}var TN=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(c){return c()})}},SN=t.unstable_scheduleCallback,CN=t.unstable_NormalPriority,Ut={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function u0(){return{controller:new TN,data:new Map,refCount:0}}function ru(s){s.refCount--,s.refCount===0&&SN(CN,function(){s.controller.abort()})}var iu=null,d0=0,Za=0,Ja=null;function EN(s,o){if(iu===null){var c=iu=[];d0=0,Za=fv(),Ja={status:"pending",value:void 0,then:function(h){c.push(h)}}}return d0++,o.then(YT,YT),o}function YT(){if(--d0===0&&iu!==null){Ja!==null&&(Ja.status="fulfilled");var s=iu;iu=null,Za=0,Ja=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function kN(s,o){var c=[],h={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var p=0;p<c.length;p++)(0,c[p])(o)},function(p){for(h.status="rejected",h.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),h}var KT=H.S;H.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&EN(s,o),KT!==null&&KT(s,o)};var bo=X(null);function h0(){var s=bo.current;return s!==null?s:ot.pooledCache}function Sf(s,o){o===null?le(bo,bo.current):le(bo,o.pool)}function QT(){var s=h0();return s===null?null:{parent:Ut._currentValue,pool:s}}var su=Error(r(460)),XT=Error(r(474)),Cf=Error(r(542)),f0={then:function(){}};function ZT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ef(){}function JT(s,o,c){switch(c=s[c],c===void 0?s.push(o):c!==o&&(o.then(Ef,Ef),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tS(s),s;default:if(typeof o.status=="string")o.then(Ef,Ef);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=h}},function(h){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,tS(s),s}throw ou=o,su}}var ou=null;function eS(){if(ou===null)throw Error(r(459));var s=ou;return ou=null,s}function tS(s){if(s===su||s===Cf)throw Error(r(483))}var ts=!1;function m0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function p0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ns(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function rs(s,o,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Qe&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,o=yf(s),BT(s,null,c),o}return gf(s,h,o,c),yf(s)}function au(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,Y5(s,c)}}function g0(s,o){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?p=v=S:v=v.next=S,c=c.next}while(c!==null);v===null?p=v=o:v=v.next=o}else p=v=o;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}var y0=!1;function lu(){if(y0){var s=Ja;if(s!==null)throw s}}function cu(s,o,c,h){y0=!1;var p=s.updateQueue;ts=!1;var v=p.firstBaseUpdate,S=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var j=E,U=j.next;j.next=null,S===null?v=U:S.next=U,S=j;var G=s.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==S&&(E===null?G.firstBaseUpdate=U:E.next=U,G.lastBaseUpdate=j))}if(v!==null){var K=p.baseState;S=0,G=U=j=null,E=v;do{var V=E.lane&-536870913,B=V!==E.lane;if(B?(Pe&V)===V:(h&V)===V){V!==0&&V===Za&&(y0=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=s,be=E;V=o;var nt=c;switch(be.tag){case 1:if(Te=be.payload,typeof Te=="function"){K=Te.call(nt,K,V);break e}K=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=be.payload,V=typeof Te=="function"?Te.call(nt,K,V):Te,V==null)break e;K=g({},K,V);break e;case 2:ts=!0}}V=E.callback,V!==null&&(s.flags|=64,B&&(s.flags|=8192),B=p.callbacks,B===null?p.callbacks=[V]:B.push(V))}else B={lane:V,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(U=G=B,j=K):G=G.next=B,S|=V;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;B=E,E=B.next,B.next=null,p.lastBaseUpdate=B,p.shared.pending=null}}while(!0);G===null&&(j=K),p.baseState=j,p.firstBaseUpdate=U,p.lastBaseUpdate=G,v===null&&(p.shared.lanes=0),ds|=S,s.lanes=S,s.memoizedState=K}}function nS(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function rS(s,o){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)nS(c[s],o)}var el=X(null),kf=X(0);function iS(s,o){s=Di,le(kf,s),le(el,o),Di=s|o.baseLanes}function v0(){le(kf,Di),le(el,el.current)}function b0(){Di=kf.current,ue(el),ue(kf)}var is=0,Re=null,et=null,Mt=null,Af=!1,tl=!1,wo=!1,_f=0,uu=0,nl=null,AN=0;function kt(){throw Error(r(321))}function w0(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Qn(s[c],o[c]))return!1;return!0}function x0(s,o,c,h,p,v){return is=v,Re=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,H.H=s===null||s.memoizedState===null?BS:$S,wo=!1,v=c(h,p),wo=!1,tl&&(v=oS(o,c,h,p)),sS(s),v}function sS(s){H.H=Nf;var o=et!==null&&et.next!==null;if(is=0,Mt=et=Re=null,Af=!1,uu=0,nl=null,o)throw Error(r(300));s===null||qt||(s=s.dependencies,s!==null&&xf(s)&&(qt=!0))}function oS(s,o,c,h){Re=s;var p=0;do{if(tl&&(nl=null),uu=0,tl=!1,25<=p)throw Error(r(301));if(p+=1,Mt=et=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=NN,v=o(c,h)}while(tl);return v}function _N(){var s=H.H,o=s.useState()[0];return o=typeof o.then=="function"?du(o):o,s=s.useState()[0],(et!==null?et.memoizedState:null)!==s&&(Re.flags|=1024),o}function T0(){var s=_f!==0;return _f=0,s}function S0(s,o,c){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~c}function C0(s){if(Af){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Af=!1}is=0,Mt=et=Re=null,tl=!1,uu=_f=0,nl=null}function Mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Re.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Nt(){if(et===null){var s=Re.alternate;s=s!==null?s.memoizedState:null}else s=et.next;var o=Mt===null?Re.memoizedState:Mt.next;if(o!==null)Mt=o,et=s;else{if(s===null)throw Re.alternate===null?Error(r(467)):Error(r(310));et=s,s={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Mt===null?Re.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function E0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(s){var o=uu;return uu+=1,nl===null&&(nl=[]),s=JT(nl,s,o),o=Re,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,H.H=o===null||o.memoizedState===null?BS:$S),s}function Df(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return du(s);if(s.$$typeof===I)return gn(s)}throw Error(r(438,String(s)))}function k0(s){var o=null,c=Re.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Re.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=E0(),Re.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(s),h=0;h<s;h++)c[h]=he;return o.index++,c}function Si(s,o){return typeof o=="function"?o(s):o}function jf(s){var o=Nt();return A0(o,et,s)}function A0(s,o,c){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var p=s.baseQueue,v=h.pending;if(v!==null){if(p!==null){var S=p.next;p.next=v.next,v.next=S}o.baseQueue=p=v,h.pending=null}if(v=s.baseState,p===null)s.memoizedState=v;else{o=p.next;var E=S=null,j=null,U=o,G=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Pe&K)===K:(is&K)===K){var V=U.revertLane;if(V===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Za&&(G=!0);else if((is&V)===V){U=U.next,V===Za&&(G=!0);continue}else K={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(E=j=K,S=v):j=j.next=K,Re.lanes|=V,ds|=V;K=U.action,wo&&c(v,K),v=U.hasEagerState?U.eagerState:c(v,K)}else V={lane:K,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(E=j=V,S=v):j=j.next=V,Re.lanes|=K,ds|=K;U=U.next}while(U!==null&&U!==o);if(j===null?S=v:j.next=E,!Qn(v,s.memoizedState)&&(qt=!0,G&&(c=Ja,c!==null)))throw c;s.memoizedState=v,s.baseState=S,s.baseQueue=j,h.lastRenderedState=v}return p===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function _0(s){var o=Nt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var h=c.dispatch,p=c.pending,v=o.memoizedState;if(p!==null){c.pending=null;var S=p=p.next;do v=s(v,S.action),S=S.next;while(S!==p);Qn(v,o.memoizedState)||(qt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),c.lastRenderedState=v}return[v,h]}function aS(s,o,c){var h=Re,p=Nt(),v=Ge;if(v){if(c===void 0)throw Error(r(407));c=c()}else c=o();var S=!Qn((et||p).memoizedState,c);S&&(p.memoizedState=c,qt=!0),p=p.queue;var E=uS.bind(null,h,p,s);if(hu(2048,8,E,[s]),p.getSnapshot!==o||S||Mt!==null&&Mt.memoizedState.tag&1){if(h.flags|=2048,rl(9,If(),cS.bind(null,h,p,c,o),null),ot===null)throw Error(r(349));v||(is&124)!==0||lS(h,o,c)}return c}function lS(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=Re.updateQueue,o===null?(o=E0(),Re.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function cS(s,o,c,h){o.value=c,o.getSnapshot=h,dS(o)&&hS(s)}function uS(s,o,c){return c(function(){dS(o)&&hS(s)})}function dS(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Qn(s,c)}catch{return!0}}function hS(s){var o=Ya(s,2);o!==null&&nr(o,s,2)}function D0(s){var o=Mn();if(typeof s=="function"){var c=s;if(s=c(),wo){Xi(!0);try{c()}finally{Xi(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:s},o}function fS(s,o,c,h){return s.baseState=c,A0(s,et,typeof h=="function"?h:Si)}function DN(s,o,c,h,p){if(Mf(s))throw Error(r(485));if(s=o.action,s!==null){var v={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};H.T!==null?c(!0):v.isTransition=!1,h(v),c=o.pending,c===null?(v.next=o.pending=v,mS(o,v)):(v.next=c.next,o.pending=c.next=v)}}function mS(s,o){var c=o.action,h=o.payload,p=s.state;if(o.isTransition){var v=H.T,S={};H.T=S;try{var E=c(p,h),j=H.S;j!==null&&j(S,E),pS(s,o,E)}catch(U){j0(s,o,U)}finally{H.T=v}}else try{v=c(p,h),pS(s,o,v)}catch(U){j0(s,o,U)}}function pS(s,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){gS(s,o,h)},function(h){return j0(s,o,h)}):gS(s,o,c)}function gS(s,o,c){o.status="fulfilled",o.value=c,yS(o),s.state=c,o=s.pending,o!==null&&(c=o.next,c===o?s.pending=null:(c=c.next,o.next=c,mS(s,c)))}function j0(s,o,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,yS(o),o=o.next;while(o!==h)}s.action=null}function yS(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function vS(s,o){return o}function bS(s,o){if(Ge){var c=ot.formState;if(c!==null){e:{var h=Re;if(Ge){if(bt){t:{for(var p=bt,v=Vr;p.nodeType!==8;){if(!v){p=null;break t}if(p=_r(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){bt=_r(p.nextSibling),h=p.data==="F!";break e}}go(h)}h=!1}h&&(o=c[0])}}return c=Mn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vS,lastRenderedState:o},c.queue=h,c=US.bind(null,Re,h),h.dispatch=c,h=D0(!1),v=L0.bind(null,Re,!1,h.queue),h=Mn(),p={state:o,dispatch:null,action:s,pending:null},h.queue=p,c=DN.bind(null,Re,p,v,c),p.dispatch=c,h.memoizedState=s,[o,c,!1]}function wS(s){var o=Nt();return xS(o,et,s)}function xS(s,o,c){if(o=A0(s,o,vS)[0],s=jf(Si)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=du(o)}catch(S){throw S===su?Cf:S}else h=o;o=Nt();var p=o.queue,v=p.dispatch;return c!==o.memoizedState&&(Re.flags|=2048,rl(9,If(),jN.bind(null,p,c),null)),[h,v,s]}function jN(s,o){s.action=o}function TS(s){var o=Nt(),c=et;if(c!==null)return xS(o,c,s);Nt(),o=o.memoizedState,c=Nt();var h=c.queue.dispatch;return c.memoizedState=s,[o,h,!1]}function rl(s,o,c,h){return s={tag:s,create:c,deps:h,inst:o,next:null},o=Re.updateQueue,o===null&&(o=E0(),Re.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,o.lastEffect=s),s}function If(){return{destroy:void 0,resource:void 0}}function SS(){return Nt().memoizedState}function Rf(s,o,c,h){var p=Mn();h=h===void 0?null:h,Re.flags|=s,p.memoizedState=rl(1|o,If(),c,h)}function hu(s,o,c,h){var p=Nt();h=h===void 0?null:h;var v=p.memoizedState.inst;et!==null&&h!==null&&w0(h,et.memoizedState.deps)?p.memoizedState=rl(o,v,c,h):(Re.flags|=s,p.memoizedState=rl(1|o,v,c,h))}function CS(s,o){Rf(8390656,8,s,o)}function ES(s,o){hu(2048,8,s,o)}function kS(s,o){return hu(4,2,s,o)}function AS(s,o){return hu(4,4,s,o)}function _S(s,o){if(typeof o=="function"){s=s();var c=o(s);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function DS(s,o,c){c=c!=null?c.concat([s]):null,hu(4,4,_S.bind(null,o,s),c)}function I0(){}function jS(s,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&w0(o,h[1])?h[0]:(c.memoizedState=[s,o],s)}function IS(s,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&w0(o,h[1]))return h[0];if(h=s(),wo){Xi(!0);try{s()}finally{Xi(!1)}}return c.memoizedState=[h,o],h}function R0(s,o,c){return c===void 0||(is&1073741824)!==0?s.memoizedState=o:(s.memoizedState=c,s=NC(),Re.lanes|=s,ds|=s,c)}function RS(s,o,c,h){return Qn(c,o)?c:el.current!==null?(s=R0(s,c,h),Qn(s,o)||(qt=!0),s):(is&42)===0?(qt=!0,s.memoizedState=c):(s=NC(),Re.lanes|=s,ds|=s,o)}function MS(s,o,c,h,p){var v=W.p;W.p=v!==0&&8>v?v:8;var S=H.T,E={};H.T=E,L0(s,!1,o,c);try{var j=p(),U=H.S;if(U!==null&&U(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=kN(j,h);fu(s,o,G,tr(s))}else fu(s,o,h,tr(s))}catch(K){fu(s,o,{then:function(){},status:"rejected",reason:K},tr())}finally{W.p=v,H.T=S}}function IN(){}function M0(s,o,c,h){if(s.tag!==5)throw Error(r(476));var p=NS(s).queue;MS(s,p,o,se,c===null?IN:function(){return LS(s),c(h)})}function NS(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:se},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:c},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function LS(s){var o=NS(s).next.queue;fu(s,o,{},tr())}function N0(){return gn(Iu)}function OS(){return Nt().memoizedState}function PS(){return Nt().memoizedState}function RN(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var c=tr();s=ns(c);var h=rs(o,s,c);h!==null&&(nr(h,o,c),au(h,o,c)),o={cache:u0()},s.payload=o;return}o=o.return}}function MN(s,o,c){var h=tr();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Mf(s)?VS(o,c):(c=e0(s,o,c,h),c!==null&&(nr(c,s,h),zS(c,o,h)))}function US(s,o,c){var h=tr();fu(s,o,c,h)}function fu(s,o,c,h){var p={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Mf(s))VS(o,p);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,E=v(S,c);if(p.hasEagerState=!0,p.eagerState=E,Qn(E,S))return gf(s,o,p,0),ot===null&&pf(),!1}catch{}finally{}if(c=e0(s,o,p,h),c!==null)return nr(c,s,h),zS(c,o,h),!0}return!1}function L0(s,o,c,h){if(h={lane:2,revertLane:fv(),action:h,hasEagerState:!1,eagerState:null,next:null},Mf(s)){if(o)throw Error(r(479))}else o=e0(s,c,h,2),o!==null&&nr(o,s,2)}function Mf(s){var o=s.alternate;return s===Re||o!==null&&o===Re}function VS(s,o){tl=Af=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function zS(s,o,c){if((c&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,Y5(s,c)}}var Nf={readContext:gn,use:Df,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},BS={readContext:gn,use:Df,useCallback:function(s,o){return Mn().memoizedState=[s,o===void 0?null:o],s},useContext:gn,useEffect:CS,useImperativeHandle:function(s,o,c){c=c!=null?c.concat([s]):null,Rf(4194308,4,_S.bind(null,o,s),c)},useLayoutEffect:function(s,o){return Rf(4194308,4,s,o)},useInsertionEffect:function(s,o){Rf(4,2,s,o)},useMemo:function(s,o){var c=Mn();o=o===void 0?null:o;var h=s();if(wo){Xi(!0);try{s()}finally{Xi(!1)}}return c.memoizedState=[h,o],h},useReducer:function(s,o,c){var h=Mn();if(c!==void 0){var p=c(o);if(wo){Xi(!0);try{c(o)}finally{Xi(!1)}}}else p=o;return h.memoizedState=h.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},h.queue=s,s=s.dispatch=MN.bind(null,Re,s),[h.memoizedState,s]},useRef:function(s){var o=Mn();return s={current:s},o.memoizedState=s},useState:function(s){s=D0(s);var o=s.queue,c=US.bind(null,Re,o);return o.dispatch=c,[s.memoizedState,c]},useDebugValue:I0,useDeferredValue:function(s,o){var c=Mn();return R0(c,s,o)},useTransition:function(){var s=D0(!1);return s=MS.bind(null,Re,s.queue,!0,!1),Mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,c){var h=Re,p=Mn();if(Ge){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ot===null)throw Error(r(349));(Pe&124)!==0||lS(h,o,c)}p.memoizedState=c;var v={value:c,getSnapshot:o};return p.queue=v,CS(uS.bind(null,h,v,s),[s]),h.flags|=2048,rl(9,If(),cS.bind(null,h,v,c,o),null),c},useId:function(){var s=Mn(),o=ot.identifierPrefix;if(Ge){var c=wi,h=bi;c=(h&~(1<<32-Kn(h)-1)).toString(32)+c,o="«"+o+"R"+c,c=_f++,0<c&&(o+="H"+c.toString(32)),o+="»"}else c=AN++,o="«"+o+"r"+c.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:N0,useFormState:bS,useActionState:bS,useOptimistic:function(s){var o=Mn();o.memoizedState=o.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=L0.bind(null,Re,!0,c),c.dispatch=o,[s,o]},useMemoCache:k0,useCacheRefresh:function(){return Mn().memoizedState=RN.bind(null,Re)}},$S={readContext:gn,use:Df,useCallback:jS,useContext:gn,useEffect:ES,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:AS,useMemo:IS,useReducer:jf,useRef:SS,useState:function(){return jf(Si)},useDebugValue:I0,useDeferredValue:function(s,o){var c=Nt();return RS(c,et.memoizedState,s,o)},useTransition:function(){var s=jf(Si)[0],o=Nt().memoizedState;return[typeof s=="boolean"?s:du(s),o]},useSyncExternalStore:aS,useId:OS,useHostTransitionStatus:N0,useFormState:wS,useActionState:wS,useOptimistic:function(s,o){var c=Nt();return fS(c,et,s,o)},useMemoCache:k0,useCacheRefresh:PS},NN={readContext:gn,use:Df,useCallback:jS,useContext:gn,useEffect:ES,useImperativeHandle:DS,useInsertionEffect:kS,useLayoutEffect:AS,useMemo:IS,useReducer:_0,useRef:SS,useState:function(){return _0(Si)},useDebugValue:I0,useDeferredValue:function(s,o){var c=Nt();return et===null?R0(c,s,o):RS(c,et.memoizedState,s,o)},useTransition:function(){var s=_0(Si)[0],o=Nt().memoizedState;return[typeof s=="boolean"?s:du(s),o]},useSyncExternalStore:aS,useId:OS,useHostTransitionStatus:N0,useFormState:TS,useActionState:TS,useOptimistic:function(s,o){var c=Nt();return et!==null?fS(c,et,s,o):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:k0,useCacheRefresh:PS},il=null,mu=0;function Lf(s){var o=mu;return mu+=1,il===null&&(il=[]),JT(il,s,o)}function pu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Of(s,o){throw o.$$typeof===y?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function FS(s){var o=s._init;return o(s._payload)}function qS(s){function o(O,N){if(s){var P=O.deletions;P===null?(O.deletions=[N],O.flags|=16):P.push(N)}}function c(O,N){if(!s)return null;for(;N!==null;)o(O,N),N=N.sibling;return null}function h(O){for(var N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function p(O,N){return O=vi(O,N),O.index=0,O.sibling=null,O}function v(O,N,P){return O.index=P,s?(P=O.alternate,P!==null?(P=P.index,P<N?(O.flags|=67108866,N):P):(O.flags|=67108866,N)):(O.flags|=1048576,N)}function S(O){return s&&O.alternate===null&&(O.flags|=67108866),O}function E(O,N,P,Y){return N===null||N.tag!==6?(N=n0(P,O.mode,Y),N.return=O,N):(N=p(N,P),N.return=O,N)}function j(O,N,P,Y){var de=P.type;return de===T?G(O,N,P.props.children,Y,P.key):N!==null&&(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&FS(de)===N.type)?(N=p(N,P.props),pu(N,P),N.return=O,N):(N=vf(P.type,P.key,P.props,null,O.mode,Y),pu(N,P),N.return=O,N)}function U(O,N,P,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==P.containerInfo||N.stateNode.implementation!==P.implementation?(N=r0(P,O.mode,Y),N.return=O,N):(N=p(N,P.children||[]),N.return=O,N)}function G(O,N,P,Y,de){return N===null||N.tag!==7?(N=ho(P,O.mode,Y,de),N.return=O,N):(N=p(N,P),N.return=O,N)}function K(O,N,P){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=n0(""+N,O.mode,P),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w:return P=vf(N.type,N.key,N.props,null,O.mode,P),pu(P,N),P.return=O,P;case x:return N=r0(N,O.mode,P),N.return=O,N;case Q:var Y=N._init;return N=Y(N._payload),K(O,N,P)}if(Ae(N)||ne(N))return N=ho(N,O.mode,P,null),N.return=O,N;if(typeof N.then=="function")return K(O,Lf(N),P);if(N.$$typeof===I)return K(O,Tf(O,N),P);Of(O,N)}return null}function V(O,N,P,Y){var de=N!==null?N.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return de!==null?null:E(O,N,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return P.key===de?j(O,N,P,Y):null;case x:return P.key===de?U(O,N,P,Y):null;case Q:return de=P._init,P=de(P._payload),V(O,N,P,Y)}if(Ae(P)||ne(P))return de!==null?null:G(O,N,P,Y,null);if(typeof P.then=="function")return V(O,N,Lf(P),Y);if(P.$$typeof===I)return V(O,N,Tf(O,P),Y);Of(O,P)}return null}function B(O,N,P,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return O=O.get(P)||null,E(N,O,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return O=O.get(Y.key===null?P:Y.key)||null,j(N,O,Y,de);case x:return O=O.get(Y.key===null?P:Y.key)||null,U(N,O,Y,de);case Q:var Me=Y._init;return Y=Me(Y._payload),B(O,N,P,Y,de)}if(Ae(Y)||ne(Y))return O=O.get(P)||null,G(N,O,Y,de,null);if(typeof Y.then=="function")return B(O,N,P,Lf(Y),de);if(Y.$$typeof===I)return B(O,N,P,Tf(N,Y),de);Of(N,Y)}return null}function Te(O,N,P,Y){for(var de=null,Me=null,pe=N,we=N=0,Gt=null;pe!==null&&we<P.length;we++){pe.index>we?(Gt=pe,pe=null):Gt=pe.sibling;var He=V(O,pe,P[we],Y);if(He===null){pe===null&&(pe=Gt);break}s&&pe&&He.alternate===null&&o(O,pe),N=v(He,N,we),Me===null?de=He:Me.sibling=He,Me=He,pe=Gt}if(we===P.length)return c(O,pe),Ge&&mo(O,we),de;if(pe===null){for(;we<P.length;we++)pe=K(O,P[we],Y),pe!==null&&(N=v(pe,N,we),Me===null?de=pe:Me.sibling=pe,Me=pe);return Ge&&mo(O,we),de}for(pe=h(pe);we<P.length;we++)Gt=B(pe,O,we,P[we],Y),Gt!==null&&(s&&Gt.alternate!==null&&pe.delete(Gt.key===null?we:Gt.key),N=v(Gt,N,we),Me===null?de=Gt:Me.sibling=Gt,Me=Gt);return s&&pe.forEach(function(ws){return o(O,ws)}),Ge&&mo(O,we),de}function be(O,N,P,Y){if(P==null)throw Error(r(151));for(var de=null,Me=null,pe=N,we=N=0,Gt=null,He=P.next();pe!==null&&!He.done;we++,He=P.next()){pe.index>we?(Gt=pe,pe=null):Gt=pe.sibling;var ws=V(O,pe,He.value,Y);if(ws===null){pe===null&&(pe=Gt);break}s&&pe&&ws.alternate===null&&o(O,pe),N=v(ws,N,we),Me===null?de=ws:Me.sibling=ws,Me=ws,pe=Gt}if(He.done)return c(O,pe),Ge&&mo(O,we),de;if(pe===null){for(;!He.done;we++,He=P.next())He=K(O,He.value,Y),He!==null&&(N=v(He,N,we),Me===null?de=He:Me.sibling=He,Me=He);return Ge&&mo(O,we),de}for(pe=h(pe);!He.done;we++,He=P.next())He=B(pe,O,we,He.value,Y),He!==null&&(s&&He.alternate!==null&&pe.delete(He.key===null?we:He.key),N=v(He,N,we),Me===null?de=He:Me.sibling=He,Me=He);return s&&pe.forEach(function(L8){return o(O,L8)}),Ge&&mo(O,we),de}function nt(O,N,P,Y){if(typeof P=="object"&&P!==null&&P.type===T&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case w:e:{for(var de=P.key;N!==null;){if(N.key===de){if(de=P.type,de===T){if(N.tag===7){c(O,N.sibling),Y=p(N,P.props.children),Y.return=O,O=Y;break e}}else if(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&FS(de)===N.type){c(O,N.sibling),Y=p(N,P.props),pu(Y,P),Y.return=O,O=Y;break e}c(O,N);break}else o(O,N);N=N.sibling}P.type===T?(Y=ho(P.props.children,O.mode,Y,P.key),Y.return=O,O=Y):(Y=vf(P.type,P.key,P.props,null,O.mode,Y),pu(Y,P),Y.return=O,O=Y)}return S(O);case x:e:{for(de=P.key;N!==null;){if(N.key===de)if(N.tag===4&&N.stateNode.containerInfo===P.containerInfo&&N.stateNode.implementation===P.implementation){c(O,N.sibling),Y=p(N,P.children||[]),Y.return=O,O=Y;break e}else{c(O,N);break}else o(O,N);N=N.sibling}Y=r0(P,O.mode,Y),Y.return=O,O=Y}return S(O);case Q:return de=P._init,P=de(P._payload),nt(O,N,P,Y)}if(Ae(P))return Te(O,N,P,Y);if(ne(P)){if(de=ne(P),typeof de!="function")throw Error(r(150));return P=de.call(P),be(O,N,P,Y)}if(typeof P.then=="function")return nt(O,N,Lf(P),Y);if(P.$$typeof===I)return nt(O,N,Tf(O,P),Y);Of(O,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,N!==null&&N.tag===6?(c(O,N.sibling),Y=p(N,P),Y.return=O,O=Y):(c(O,N),Y=n0(P,O.mode,Y),Y.return=O,O=Y),S(O)):c(O,N)}return function(O,N,P,Y){try{mu=0;var de=nt(O,N,P,Y);return il=null,de}catch(pe){if(pe===su||pe===Cf)throw pe;var Me=Xn(29,pe,null,O.mode);return Me.lanes=Y,Me.return=O,Me}finally{}}}var sl=qS(!0),HS=qS(!1),mr=X(null),zr=null;function ss(s){var o=s.alternate;le(Vt,Vt.current&1),le(mr,s),zr===null&&(o===null||el.current!==null||o.memoizedState!==null)&&(zr=s)}function GS(s){if(s.tag===22){if(le(Vt,Vt.current),le(mr,s),zr===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(zr=s)}}else os()}function os(){le(Vt,Vt.current),le(mr,mr.current)}function Ci(s){ue(mr),zr===s&&(zr=null),ue(Vt)}var Vt=X(0);function Pf(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Ev(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function O0(s,o,c,h){o=s.memoizedState,c=c(h,o),c=c==null?o:g({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var P0={enqueueSetState:function(s,o,c){s=s._reactInternals;var h=tr(),p=ns(h);p.payload=o,c!=null&&(p.callback=c),o=rs(s,p,h),o!==null&&(nr(o,s,h),au(o,s,h))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var h=tr(),p=ns(h);p.tag=1,p.payload=o,c!=null&&(p.callback=c),o=rs(s,p,h),o!==null&&(nr(o,s,h),au(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=tr(),h=ns(c);h.tag=2,o!=null&&(h.callback=o),o=rs(s,h,c),o!==null&&(nr(o,s,c),au(o,s,c))}};function WS(s,o,c,h,p,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,v,S):o.prototype&&o.prototype.isPureReactComponent?!Xc(c,h)||!Xc(p,v):!0}function YS(s,o,c,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==s&&P0.enqueueReplaceState(o,o.state,null)}function xo(s,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(s=s.defaultProps){c===o&&(c=g({},c));for(var p in s)c[p]===void 0&&(c[p]=s[p])}return c}var Uf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function KS(s){Uf(s)}function QS(s){console.error(s)}function XS(s){Uf(s)}function Vf(s,o){try{var c=s.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function ZS(s,o,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function U0(s,o,c){return c=ns(c),c.tag=3,c.payload={element:null},c.callback=function(){Vf(s,o)},c}function JS(s){return s=ns(s),s.tag=3,s}function eC(s,o,c,h){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var v=h.value;s.payload=function(){return p(v)},s.callback=function(){ZS(o,c,h)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){ZS(o,c,h),typeof p!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var E=h.stack;this.componentDidCatch(h.value,{componentStack:E!==null?E:""})})}function LN(s,o,c,h,p){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&nu(o,c,p,!0),c=mr.current,c!==null){switch(c.tag){case 13:return zr===null?lv():c.alternate===null&&wt===0&&(wt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,h===f0?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),uv(s,h,p)),!1;case 22:return c.flags|=65536,h===f0?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),uv(s,h,p)),!1}throw Error(r(435,c.tag))}return uv(s,h,p),lv(),!1}if(Ge)return o=mr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,h!==o0&&(s=Error(r(422),{cause:h}),tu(ur(s,c)))):(h!==o0&&(o=Error(r(423),{cause:h}),tu(ur(o,c))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,h=ur(h,c),p=U0(s.stateNode,h,p),g0(s,p),wt!==4&&(wt=2)),!1;var v=Error(r(520),{cause:h});if(v=ur(v,c),Tu===null?Tu=[v]:Tu.push(v),wt!==4&&(wt=2),o===null)return!0;h=ur(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,s=p&-p,c.lanes|=s,s=U0(c.stateNode,h,s),g0(c,s),!1;case 1:if(o=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(hs===null||!hs.has(v))))return c.flags|=65536,p&=-p,c.lanes|=p,p=JS(p),eC(p,s,c,h),g0(c,p),!1}c=c.return}while(c!==null);return!1}var tC=Error(r(461)),qt=!1;function nn(s,o,c,h){o.child=s===null?HS(o,null,c,h):sl(o,s.child,c,h)}function nC(s,o,c,h,p){c=c.render;var v=o.ref;if("ref"in h){var S={};for(var E in h)E!=="ref"&&(S[E]=h[E])}else S=h;return vo(o),h=x0(s,o,c,S,v,p),E=T0(),s!==null&&!qt?(S0(s,o,p),Ei(s,o,p)):(Ge&&E&&i0(o),o.flags|=1,nn(s,o,h,p),o.child)}function rC(s,o,c,h,p){if(s===null){var v=c.type;return typeof v=="function"&&!t0(v)&&v.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=v,iC(s,o,v,h,p)):(s=vf(c.type,null,h,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!G0(s,p)){var S=v.memoizedProps;if(c=c.compare,c=c!==null?c:Xc,c(S,h)&&s.ref===o.ref)return Ei(s,o,p)}return o.flags|=1,s=vi(v,h),s.ref=o.ref,s.return=o,o.child=s}function iC(s,o,c,h,p){if(s!==null){var v=s.memoizedProps;if(Xc(v,h)&&s.ref===o.ref)if(qt=!1,o.pendingProps=h=v,G0(s,p))(s.flags&131072)!==0&&(qt=!0);else return o.lanes=s.lanes,Ei(s,o,p)}return V0(s,o,c,h,p)}function sC(s,o,c){var h=o.pendingProps,p=h.children,v=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=v!==null?v.baseLanes|c:c,s!==null){for(p=o.child=s.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;o.childLanes=v&~h}else o.childLanes=0,o.child=null;return oC(s,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Sf(o,v!==null?v.cachePool:null),v!==null?iS(o,v):v0(),GS(o);else return o.lanes=o.childLanes=536870912,oC(s,o,v!==null?v.baseLanes|c:c,c)}else v!==null?(Sf(o,v.cachePool),iS(o,v),os(),o.memoizedState=null):(s!==null&&Sf(o,null),v0(),os());return nn(s,o,p,c),o.child}function oC(s,o,c,h){var p=h0();return p=p===null?null:{parent:Ut._currentValue,pool:p},o.memoizedState={baseLanes:c,cachePool:p},s!==null&&Sf(o,null),v0(),GS(o),s!==null&&nu(s,o,h,!0),null}function zf(s,o){var c=o.ref;if(c===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(o.flags|=4194816)}}function V0(s,o,c,h,p){return vo(o),c=x0(s,o,c,h,void 0,p),h=T0(),s!==null&&!qt?(S0(s,o,p),Ei(s,o,p)):(Ge&&h&&i0(o),o.flags|=1,nn(s,o,c,p),o.child)}function aC(s,o,c,h,p,v){return vo(o),o.updateQueue=null,c=oS(o,h,c,p),sS(s),h=T0(),s!==null&&!qt?(S0(s,o,v),Ei(s,o,v)):(Ge&&h&&i0(o),o.flags|=1,nn(s,o,c,v),o.child)}function lC(s,o,c,h,p){if(vo(o),o.stateNode===null){var v=Ka,S=c.contextType;typeof S=="object"&&S!==null&&(v=gn(S)),v=new c(h,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=P0,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=h,v.state=o.memoizedState,v.refs={},m0(o),S=c.contextType,v.context=typeof S=="object"&&S!==null?gn(S):Ka,v.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(O0(o,c,S,h),v.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&P0.enqueueReplaceState(v,v.state,null),cu(o,h,v,p),lu(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){v=o.stateNode;var E=o.memoizedProps,j=xo(c,E);v.props=j;var U=v.context,G=c.contextType;S=Ka,typeof G=="object"&&G!==null&&(S=gn(G));var K=c.getDerivedStateFromProps;G=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,G||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E||U!==S)&&YS(o,v,h,S),ts=!1;var V=o.memoizedState;v.state=V,cu(o,h,v,p),lu(),U=o.memoizedState,E||V!==U||ts?(typeof K=="function"&&(O0(o,c,K,h),U=o.memoizedState),(j=ts||WS(o,c,j,h,V,U,S))?(G||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=U),v.props=h,v.state=U,v.context=S,h=j):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{v=o.stateNode,p0(s,o),S=o.memoizedProps,G=xo(c,S),v.props=G,K=o.pendingProps,V=v.context,U=c.contextType,j=Ka,typeof U=="object"&&U!==null&&(j=gn(U)),E=c.getDerivedStateFromProps,(U=typeof E=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==K||V!==j)&&YS(o,v,h,j),ts=!1,V=o.memoizedState,v.state=V,cu(o,h,v,p),lu();var B=o.memoizedState;S!==K||V!==B||ts||s!==null&&s.dependencies!==null&&xf(s.dependencies)?(typeof E=="function"&&(O0(o,c,E,h),B=o.memoizedState),(G=ts||WS(o,c,G,h,V,B,j)||s!==null&&s.dependencies!==null&&xf(s.dependencies))?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,B,j),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,B,j)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=B),v.props=h,v.state=B,v.context=j,h=G):(typeof v.componentDidUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),h=!1)}return v=h,zf(s,o),h=(o.flags&128)!==0,v||h?(v=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&h?(o.child=sl(o,s.child,null,p),o.child=sl(o,null,c,p)):nn(s,o,c,p),o.memoizedState=v.state,s=o.child):s=Ei(s,o,p),s}function cC(s,o,c,h){return eu(),o.flags|=256,nn(s,o,c,h),o.child}var z0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function B0(s){return{baseLanes:s,cachePool:QT()}}function $0(s,o,c){return s=s!==null?s.childLanes&~c:0,o&&(s|=pr),s}function uC(s,o,c){var h=o.pendingProps,p=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=s!==null&&s.memoizedState===null?!1:(Vt.current&2)!==0),S&&(p=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ge){if(p?ss(o):os(),Ge){var E=bt,j;if(j=E){e:{for(j=E,E=Vr;j.nodeType!==8;){if(!E){E=null;break e}if(j=_r(j.nextSibling),j===null){E=null;break e}}E=j}E!==null?(o.memoizedState={dehydrated:E,treeContext:fo!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},j=Xn(18,null,null,0),j.stateNode=E,j.return=o,o.child=j,Cn=o,bt=null,j=!0):j=!1}j||go(o)}if(E=o.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Ev(E)?o.lanes=32:o.lanes=536870912,null;Ci(o)}return E=h.children,h=h.fallback,p?(os(),p=o.mode,E=Bf({mode:"hidden",children:E},p),h=ho(h,p,c,null),E.return=o,h.return=o,E.sibling=h,o.child=E,p=o.child,p.memoizedState=B0(c),p.childLanes=$0(s,S,c),o.memoizedState=z0,h):(ss(o),F0(o,E))}if(j=s.memoizedState,j!==null&&(E=j.dehydrated,E!==null)){if(v)o.flags&256?(ss(o),o.flags&=-257,o=q0(s,o,c)):o.memoizedState!==null?(os(),o.child=s.child,o.flags|=128,o=null):(os(),p=h.fallback,E=o.mode,h=Bf({mode:"visible",children:h.children},E),p=ho(p,E,c,null),p.flags|=2,h.return=o,p.return=o,h.sibling=p,o.child=h,sl(o,s.child,null,c),h=o.child,h.memoizedState=B0(c),h.childLanes=$0(s,S,c),o.memoizedState=z0,o=p);else if(ss(o),Ev(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var U=S.dgst;S=U,h=Error(r(419)),h.stack="",h.digest=S,tu({value:h,source:null,stack:null}),o=q0(s,o,c)}else if(qt||nu(s,o,c,!1),S=(c&s.childLanes)!==0,qt||S){if(S=ot,S!==null&&(h=c&-c,h=(h&42)!==0?1:ky(h),h=(h&(S.suspendedLanes|c))!==0?0:h,h!==0&&h!==j.retryLane))throw j.retryLane=h,Ya(s,h),nr(S,s,h),tC;E.data==="$?"||lv(),o=q0(s,o,c)}else E.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=j.treeContext,bt=_r(E.nextSibling),Cn=o,Ge=!0,po=null,Vr=!1,s!==null&&(hr[fr++]=bi,hr[fr++]=wi,hr[fr++]=fo,bi=s.id,wi=s.overflow,fo=o),o=F0(o,h.children),o.flags|=4096);return o}return p?(os(),p=h.fallback,E=o.mode,j=s.child,U=j.sibling,h=vi(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,U!==null?p=vi(U,p):(p=ho(p,E,c,null),p.flags|=2),p.return=o,h.return=o,h.sibling=p,o.child=h,h=p,p=o.child,E=s.child.memoizedState,E===null?E=B0(c):(j=E.cachePool,j!==null?(U=Ut._currentValue,j=j.parent!==U?{parent:U,pool:U}:j):j=QT(),E={baseLanes:E.baseLanes|c,cachePool:j}),p.memoizedState=E,p.childLanes=$0(s,S,c),o.memoizedState=z0,h):(ss(o),c=s.child,s=c.sibling,c=vi(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,s!==null&&(S=o.deletions,S===null?(o.deletions=[s],o.flags|=16):S.push(s)),o.child=c,o.memoizedState=null,c)}function F0(s,o){return o=Bf({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Bf(s,o){return s=Xn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function q0(s,o,c){return sl(o,s.child,null,c),s=F0(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function dC(s,o,c){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),l0(s.return,o,c)}function H0(s,o,c,h,p){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=c,v.tailMode=p)}function hC(s,o,c){var h=o.pendingProps,p=h.revealOrder,v=h.tail;if(nn(s,o,h.children,c),h=Vt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&dC(s,c,o);else if(s.tag===19)dC(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(le(Vt,h),p){case"forwards":for(c=o.child,p=null;c!==null;)s=c.alternate,s!==null&&Pf(s)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),H0(o,!1,p,c,v);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&Pf(s)===null){o.child=p;break}s=p.sibling,p.sibling=c,c=p,p=s}H0(o,!0,c,null,v);break;case"together":H0(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ei(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),ds|=o.lanes,(c&o.childLanes)===0)if(s!==null){if(nu(s,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,c=vi(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=vi(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function G0(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&xf(s)))}function ON(s,o,c){switch(o.tag){case 3:ut(o,o.stateNode.containerInfo),es(o,Ut,s.memoizedState.cache),eu();break;case 27:case 5:xy(o);break;case 4:ut(o,o.stateNode.containerInfo);break;case 10:es(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(ss(o),o.flags|=128,null):(c&o.child.childLanes)!==0?uC(s,o,c):(ss(o),s=Ei(s,o,c),s!==null?s.sibling:null);ss(o);break;case 19:var p=(s.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(nu(s,o,c,!1),h=(c&o.childLanes)!==0),p){if(h)return hC(s,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),le(Vt,Vt.current),h)break;return null;case 22:case 23:return o.lanes=0,sC(s,o,c);case 24:es(o,Ut,s.memoizedState.cache)}return Ei(s,o,c)}function fC(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps)qt=!0;else{if(!G0(s,c)&&(o.flags&128)===0)return qt=!1,ON(s,o,c);qt=(s.flags&131072)!==0}else qt=!1,Ge&&(o.flags&1048576)!==0&&FT(o,wf,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,p=h._init;if(h=p(h._payload),o.type=h,typeof h=="function")t0(h)?(s=xo(h,s),o.tag=1,o=lC(null,o,h,s,c)):(o.tag=0,o=V0(null,o,h,s,c));else{if(h!=null){if(p=h.$$typeof,p===q){o.tag=11,o=nC(null,o,h,s,c);break e}else if(p===$){o.tag=14,o=rC(null,o,h,s,c);break e}}throw o=ae(h)||h,Error(r(306,o,""))}}return o;case 0:return V0(s,o,o.type,o.pendingProps,c);case 1:return h=o.type,p=xo(h,o.pendingProps),lC(s,o,h,p,c);case 3:e:{if(ut(o,o.stateNode.containerInfo),s===null)throw Error(r(387));h=o.pendingProps;var v=o.memoizedState;p=v.element,p0(s,o),cu(o,h,null,c);var S=o.memoizedState;if(h=S.cache,es(o,Ut,h),h!==v.cache&&c0(o,[Ut],c,!0),lu(),h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=cC(s,o,h,c);break e}else if(h!==p){p=ur(Error(r(424)),o),tu(p),o=cC(s,o,h,c);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=_r(s.firstChild),Cn=o,Ge=!0,po=null,Vr=!0,c=HS(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(eu(),h===p){o=Ei(s,o,c);break e}nn(s,o,h,c)}o=o.child}return o;case 26:return zf(s,o),s===null?(c=yE(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ge||(c=o.type,s=o.pendingProps,h=tm(Ee.current).createElement(c),h[pn]=o,h[In]=s,sn(h,c,s),Ft(h),o.stateNode=h):o.memoizedState=yE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return xy(o),s===null&&Ge&&(h=o.stateNode=mE(o.type,o.pendingProps,Ee.current),Cn=o,Vr=!0,p=bt,ps(o.type)?(kv=p,bt=_r(h.firstChild)):bt=p),nn(s,o,o.pendingProps.children,c),zf(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ge&&((p=h=bt)&&(h=u8(h,o.type,o.pendingProps,Vr),h!==null?(o.stateNode=h,Cn=o,bt=_r(h.firstChild),Vr=!1,p=!0):p=!1),p||go(o)),xy(o),p=o.type,v=o.pendingProps,S=s!==null?s.memoizedProps:null,h=v.children,Tv(p,v)?h=null:S!==null&&Tv(p,S)&&(o.flags|=32),o.memoizedState!==null&&(p=x0(s,o,_N,null,null,c),Iu._currentValue=p),zf(s,o),nn(s,o,h,c),o.child;case 6:return s===null&&Ge&&((s=c=bt)&&(c=d8(c,o.pendingProps,Vr),c!==null?(o.stateNode=c,Cn=o,bt=null,s=!0):s=!1),s||go(o)),null;case 13:return uC(s,o,c);case 4:return ut(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=sl(o,null,h,c):nn(s,o,h,c),o.child;case 11:return nC(s,o,o.type,o.pendingProps,c);case 7:return nn(s,o,o.pendingProps,c),o.child;case 8:return nn(s,o,o.pendingProps.children,c),o.child;case 12:return nn(s,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,es(o,o.type,h.value),nn(s,o,h.children,c),o.child;case 9:return p=o.type._context,h=o.pendingProps.children,vo(o),p=gn(p),h=h(p),o.flags|=1,nn(s,o,h,c),o.child;case 14:return rC(s,o,o.type,o.pendingProps,c);case 15:return iC(s,o,o.type,o.pendingProps,c);case 19:return hC(s,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},s===null?(c=Bf(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=vi(s.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return sC(s,o,c);case 24:return vo(o),h=gn(Ut),s===null?(p=h0(),p===null&&(p=ot,v=u0(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=c),p=v),o.memoizedState={parent:h,cache:p},m0(o),es(o,Ut,p)):((s.lanes&c)!==0&&(p0(s,o),cu(o,null,null,c),lu()),p=s.memoizedState,v=o.memoizedState,p.parent!==h?(p={parent:h,cache:h},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),es(o,Ut,h)):(h=v.cache,es(o,Ut,h),h!==p.cache&&c0(o,[Ut],c,!0))),nn(s,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function ki(s){s.flags|=4}function mC(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!TE(o)){if(o=mr.current,o!==null&&((Pe&4194048)===Pe?zr!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||o!==zr))throw ou=f0,XT;s.flags|=8192}}function $f(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?G5():536870912,s.lanes|=o,cl|=o)}function gu(s,o){if(!Ge)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function gt(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(o)for(var p=s.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=h,s.childLanes=c,o}function PN(s,o,c){var h=o.pendingProps;switch(s0(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(o),null;case 1:return gt(o),null;case 3:return c=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ti(Ut),Qi(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Jc(o)?ki(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,GT())),gt(o),null;case 26:return c=o.memoizedState,s===null?(ki(o),c!==null?(gt(o),mC(o,c)):(gt(o),o.flags&=-16777217)):c?c!==s.memoizedState?(ki(o),gt(o),mC(o,c)):(gt(o),o.flags&=-16777217):(s.memoizedProps!==h&&ki(o),gt(o),o.flags&=-16777217),null;case 27:Zh(o),c=Ee.current;var p=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&ki(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return gt(o),null}s=ve.current,Jc(o)?qT(o):(s=mE(p,h,c),o.stateNode=s,ki(o))}return gt(o),null;case 5:if(Zh(o),c=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&ki(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return gt(o),null}if(s=ve.current,Jc(o))qT(o);else{switch(p=tm(Ee.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?p.createElement(c,{is:h.is}):p.createElement(c)}}s[pn]=o,s[In]=h;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=s;e:switch(sn(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ki(o)}}return gt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&ki(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(s=Ee.current,Jc(o)){if(s=o.stateNode,c=o.memoizedProps,h=null,p=Cn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}s[pn]=o,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||aE(s.nodeValue,c)),s||go(o)}else s=tm(s).createTextNode(h),s[pn]=o,o.stateNode=s}return gt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Jc(o),h!==null&&h.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[pn]=o}else eu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;gt(o),p=!1}else p=GT(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Ci(o),o):(Ci(o),null)}if(Ci(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=o.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==p&&(h.flags|=2048)}return c!==s&&c&&(o.child.flags|=8192),$f(o,o.updateQueue),gt(o),null;case 4:return Qi(),s===null&&yv(o.stateNode.containerInfo),gt(o),null;case 10:return Ti(o.type),gt(o),null;case 19:if(ue(Vt),p=o.memoizedState,p===null)return gt(o),null;if(h=(o.flags&128)!==0,v=p.rendering,v===null)if(h)gu(p,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=Pf(s),v!==null){for(o.flags|=128,gu(p,!1),s=v.updateQueue,o.updateQueue=s,$f(o,s),o.subtreeFlags=0,s=c,c=o.child;c!==null;)$T(c,s),c=c.sibling;return le(Vt,Vt.current&1|2),o.child}s=s.sibling}p.tail!==null&&Ur()>Hf&&(o.flags|=128,h=!0,gu(p,!1),o.lanes=4194304)}else{if(!h)if(s=Pf(v),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,$f(o,s),gu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Ge)return gt(o),null}else 2*Ur()-p.renderingStartTime>Hf&&c!==536870912&&(o.flags|=128,h=!0,gu(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(s=p.last,s!==null?s.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Ur(),o.sibling=null,s=Vt.current,le(Vt,h?s&1|2:s&1),o):(gt(o),null);case 22:case 23:return Ci(o),b0(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(gt(o),o.subtreeFlags&6&&(o.flags|=8192)):gt(o),c=o.updateQueue,c!==null&&$f(o,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),s!==null&&ue(bo),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ti(Ut),gt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function UN(s,o){switch(s0(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ti(Ut),Qi(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Zh(o),null;case 13:if(Ci(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));eu()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ue(Vt),null;case 4:return Qi(),null;case 10:return Ti(o.type),null;case 22:case 23:return Ci(o),b0(),s!==null&&ue(bo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ti(Ut),null;case 25:return null;default:return null}}function pC(s,o){switch(s0(o),o.tag){case 3:Ti(Ut),Qi();break;case 26:case 27:case 5:Zh(o);break;case 4:Qi();break;case 13:Ci(o);break;case 19:ue(Vt);break;case 10:Ti(o.type);break;case 22:case 23:Ci(o),b0(),s!==null&&ue(bo);break;case 24:Ti(Ut)}}function yu(s,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&s)===s){h=void 0;var v=c.create,S=c.inst;h=v(),S.destroy=h}c=c.next}while(c!==p)}}catch(E){it(o,o.return,E)}}function as(s,o,c){try{var h=o.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var v=p.next;h=v;do{if((h.tag&s)===s){var S=h.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,p=o;var j=c,U=E;try{U()}catch(G){it(p,j,G)}}}h=h.next}while(h!==v)}}catch(G){it(o,o.return,G)}}function gC(s){var o=s.updateQueue;if(o!==null){var c=s.stateNode;try{rS(o,c)}catch(h){it(s,s.return,h)}}}function yC(s,o,c){c.props=xo(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){it(s,o,h)}}function vu(s,o){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(p){it(s,o,p)}}function Br(s,o){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(p){it(s,o,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){it(s,o,p)}else c.current=null}function vC(s){var o=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(p){it(s,s.return,p)}}function W0(s,o,c){try{var h=s.stateNode;s8(h,s.type,c,o),h[In]=o}catch(p){it(s,s.return,p)}}function bC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ps(s.type)||s.tag===4}function Y0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||bC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ps(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function K0(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(s),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=em));else if(h!==4&&(h===27&&ps(s.type)&&(c=s.stateNode,o=null),s=s.child,s!==null))for(K0(s,o,c),s=s.sibling;s!==null;)K0(s,o,c),s=s.sibling}function Ff(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(h!==4&&(h===27&&ps(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Ff(s,o,c),s=s.sibling;s!==null;)Ff(s,o,c),s=s.sibling}function wC(s){var o=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);sn(o,h,c),o[pn]=s,o[In]=c}catch(v){it(s,s.return,v)}}var Ai=!1,At=!1,Q0=!1,xC=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function VN(s,o){if(s=s.containerInfo,wv=am,s=RT(s),Yy(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break e}var S=0,E=-1,j=-1,U=0,G=0,K=s,V=null;t:for(;;){for(var B;K!==c||p!==0&&K.nodeType!==3||(E=S+p),K!==v||h!==0&&K.nodeType!==3||(j=S+h),K.nodeType===3&&(S+=K.nodeValue.length),(B=K.firstChild)!==null;)V=K,K=B;for(;;){if(K===s)break t;if(V===c&&++U===p&&(E=S),V===v&&++G===h&&(j=S),(B=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=B}c=E===-1||j===-1?null:{start:E,end:j}}else c=null}c=c||{start:0,end:0}}else c=null;for(xv={focusedElem:s,selectionRange:c},am=!1,Ht=o;Ht!==null;)if(o=Ht,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Ht=s;else for(;Ht!==null;){switch(o=Ht,v=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,c=o,p=v.memoizedProps,v=v.memoizedState,h=c.stateNode;try{var Te=xo(c.type,p,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Te,v),h.__reactInternalSnapshotBeforeUpdate=s}catch(be){it(c,c.return,be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,c=s.nodeType,c===9)Cv(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Cv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Ht=s;break}Ht=o.return}}function TC(s,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:ls(s,c),h&4&&yu(5,c);break;case 1:if(ls(s,c),h&4)if(s=c.stateNode,o===null)try{s.componentDidMount()}catch(S){it(c,c.return,S)}else{var p=xo(c.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(p,o,s.__reactInternalSnapshotBeforeUpdate)}catch(S){it(c,c.return,S)}}h&64&&gC(c),h&512&&vu(c,c.return);break;case 3:if(ls(s,c),h&64&&(s=c.updateQueue,s!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{rS(s,o)}catch(S){it(c,c.return,S)}}break;case 27:o===null&&h&4&&wC(c);case 26:case 5:ls(s,c),o===null&&h&4&&vC(c),h&512&&vu(c,c.return);break;case 12:ls(s,c);break;case 13:ls(s,c),h&4&&EC(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=YN.bind(null,c),h8(s,c))));break;case 22:if(h=c.memoizedState!==null||Ai,!h){o=o!==null&&o.memoizedState!==null||At,p=Ai;var v=At;Ai=h,(At=o)&&!v?cs(s,c,(c.subtreeFlags&8772)!==0):ls(s,c),Ai=p,At=v}break;case 30:break;default:ls(s,c)}}function SC(s){var o=s.alternate;o!==null&&(s.alternate=null,SC(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Dy(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,Nn=!1;function _i(s,o,c){for(c=c.child;c!==null;)CC(s,o,c),c=c.sibling}function CC(s,o,c){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Vc,c)}catch{}switch(c.tag){case 26:At||Br(c,o),_i(s,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:At||Br(c,o);var h=dt,p=Nn;ps(c.type)&&(dt=c.stateNode,Nn=!1),_i(s,o,c),Au(c.stateNode),dt=h,Nn=p;break;case 5:At||Br(c,o);case 6:if(h=dt,p=Nn,dt=null,_i(s,o,c),dt=h,Nn=p,dt!==null)if(Nn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(c.stateNode)}catch(v){it(c,o,v)}else try{dt.removeChild(c.stateNode)}catch(v){it(c,o,v)}break;case 18:dt!==null&&(Nn?(s=dt,hE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Lu(s)):hE(dt,c.stateNode));break;case 4:h=dt,p=Nn,dt=c.stateNode.containerInfo,Nn=!0,_i(s,o,c),dt=h,Nn=p;break;case 0:case 11:case 14:case 15:At||as(2,c,o),At||as(4,c,o),_i(s,o,c);break;case 1:At||(Br(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&yC(c,o,h)),_i(s,o,c);break;case 21:_i(s,o,c);break;case 22:At=(h=At)||c.memoizedState!==null,_i(s,o,c),At=h;break;default:_i(s,o,c)}}function EC(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Lu(s)}catch(c){it(o,o.return,c)}}function zN(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new xC),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new xC),o;default:throw Error(r(435,s.tag))}}function X0(s,o){var c=zN(s);o.forEach(function(h){var p=KN.bind(null,s,h);c.has(h)||(c.add(h),h.then(p,p))})}function Zn(s,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h],v=s,S=o,E=S;e:for(;E!==null;){switch(E.tag){case 27:if(ps(E.type)){dt=E.stateNode,Nn=!1;break e}break;case 5:dt=E.stateNode,Nn=!1;break e;case 3:case 4:dt=E.stateNode.containerInfo,Nn=!0;break e}E=E.return}if(dt===null)throw Error(r(160));CC(v,S,p),dt=null,Nn=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)kC(o,s),o=o.sibling}var Ar=null;function kC(s,o){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zn(o,s),Jn(s),h&4&&(as(3,s,s.return),yu(3,s),as(5,s,s.return));break;case 1:Zn(o,s),Jn(s),h&512&&(At||c===null||Br(c,c.return)),h&64&&Ai&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var p=Ar;if(Zn(o,s),Jn(s),h&512&&(At||c===null||Br(c,c.return)),h&4){var v=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":v=p.getElementsByTagName("title")[0],(!v||v[$c]||v[pn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(h),p.head.insertBefore(v,p.querySelector("head > title"))),sn(v,h,c),v[pn]=s,Ft(v),h=v;break e;case"link":var S=wE("link","href",p).get(h+(c.href||""));if(S){for(var E=0;E<S.length;E++)if(v=S[E],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(E,1);break t}}v=p.createElement(h),sn(v,h,c),p.head.appendChild(v);break;case"meta":if(S=wE("meta","content",p).get(h+(c.content||""))){for(E=0;E<S.length;E++)if(v=S[E],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(E,1);break t}}v=p.createElement(h),sn(v,h,c),p.head.appendChild(v);break;default:throw Error(r(468,h))}v[pn]=s,Ft(v),h=v}s.stateNode=h}else xE(p,s.type,s.stateNode);else s.stateNode=bE(p,h,s.memoizedProps);else v!==h?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,h===null?xE(p,s.type,s.stateNode):bE(p,h,s.memoizedProps)):h===null&&s.stateNode!==null&&W0(s,s.memoizedProps,c.memoizedProps)}break;case 27:Zn(o,s),Jn(s),h&512&&(At||c===null||Br(c,c.return)),c!==null&&h&4&&W0(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Zn(o,s),Jn(s),h&512&&(At||c===null||Br(c,c.return)),s.flags&32){p=s.stateNode;try{Ba(p,"")}catch(B){it(s,s.return,B)}}h&4&&s.stateNode!=null&&(p=s.memoizedProps,W0(s,p,c!==null?c.memoizedProps:p)),h&1024&&(Q0=!0);break;case 6:if(Zn(o,s),Jn(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(B){it(s,s.return,B)}}break;case 3:if(im=null,p=Ar,Ar=nm(o.containerInfo),Zn(o,s),Ar=p,Jn(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Lu(o.containerInfo)}catch(B){it(s,s.return,B)}Q0&&(Q0=!1,AC(s));break;case 4:h=Ar,Ar=nm(s.stateNode.containerInfo),Zn(o,s),Jn(s),Ar=h;break;case 12:Zn(o,s),Jn(s);break;case 13:Zn(o,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(rv=Ur()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,X0(s,h)));break;case 22:p=s.memoizedState!==null;var j=c!==null&&c.memoizedState!==null,U=Ai,G=At;if(Ai=U||p,At=G||j,Zn(o,s),At=G,Ai=U,Jn(s),h&8192)e:for(o=s.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(c===null||j||Ai||At||To(s)),c=null,o=s;;){if(o.tag===5||o.tag===26){if(c===null){j=c=o;try{if(v=j.stateNode,p)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=j.stateNode;var K=j.memoizedProps.style,V=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(B){it(j,j.return,B)}}}else if(o.tag===6){if(c===null){j=o;try{j.stateNode.nodeValue=p?"":j.memoizedProps}catch(B){it(j,j.return,B)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,X0(s,c))));break;case 19:Zn(o,s),Jn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,X0(s,h)));break;case 30:break;case 21:break;default:Zn(o,s),Jn(s)}}function Jn(s){var o=s.flags;if(o&2){try{for(var c,h=s.return;h!==null;){if(bC(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var p=c.stateNode,v=Y0(s);Ff(s,v,p);break;case 5:var S=c.stateNode;c.flags&32&&(Ba(S,""),c.flags&=-33);var E=Y0(s);Ff(s,E,S);break;case 3:case 4:var j=c.stateNode.containerInfo,U=Y0(s);K0(s,U,j);break;default:throw Error(r(161))}}catch(G){it(s,s.return,G)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function AC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;AC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ls(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)TC(s,o.alternate,o),o=o.sibling}function To(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:as(4,o,o.return),To(o);break;case 1:Br(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&yC(o,o.return,c),To(o);break;case 27:Au(o.stateNode);case 26:case 5:Br(o,o.return),To(o);break;case 22:o.memoizedState===null&&To(o);break;case 30:To(o);break;default:To(o)}s=s.sibling}}function cs(s,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,p=s,v=o,S=v.flags;switch(v.tag){case 0:case 11:case 15:cs(p,v,c),yu(4,v);break;case 1:if(cs(p,v,c),h=v,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){it(h,h.return,U)}if(h=v,p=h.updateQueue,p!==null){var E=h.stateNode;try{var j=p.shared.hiddenCallbacks;if(j!==null)for(p.shared.hiddenCallbacks=null,p=0;p<j.length;p++)nS(j[p],E)}catch(U){it(h,h.return,U)}}c&&S&64&&gC(v),vu(v,v.return);break;case 27:wC(v);case 26:case 5:cs(p,v,c),c&&h===null&&S&4&&vC(v),vu(v,v.return);break;case 12:cs(p,v,c);break;case 13:cs(p,v,c),c&&S&4&&EC(p,v);break;case 22:v.memoizedState===null&&cs(p,v,c),vu(v,v.return);break;case 30:break;default:cs(p,v,c)}o=o.sibling}}function Z0(s,o){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ru(c))}function J0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s))}function $r(s,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)_C(s,o,c,h),o=o.sibling}function _C(s,o,c,h){var p=o.flags;switch(o.tag){case 0:case 11:case 15:$r(s,o,c,h),p&2048&&yu(9,o);break;case 1:$r(s,o,c,h);break;case 3:$r(s,o,c,h),p&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s)));break;case 12:if(p&2048){$r(s,o,c,h),s=o.stateNode;try{var v=o.memoizedProps,S=v.id,E=v.onPostCommit;typeof E=="function"&&E(S,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){it(o,o.return,j)}}else $r(s,o,c,h);break;case 13:$r(s,o,c,h);break;case 23:break;case 22:v=o.stateNode,S=o.alternate,o.memoizedState!==null?v._visibility&2?$r(s,o,c,h):bu(s,o):v._visibility&2?$r(s,o,c,h):(v._visibility|=2,ol(s,o,c,h,(o.subtreeFlags&10256)!==0)),p&2048&&Z0(S,o);break;case 24:$r(s,o,c,h),p&2048&&J0(o.alternate,o);break;default:$r(s,o,c,h)}}function ol(s,o,c,h,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var v=s,S=o,E=c,j=h,U=S.flags;switch(S.tag){case 0:case 11:case 15:ol(v,S,E,j,p),yu(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?ol(v,S,E,j,p):bu(v,S):(G._visibility|=2,ol(v,S,E,j,p)),p&&U&2048&&Z0(S.alternate,S);break;case 24:ol(v,S,E,j,p),p&&U&2048&&J0(S.alternate,S);break;default:ol(v,S,E,j,p)}o=o.sibling}}function bu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=s,h=o,p=h.flags;switch(h.tag){case 22:bu(c,h),p&2048&&Z0(h.alternate,h);break;case 24:bu(c,h),p&2048&&J0(h.alternate,h);break;default:bu(c,h)}o=o.sibling}}var wu=8192;function al(s){if(s.subtreeFlags&wu)for(s=s.child;s!==null;)DC(s),s=s.sibling}function DC(s){switch(s.tag){case 26:al(s),s.flags&wu&&s.memoizedState!==null&&E8(Ar,s.memoizedState,s.memoizedProps);break;case 5:al(s);break;case 3:case 4:var o=Ar;Ar=nm(s.stateNode.containerInfo),al(s),Ar=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=wu,wu=16777216,al(s),wu=o):al(s));break;default:al(s)}}function jC(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function xu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ht=h,RC(h,s)}jC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)IC(s),s=s.sibling}function IC(s){switch(s.tag){case 0:case 11:case 15:xu(s),s.flags&2048&&as(9,s,s.return);break;case 3:xu(s);break;case 12:xu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,qf(s)):xu(s);break;default:xu(s)}}function qf(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ht=h,RC(h,s)}jC(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:as(8,o,o.return),qf(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,qf(o));break;default:qf(o)}s=s.sibling}}function RC(s,o){for(;Ht!==null;){var c=Ht;switch(c.tag){case 0:case 11:case 15:as(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ru(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Ht=h;else e:for(c=s;Ht!==null;){h=Ht;var p=h.sibling,v=h.return;if(SC(h),h===c){Ht=null;break e}if(p!==null){p.return=v,Ht=p;break e}Ht=v}}}var BN={getCacheForType:function(s){var o=gn(Ut),c=o.data.get(s);return c===void 0&&(c=s(),o.data.set(s,c)),c}},$N=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,Ne=null,Pe=0,Xe=0,er=null,us=!1,ll=!1,ev=!1,Di=0,wt=0,ds=0,So=0,tv=0,pr=0,cl=0,Tu=null,Ln=null,nv=!1,rv=0,Hf=1/0,Gf=null,hs=null,rn=0,fs=null,ul=null,dl=0,iv=0,sv=null,MC=null,Su=0,ov=null;function tr(){if((Qe&2)!==0&&Pe!==0)return Pe&-Pe;if(H.T!==null){var s=Za;return s!==0?s:fv()}return K5()}function NC(){pr===0&&(pr=(Pe&536870912)===0||Ge?H5():536870912);var s=mr.current;return s!==null&&(s.flags|=32),pr}function nr(s,o,c){(s===ot&&(Xe===2||Xe===9)||s.cancelPendingCommit!==null)&&(hl(s,0),ms(s,Pe,pr,!1)),Bc(s,c),((Qe&2)===0||s!==ot)&&(s===ot&&((Qe&2)===0&&(So|=c),wt===4&&ms(s,Pe,pr,!1)),Fr(s))}function LC(s,o,c){if((Qe&6)!==0)throw Error(r(327));var h=!c&&(o&124)===0&&(o&s.expiredLanes)===0||zc(s,o),p=h?HN(s,o):cv(s,o,!0),v=h;do{if(p===0){ll&&!h&&ms(s,o,0,!1);break}else{if(c=s.current.alternate,v&&!FN(c)){p=cv(s,o,!1),v=!1;continue}if(p===2){if(v=o,s.errorRecoveryDisabledLanes&v)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var E=s;p=Tu;var j=E.current.memoizedState.isDehydrated;if(j&&(hl(E,S).flags|=256),S=cv(E,S,!1),S!==2){if(ev&&!j){E.errorRecoveryDisabledLanes|=v,So|=v,p=4;break e}v=Ln,Ln=p,v!==null&&(Ln===null?Ln=v:Ln.push.apply(Ln,v))}p=S}if(v=!1,p!==2)continue}}if(p===1){hl(s,0),ms(s,o,0,!0);break}e:{switch(h=s,v=p,v){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:ms(h,o,pr,!us);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(p=rv+300-Ur(),10<p)){if(ms(h,o,pr,!us),nf(h,0,!0)!==0)break e;h.timeoutHandle=uE(OC.bind(null,h,c,Ln,Gf,nv,o,pr,So,cl,us,v,2,-0,0),p);break e}OC(h,c,Ln,Gf,nv,o,pr,So,cl,us,v,0,-0,0)}}break}while(!0);Fr(s)}function OC(s,o,c,h,p,v,S,E,j,U,G,K,V,B){if(s.timeoutHandle=-1,K=o.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ju={stylesheets:null,count:0,unsuspend:C8},DC(o),K=k8(),K!==null)){s.cancelPendingCommit=K(FC.bind(null,s,o,v,c,h,p,S,E,j,G,1,V,B)),ms(s,v,S,!U);return}FC(s,o,v,c,h,p,S,E,j)}function FN(s){for(var o=s;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var p=c[h],v=p.getSnapshot;p=p.value;try{if(!Qn(v(),p))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ms(s,o,c,h){o&=~tv,o&=~So,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var p=o;0<p;){var v=31-Kn(p),S=1<<v;h[v]=-1,p&=~S}c!==0&&W5(s,c,o)}function Wf(){return(Qe&6)===0?(Cu(0),!1):!0}function av(){if(Ne!==null){if(Xe===0)var s=Ne.return;else s=Ne,xi=yo=null,C0(s),il=null,mu=0,s=Ne;for(;s!==null;)pC(s.alternate,s),s=s.return;Ne=null}}function hl(s,o){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,a8(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),av(),ot=s,Ne=c=vi(s.current,null),Pe=o,Xe=0,er=null,us=!1,ll=zc(s,o),ev=!1,cl=pr=tv=So=ds=wt=0,Ln=Tu=null,nv=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var p=31-Kn(h),v=1<<p;o|=s[p],h&=~v}return Di=o,pf(),c}function PC(s,o){Re=null,H.H=Nf,o===su||o===Cf?(o=eS(),Xe=3):o===XT?(o=eS(),Xe=4):Xe=o===tC?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,er=o,Ne===null&&(wt=1,Vf(s,ur(o,s.current)))}function UC(){var s=H.H;return H.H=Nf,s===null?Nf:s}function VC(){var s=H.A;return H.A=BN,s}function lv(){wt=4,us||(Pe&4194048)!==Pe&&mr.current!==null||(ll=!0),(ds&134217727)===0&&(So&134217727)===0||ot===null||ms(ot,Pe,pr,!1)}function cv(s,o,c){var h=Qe;Qe|=2;var p=UC(),v=VC();(ot!==s||Pe!==o)&&(Gf=null,hl(s,o)),o=!1;var S=wt;e:do try{if(Xe!==0&&Ne!==null){var E=Ne,j=er;switch(Xe){case 8:av(),S=6;break e;case 3:case 2:case 9:case 6:mr.current===null&&(o=!0);var U=Xe;if(Xe=0,er=null,fl(s,E,j,U),c&&ll){S=0;break e}break;default:U=Xe,Xe=0,er=null,fl(s,E,j,U)}}qN(),S=wt;break}catch(G){PC(s,G)}while(!0);return o&&s.shellSuspendCounter++,xi=yo=null,Qe=h,H.H=p,H.A=v,Ne===null&&(ot=null,Pe=0,pf()),S}function qN(){for(;Ne!==null;)zC(Ne)}function HN(s,o){var c=Qe;Qe|=2;var h=UC(),p=VC();ot!==s||Pe!==o?(Gf=null,Hf=Ur()+500,hl(s,o)):ll=zc(s,o);e:do try{if(Xe!==0&&Ne!==null){o=Ne;var v=er;t:switch(Xe){case 1:Xe=0,er=null,fl(s,o,v,1);break;case 2:case 9:if(ZT(v)){Xe=0,er=null,BC(o);break}o=function(){Xe!==2&&Xe!==9||ot!==s||(Xe=7),Fr(s)},v.then(o,o);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:ZT(v)?(Xe=0,er=null,BC(o)):(Xe=0,er=null,fl(s,o,v,7));break;case 5:var S=null;switch(Ne.tag){case 26:S=Ne.memoizedState;case 5:case 27:var E=Ne;if(!S||TE(S)){Xe=0,er=null;var j=E.sibling;if(j!==null)Ne=j;else{var U=E.return;U!==null?(Ne=U,Yf(U)):Ne=null}break t}}Xe=0,er=null,fl(s,o,v,5);break;case 6:Xe=0,er=null,fl(s,o,v,6);break;case 8:av(),wt=6;break e;default:throw Error(r(462))}}GN();break}catch(G){PC(s,G)}while(!0);return xi=yo=null,H.H=h,H.A=p,Qe=c,Ne!==null?0:(ot=null,Pe=0,pf(),wt)}function GN(){for(;Ne!==null&&!m9();)zC(Ne)}function zC(s){var o=fC(s.alternate,s,Di);s.memoizedProps=s.pendingProps,o===null?Yf(s):Ne=o}function BC(s){var o=s,c=o.alternate;switch(o.tag){case 15:case 0:o=aC(c,o,o.pendingProps,o.type,void 0,Pe);break;case 11:o=aC(c,o,o.pendingProps,o.type.render,o.ref,Pe);break;case 5:C0(o);default:pC(c,o),o=Ne=$T(o,Di),o=fC(c,o,Di)}s.memoizedProps=s.pendingProps,o===null?Yf(s):Ne=o}function fl(s,o,c,h){xi=yo=null,C0(o),il=null,mu=0;var p=o.return;try{if(LN(s,p,o,c,Pe)){wt=1,Vf(s,ur(c,s.current)),Ne=null;return}}catch(v){if(p!==null)throw Ne=p,v;wt=1,Vf(s,ur(c,s.current)),Ne=null;return}o.flags&32768?(Ge||h===1?s=!0:ll||(Pe&536870912)!==0?s=!1:(us=s=!0,(h===2||h===9||h===3||h===6)&&(h=mr.current,h!==null&&h.tag===13&&(h.flags|=16384))),$C(o,s)):Yf(o)}function Yf(s){var o=s;do{if((o.flags&32768)!==0){$C(o,us);return}s=o.return;var c=PN(o.alternate,o,Di);if(c!==null){Ne=c;return}if(o=o.sibling,o!==null){Ne=o;return}Ne=o=s}while(o!==null);wt===0&&(wt=5)}function $C(s,o){do{var c=UN(s.alternate,s);if(c!==null){c.flags&=32767,Ne=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(s=s.sibling,s!==null)){Ne=s;return}Ne=s=c}while(s!==null);wt=6,Ne=null}function FC(s,o,c,h,p,v,S,E,j){s.cancelPendingCommit=null;do Kf();while(rn!==0);if((Qe&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(v=o.lanes|o.childLanes,v|=Jy,C9(s,c,v,S,E,j),s===ot&&(Ne=ot=null,Pe=0),ul=o,fs=s,dl=c,iv=v,sv=p,MC=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,QN(Jh,function(){return YC(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,p=W.p,W.p=2,S=Qe,Qe|=4;try{VN(s,o,c)}finally{Qe=S,W.p=p,H.T=h}}rn=1,qC(),HC(),GC()}}function qC(){if(rn===1){rn=0;var s=fs,o=ul,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=W.p;W.p=2;var p=Qe;Qe|=4;try{kC(o,s);var v=xv,S=RT(s.containerInfo),E=v.focusedElem,j=v.selectionRange;if(S!==E&&E&&E.ownerDocument&&IT(E.ownerDocument.documentElement,E)){if(j!==null&&Yy(E)){var U=j.start,G=j.end;if(G===void 0&&(G=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,V=K&&K.defaultView||window;if(V.getSelection){var B=V.getSelection(),Te=E.textContent.length,be=Math.min(j.start,Te),nt=j.end===void 0?be:Math.min(j.end,Te);!B.extend&&be>nt&&(S=nt,nt=be,be=S);var O=jT(E,be),N=jT(E,nt);if(O&&N&&(B.rangeCount!==1||B.anchorNode!==O.node||B.anchorOffset!==O.offset||B.focusNode!==N.node||B.focusOffset!==N.offset)){var P=K.createRange();P.setStart(O.node,O.offset),B.removeAllRanges(),be>nt?(B.addRange(P),B.extend(N.node,N.offset)):(P.setEnd(N.node,N.offset),B.addRange(P))}}}}for(K=[],B=E;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Y=K[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}am=!!wv,xv=wv=null}finally{Qe=p,W.p=h,H.T=c}}s.current=o,rn=2}}function HC(){if(rn===2){rn=0;var s=fs,o=ul,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=W.p;W.p=2;var p=Qe;Qe|=4;try{TC(s,o.alternate,o)}finally{Qe=p,W.p=h,H.T=c}}rn=3}}function GC(){if(rn===4||rn===3){rn=0,p9();var s=fs,o=ul,c=dl,h=MC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?rn=5:(rn=0,ul=fs=null,WC(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(hs=null),Ay(c),o=o.stateNode,Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Vc,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=H.T,p=W.p,W.p=2,H.T=null;try{for(var v=s.onRecoverableError,S=0;S<h.length;S++){var E=h[S];v(E.value,{componentStack:E.stack})}}finally{H.T=o,W.p=p}}(dl&3)!==0&&Kf(),Fr(s),p=s.pendingLanes,(c&4194090)!==0&&(p&42)!==0?s===ov?Su++:(Su=0,ov=s):Su=0,Cu(0)}}function WC(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ru(o)))}function Kf(s){return qC(),HC(),GC(),YC()}function YC(){if(rn!==5)return!1;var s=fs,o=iv;iv=0;var c=Ay(dl),h=H.T,p=W.p;try{W.p=32>c?32:c,H.T=null,c=sv,sv=null;var v=fs,S=dl;if(rn=0,ul=fs=null,dl=0,(Qe&6)!==0)throw Error(r(331));var E=Qe;if(Qe|=4,IC(v.current),_C(v,v.current,S,c),Qe=E,Cu(0,!1),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Vc,v)}catch{}return!0}finally{W.p=p,H.T=h,WC(s,o)}}function KC(s,o,c){o=ur(c,o),o=U0(s.stateNode,o,2),s=rs(s,o,2),s!==null&&(Bc(s,2),Fr(s))}function it(s,o,c){if(s.tag===3)KC(s,s,c);else for(;o!==null;){if(o.tag===3){KC(o,s,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(hs===null||!hs.has(h))){s=ur(c,s),c=JS(2),h=rs(o,c,2),h!==null&&(eC(c,h,o,s),Bc(h,2),Fr(h));break}}o=o.return}}function uv(s,o,c){var h=s.pingCache;if(h===null){h=s.pingCache=new $N;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(c)||(ev=!0,p.add(c),s=WN.bind(null,s,o,c),o.then(s,s))}function WN(s,o,c){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ot===s&&(Pe&c)===c&&(wt===4||wt===3&&(Pe&62914560)===Pe&&300>Ur()-rv?(Qe&2)===0&&hl(s,0):tv|=c,cl===Pe&&(cl=0)),Fr(s)}function QC(s,o){o===0&&(o=G5()),s=Ya(s,o),s!==null&&(Bc(s,o),Fr(s))}function YN(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),QC(s,c)}function KN(s,o){var c=0;switch(s.tag){case 13:var h=s.stateNode,p=s.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),QC(s,c)}function QN(s,o){return Sy(s,o)}var Qf=null,ml=null,dv=!1,Xf=!1,hv=!1,Co=0;function Fr(s){s!==ml&&s.next===null&&(ml===null?Qf=ml=s:ml=ml.next=s),Xf=!0,dv||(dv=!0,ZN())}function Cu(s,o){if(!hv&&Xf){hv=!0;do for(var c=!1,h=Qf;h!==null;){if(s!==0){var p=h.pendingLanes;if(p===0)var v=0;else{var S=h.suspendedLanes,E=h.pingedLanes;v=(1<<31-Kn(42|s)+1)-1,v&=p&~(S&~E),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,eE(h,v))}else v=Pe,v=nf(h,h===ot?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||zc(h,v)||(c=!0,eE(h,v));h=h.next}while(c);hv=!1}}function XN(){XC()}function XC(){Xf=dv=!1;var s=0;Co!==0&&(o8()&&(s=Co),Co=0);for(var o=Ur(),c=null,h=Qf;h!==null;){var p=h.next,v=ZC(h,o);v===0?(h.next=null,c===null?Qf=p:c.next=p,p===null&&(ml=c)):(c=h,(s!==0||(v&3)!==0)&&(Xf=!0)),h=p}Cu(s)}function ZC(s,o){for(var c=s.suspendedLanes,h=s.pingedLanes,p=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var S=31-Kn(v),E=1<<S,j=p[S];j===-1?((E&c)===0||(E&h)!==0)&&(p[S]=S9(E,o)):j<=o&&(s.expiredLanes|=E),v&=~E}if(o=ot,c=Pe,c=nf(s,s===o?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===o&&(Xe===2||Xe===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Cy(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||zc(s,c)){if(o=c&-c,o===s.callbackPriority)return o;switch(h!==null&&Cy(h),Ay(c)){case 2:case 8:c=F5;break;case 32:c=Jh;break;case 268435456:c=q5;break;default:c=Jh}return h=JC.bind(null,s),c=Sy(c,h),s.callbackPriority=o,s.callbackNode=c,o}return h!==null&&h!==null&&Cy(h),s.callbackPriority=2,s.callbackNode=null,2}function JC(s,o){if(rn!==0&&rn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Kf()&&s.callbackNode!==c)return null;var h=Pe;return h=nf(s,s===ot?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(LC(s,h,o),ZC(s,Ur()),s.callbackNode!=null&&s.callbackNode===c?JC.bind(null,s):null)}function eE(s,o){if(Kf())return null;LC(s,o,!0)}function ZN(){l8(function(){(Qe&6)!==0?Sy($5,XN):XC()})}function fv(){return Co===0&&(Co=H5()),Co}function tE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:lf(""+s)}function nE(s,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,s.id&&c.setAttribute("form",s.id),o.parentNode.insertBefore(c,o),s=new FormData(s),c.parentNode.removeChild(c),s}function JN(s,o,c,h,p){if(o==="submit"&&c&&c.stateNode===p){var v=tE((p[In]||null).action),S=h.submitter;S&&(o=(o=S[In]||null)?tE(o.formAction):S.getAttribute("formAction"),o!==null&&(v=o,S=null));var E=new hf("action","action",null,h,p);s.push({event:E,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Co!==0){var j=S?nE(p,S):new FormData(p);M0(c,{pending:!0,data:j,method:p.method,action:v},null,j)}}else typeof v=="function"&&(E.preventDefault(),j=S?nE(p,S):new FormData(p),M0(c,{pending:!0,data:j,method:p.method,action:v},v,j))},currentTarget:p}]})}}for(var mv=0;mv<Zy.length;mv++){var pv=Zy[mv],e8=pv.toLowerCase(),t8=pv[0].toUpperCase()+pv.slice(1);kr(e8,"on"+t8)}kr(LT,"onAnimationEnd"),kr(OT,"onAnimationIteration"),kr(PT,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(vN,"onTransitionRun"),kr(bN,"onTransitionStart"),kr(wN,"onTransitionCancel"),kr(UT,"onTransitionEnd"),Ua("onMouseEnter",["mouseout","mouseover"]),Ua("onMouseLeave",["mouseout","mouseover"]),Ua("onPointerEnter",["pointerout","pointerover"]),Ua("onPointerLeave",["pointerout","pointerover"]),ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ao("onBeforeInput",["compositionend","keypress","textInput","paste"]),ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eu));function rE(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],p=h.event;h=h.listeners;e:{var v=void 0;if(o)for(var S=h.length-1;0<=S;S--){var E=h[S],j=E.instance,U=E.currentTarget;if(E=E.listener,j!==v&&p.isPropagationStopped())break e;v=E,p.currentTarget=U;try{v(p)}catch(G){Uf(G)}p.currentTarget=null,v=j}else for(S=0;S<h.length;S++){if(E=h[S],j=E.instance,U=E.currentTarget,E=E.listener,j!==v&&p.isPropagationStopped())break e;v=E,p.currentTarget=U;try{v(p)}catch(G){Uf(G)}p.currentTarget=null,v=j}}}}function Le(s,o){var c=o[_y];c===void 0&&(c=o[_y]=new Set);var h=s+"__bubble";c.has(h)||(iE(o,s,2,!1),c.add(h))}function gv(s,o,c){var h=0;o&&(h|=4),iE(c,s,h,o)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function yv(s){if(!s[Zf]){s[Zf]=!0,X5.forEach(function(c){c!=="selectionchange"&&(n8.has(c)||gv(c,!1,s),gv(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Zf]||(o[Zf]=!0,gv("selectionchange",!1,o))}}function iE(s,o,c,h){switch(_E(o)){case 2:var p=D8;break;case 8:p=j8;break;default:p=Iv}c=p.bind(null,o,c,s),p=void 0,!Vy||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?s.addEventListener(o,c,{capture:!0,passive:p}):s.addEventListener(o,c,!0):p!==void 0?s.addEventListener(o,c,{passive:p}):s.addEventListener(o,c,!1)}function vv(s,o,c,h,p){var v=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var E=h.stateNode.containerInfo;if(E===p)break;if(S===4)for(S=h.return;S!==null;){var j=S.tag;if((j===3||j===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;E!==null;){if(S=La(E),S===null)return;if(j=S.tag,j===5||j===6||j===26||j===27){h=v=S;continue e}E=E.parentNode}}h=h.return}dT(function(){var U=v,G=Py(c),K=[];e:{var V=VT.get(s);if(V!==void 0){var B=hf,Te=s;switch(s){case"keypress":if(uf(c)===0)break e;case"keydown":case"keyup":B=Q9;break;case"focusin":Te="focus",B=Fy;break;case"focusout":Te="blur",B=Fy;break;case"beforeblur":case"afterblur":B=Fy;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=mT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=U9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=J9;break;case LT:case OT:case PT:B=B9;break;case UT:B=tN;break;case"scroll":case"scrollend":B=O9;break;case"wheel":B=rN;break;case"copy":case"cut":case"paste":B=F9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=gT;break;case"toggle":case"beforetoggle":B=sN}var be=(o&4)!==0,nt=!be&&(s==="scroll"||s==="scrollend"),O=be?V!==null?V+"Capture":null:V;be=[];for(var N=U,P;N!==null;){var Y=N;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||O===null||(Y=qc(N,O),Y!=null&&be.push(ku(N,Y,P))),nt)break;N=N.return}0<be.length&&(V=new B(V,Te,null,c,G),K.push({event:V,listeners:be}))}}if((o&7)===0){e:{if(V=s==="mouseover"||s==="pointerover",B=s==="mouseout"||s==="pointerout",V&&c!==Oy&&(Te=c.relatedTarget||c.fromElement)&&(La(Te)||Te[Na]))break e;if((B||V)&&(V=G.window===G?G:(V=G.ownerDocument)?V.defaultView||V.parentWindow:window,B?(Te=c.relatedTarget||c.toElement,B=U,Te=Te?La(Te):null,Te!==null&&(nt=a(Te),be=Te.tag,Te!==nt||be!==5&&be!==27&&be!==6)&&(Te=null)):(B=null,Te=U),B!==Te)){if(be=mT,Y="onMouseLeave",O="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(be=gT,Y="onPointerLeave",O="onPointerEnter",N="pointer"),nt=B==null?V:Fc(B),P=Te==null?V:Fc(Te),V=new be(Y,N+"leave",B,c,G),V.target=nt,V.relatedTarget=P,Y=null,La(G)===U&&(be=new be(O,N+"enter",Te,c,G),be.target=P,be.relatedTarget=nt,Y=be),nt=Y,B&&Te)t:{for(be=B,O=Te,N=0,P=be;P;P=pl(P))N++;for(P=0,Y=O;Y;Y=pl(Y))P++;for(;0<N-P;)be=pl(be),N--;for(;0<P-N;)O=pl(O),P--;for(;N--;){if(be===O||O!==null&&be===O.alternate)break t;be=pl(be),O=pl(O)}be=null}else be=null;B!==null&&sE(K,V,B,be,!1),Te!==null&&nt!==null&&sE(K,nt,Te,be,!0)}}e:{if(V=U?Fc(U):window,B=V.nodeName&&V.nodeName.toLowerCase(),B==="select"||B==="input"&&V.type==="file")var de=CT;else if(TT(V))if(ET)de=pN;else{de=fN;var Me=hN}else B=V.nodeName,!B||B.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?U&&Ly(U.elementType)&&(de=CT):de=mN;if(de&&(de=de(s,U))){ST(K,de,c,G);break e}Me&&Me(s,V,U),s==="focusout"&&U&&V.type==="number"&&U.memoizedProps.value!=null&&Ny(V,"number",V.value)}switch(Me=U?Fc(U):window,s){case"focusin":(TT(Me)||Me.contentEditable==="true")&&(Ha=Me,Ky=U,Zc=null);break;case"focusout":Zc=Ky=Ha=null;break;case"mousedown":Qy=!0;break;case"contextmenu":case"mouseup":case"dragend":Qy=!1,MT(K,c,G);break;case"selectionchange":if(yN)break;case"keydown":case"keyup":MT(K,c,G)}var pe;if(Hy)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else qa?wT(s,c)&&(we="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(we="onCompositionStart");we&&(yT&&c.locale!=="ko"&&(qa||we!=="onCompositionStart"?we==="onCompositionEnd"&&qa&&(pe=hT()):(Ji=G,zy="value"in Ji?Ji.value:Ji.textContent,qa=!0)),Me=Jf(U,we),0<Me.length&&(we=new pT(we,s,null,c,G),K.push({event:we,listeners:Me}),pe?we.data=pe:(pe=xT(c),pe!==null&&(we.data=pe)))),(pe=aN?lN(s,c):cN(s,c))&&(we=Jf(U,"onBeforeInput"),0<we.length&&(Me=new pT("onBeforeInput","beforeinput",null,c,G),K.push({event:Me,listeners:we}),Me.data=pe)),JN(K,s,U,c,G)}rE(K,o)})}function ku(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Jf(s,o){for(var c=o+"Capture",h=[];s!==null;){var p=s,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=qc(s,c),p!=null&&h.unshift(ku(s,p,v)),p=qc(s,o),p!=null&&h.push(ku(s,p,v))),s.tag===3)return h;s=s.return}return[]}function pl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sE(s,o,c,h,p){for(var v=o._reactName,S=[];c!==null&&c!==h;){var E=c,j=E.alternate,U=E.stateNode;if(E=E.tag,j!==null&&j===h)break;E!==5&&E!==26&&E!==27||U===null||(j=U,p?(U=qc(c,v),U!=null&&S.unshift(ku(c,U,j))):p||(U=qc(c,v),U!=null&&S.push(ku(c,U,j)))),c=c.return}S.length!==0&&s.push({event:o,listeners:S})}var r8=/\r\n?/g,i8=/\u0000|\uFFFD/g;function oE(s){return(typeof s=="string"?s:""+s).replace(r8,`
`).replace(i8,"")}function aE(s,o){return o=oE(o),oE(s)===o}function em(){}function tt(s,o,c,h,p,v){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Ba(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Ba(s,""+h);break;case"className":sf(s,"class",h);break;case"tabIndex":sf(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":sf(s,c,h);break;case"style":cT(s,h,v);break;case"data":if(o!=="object"){sf(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=lf(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(o!=="input"&&tt(s,o,"name",p.name,p,null),tt(s,o,"formEncType",p.formEncType,p,null),tt(s,o,"formMethod",p.formMethod,p,null),tt(s,o,"formTarget",p.formTarget,p,null)):(tt(s,o,"encType",p.encType,p,null),tt(s,o,"method",p.method,p,null),tt(s,o,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=lf(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=em);break;case"onScroll":h!=null&&Le("scroll",s);break;case"onScrollEnd":h!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=lf(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Le("beforetoggle",s),Le("toggle",s),rf(s,"popover",h);break;case"xlinkActuate":gi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":gi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":gi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":gi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":gi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":gi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":gi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":gi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":gi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":rf(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=N9.get(c)||c,rf(s,c,h))}}function bv(s,o,c,h,p,v){switch(c){case"style":cT(s,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof h=="string"?Ba(s,h):(typeof h=="number"||typeof h=="bigint")&&Ba(s,""+h);break;case"onScroll":h!=null&&Le("scroll",s);break;case"onScrollEnd":h!=null&&Le("scrollend",s);break;case"onClick":h!=null&&(s.onclick=em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z5.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),o=c.slice(2,p?c.length-7:void 0),v=s[In]||null,v=v!=null?v[c]:null,typeof v=="function"&&s.removeEventListener(o,v,p),typeof h=="function")){typeof v!="function"&&v!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(o,h,p);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):rf(s,c,h)}}}function sn(s,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var h=!1,p=!1,v;for(v in c)if(c.hasOwnProperty(v)){var S=c[v];if(S!=null)switch(v){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:tt(s,o,v,S,c,null)}}p&&tt(s,o,"srcSet",c.srcSet,c,null),h&&tt(s,o,"src",c.src,c,null);return;case"input":Le("invalid",s);var E=v=S=p=null,j=null,U=null;for(h in c)if(c.hasOwnProperty(h)){var G=c[h];if(G!=null)switch(h){case"name":p=G;break;case"type":S=G;break;case"checked":j=G;break;case"defaultChecked":U=G;break;case"value":v=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,o));break;default:tt(s,o,h,G,c,null)}}sT(s,v,E,j,U,S,p,!1),of(s);return;case"select":Le("invalid",s),h=S=v=null;for(p in c)if(c.hasOwnProperty(p)&&(E=c[p],E!=null))switch(p){case"value":v=E;break;case"defaultValue":S=E;break;case"multiple":h=E;default:tt(s,o,p,E,c,null)}o=v,c=S,s.multiple=!!h,o!=null?za(s,!!h,o,!1):c!=null&&za(s,!!h,c,!0);return;case"textarea":Le("invalid",s),v=p=h=null;for(S in c)if(c.hasOwnProperty(S)&&(E=c[S],E!=null))switch(S){case"value":h=E;break;case"defaultValue":p=E;break;case"children":v=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:tt(s,o,S,E,c,null)}aT(s,h,p,v),of(s);return;case"option":for(j in c)if(c.hasOwnProperty(j)&&(h=c[j],h!=null))switch(j){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:tt(s,o,j,h,c,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(h=0;h<Eu.length;h++)Le(Eu[h],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in c)if(c.hasOwnProperty(U)&&(h=c[U],h!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:tt(s,o,U,h,c,null)}return;default:if(Ly(o)){for(G in c)c.hasOwnProperty(G)&&(h=c[G],h!==void 0&&bv(s,o,G,h,c,void 0));return}}for(E in c)c.hasOwnProperty(E)&&(h=c[E],h!=null&&tt(s,o,E,h,c,null))}function s8(s,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,S=null,E=null,j=null,U=null,G=null;for(B in c){var K=c[B];if(c.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":j=K;default:h.hasOwnProperty(B)||tt(s,o,B,null,h,K)}}for(var V in h){var B=h[V];if(K=c[V],h.hasOwnProperty(V)&&(B!=null||K!=null))switch(V){case"type":v=B;break;case"name":p=B;break;case"checked":U=B;break;case"defaultChecked":G=B;break;case"value":S=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,o));break;default:B!==K&&tt(s,o,V,B,h,K)}}My(s,S,E,j,U,G,v,p);return;case"select":B=S=E=V=null;for(v in c)if(j=c[v],c.hasOwnProperty(v)&&j!=null)switch(v){case"value":break;case"multiple":B=j;default:h.hasOwnProperty(v)||tt(s,o,v,null,h,j)}for(p in h)if(v=h[p],j=c[p],h.hasOwnProperty(p)&&(v!=null||j!=null))switch(p){case"value":V=v;break;case"defaultValue":E=v;break;case"multiple":S=v;default:v!==j&&tt(s,o,p,v,h,j)}o=E,c=S,h=B,V!=null?za(s,!!c,V,!1):!!h!=!!c&&(o!=null?za(s,!!c,o,!0):za(s,!!c,c?[]:"",!1));return;case"textarea":B=V=null;for(E in c)if(p=c[E],c.hasOwnProperty(E)&&p!=null&&!h.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:tt(s,o,E,null,h,p)}for(S in h)if(p=h[S],v=c[S],h.hasOwnProperty(S)&&(p!=null||v!=null))switch(S){case"value":V=p;break;case"defaultValue":B=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==v&&tt(s,o,S,p,h,v)}oT(s,V,B);return;case"option":for(var Te in c)if(V=c[Te],c.hasOwnProperty(Te)&&V!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:tt(s,o,Te,null,h,V)}for(j in h)if(V=h[j],B=c[j],h.hasOwnProperty(j)&&V!==B&&(V!=null||B!=null))switch(j){case"selected":s.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:tt(s,o,j,V,h,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in c)V=c[be],c.hasOwnProperty(be)&&V!=null&&!h.hasOwnProperty(be)&&tt(s,o,be,null,h,V);for(U in h)if(V=h[U],B=c[U],h.hasOwnProperty(U)&&V!==B&&(V!=null||B!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:tt(s,o,U,V,h,B)}return;default:if(Ly(o)){for(var nt in c)V=c[nt],c.hasOwnProperty(nt)&&V!==void 0&&!h.hasOwnProperty(nt)&&bv(s,o,nt,void 0,h,V);for(G in h)V=h[G],B=c[G],!h.hasOwnProperty(G)||V===B||V===void 0&&B===void 0||bv(s,o,G,V,h,B);return}}for(var O in c)V=c[O],c.hasOwnProperty(O)&&V!=null&&!h.hasOwnProperty(O)&&tt(s,o,O,null,h,V);for(K in h)V=h[K],B=c[K],!h.hasOwnProperty(K)||V===B||V==null&&B==null||tt(s,o,K,V,h,B)}var wv=null,xv=null;function tm(s){return s.nodeType===9?s:s.ownerDocument}function lE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Tv(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Sv=null;function o8(){var s=window.event;return s&&s.type==="popstate"?s===Sv?!1:(Sv=s,!0):(Sv=null,!1)}var uE=typeof setTimeout=="function"?setTimeout:void 0,a8=typeof clearTimeout=="function"?clearTimeout:void 0,dE=typeof Promise=="function"?Promise:void 0,l8=typeof queueMicrotask=="function"?queueMicrotask:typeof dE<"u"?function(s){return dE.resolve(null).then(s).catch(c8)}:uE;function c8(s){setTimeout(function(){throw s})}function ps(s){return s==="head"}function hE(s,o){var c=o,h=0,p=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"){if(0<h&&8>h){c=h;var S=s.ownerDocument;if(c&1&&Au(S.documentElement),c&2&&Au(S.body),c&4)for(c=S.head,Au(c),S=c.firstChild;S;){var E=S.nextSibling,j=S.nodeName;S[$c]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=E}}if(p===0){s.removeChild(v),Lu(o);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:h=c.charCodeAt(0)-48;else h=0;c=v}while(c);Lu(o)}function Cv(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Cv(c),Dy(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function u8(s,o,c,h){for(;s.nodeType===1;){var p=c;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[$c])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=_r(s.nextSibling),s===null)break}return null}function d8(s,o,c){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=_r(s.nextSibling),s===null))return null;return s}function Ev(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function h8(s,o){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function _r(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var kv=null;function fE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}function mE(s,o,c){switch(o=tm(c),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Au(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Dy(s)}var gr=new Map,pE=new Set;function nm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ji=W.d;W.d={f:f8,r:m8,D:p8,C:g8,L:y8,m:v8,X:w8,S:b8,M:x8};function f8(){var s=ji.f(),o=Wf();return s||o}function m8(s){var o=Oa(s);o!==null&&o.tag===5&&o.type==="form"?LS(o):ji.r(s)}var gl=typeof document>"u"?null:document;function gE(s,o,c){var h=gl;if(h&&typeof o=="string"&&o){var p=cr(o);p='link[rel="'+s+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),pE.has(p)||(pE.add(p),s={rel:s,crossOrigin:c,href:o},h.querySelector(p)===null&&(o=h.createElement("link"),sn(o,"link",s),Ft(o),h.head.appendChild(o)))}}function p8(s){ji.D(s),gE("dns-prefetch",s,null)}function g8(s,o){ji.C(s,o),gE("preconnect",s,o)}function y8(s,o,c){ji.L(s,o,c);var h=gl;if(h&&s&&o){var p='link[rel="preload"][as="'+cr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+cr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+cr(c.imageSizes)+'"]')):p+='[href="'+cr(s)+'"]';var v=p;switch(o){case"style":v=yl(s);break;case"script":v=vl(s)}gr.has(v)||(s=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:s,as:o},c),gr.set(v,s),h.querySelector(p)!==null||o==="style"&&h.querySelector(_u(v))||o==="script"&&h.querySelector(Du(v))||(o=h.createElement("link"),sn(o,"link",s),Ft(o),h.head.appendChild(o)))}}function v8(s,o){ji.m(s,o);var c=gl;if(c&&s){var h=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+cr(h)+'"][href="'+cr(s)+'"]',v=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=vl(s)}if(!gr.has(v)&&(s=g({rel:"modulepreload",href:s},o),gr.set(v,s),c.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Du(v)))return}h=c.createElement("link"),sn(h,"link",s),Ft(h),c.head.appendChild(h)}}}function b8(s,o,c){ji.S(s,o,c);var h=gl;if(h&&s){var p=Pa(h).hoistableStyles,v=yl(s);o=o||"default";var S=p.get(v);if(!S){var E={loading:0,preload:null};if(S=h.querySelector(_u(v)))E.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":o},c),(c=gr.get(v))&&Av(s,c);var j=S=h.createElement("link");Ft(j),sn(j,"link",s),j._p=new Promise(function(U,G){j.onload=U,j.onerror=G}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,rm(S,o,h)}S={type:"stylesheet",instance:S,count:1,state:E},p.set(v,S)}}}function w8(s,o){ji.X(s,o);var c=gl;if(c&&s){var h=Pa(c).hoistableScripts,p=vl(s),v=h.get(p);v||(v=c.querySelector(Du(p)),v||(s=g({src:s,async:!0},o),(o=gr.get(p))&&_v(s,o),v=c.createElement("script"),Ft(v),sn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(p,v))}}function x8(s,o){ji.M(s,o);var c=gl;if(c&&s){var h=Pa(c).hoistableScripts,p=vl(s),v=h.get(p);v||(v=c.querySelector(Du(p)),v||(s=g({src:s,async:!0,type:"module"},o),(o=gr.get(p))&&_v(s,o),v=c.createElement("script"),Ft(v),sn(v,"link",s),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(p,v))}}function yE(s,o,c,h){var p=(p=Ee.current)?nm(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=yl(c.href),c=Pa(p).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=yl(c.href);var v=Pa(p).hoistableStyles,S=v.get(s);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,S),(v=p.querySelector(_u(s)))&&!v._p&&(S.instance=v,S.state.loading=5),gr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gr.set(s,c),v||T8(p,s,c,S.state))),o&&h===null)throw Error(r(528,""));return S}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=vl(c),c=Pa(p).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function yl(s){return'href="'+cr(s)+'"'}function _u(s){return'link[rel="stylesheet"]['+s+"]"}function vE(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function T8(s,o,c,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),sn(o,"link",c),Ft(o),s.head.appendChild(o))}function vl(s){return'[src="'+cr(s)+'"]'}function Du(s){return"script[async]"+s}function bE(s,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+cr(c.href)+'"]');if(h)return o.instance=h,Ft(h),h;var p=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Ft(h),sn(h,"style",p),rm(h,c.precedence,s),o.instance=h;case"stylesheet":p=yl(c.href);var v=s.querySelector(_u(p));if(v)return o.state.loading|=4,o.instance=v,Ft(v),v;h=vE(c),(p=gr.get(p))&&Av(h,p),v=(s.ownerDocument||s).createElement("link"),Ft(v);var S=v;return S._p=new Promise(function(E,j){S.onload=E,S.onerror=j}),sn(v,"link",h),o.state.loading|=4,rm(v,c.precedence,s),o.instance=v;case"script":return v=vl(c.src),(p=s.querySelector(Du(v)))?(o.instance=p,Ft(p),p):(h=c,(p=gr.get(v))&&(h=g({},c),_v(h,p)),s=s.ownerDocument||s,p=s.createElement("script"),Ft(p),sn(p,"link",h),s.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,rm(h,c.precedence,s));return o.instance}function rm(s,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,v=p,S=0;S<h.length;S++){var E=h[S];if(E.dataset.precedence===o)v=E;else if(v!==p)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(s,o.firstChild))}function Av(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function _v(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var im=null;function wE(s,o,c){if(im===null){var h=new Map,p=im=new Map;p.set(c,h)}else p=im,h=p.get(c),h||(h=new Map,p.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),p=0;p<c.length;p++){var v=c[p];if(!(v[$c]||v[pn]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(o)||"";S=s+S;var E=h.get(S);E?E.push(v):h.set(S,[v])}}return h}function xE(s,o,c){s=s.ownerDocument||s,s.head.insertBefore(c,o==="title"?s.querySelector("head > title"):null)}function S8(s,o,c){if(c===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function TE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ju=null;function C8(){}function E8(s,o,c){if(ju===null)throw Error(r(475));var h=ju;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=yl(c.href),v=s.querySelector(_u(p));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=sm.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=v,Ft(v);return}v=s.ownerDocument||s,c=vE(c),(p=gr.get(p))&&Av(c,p),v=v.createElement("link"),Ft(v);var S=v;S._p=new Promise(function(E,j){S.onload=E,S.onerror=j}),sn(v,"link",c),o.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=sm.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function k8(){if(ju===null)throw Error(r(475));var s=ju;return s.stylesheets&&s.count===0&&Dv(s,s.stylesheets),0<s.count?function(o){var c=setTimeout(function(){if(s.stylesheets&&Dv(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c)}}:null}function sm(){if(this.count--,this.count===0){if(this.stylesheets)Dv(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var om=null;function Dv(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,om=new Map,o.forEach(A8,s),om=null,sm.call(s))}function A8(s,o){if(!(o.state.loading&4)){var c=om.get(s);if(c)var h=c.get(null);else{c=new Map,om.set(s,c);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var S=p[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),h=S)}h&&c.set(null,h)}p=o.instance,S=p.getAttribute("data-precedence"),v=c.get(S)||h,v===h&&c.set(null,p),c.set(S,p),this.count++,h=sm.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),v?v.parentNode.insertBefore(p,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),o.state.loading|=4}}var Iu={$$typeof:I,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function _8(s,o,c,h,p,v,S,E){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ey(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ey(0),this.hiddenUpdates=Ey(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function SE(s,o,c,h,p,v,S,E,j,U,G,K){return s=new _8(s,o,c,S,E,j,U,K),o=1,v===!0&&(o|=24),v=Xn(3,null,null,o),s.current=v,v.stateNode=s,o=u0(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:h,isDehydrated:c,cache:o},m0(v),s}function CE(s){return s?(s=Ka,s):Ka}function EE(s,o,c,h,p,v){p=CE(p),h.context===null?h.context=p:h.pendingContext=p,h=ns(o),h.payload={element:c},v=v===void 0?null:v,v!==null&&(h.callback=v),c=rs(s,h,o),c!==null&&(nr(c,s,o),au(c,s,o))}function kE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function jv(s,o){kE(s,o),(s=s.alternate)&&kE(s,o)}function AE(s){if(s.tag===13){var o=Ya(s,67108864);o!==null&&nr(o,s,67108864),jv(s,67108864)}}var am=!0;function D8(s,o,c,h){var p=H.T;H.T=null;var v=W.p;try{W.p=2,Iv(s,o,c,h)}finally{W.p=v,H.T=p}}function j8(s,o,c,h){var p=H.T;H.T=null;var v=W.p;try{W.p=8,Iv(s,o,c,h)}finally{W.p=v,H.T=p}}function Iv(s,o,c,h){if(am){var p=Rv(h);if(p===null)vv(s,o,h,lm,c),DE(s,h);else if(R8(p,s,o,c,h))h.stopPropagation();else if(DE(s,h),o&4&&-1<I8.indexOf(s)){for(;p!==null;){var v=Oa(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=oo(v.pendingLanes);if(S!==0){var E=v;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var j=1<<31-Kn(S);E.entanglements[1]|=j,S&=~j}Fr(v),(Qe&6)===0&&(Hf=Ur()+500,Cu(0))}}break;case 13:E=Ya(v,2),E!==null&&nr(E,v,2),Wf(),jv(v,2)}if(v=Rv(h),v===null&&vv(s,o,h,lm,c),v===p)break;p=v}p!==null&&h.stopPropagation()}else vv(s,o,h,null,c)}}function Rv(s){return s=Py(s),Mv(s)}var lm=null;function Mv(s){if(lm=null,s=La(s),s!==null){var o=a(s);if(o===null)s=null;else{var c=o.tag;if(c===13){if(s=l(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return lm=s,null}function _E(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(g9()){case $5:return 2;case F5:return 8;case Jh:case y9:return 32;case q5:return 268435456;default:return 32}default:return 32}}var Nv=!1,gs=null,ys=null,vs=null,Ru=new Map,Mu=new Map,bs=[],I8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DE(s,o){switch(s){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":Ru.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(o.pointerId)}}function Nu(s,o,c,h,p,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:v,targetContainers:[p]},o!==null&&(o=Oa(o),o!==null&&AE(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function R8(s,o,c,h,p){switch(o){case"focusin":return gs=Nu(gs,s,o,c,h,p),!0;case"dragenter":return ys=Nu(ys,s,o,c,h,p),!0;case"mouseover":return vs=Nu(vs,s,o,c,h,p),!0;case"pointerover":var v=p.pointerId;return Ru.set(v,Nu(Ru.get(v)||null,s,o,c,h,p)),!0;case"gotpointercapture":return v=p.pointerId,Mu.set(v,Nu(Mu.get(v)||null,s,o,c,h,p)),!0}return!1}function jE(s){var o=La(s.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){s.blockedOn=o,E9(s.priority,function(){if(c.tag===13){var h=tr();h=ky(h);var p=Ya(c,h);p!==null&&nr(p,c,h),jv(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function cm(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=Rv(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Oy=h,c.target.dispatchEvent(h),Oy=null}else return o=Oa(c),o!==null&&AE(o),s.blockedOn=c,!1;o.shift()}return!0}function IE(s,o,c){cm(s)&&c.delete(o)}function M8(){Nv=!1,gs!==null&&cm(gs)&&(gs=null),ys!==null&&cm(ys)&&(ys=null),vs!==null&&cm(vs)&&(vs=null),Ru.forEach(IE),Mu.forEach(IE)}function um(s,o){s.blockedOn===o&&(s.blockedOn=null,Nv||(Nv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,M8)))}var dm=null;function RE(s){dm!==s&&(dm=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){dm===s&&(dm=null);for(var o=0;o<s.length;o+=3){var c=s[o],h=s[o+1],p=s[o+2];if(typeof h!="function"){if(Mv(h||c)===null)continue;break}var v=Oa(c);v!==null&&(s.splice(o,3),o-=3,M0(v,{pending:!0,data:p,method:c.method,action:h},h,p))}}))}function Lu(s){function o(j){return um(j,s)}gs!==null&&um(gs,s),ys!==null&&um(ys,s),vs!==null&&um(vs,s),Ru.forEach(o),Mu.forEach(o);for(var c=0;c<bs.length;c++){var h=bs[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<bs.length&&(c=bs[0],c.blockedOn===null);)jE(c),c.blockedOn===null&&bs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var p=c[h],v=c[h+1],S=p[In]||null;if(typeof v=="function")S||RE(c);else if(S){var E=null;if(v&&v.hasAttribute("formAction")){if(p=v,S=v[In]||null)E=S.formAction;else if(Mv(p)!==null)continue}else E=S.action;typeof E=="function"?c[h+1]=E:(c.splice(h,3),h-=3),RE(c)}}}function Lv(s){this._internalRoot=s}hm.prototype.render=Lv.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=tr();EE(c,h,s,o,null,null)},hm.prototype.unmount=Lv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;EE(s.current,2,null,s,null,null),Wf(),o[Na]=null}};function hm(s){this._internalRoot=s}hm.prototype.unstable_scheduleHydration=function(s){if(s){var o=K5();s={blockedOn:null,target:s,priority:o};for(var c=0;c<bs.length&&o!==0&&o<bs[c].priority;c++);bs.splice(c,0,s),c===0&&jE(s)}};var ME=e.version;if(ME!=="19.1.0")throw Error(r(527,ME,"19.1.0"));W.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var N8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fm.isDisabled&&fm.supportsFiber)try{Vc=fm.inject(N8),Yn=fm}catch{}}return Pu.createRoot=function(s,o){if(!i(s))throw Error(r(299));var c=!1,h="",p=KS,v=QS,S=XS,E=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(E=o.unstable_transitionCallbacks)),o=SE(s,1,!1,null,null,c,h,p,v,S,E,null),s[Na]=o.current,yv(s),new Lv(o)},Pu.hydrateRoot=function(s,o,c){if(!i(s))throw Error(r(299));var h=!1,p="",v=KS,S=QS,E=XS,j=null,U=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(E=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks),c.formState!==void 0&&(U=c.formState)),o=SE(s,1,!0,o,c??null,h,p,v,S,E,j,U),o.context=CE(null),c=o.current,h=tr(),h=ky(h),p=ns(h),p.callback=null,rs(c,p,h),c=h,o.current.lanes=c,Bc(o,c),Fr(o),s[Na]=o.current,yv(s),new hm(o)},Pu.version="19.1.0",Pu}var qE;function H8(){if(qE)return Uv.exports;qE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Uv.exports=q8(),Uv.exports}var G8=H8();const W8=JD(G8);var Uu={},HE;function Y8(){if(HE)return Uu;HE=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.parse=l,Uu.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function l(w,x){const T=new a,C=w.length;if(C<2)return T;const A=(x==null?void 0:x.decode)||g;let _=0;do{const L=w.indexOf("=",_);if(L===-1)break;const I=w.indexOf(";",_),q=I===-1?C:I;if(L>q){_=w.lastIndexOf(";",L-1)+1;continue}const D=d(w,_,L),M=f(w,L,D),$=w.slice(D,M);if(T[$]===void 0){let Q=d(w,L+1,q),ie=f(w,q,Q);const he=A(w.slice(Q,ie));T[$]=he}_=q+1}while(_<C);return T}function d(w,x,T){do{const C=w.charCodeAt(x);if(C!==32&&C!==9)return x}while(++x<T);return T}function f(w,x,T){for(;x>T;){const C=w.charCodeAt(--x);if(C!==32&&C!==9)return x+1}return T}function m(w,x,T){const C=(T==null?void 0:T.encode)||encodeURIComponent;if(!t.test(w))throw new TypeError(`argument name is invalid: ${w}`);const A=C(x);if(!e.test(A))throw new TypeError(`argument val is invalid: ${x}`);let _=w+"="+A;if(!T)return _;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);_+="; Max-Age="+T.maxAge}if(T.domain){if(!n.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);_+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);_+="; Path="+T.path}if(T.expires){if(!y(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);_+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(_+="; HttpOnly"),T.secure&&(_+="; Secure"),T.partitioned&&(_+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return _}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function y(w){return i.call(w)==="[object Date]"}return Uu}Y8();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GE="popstate";function K8(t={}){function e(r,i){let{pathname:a,search:l,hash:d}=r.location;return Eb("",{pathname:a,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:jd(i)}return X8(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q8(){return Math.random().toString(36).substring(2,10)}function WE(t,e){return{usr:t.state,key:t.key,idx:e}}function Eb(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yc(e):e,state:n,key:e&&e.key||r||Q8()}}function jd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function X8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",f=null,m=g();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function g(){return(l.state||{idx:null}).idx}function y(){d="POP";let A=g(),_=A==null?null:A-m;m=A,f&&f({action:d,location:C.location,delta:_})}function w(A,_){d="PUSH";let L=Eb(C.location,A,_);m=g()+1;let I=WE(L,m),q=C.createHref(L);try{l.pushState(I,"",q)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(q)}a&&f&&f({action:d,location:C.location,delta:1})}function x(A,_){d="REPLACE";let L=Eb(C.location,A,_);m=g();let I=WE(L,m),q=C.createHref(L);l.replaceState(I,"",q),a&&f&&f({action:d,location:C.location,delta:0})}function T(A){let _=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof A=="string"?A:jd(A);return L=L.replace(/ $/,"%20"),mt(_,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,_)}let C={get action(){return d},get location(){return t(i,l)},listen(A){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(GE,y),f=A,()=>{i.removeEventListener(GE,y),f=null}},createHref(A){return e(i,A)},createURL:T,encodeLocation(A){let _=T(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:x,go(A){return l.go(A)}};return C}function tj(t,e,n="/"){return Z8(t,e,n,!1)}function Z8(t,e,n,r){let i=typeof e=="string"?yc(e):e,a=Ui(i.pathname||"/",n);if(a==null)return null;let l=nj(t);J8(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=uL(a);d=lL(l[f],m,r)}return d}function nj(t,e=[],n=[],r=""){let i=(a,l,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(mt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=Ni([r,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),nj(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:oL(m,a.index),routesMeta:g})};return t.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,l);else for(let f of rj(a.path))i(a,l,f)}),e}function rj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=rj(r.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&d.push(...l),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function J8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var eL=/^:[\w-]+$/,tL=3,nL=2,rL=1,iL=10,sL=-2,YE=t=>t==="*";function oL(t,e){let n=t.split("/"),r=n.length;return n.some(YE)&&(r+=sL),e&&(r+=nL),n.filter(i=>!YE(i)).reduce((i,a)=>i+(eL.test(a)?tL:a===""?rL:iL),r)}function aL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lL(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=yp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),w=f.route;if(!y&&m&&n&&!r[r.length-1].route.index&&(y=yp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Ni([a,y.pathname]),pathnameBase:mL(Ni([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=Ni([a,y.pathnameBase]))}return l}function yp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:y},w)=>{if(g==="*"){let T=d[w]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const x=d[w];return y&&!x?m[g]=void 0:m[g]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:t}}function cL(t,e=!1,n=!0){Mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dL(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yc(t):t;return{pathname:n?n.startsWith("/")?n:hL(n,e):e,search:pL(r),hash:gL(i)}}function hL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function $v(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xw(t){let e=fL(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Zw(t,e,n,r=!1){let i;typeof t=="string"?i=yc(t):(i={...t},mt(!i.pathname||!i.pathname.includes("?"),$v("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),$v("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),$v("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=n;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}d=y>=0?e[y]:"/"}let f=dL(i,d),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var Ni=t=>t.join("/").replace(/\/\/+/g,"/"),mL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ij=["POST","PUT","PATCH","DELETE"];new Set(ij);var vL=["GET",...ij];new Set(vL);var vc=k.createContext(null);vc.displayName="DataRouter";var rg=k.createContext(null);rg.displayName="DataRouterState";var sj=k.createContext({isTransitioning:!1});sj.displayName="ViewTransition";var bL=k.createContext(new Map);bL.displayName="Fetchers";var wL=k.createContext(null);wL.displayName="Await";var Lr=k.createContext(null);Lr.displayName="Navigation";var yh=k.createContext(null);yh.displayName="Location";var Or=k.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var Jw=k.createContext(null);Jw.displayName="RouteError";function xL(t,{relative:e}={}){mt(bc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Lr),{hash:i,pathname:a,search:l}=vh(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:Ni([n,a])),r.createHref({pathname:d,search:l,hash:i})}function bc(){return k.useContext(yh)!=null}function Hn(){return mt(bc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(yh).location}var oj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function aj(t){k.useContext(Lr).static||k.useLayoutEffect(t)}function Pt(){let{isDataRoute:t}=k.useContext(Or);return t?NL():TL()}function TL(){mt(bc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(vc),{basename:e,navigator:n}=k.useContext(Lr),{matches:r}=k.useContext(Or),{pathname:i}=Hn(),a=JSON.stringify(Xw(r)),l=k.useRef(!1);return aj(()=>{l.current=!0}),k.useCallback((f,m={})=>{if(Mr(l.current,oj),!l.current)return;if(typeof f=="number"){n.go(f);return}let g=Zw(f,JSON.parse(a),i,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ni([e,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[e,n,a,i,t])}k.createContext(null);function ex(){let{matches:t}=k.useContext(Or),e=t[t.length-1];return e?e.params:{}}function vh(t,{relative:e}={}){let{matches:n}=k.useContext(Or),{pathname:r}=Hn(),i=JSON.stringify(Xw(n));return k.useMemo(()=>Zw(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function SL(t,e){return lj(t,e)}function lj(t,e,n,r){var L;mt(bc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=k.useContext(Lr),{matches:l}=k.useContext(Or),d=l[l.length-1],f=d?d.params:{},m=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let I=y&&y.path||"";cj(m,!y||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let w=Hn(),x;if(e){let I=typeof e=="string"?yc(e):e;mt(g==="/"||((L=I.pathname)==null?void 0:L.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),x=I}else x=w;let T=x.pathname||"/",C=T;if(g!=="/"){let I=g.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=!a&&n&&n.matches&&n.matches.length>0?n.matches:tj(t,{pathname:C});Mr(y||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Mr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=_L(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},f,I.params),pathname:Ni([g,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:Ni([g,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),l,n,r);return e&&_?k.createElement(yh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function CL(){let t=ML(),e=yL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,l)}var EL=k.createElement(CL,null),kL=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(Or.Provider,{value:this.props.routeContext},k.createElement(Jw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function AL({routeContext:t,match:e,children:n}){let r=k.useContext(vc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Or.Provider,{value:t},n)}function _L(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let f=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);mt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,d=-1;if(n)for(let f=0;f<i.length;f++){let m=i[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:y}=n,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||w){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,m,g)=>{let y,w=!1,x=null,T=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||EL,l&&(d<0&&g===0?(cj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):d===g&&(w=!0,T=m.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,g+1)),A=()=>{let _;return y?_=x:w?_=T:m.route.Component?_=k.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=f,k.createElement(AL,{match:m,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?k.createElement(kL,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}function tx(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DL(t){let e=k.useContext(vc);return mt(e,tx(t)),e}function jL(t){let e=k.useContext(rg);return mt(e,tx(t)),e}function IL(t){let e=k.useContext(Or);return mt(e,tx(t)),e}function nx(t){let e=IL(t),n=e.matches[e.matches.length-1];return mt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function RL(){return nx("useRouteId")}function ML(){var r;let t=k.useContext(Jw),e=jL("useRouteError"),n=nx("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function NL(){let{router:t}=DL("useNavigate"),e=nx("useNavigate"),n=k.useRef(!1);return aj(()=>{n.current=!0}),k.useCallback(async(i,a={})=>{Mr(n.current,oj),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var KE={};function cj(t,e,n){!e&&!KE[t]&&(KE[t]=!0,Mr(!1,n))}k.memo(LL);function LL({routes:t,future:e,state:n}){return lj(t,void 0,n,e)}function OL({to:t,replace:e,state:n,relative:r}){mt(bc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Lr);Mr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Or),{pathname:l}=Hn(),d=Pt(),f=Zw(t,Xw(a),l,r==="path"),m=JSON.stringify(f);return k.useEffect(()=>{d(JSON.parse(m),{replace:e,state:n,relative:r})},[d,m,r,e,n]),null}function _t(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PL({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){mt(!bc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof n=="string"&&(n=yc(n));let{pathname:f="/",search:m="",hash:g="",state:y=null,key:w="default"}=n,x=k.useMemo(()=>{let T=Ui(f,l);return T==null?null:{location:{pathname:T,search:m,hash:g,state:y,key:w},navigationType:r}},[l,f,m,g,y,w,r]);return Mr(x!=null,`<Router basename="${l}"> is not able to match the URL "${f}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:k.createElement(Lr.Provider,{value:d},k.createElement(yh.Provider,{children:e,value:x}))}function UL({children:t,location:e}){return SL(kb(t),e)}function kb(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){n.push.apply(n,kb(r.props.children,a));return}mt(r.type===_t,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=kb(r.props.children,a)),n.push(l)}),n}var Zm="get",Jm="application/x-www-form-urlencoded";function ig(t){return t!=null&&typeof t.tagName=="string"}function VL(t){return ig(t)&&t.tagName.toLowerCase()==="button"}function zL(t){return ig(t)&&t.tagName.toLowerCase()==="form"}function BL(t){return ig(t)&&t.tagName.toLowerCase()==="input"}function $L(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FL(t,e){return t.button===0&&(!e||e==="_self")&&!$L(t)}var mm=null;function qL(){if(mm===null)try{new FormData(document.createElement("form"),0),mm=!1}catch{mm=!0}return mm}var HL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fv(t){return t!=null&&!HL.has(t)?(Mr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jm}"`),null):t}function GL(t,e){let n,r,i,a,l;if(zL(t)){let d=t.getAttribute("action");r=d?Ui(d,e):null,n=t.getAttribute("method")||Zm,i=Fv(t.getAttribute("enctype"))||Jm,a=new FormData(t)}else if(VL(t)||BL(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(r=f?Ui(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Zm,i=Fv(t.getAttribute("formenctype"))||Fv(d.getAttribute("enctype"))||Jm,a=new FormData(d,t),!qL()){let{name:m,type:g,value:y}=t;if(g==="image"){let w=m?`${m}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else m&&a.append(m,y)}}else{if(ig(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zm,r=null,i=Jm,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}function rx(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function WL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function YL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function KL(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await WL(a,n);return l.links?l.links():[]}return[]}));return JL(r.flat(1).filter(YL).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function QE(t,e,n,r,i,a){let l=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,d=(f,m)=>{var g;return n[m].pathname!==f.pathname||((g=n[m].route.path)==null?void 0:g.endsWith("*"))&&n[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var y;let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function QL(t,e,{includeHydrateFallback:n}={}){return XL(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function XL(t){return[...new Set(t)]}function ZL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JL(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(ZL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function eO(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ui(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function uj(){let t=k.useContext(vc);return rx(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function tO(){let t=k.useContext(rg);return rx(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ix=k.createContext(void 0);ix.displayName="FrameworkContext";function dj(){let t=k.useContext(ix);return rx(t,"You must render this element inside a <HydratedRouter> element"),t}function nO(t,e){let n=k.useContext(ix),[r,i]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:y}=e,w=k.useRef(null);k.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let C=_=>{_.forEach(L=>{l(L.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[t]),k.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let x=()=>{i(!0)},T=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,w,{}]:[a,w,{onFocus:Vu(d,x),onBlur:Vu(f,T),onMouseEnter:Vu(m,x),onMouseLeave:Vu(g,T),onTouchStart:Vu(y,x)}]:[!1,w,{}]}function Vu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rO({page:t,...e}){let{router:n}=uj(),r=k.useMemo(()=>tj(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(sO,{page:t,matches:r,...e}):null}function iO(t){let{manifest:e,routeModules:n}=dj(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return KL(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function sO({page:t,matches:e,...n}){let r=Hn(),{manifest:i,routeModules:a}=dj(),{basename:l}=uj(),{loaderData:d,matches:f}=tO(),m=k.useMemo(()=>QE(t,e,f,i,r,"data"),[t,e,f,i,r]),g=k.useMemo(()=>QE(t,e,f,i,r,"assets"),[t,e,f,i,r]),y=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,C=!1;if(e.forEach(_=>{var I;let L=i.routes[_.route.id];!L||!L.hasLoader||(!m.some(q=>q.route.id===_.route.id)&&_.route.id in d&&((I=a[_.route.id])!=null&&I.shouldRevalidate)||L.hasClientLoader?C=!0:T.add(_.route.id))}),T.size===0)return[];let A=eO(t,l);return C&&T.size>0&&A.searchParams.set("_routes",e.filter(_=>T.has(_.route.id)).map(_=>_.route.id).join(",")),[A.pathname+A.search]},[l,d,r,i,m,e,t,a]),w=k.useMemo(()=>QL(g,i),[g,i]),x=iO(g);return k.createElement(k.Fragment,null,y.map(T=>k.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),w.map(T=>k.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),x.map(({key:T,link:C})=>k.createElement("link",{key:T,...C})))}function oO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hj&&(window.__reactRouterVersion="7.4.1")}catch{}function aO({basename:t,children:e,window:n}){let r=k.useRef();r.current==null&&(r.current=K8({window:n,v5Compat:!0}));let i=r.current,[a,l]=k.useState({action:i.action,location:i.location}),d=k.useCallback(f=>{k.startTransition(()=>l(f))},[l]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.createElement(PL,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var fj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bh=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:f,to:m,preventScrollReset:g,viewTransition:y,...w},x){let{basename:T}=k.useContext(Lr),C=typeof m=="string"&&fj.test(m),A,_=!1;if(typeof m=="string"&&C&&(A=m,hj))try{let ie=new URL(window.location.href),he=m.startsWith("//")?new URL(ie.protocol+m):new URL(m),Ie=Ui(he.pathname,T);he.origin===ie.origin&&Ie!=null?m=Ie+he.search+he.hash:_=!0}catch{Mr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=xL(m,{relative:i}),[I,q,D]=nO(r,w),M=dO(m,{replace:l,state:d,target:f,preventScrollReset:g,relative:i,viewTransition:y});function $(ie){e&&e(ie),ie.defaultPrevented||M(ie)}let Q=k.createElement("a",{...w,...D,href:A||L,onClick:_||a?e:$,ref:oO(x,q),target:f,"data-discover":!C&&n==="render"?"true":void 0});return I&&!C?k.createElement(k.Fragment,null,Q,k.createElement(rO,{page:L})):Q});bh.displayName="Link";var lO=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:f,...m},g){let y=vh(l,{relative:m.relative}),w=Hn(),x=k.useContext(rg),{navigator:T,basename:C}=k.useContext(Lr),A=x!=null&&gO(y)&&d===!0,_=T.encodeLocation?T.encodeLocation(y).pathname:y.pathname,L=w.pathname,I=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(L=L.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&C&&(I=Ui(I,C)||I);const q=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=L===_||!i&&L.startsWith(_)&&L.charAt(q)==="/",M=I!=null&&(I===_||!i&&I.startsWith(_)&&I.charAt(_.length)==="/"),$={isActive:D,isPending:M,isTransitioning:A},Q=D?e:void 0,ie;typeof r=="function"?ie=r($):ie=[r,D?"active":null,M?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let he=typeof a=="function"?a($):a;return k.createElement(bh,{...m,"aria-current":Q,className:ie,ref:g,style:he,to:l,viewTransition:d},typeof f=="function"?f($):f)});lO.displayName="NavLink";var cO=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=Zm,action:d,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:y,...w},x)=>{let T=mO(),C=pO(d,{relative:m}),A=l.toLowerCase()==="get"?"get":"post",_=typeof d=="string"&&fj.test(d),L=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let q=I.nativeEvent.submitter,D=(q==null?void 0:q.getAttribute("formmethod"))||l;T(q||I.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:a,relative:m,preventScrollReset:g,viewTransition:y})};return k.createElement("form",{ref:x,method:A,action:C,onSubmit:r?f:L,...w,"data-discover":!_&&t==="render"?"true":void 0})});cO.displayName="Form";function uO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mj(t){let e=k.useContext(vc);return mt(e,uO(t)),e}function dO(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=Pt(),f=Hn(),m=vh(t,{relative:a});return k.useCallback(g=>{if(FL(g,e)){g.preventDefault();let y=n!==void 0?n:jd(f)===jd(m);d(t,{replace:y,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[f,d,m,n,r,e,t,i,a,l])}var hO=0,fO=()=>`__${String(++hO)}__`;function mO(){let{router:t}=mj("useSubmit"),{basename:e}=k.useContext(Lr),n=RL();return k.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:f,body:m}=GL(r,e);if(i.navigate===!1){let g=i.fetcherKey||fO();await t.fetch(g,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function pO(t,{relative:e}={}){let{basename:n}=k.useContext(Lr),r=k.useContext(Or);mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...vh(t||".",{relative:e})},l=Hn();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(y=>y).forEach(y=>d.append("index",y));let g=d.toString();a.search=g?`?${g}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Ni([n,a.pathname])),jd(a)}function gO(t,e={}){let n=k.useContext(sj);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mj("useViewTransitionState"),i=vh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Ui(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ui(n.nextLocation.pathname,r)||n.nextLocation.pathname;return yp(i.pathname,l)!=null||yp(i.pathname,a)!=null}new TextEncoder;function Ab(){return Ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ab.apply(null,arguments)}function yO(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function vO(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var bO=function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(vO(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=yO(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),bn="-ms-",vp="-moz-",We="-webkit-",pj="comm",sx="rule",ox="decl",wO="@import",gj="@keyframes",xO="@layer",TO=Math.abs,sg=String.fromCharCode,SO=Object.assign;function CO(t,e){return ln(t,0)^45?(((e<<2^ln(t,0))<<2^ln(t,1))<<2^ln(t,2))<<2^ln(t,3):0}function yj(t){return t.trim()}function EO(t,e){return(t=e.exec(t))?t[0]:t}function Ye(t,e,n){return t.replace(e,n)}function _b(t,e){return t.indexOf(e)}function ln(t,e){return t.charCodeAt(e)|0}function Id(t,e,n){return t.slice(e,n)}function Kr(t){return t.length}function ax(t){return t.length}function pm(t,e){return e.push(t),t}function kO(t,e){return t.map(e).join("")}var og=1,Zl=1,vj=0,Fn=0,Ot=0,wc="";function ag(t,e,n,r,i,a,l){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:og,column:Zl,length:l,return:""}}function zu(t,e){return SO(ag("",null,null,"",null,null,0),t,{length:-t.length},e)}function AO(){return Ot}function _O(){return Ot=Fn>0?ln(wc,--Fn):0,Zl--,Ot===10&&(Zl=1,og--),Ot}function sr(){return Ot=Fn<vj?ln(wc,Fn++):0,Zl++,Ot===10&&(Zl=1,og++),Ot}function si(){return ln(wc,Fn)}function ep(){return Fn}function wh(t,e){return Id(wc,t,e)}function Rd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bj(t){return og=Zl=1,vj=Kr(wc=t),Fn=0,[]}function wj(t){return wc="",t}function tp(t){return yj(wh(Fn-1,Db(t===91?t+2:t===40?t+1:t)))}function DO(t){for(;(Ot=si())&&Ot<33;)sr();return Rd(t)>2||Rd(Ot)>3?"":" "}function jO(t,e){for(;--e&&sr()&&!(Ot<48||Ot>102||Ot>57&&Ot<65||Ot>70&&Ot<97););return wh(t,ep()+(e<6&&si()==32&&sr()==32))}function Db(t){for(;sr();)switch(Ot){case t:return Fn;case 34:case 39:t!==34&&t!==39&&Db(Ot);break;case 40:t===41&&Db(t);break;case 92:sr();break}return Fn}function IO(t,e){for(;sr()&&t+Ot!==57;)if(t+Ot===84&&si()===47)break;return"/*"+wh(e,Fn-1)+"*"+sg(t===47?t:sr())}function RO(t){for(;!Rd(si());)sr();return wh(t,Fn)}function MO(t){return wj(np("",null,null,null,[""],t=bj(t),0,[0],t))}function np(t,e,n,r,i,a,l,d,f){for(var m=0,g=0,y=l,w=0,x=0,T=0,C=1,A=1,_=1,L=0,I="",q=i,D=a,M=r,$=I;A;)switch(T=L,L=sr()){case 40:if(T!=108&&ln($,y-1)==58){_b($+=Ye(tp(L),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:$+=tp(L);break;case 9:case 10:case 13:case 32:$+=DO(T);break;case 92:$+=jO(ep()-1,7);continue;case 47:switch(si()){case 42:case 47:pm(NO(IO(sr(),ep()),e,n),f);break;default:$+="/"}break;case 123*C:d[m++]=Kr($)*_;case 125*C:case 59:case 0:switch(L){case 0:case 125:A=0;case 59+g:_==-1&&($=Ye($,/\f/g,"")),x>0&&Kr($)-y&&pm(x>32?ZE($+";",r,n,y-1):ZE(Ye($," ","")+";",r,n,y-2),f);break;case 59:$+=";";default:if(pm(M=XE($,e,n,m,g,i,d,I,q=[],D=[],y),a),L===123)if(g===0)np($,e,M,M,q,a,y,d,D);else switch(w===99&&ln($,3)===110?100:w){case 100:case 108:case 109:case 115:np(t,M,M,r&&pm(XE(t,M,M,0,0,i,d,I,i,q=[],y),D),i,D,y,d,r?q:D);break;default:np($,M,M,M,[""],D,0,d,D)}}m=g=x=0,C=_=1,I=$="",y=l;break;case 58:y=1+Kr($),x=T;default:if(C<1){if(L==123)--C;else if(L==125&&C++==0&&_O()==125)continue}switch($+=sg(L),L*C){case 38:_=g>0?1:($+="\f",-1);break;case 44:d[m++]=(Kr($)-1)*_,_=1;break;case 64:si()===45&&($+=tp(sr())),w=si(),g=y=Kr(I=$+=RO(ep())),L++;break;case 45:T===45&&Kr($)==2&&(C=0)}}return a}function XE(t,e,n,r,i,a,l,d,f,m,g){for(var y=i-1,w=i===0?a:[""],x=ax(w),T=0,C=0,A=0;T<r;++T)for(var _=0,L=Id(t,y+1,y=TO(C=l[T])),I=t;_<x;++_)(I=yj(C>0?w[_]+" "+L:Ye(L,/&\f/g,w[_])))&&(f[A++]=I);return ag(t,e,n,i===0?sx:d,f,m,g)}function NO(t,e,n){return ag(t,e,n,pj,sg(AO()),Id(t,2,-2),0)}function ZE(t,e,n,r){return ag(t,e,n,ox,Id(t,0,r),Id(t,r+1,-1),r)}function Hl(t,e){for(var n="",r=ax(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function LO(t,e,n,r){switch(t.type){case xO:if(t.children.length)break;case wO:case ox:return t.return=t.return||t.value;case pj:return"";case gj:return t.return=t.value+"{"+Hl(t.children,r)+"}";case sx:t.value=t.props.join(",")}return Kr(n=Hl(t.children,r))?t.return=t.value+"{"+n+"}":""}function OO(t){var e=ax(t);return function(n,r,i,a){for(var l="",d=0;d<e;d++)l+=t[d](n,r,i,a)||"";return l}}function PO(t){return function(e){e.root||(e=e.return)&&t(e)}}function xj(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var UO=function(e,n,r){for(var i=0,a=0;i=a,a=si(),i===38&&a===12&&(n[r]=1),!Rd(a);)sr();return wh(e,Fn)},VO=function(e,n){var r=-1,i=44;do switch(Rd(i)){case 0:i===38&&si()===12&&(n[r]=1),e[r]+=UO(Fn-1,n,r);break;case 2:e[r]+=tp(i);break;case 4:if(i===44){e[++r]=si()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=sg(i)}while(i=sr());return e},zO=function(e,n){return wj(VO(bj(e),n))},JE=new WeakMap,BO=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!JE.get(r))&&!i){JE.set(e,!0);for(var a=[],l=zO(n,a),d=r.props,f=0,m=0;f<l.length;f++)for(var g=0;g<d.length;g++,m++)e.props[m]=a[f]?l[f].replace(/&\f/g,d[g]):d[g]+" "+l[f]}}},$O=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Tj(t,e){switch(CO(t,e)){case 5103:return We+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return We+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return We+t+vp+t+bn+t+t;case 6828:case 4268:return We+t+bn+t+t;case 6165:return We+t+bn+"flex-"+t+t;case 5187:return We+t+Ye(t,/(\w+).+(:[^]+)/,We+"box-$1$2"+bn+"flex-$1$2")+t;case 5443:return We+t+bn+"flex-item-"+Ye(t,/flex-|-self/,"")+t;case 4675:return We+t+bn+"flex-line-pack"+Ye(t,/align-content|flex-|-self/,"")+t;case 5548:return We+t+bn+Ye(t,"shrink","negative")+t;case 5292:return We+t+bn+Ye(t,"basis","preferred-size")+t;case 6060:return We+"box-"+Ye(t,"-grow","")+We+t+bn+Ye(t,"grow","positive")+t;case 4554:return We+Ye(t,/([^-])(transform)/g,"$1"+We+"$2")+t;case 6187:return Ye(Ye(Ye(t,/(zoom-|grab)/,We+"$1"),/(image-set)/,We+"$1"),t,"")+t;case 5495:case 3959:return Ye(t,/(image-set\([^]*)/,We+"$1$`$1");case 4968:return Ye(Ye(t,/(.+:)(flex-)?(.*)/,We+"box-pack:$3"+bn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+We+t+t;case 4095:case 3583:case 4068:case 2532:return Ye(t,/(.+)-inline(.+)/,We+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Kr(t)-1-e>6)switch(ln(t,e+1)){case 109:if(ln(t,e+4)!==45)break;case 102:return Ye(t,/(.+:)(.+)-([^]+)/,"$1"+We+"$2-$3$1"+vp+(ln(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~_b(t,"stretch")?Tj(Ye(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ln(t,e+1)!==115)break;case 6444:switch(ln(t,Kr(t)-3-(~_b(t,"!important")&&10))){case 107:return Ye(t,":",":"+We)+t;case 101:return Ye(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+We+(ln(t,14)===45?"inline-":"")+"box$3$1"+We+"$2$3$1"+bn+"$2box$3")+t}break;case 5936:switch(ln(t,e+11)){case 114:return We+t+bn+Ye(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return We+t+bn+Ye(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return We+t+bn+Ye(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return We+t+bn+t+t}return t}var FO=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case ox:e.return=Tj(e.value,e.length);break;case gj:return Hl([zu(e,{value:Ye(e.value,"@","@"+We)})],i);case sx:if(e.length)return kO(e.props,function(a){switch(EO(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hl([zu(e,{props:[Ye(a,/:(read-\w+)/,":"+vp+"$1")]})],i);case"::placeholder":return Hl([zu(e,{props:[Ye(a,/:(plac\w+)/,":"+We+"input-$1")]}),zu(e,{props:[Ye(a,/:(plac\w+)/,":"+vp+"$1")]}),zu(e,{props:[Ye(a,/:(plac\w+)/,bn+"input-$1")]})],i)}return""})}},qO=[FO],HO=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(C){var A=C.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(C),C.setAttribute("data-s",""))})}var i=e.stylisPlugins||qO,a={},l,d=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(C){for(var A=C.getAttribute("data-emotion").split(" "),_=1;_<A.length;_++)a[A[_]]=!0;d.push(C)});var f,m=[BO,$O];{var g,y=[LO,PO(function(C){g.insert(C)})],w=OO(m.concat(i,y)),x=function(A){return Hl(MO(A),w)};f=function(A,_,L,I){g=L,x(A?A+"{"+_.styles+"}":_.styles),I&&(T.inserted[_.name]=!0)}}var T={key:n,sheet:new bO({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return T.sheet.hydrate(d),T},qv={exports:{}},Ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ek;function GO(){if(ek)return Ke;ek=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,g=t?Symbol.for("react.forward_ref"):60112,y=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,T=t?Symbol.for("react.lazy"):60116,C=t?Symbol.for("react.block"):60121,A=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,L=t?Symbol.for("react.scope"):60119;function I(D){if(typeof D=="object"&&D!==null){var M=D.$$typeof;switch(M){case e:switch(D=D.type,D){case f:case m:case r:case a:case i:case y:return D;default:switch(D=D&&D.$$typeof,D){case d:case g:case T:case x:case l:return D;default:return M}}case n:return M}}}function q(D){return I(D)===m}return Ke.AsyncMode=f,Ke.ConcurrentMode=m,Ke.ContextConsumer=d,Ke.ContextProvider=l,Ke.Element=e,Ke.ForwardRef=g,Ke.Fragment=r,Ke.Lazy=T,Ke.Memo=x,Ke.Portal=n,Ke.Profiler=a,Ke.StrictMode=i,Ke.Suspense=y,Ke.isAsyncMode=function(D){return q(D)||I(D)===f},Ke.isConcurrentMode=q,Ke.isContextConsumer=function(D){return I(D)===d},Ke.isContextProvider=function(D){return I(D)===l},Ke.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===e},Ke.isForwardRef=function(D){return I(D)===g},Ke.isFragment=function(D){return I(D)===r},Ke.isLazy=function(D){return I(D)===T},Ke.isMemo=function(D){return I(D)===x},Ke.isPortal=function(D){return I(D)===n},Ke.isProfiler=function(D){return I(D)===a},Ke.isStrictMode=function(D){return I(D)===i},Ke.isSuspense=function(D){return I(D)===y},Ke.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===r||D===m||D===a||D===i||D===y||D===w||typeof D=="object"&&D!==null&&(D.$$typeof===T||D.$$typeof===x||D.$$typeof===l||D.$$typeof===d||D.$$typeof===g||D.$$typeof===A||D.$$typeof===_||D.$$typeof===L||D.$$typeof===C)},Ke.typeOf=I,Ke}var tk;function WO(){return tk||(tk=1,qv.exports=GO()),qv.exports}var Hv,nk;function YO(){if(nk)return Hv;nk=1;var t=WO(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=r,a[t.Memo]=i;function l(T){return t.isMemo(T)?i:a[T.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,y=Object.getPrototypeOf,w=Object.prototype;function x(T,C,A){if(typeof C!="string"){if(w){var _=y(C);_&&_!==w&&x(T,_,A)}var L=f(C);m&&(L=L.concat(m(C)));for(var I=l(T),q=l(C),D=0;D<L.length;++D){var M=L[D];if(!n[M]&&!(A&&A[M])&&!(q&&q[M])&&!(I&&I[M])){var $=g(C,M);try{d(T,M,$)}catch{}}}}return T}return Hv=x,Hv}YO();var KO=!0;function Sj(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var lx=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||KO===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},Cj=function(e,n,r){lx(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function QO(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var XO={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ZO=/[A-Z]|^ms/g,JO=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ej=function(e){return e.charCodeAt(1)===45},rk=function(e){return e!=null&&typeof e!="boolean"},Gv=xj(function(t){return Ej(t)?t:t.replace(ZO,"-$&").toLowerCase()}),ik=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(JO,function(r,i,a){return Qr={name:i,styles:a,next:Qr},i})}return XO[e]!==1&&!Ej(e)&&typeof n=="number"&&n!==0?n+"px":n};function Md(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Qr={name:i.name,styles:i.styles,next:Qr},i.name;var a=n;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)Qr={name:l.name,styles:l.styles,next:Qr},l=l.next;var d=a.styles+";";return d}return eP(t,e,n)}case"function":{if(t!==void 0){var f=Qr,m=n(t);return Qr=f,Md(t,e,m)}break}}var g=n;if(e==null)return g;var y=e[g];return y!==void 0?y:g}function eP(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Md(t,e,n[i])+";";else for(var a in n){var l=n[a];if(typeof l!="object"){var d=l;e!=null&&e[d]!==void 0?r+=a+"{"+e[d]+"}":rk(d)&&(r+=Gv(a)+":"+ik(a,d)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var f=0;f<l.length;f++)rk(l[f])&&(r+=Gv(a)+":"+ik(a,l[f])+";");else{var m=Md(t,e,l);switch(a){case"animation":case"animationName":{r+=Gv(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var sk=/label:\s*([^\s;{]+)\s*(;|$)/g,Qr;function cx(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Qr=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=Md(n,e,a);else{var l=a;i+=l[0]}for(var d=1;d<t.length;d++)if(i+=Md(n,e,t[d]),r){var f=a;i+=f[d]}sk.lastIndex=0;for(var m="",g;(g=sk.exec(i))!==null;)m+="-"+g[1];var y=QO(i)+m;return{name:y,styles:i,next:Qr}}var tP=function(e){return e()},nP=UE.useInsertionEffect?UE.useInsertionEffect:!1,kj=nP||tP,Aj=k.createContext(typeof HTMLElement<"u"?HO({key:"css"}):null);Aj.Provider;var _j=function(e){return k.forwardRef(function(n,r){var i=k.useContext(Aj);return e(n,i,r)})},Dj=k.createContext({}),ux={}.hasOwnProperty,jb="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rP=function(e,n){var r={};for(var i in n)ux.call(n,i)&&(r[i]=n[i]);return r[jb]=e,r},iP=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return lx(n,r,i),kj(function(){return Cj(n,r,i)}),null},sP=_j(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[jb],a=[r],l="";typeof t.className=="string"?l=Sj(e.registered,a,t.className):t.className!=null&&(l=t.className+" ");var d=cx(a,void 0,k.useContext(Dj));l+=e.key+"-"+d.name;var f={};for(var m in t)ux.call(t,m)&&m!=="css"&&m!==jb&&(f[m]=t[m]);return f.className=l,n&&(f.ref=n),k.createElement(k.Fragment,null,k.createElement(iP,{cache:e,serialized:d,isStringTag:typeof i=="string"}),k.createElement(i,f))}),oP=sP,ok=function(e,n){var r=arguments;if(n==null||!ux.call(n,"css"))return k.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=oP,a[1]=rP(e,n);for(var l=2;l<i;l++)a[l]=r[l];return k.createElement.apply(null,a)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(ok||(ok={}));function aP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cx(e)}function mi(){var t=aP.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var lP=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,cP=xj(function(t){return lP.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),uP=cP,dP=function(e){return e!=="theme"},ak=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?uP:dP},lk=function(e,n,r){var i;if(n){var a=n.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(l){return e.__emotion_forwardProp(l)&&a(l)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},hP=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return lx(n,r,i),kj(function(){return Cj(n,r,i)}),null},fP=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,l;n!==void 0&&(a=n.label,l=n.target);var d=lk(e,n,r),f=d||ak(i),m=!f("as");return function(){var g=arguments,y=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&y.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)y.push.apply(y,g);else{var w=g[0];y.push(w[0]);for(var x=g.length,T=1;T<x;T++)y.push(g[T],w[T])}var C=_j(function(A,_,L){var I=m&&A.as||i,q="",D=[],M=A;if(A.theme==null){M={};for(var $ in A)M[$]=A[$];M.theme=k.useContext(Dj)}typeof A.className=="string"?q=Sj(_.registered,D,A.className):A.className!=null&&(q=A.className+" ");var Q=cx(y.concat(D),_.registered,M);q+=_.key+"-"+Q.name,l!==void 0&&(q+=" "+l);var ie=m&&d===void 0?ak(I):f,he={};for(var Ie in A)m&&Ie==="as"||ie(Ie)&&(he[Ie]=A[Ie]);return he.className=q,L&&(he.ref=L),k.createElement(k.Fragment,null,k.createElement(hP,{cache:_,serialized:Q,isStringTag:typeof I=="string"}),k.createElement(I,he))});return C.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=i,C.__emotion_styles=y,C.__emotion_forwardProp=d,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(A,_){var L=t(A,Ab({},n,_,{shouldForwardProp:lk(C,_,!0)}));return L.apply(void 0,y)},C}},mP=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],b=fP.bind(null);mP.forEach(function(t){b[t]=b(t)});const pP="modulepreload",gP=function(t){return"/"+t},ck={},oa=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(f=>{if(f=gP(f),f in ck)return;ck[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":pP,m||(y.as="script"),y.crossOrigin="",y.href=f,d&&y.setAttribute("nonce",d),document.head.appendChild(y),m)return new Promise((w,x)=>{y.addEventListener("load",w),y.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var uk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],d=t[n++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Ij={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,g=a>>2,y=(a&3)<<4|d>>4;let w=(d&15)<<2|m>>6,x=m&63;f||(x=64,l||(w=64)),r.push(n[g],n[y],n[w],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const y=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||d==null||m==null||y==null)throw new vP;const w=a<<2|d>>4;if(r.push(w),m!==64){const x=d<<4&240|m>>2;if(r.push(x),y!==64){const T=m<<6&192|y;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bP=function(t){const e=jj(t);return Ij.encodeByteArray(e,!0)},bp=function(t){return bP(t).replace(/\./g,"")},Rj=function(t){try{return Ij.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!wP(n)||(t[n]=wp(t[n],e[n]));return t}function wP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP=()=>xP().__FIREBASE_DEFAULTS__,SP=()=>{if(typeof process>"u"||typeof uk>"u")return;const t=uk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rj(t[1]);return e&&JSON.parse(e)},dx=()=>{try{return TP()||SP()||CP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EP=()=>{var t;return(t=dx())===null||t===void 0?void 0:t.config},kP=t=>{var e;return(e=dx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bp(JSON.stringify(n)),bp(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function hx(){var t;const e=(t=dx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jP(){return typeof self=="object"&&self.self===self}function Mj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nj(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IP(){return!hx()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nd(){try{return typeof indexedDB=="object"}catch{return!1}}function RP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="FirebaseError";class Kt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=MP,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sa.prototype.create)}}class Sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?NP(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Kt(i,d,r)}}function NP(t,e){return t.replace(LP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const LP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function OP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ib(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(hk(a)&&hk(l)){if(!Ib(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ld(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Lj(t,e){const n=new PP(t,e);return n.subscribe.bind(n)}class PP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wv),i.error===void 0&&(i.error=Wv),i.complete===void 0&&(i.complete=Wv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function UP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class Cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BP(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zP(t){return t===Oo?void 0:t}function BP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=[];var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const Oj={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},FP=$e.INFO,qP={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},HP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=FP,this._logHandler=HP,this._userLogHandler=null,mx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Oj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}function GP(t){mx.forEach(e=>{e.setLogLevel(t)})}function WP(t,e){for(const n of mx){let r=null;e&&e.level&&(r=Oj[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,a,...l)=>{const d=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(r??i.logLevel)&&t({level:$e[a].toLowerCase(),message:d,args:l,type:i.name})}}}const YP=(t,e)=>e.some(n=>t instanceof n);let fk,mk;function KP(){return fk||(fk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QP(){return mk||(mk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pj=new WeakMap,Rb=new WeakMap,Uj=new WeakMap,Yv=new WeakMap,px=new WeakMap;function XP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Ps(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&Pj.set(n,t)}).catch(()=>{}),px.set(e,t),e}function ZP(t){if(Rb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Rb.set(t,e)}let Mb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Uj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JP(t){Mb=t(Mb)}function eU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kv(this),e,...n);return Uj.set(r,e.sort?e.sort():[e]),Ps(r)}:QP().includes(t)?function(...e){return t.apply(Kv(this),e),Ps(Pj.get(this))}:function(...e){return Ps(t.apply(Kv(this),e))}}function tU(t){return typeof t=="function"?eU(t):(t instanceof IDBTransaction&&ZP(t),YP(t,KP())?new Proxy(t,Mb):t)}function Ps(t){if(t instanceof IDBRequest)return XP(t);if(Yv.has(t))return Yv.get(t);const e=tU(t);return e!==t&&(Yv.set(t,e),px.set(e,t)),e}const Kv=t=>px.get(t);function nU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Ps(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ps(l.result),f.oldVersion,f.newVersion,Ps(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),d.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",()=>i())}).catch(()=>{}),d}const rU=["get","getKey","getAll","getAllKeys","count"],iU=["put","add","delete","clear"],Qv=new Map;function pk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qv.get(e))return Qv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rU.includes(n)))return;const a=async function(l,...d){const f=this.transaction(l,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),i&&f.done]))[0]};return Qv.set(e,a),a}JP(t=>({...t,get:(e,n,r)=>pk(e,n)||t.get(e,n,r),has:(e,n)=>!!pk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nb="@firebase/app",gk="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new lg("@firebase/app"),aU="@firebase/app-compat",lU="@firebase/analytics-compat",cU="@firebase/analytics",uU="@firebase/app-check-compat",dU="@firebase/app-check",hU="@firebase/auth",fU="@firebase/auth-compat",mU="@firebase/database",pU="@firebase/database-compat",gU="@firebase/functions",yU="@firebase/functions-compat",vU="@firebase/installations",bU="@firebase/installations-compat",wU="@firebase/messaging",xU="@firebase/messaging-compat",TU="@firebase/performance",SU="@firebase/performance-compat",CU="@firebase/remote-config",EU="@firebase/remote-config-compat",kU="@firebase/storage",AU="@firebase/storage-compat",_U="@firebase/firestore",DU="@firebase/firestore-compat",jU="firebase",IU="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]",RU={[Nb]:"fire-core",[aU]:"fire-core-compat",[cU]:"fire-analytics",[lU]:"fire-analytics-compat",[dU]:"fire-app-check",[uU]:"fire-app-check-compat",[hU]:"fire-auth",[fU]:"fire-auth-compat",[mU]:"fire-rtdb",[pU]:"fire-rtdb-compat",[gU]:"fire-fn",[yU]:"fire-fn-compat",[vU]:"fire-iid",[bU]:"fire-iid-compat",[wU]:"fire-fcm",[xU]:"fire-fcm-compat",[TU]:"fire-perf",[SU]:"fire-perf-compat",[CU]:"fire-rc",[EU]:"fire-rc-compat",[kU]:"fire-gcs",[AU]:"fire-gcs-compat",[_U]:"fire-fst",[DU]:"fire-fst-compat","fire-js":"fire-js",[jU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Map,Ld=new Map;function xp(t,e){try{t.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vj(t,e){t.container.addOrOverwriteComponent(e)}function Vi(t){const e=t.name;if(Ld.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;Ld.set(e,t);for(const n of zs.values())xp(n,t);return!0}function zj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function MU(t,e,n=Vs){zj(t,e).clearInstance(n)}function NU(){Ld.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Li=new Sa("app","Firebase",LU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OU=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=IU;function gx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Li.create("bad-app-name",{appName:String(i)});if(n||(n=EP()),!n)throw Li.create("no-options");const a=zs.get(i);if(a){if(Ib(n,a.options)&&Ib(r,a.config))return a;throw Li.create("duplicate-app",{appName:i})}const l=new $P(i);for(const f of Ld.values())l.addComponent(f);const d=new OU(n,r,l);return zs.set(i,d),d}function PU(t=Vs){const e=zs.get(t);if(!e&&t===Vs)return gx();if(!e)throw Li.create("no-app",{appName:t});return e}function UU(){return Array.from(zs.values())}async function Bj(t){const e=t.name;zs.has(e)&&(zs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Tr(t,e,n){var r;let i=(r=RU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(d.join(" "));return}Vi(new Cr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function $j(t,e){if(t!==null&&typeof t!="function")throw Li.create("invalid-log-argument");WP(t,e)}function Fj(t){GP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="firebase-heartbeat-database",zU=1,Od="firebase-heartbeat-store";let Xv=null;function qj(){return Xv||(Xv=nU(VU,zU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Od)}}}).catch(t=>{throw Li.create("idb-open",{originalErrorMessage:t.message})})),Xv}async function BU(t){try{return(await qj()).transaction(Od).objectStore(Od).get(Hj(t))}catch(e){if(e instanceof Kt)aa.warn(e.message);else{const n=Li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});aa.warn(n.message)}}}async function yk(t,e){try{const r=(await qj()).transaction(Od,"readwrite");return await r.objectStore(Od).put(e,Hj(t)),r.done}catch(n){if(n instanceof Kt)aa.warn(n.message);else{const r=Li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});aa.warn(r.message)}}}function Hj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $U=1024,FU=30*24*60*60*1e3;class qU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vk();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=FU}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vk(),{heartbeatsToSend:n,unsentEntries:r}=HU(this._heartbeatsCache.heartbeats),i=bp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function vk(){return new Date().toISOString().substring(0,10)}function HU(t,e=$U){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),bk(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nd()?RP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await BU(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bk(t){return bp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t){Vi(new Cr("platform-logger",e=>new sU(e),"PRIVATE")),Vi(new Cr("heartbeat",e=>new qU(e),"PRIVATE")),Tr(Nb,gk,t),Tr(Nb,gk,"esm2017"),Tr("fire-js","")}WU("");const YU=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:Ca,_DEFAULT_ENTRY_NAME:Vs,_addComponent:xp,_addOrOverwriteComponent:Vj,_apps:zs,_clearComponents:NU,_components:Ld,_getProvider:zj,_registerComponent:Vi,_removeServiceInstance:MU,deleteApp:Bj,getApp:PU,getApps:UU,initializeApp:gx,onLog:$j,registerVersion:Tr,setLogLevel:Fj},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,n){this._delegate=e,this.firebase=n,xp(e,new Cr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Bj(this._delegate)))}_getService(e,n=Vs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){xp(this._delegate,e)}_addOrOverwriteComponent(e){Vj(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},wk=new Sa("app-compat","Firebase",QU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){const e={},n={__esModule:!0,initializeApp:a,app:i,registerVersion:Tr,setLogLevel:Fj,onLog:$j,apps:null,SDK_VERSION:Ca,INTERNAL:{registerComponent:d,removeApp:r,useAsService:f,modularAPIs:YU}};n.default=n,Object.defineProperty(n,"apps",{get:l});function r(m){delete e[m]}function i(m){if(m=m||Vs,!dk(e,m))throw wk.create("no-app",{appName:m});return e[m]}i.App=t;function a(m,g={}){const y=gx(m,g);if(dk(e,y.name))return e[y.name];const w=new t(y,n);return e[y.name]=w,w}function l(){return Object.keys(e).map(m=>e[m])}function d(m){const g=m.name,y=g.replace("-compat","");if(Vi(m)&&m.type==="PUBLIC"){const w=(x=i())=>{if(typeof x[y]!="function")throw wk.create("invalid-app-argument",{appName:g});return x[y]()};m.serviceProps!==void 0&&wp(w,m.serviceProps),n[y]=w,t.prototype[y]=function(...x){return this._getService.bind(this,g).apply(this,m.multipleInstances?x:[])}}return m.type==="PUBLIC"?n[y]:null}function f(m,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){const t=XU(KU);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:Gj,extendNamespace:e,createSubscribe:Lj,ErrorFactory:Sa,deepExtend:wp});function e(n){wp(t,n)}return t}const ZU=Gj();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=new lg("@firebase/app-compat"),JU="@firebase/app-compat",eV="0.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){Tr(JU,eV,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(jP()&&self.firebase!==void 0){xk.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&xk.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const J=ZU;tV();var nV="firebase",rV="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */J.registerVersion(nV,rV,"app-compat");var iV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe,yx=yx||{},Ce=iV||self;function Tp(){}function cg(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ug(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function sV(t,e,n){return t.call.apply(t.bind,arguments)}function oV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Tn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Tn=sV:Tn=oV,Tn.apply(null,arguments)}function gm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Zs(){this.s=this.s,this.o=this.o}var aV=0;Zs.prototype.s=!1;Zs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),aV!=0)};Zs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wj=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function vx(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(cg(r)){const i=t.length||0,a=r.length||0;t.length=i+a;for(let l=0;l<a;l++)t[i+l]=r[l]}else t.push(r)}}function Sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sn.prototype.h=function(){this.defaultPrevented=!0};var lV=function(){if(!Ce.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ce.addEventListener("test",Tp,e),Ce.removeEventListener("test",Tp,e)}catch{}return t}();function Sp(t){return/^[\s\xa0]*$/.test(t)}var Sk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Zv(t,e){return t<e?-1:t>e?1:0}function dg(){var t=Ce.navigator;return t&&(t=t.userAgent)?t:""}function Xr(t){return dg().indexOf(t)!=-1}function bx(t){return bx[" "](t),t}bx[" "]=Tp;function cV(t){var e=hV;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var uV=Xr("Opera"),Jl=Xr("Trident")||Xr("MSIE"),Yj=Xr("Edge"),Lb=Yj||Jl,Kj=Xr("Gecko")&&!(dg().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),dV=dg().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge");function Qj(){var t=Ce.document;return t?t.documentMode:void 0}var Cp;e:{var Jv="",e1=function(){var t=dg();if(Kj)return/rv:([^\);]+)(\)|;)/.exec(t);if(Yj)return/Edge\/([\d\.]+)/.exec(t);if(Jl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dV)return/WebKit\/(\S+)/.exec(t);if(uV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(e1&&(Jv=e1?e1[1]:""),Jl){var t1=Qj();if(t1!=null&&t1>parseFloat(Jv)){Cp=String(t1);break e}}Cp=Jv}var hV={};function fV(){return cV(function(){let t=0;const e=Sk(String(Cp)).split("."),n=Sk("9").split("."),r=Math.max(e.length,n.length);for(let l=0;t==0&&l<r;l++){var i=e[l]||"",a=n[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],i[0].length==0&&a[0].length==0)break;t=Zv(i[1].length==0?0:parseInt(i[1],10),a[1].length==0?0:parseInt(a[1],10))||Zv(i[2].length==0,a[2].length==0)||Zv(i[2],a[2]),i=i[3],a=a[3]}while(t==0)}return 0<=t})}var Ob;if(Ce.document&&Jl){var Ck=Qj();Ob=Ck||parseInt(Cp,10)||void 0}else Ob=void 0;var mV=Ob;function Pd(t,e){if(Sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Kj){e:{try{bx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pd.X.h.call(this)}}mn(Pd,Sn);var pV={2:"touch",3:"pen",4:"mouse"};Pd.prototype.h=function(){Pd.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var hg="closure_listenable_"+(1e6*Math.random()|0),gV=0;function yV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++gV,this.ba=this.ea=!1}function fg(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function wx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Xj(t){const e={};for(const n in t)e[n]=t[n];return e}const Ek="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zj(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let a=0;a<Ek.length;a++)n=Ek[a],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mg(t){this.src=t,this.g={},this.h=0}mg.prototype.add=function(t,e,n,r,i){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var l=Ub(t,e,r,i);return-1<l?(e=t[l],n||(e.ea=!1)):(e=new yV(e,this.src,a,!!r,i),e.ea=n,t.push(e)),e};function Pb(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Wj(r,e),a;(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(fg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ub(t,e,n,r){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==e&&a.capture==!!n&&a.ha==r)return i}return-1}var xx="closure_lm_"+(1e6*Math.random()|0),n1={};function Jj(t,e,n,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Jj(t,e[a],n,r,i);return null}return n=nI(n),t&&t[hg]?t.N(e,n,ug(r)?!!r.capture:!1,i):vV(t,e,n,!1,r,i)}function vV(t,e,n,r,i,a){if(!e)throw Error("Invalid event type");var l=ug(i)?!!i.capture:!!i,d=Sx(t);if(d||(t[xx]=d=new mg(t)),n=d.add(e,n,r,l,a),n.proxy)return n;if(r=bV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)lV||(i=l),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(tI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function bV(){function t(n){return e.call(t.src,t.listener,n)}const e=wV;return t}function eI(t,e,n,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)eI(t,e[a],n,r,i);else r=ug(r)?!!r.capture:!!r,n=nI(n),t&&t[hg]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],n=Ub(a,n,r,i),-1<n&&(fg(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ub(e,n,r,i)),(n=-1<t?e[t]:null)&&Tx(n))}function Tx(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[hg])Pb(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(tI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sx(e))?(Pb(n,t),n.h==0&&(n.src=null,e[xx]=null)):fg(t)}}}function tI(t){return t in n1?n1[t]:n1[t]="on"+t}function wV(t,e){if(t.ba)t=!0;else{e=new Pd(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Tx(t),t=n.call(r,e)}return t}function Sx(t){return t=t[xx],t instanceof mg?t:null}var r1="__closure_events_fn_"+(1e9*Math.random()>>>0);function nI(t){return typeof t=="function"?t:(t[r1]||(t[r1]=function(e){return t.handleEvent(e)}),t[r1])}function Xt(){Zs.call(this),this.i=new mg(this),this.P=this,this.I=null}mn(Xt,Zs);Xt.prototype[hg]=!0;Xt.prototype.removeEventListener=function(t,e,n,r){eI(this,t,e,n,r)};function un(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Sn(e,t);else if(e instanceof Sn)e.target=e.target||t;else{var i=e;e=new Sn(r,t),Zj(e,i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var l=e.g=n[a];i=ym(l,r,!0,e)&&i}if(l=e.g=t,i=ym(l,r,!0,e)&&i,i=ym(l,r,!1,e)&&i,n)for(a=0;a<n.length;a++)l=e.g=n[a],i=ym(l,r,!1,e)&&i}Xt.prototype.M=function(){if(Xt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fg(n[r]);delete t.g[e],t.h--}}this.I=null};Xt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ym(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==n){var d=l.listener,f=l.ha||l.src;l.ea&&Pb(t.i,l),i=d.call(f,r)!==!1&&i}}return i&&!r.defaultPrevented}var Cx=Ce.JSON.stringify;function xV(){var t=sI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class TV{constructor(){this.h=this.g=null}add(e,n){const r=rI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var rI=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new SV,t=>t.reset());class SV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function CV(t){Ce.setTimeout(()=>{throw t},0)}function iI(t,e){Vb||EV(),zb||(Vb(),zb=!0),sI.add(t,e)}var Vb;function EV(){var t=Ce.Promise.resolve(void 0);Vb=function(){t.then(kV)}}var zb=!1,sI=new TV;function kV(){for(var t;t=xV();){try{t.h.call(t.g)}catch(n){CV(n)}var e=rI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zb=!1}function pg(t,e){Xt.call(this),this.h=t||1,this.g=e||Ce,this.j=Tn(this.lb,this),this.l=Date.now()}mn(pg,Xt);fe=pg.prototype;fe.ca=!1;fe.R=null;fe.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),un(this,"tick"),this.ca&&(Ex(this),this.start()))}};fe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ex(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}fe.M=function(){pg.X.M.call(this),Ex(this),delete this.g};function kx(t,e,n){if(typeof t=="function")n&&(t=Tn(t,n));else if(t&&typeof t.handleEvent=="function")t=Tn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ce.setTimeout(t,e||0)}function oI(t){t.g=kx(()=>{t.g=null,t.i&&(t.i=!1,oI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class AV extends Zs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oI(this)}M(){super.M(),this.g&&(Ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ud(t){Zs.call(this),this.h=t,this.g={}}mn(Ud,Zs);var kk=[];function aI(t,e,n,r){Array.isArray(n)||(n&&(kk[0]=n.toString()),n=kk);for(var i=0;i<n.length;i++){var a=Jj(e,n[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function lI(t){wx(t.g,function(e,n){this.g.hasOwnProperty(n)&&Tx(e)},t),t.g={}}Ud.prototype.M=function(){Ud.X.M.call(this),lI(this)};Ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function gg(){this.g=!0}gg.prototype.Aa=function(){this.g=!1};function _V(t,e,n,r,i,a){t.info(function(){if(t.g)if(a)for(var l="",d=a.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");if(1<m.length){var g=m[0];m=m[1];var y=g.split("_");l=2<=y.length&&y[1]=="type"?l+(g+"="+m+"&"):l+(g+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+l})}function DV(t,e,n,r,i,a,l){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+a+" "+l})}function Vl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+IV(t,n)+(r?" "+r:"")})}function jV(t,e){t.info(function(){return"TIMEOUT: "+e})}gg.prototype.info=function(){};function IV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!="noop"&&a!="stop"&&a!="close")for(var l=1;l<i.length;l++)i[l]=""}}}}return Cx(n)}catch{return e}}var Ea={},Ak=null;function yg(){return Ak=Ak||new Xt}Ea.Pa="serverreachability";function cI(t){Sn.call(this,Ea.Pa,t)}mn(cI,Sn);function Vd(t){const e=yg();un(e,new cI(e))}Ea.STAT_EVENT="statevent";function uI(t,e){Sn.call(this,Ea.STAT_EVENT,t),this.stat=e}mn(uI,Sn);function _n(t){const e=yg();un(e,new uI(e,t))}Ea.Qa="timingevent";function dI(t,e){Sn.call(this,Ea.Qa,t),this.size=e}mn(dI,Sn);function xh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ce.setTimeout(function(){t()},e)}var vg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},hI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ax(){}Ax.prototype.h=null;function _k(t){return t.h||(t.h=t.i())}function fI(){}var Th={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _x(){Sn.call(this,"d")}mn(_x,Sn);function Dx(){Sn.call(this,"c")}mn(Dx,Sn);var Bb;function bg(){}mn(bg,Ax);bg.prototype.g=function(){return new XMLHttpRequest};bg.prototype.i=function(){return{}};Bb=new bg;function Sh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Ud(this),this.O=RV,t=Lb?125:void 0,this.T=new pg(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mI}function mI(){this.i=null,this.g="",this.h=!1}var RV=45e3,$b={},Ep={};fe=Sh.prototype;fe.setTimeout=function(t){this.O=t};function Fb(t,e,n){t.K=1,t.v=xg(zi(e)),t.s=n,t.P=!0,pI(t,null)}function pI(t,e){t.F=Date.now(),Ch(t),t.A=zi(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),SI(n.i,"t",r),t.C=0,n=t.l.H,t.h=new mI,t.g=qI(t.l,n?e:null,!t.s),0<t.N&&(t.L=new AV(Tn(t.La,t,t.g),t.N)),aI(t.S,t.g,"readystatechange",t.ib),e=t.H?Xj(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Vd(),_V(t.j,t.u,t.A,t.m,t.U,t.s)}fe.ib=function(t){t=t.target;const e=this.L;e&&Ii(t)==3?e.l():this.La(t)};fe.La=function(t){try{if(t==this.g)e:{const g=Ii(this.g);var e=this.g.Ea();const y=this.g.aa();if(!(3>g)&&(g!=3||Lb||this.g&&(this.h.h||this.g.fa()||Rk(this.g)))){this.I||g!=4||e==7||(e==8||0>=y?Vd(3):Vd(2)),wg(this);var n=this.g.aa();this.Y=n;t:if(gI(this)){var r=Rk(this.g);t="";var i=r.length,a=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Go(this),gd(this);var l="";break t}this.h.i=new Ce.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=n==200,DV(this.j,this.u,this.A,this.m,this.U,g,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sp(d)){var m=d;break t}}m=null}if(n=m)Vl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qb(this,n);else{this.i=!1,this.o=3,_n(12),Go(this),gd(this);break e}}this.P?(yI(this,g,l),Lb&&this.i&&g==3&&(aI(this.S,this.T,"tick",this.hb),this.T.start())):(Vl(this.j,this.m,l,null),qb(this,l)),g==4&&Go(this),this.i&&!this.I&&(g==4?zI(this.l,this):(this.i=!1,Ch(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,_n(12)):(this.o=0,_n(13)),Go(this),gd(this)}}}catch{}finally{}};function gI(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function yI(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=MV(t,n),i==Ep){e==4&&(t.o=4,_n(14),r=!1),Vl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==$b){t.o=4,_n(15),Vl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vl(t.j,t.m,i,null),qb(t,i);gI(t)&&i!=Ep&&i!=$b&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,_n(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ox(e),e.K=!0,_n(11))):(Vl(t.j,t.m,n,"[Invalid Chunked Response]"),Go(t),gd(t))}fe.hb=function(){if(this.g){var t=Ii(this.g),e=this.g.fa();this.C<e.length&&(wg(this),yI(this,t,e),this.i&&t!=4&&Ch(this))}};function MV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ep:(n=Number(e.substring(n,r)),isNaN(n)?$b:(r+=1,r+n>e.length?Ep:(e=e.substr(r,n),t.C=r+n,e)))}fe.cancel=function(){this.I=!0,Go(this)};function Ch(t){t.V=Date.now()+t.O,vI(t,t.O)}function vI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=xh(Tn(t.gb,t),e)}function wg(t){t.B&&(Ce.clearTimeout(t.B),t.B=null)}fe.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(jV(this.j,this.A),this.K!=2&&(Vd(),_n(17)),Go(this),this.o=2,gd(this)):vI(this,this.V-t)};function gd(t){t.l.G==0||t.I||zI(t.l,t)}function Go(t){wg(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ex(t.T),lI(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function qb(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Hb(n.h,t))){if(!t.J&&Hb(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)_p(n),Cg(n);else break e;Lx(n),_n(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=xh(Tn(n.cb,n),6e3));if(1>=kI(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Wo(n,11)}else if((t.J||n.g==t)&&_p(n),!Sp(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(n.T=m[0],m=m[1],n.G==2)if(m[0]=="c"){n.I=m[1],n.ka=m[2];const g=m[3];g!=null&&(n.ma=g,n.j.info("VER="+n.ma));const y=m[4];y!=null&&(n.Ca=y,n.j.info("SVER="+n.Ca));const w=m[5];w!=null&&typeof w=="number"&&0<w&&(r=1.5*w,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const x=t.g;if(x){const T=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var a=r.h;a.g||T.indexOf("spdy")==-1&&T.indexOf("quic")==-1&&T.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(jx(a,a.h),a.h=null))}if(r.D){const C=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.za=C,ht(r.F,r.D,C))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var l=t;if(r.sa=FI(r,r.H?r.ka:null,r.V),l.J){AI(r.h,l);var d=l,f=r.J;f&&d.setTimeout(f),d.B&&(wg(d),Ch(d)),r.g=l}else UI(r);0<n.i.length&&Eg(n)}else m[0]!="stop"&&m[0]!="close"||Wo(n,7);else n.G==3&&(m[0]=="stop"||m[0]=="close"?m[0]=="stop"?Wo(n,7):Nx(n):m[0]!="noop"&&n.l&&n.l.wa(m),n.A=0)}}Vd(4)}catch{}}function NV(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(cg(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function LV(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(cg(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function bI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(cg(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=LV(t),r=NV(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}var wI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jo(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Jo){this.h=e!==void 0?e:t.h,kp(this,t.j),this.s=t.s,this.g=t.g,Ap(this,t.m),this.l=t.l,e=t.i;var n=new zd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Dk(this,n),this.o=t.o}else t&&(n=String(t).match(wI))?(this.h=!!e,kp(this,n[1]||"",!0),this.s=cd(n[2]||""),this.g=cd(n[3]||"",!0),Ap(this,n[4]),this.l=cd(n[5]||"",!0),Dk(this,n[6]||"",!0),this.o=cd(n[7]||"")):(this.h=!!e,this.i=new zd(null,this.h))}Jo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ud(e,jk,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ud(e,jk,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ud(n,n.charAt(0)=="/"?VV:UV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ud(n,BV)),t.join("")};function zi(t){return new Jo(t)}function kp(t,e,n){t.j=n?cd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ap(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Dk(t,e,n){e instanceof zd?(t.i=e,$V(t.i,t.h)):(n||(e=ud(e,zV)),t.i=new zd(e,t.h))}function ht(t,e,n){t.i.set(e,n)}function xg(t){return ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,PV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function PV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var jk=/[#\/\?@]/g,UV=/[#\?:]/g,VV=/[#\?]/g,zV=/[#\?@]/g,BV=/#/g;function zd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Js(t){t.g||(t.g=new Map,t.h=0,t.i&&OV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}fe=zd.prototype;fe.add=function(t,e){Js(this),this.i=null,t=Tc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function xI(t,e){Js(t),e=Tc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function TI(t,e){return Js(t),e=Tc(t,e),t.g.has(e)}fe.forEach=function(t,e){Js(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};fe.oa=function(){Js(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let a=0;a<i.length;a++)n.push(e[r])}return n};fe.W=function(t){Js(this);let e=[];if(typeof t=="string")TI(this,t)&&(e=e.concat(this.g.get(Tc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};fe.set=function(t,e){return Js(this),this.i=null,t=Tc(this,t),TI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};fe.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function SI(t,e,n){xI(t,e),0<n.length&&(t.i=null,t.g.set(Tc(t,e),vx(n)),t.h+=n.length)}fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;l[r]!==""&&(i+="="+encodeURIComponent(String(l[r]))),t.push(i)}}return this.i=t.join("&")};function Tc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function $V(t,e){e&&!t.j&&(Js(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(xI(this,r),SI(this,i,n))},t)),t.j=e}var FV=class{constructor(e,n){this.h=e,this.g=n}};function CI(t){this.l=t||qV,Ce.PerformanceNavigationTiming?(t=Ce.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ce.g&&Ce.g.Ga&&Ce.g.Ga()&&Ce.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qV=10;function EI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function kI(t){return t.h?1:t.g?t.g.size:0}function Hb(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function jx(t,e){t.g?t.g.add(e):t.h=e}function AI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}CI.prototype.cancel=function(){if(this.i=_I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function _I(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return vx(t.i)}function Ix(){}Ix.prototype.stringify=function(t){return Ce.JSON.stringify(t,void 0)};Ix.prototype.parse=function(t){return Ce.JSON.parse(t,void 0)};function HV(){this.g=new Ix}function GV(t,e,n){const r=n||"";try{bI(t,function(i,a){let l=i;ug(i)&&(l=Cx(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function WV(t,e){const n=new gg;if(Ce.Image){const r=new Image;r.onload=gm(vm,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gm(vm,n,r,"TestLoadImage: error",!1,e),r.onabort=gm(vm,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gm(vm,n,r,"TestLoadImage: timeout",!1,e),Ce.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function vm(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Eh(t){this.l=t.ac||null,this.j=t.jb||!1}mn(Eh,Ax);Eh.prototype.g=function(){return new Tg(this.l,this.j)};Eh.prototype.i=function(t){return function(){return t}}({});function Tg(t,e){Xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Rx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mn(Tg,Xt);var Rx=0;fe=Tg.prototype;fe.open=function(t,e){if(this.readyState!=Rx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Bd(this)};fe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ce).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kh(this)),this.readyState=Rx};fe.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Bd(this)),this.g&&(this.readyState=3,Bd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ce.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;DI(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function DI(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}fe.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kh(this):Bd(this),this.readyState==3&&DI(this)}};fe.Va=function(t){this.g&&(this.response=this.responseText=t,kh(this))};fe.Ua=function(t){this.g&&(this.response=t,kh(this))};fe.ga=function(){this.g&&kh(this)};function kh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Bd(t)}fe.setRequestHeader=function(t,e){this.v.append(t,e)};fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Bd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Tg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var YV=Ce.JSON.parse;function St(t){Xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jI,this.K=this.L=!1}mn(St,Xt);var jI="",KV=/^https?$/i,QV=["POST","PUT"];fe=St.prototype;fe.Ka=function(t){this.L=t};fe.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bb.g(),this.C=this.u?_k(this.u):_k(Bb),this.g.onreadystatechange=Tn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){Ik(this,a);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const a of r.keys())n.set(a,r.get(a));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(a=>a.toLowerCase()=="content-type"),i=Ce.FormData&&t instanceof Ce.FormData,!(0<=Wj(QV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of n)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{MI(this),0<this.B&&((this.K=XV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.qa,this)):this.A=kx(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){Ik(this,a)}};function XV(t){return Jl&&fV()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}fe.qa=function(){typeof yx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))};function Ik(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,II(t),Sg(t)}function II(t){t.D||(t.D=!0,un(t,"complete"),un(t,"error"))}fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,un(this,"complete"),un(this,"abort"),Sg(this))};fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sg(this,!0)),St.X.M.call(this)};fe.Ha=function(){this.s||(this.F||this.v||this.l?RI(this):this.fb())};fe.fb=function(){RI(this)};function RI(t){if(t.h&&typeof yx<"u"&&(!t.C[1]||Ii(t)!=4||t.aa()!=2)){if(t.v&&Ii(t)==4)kx(t.Ha,0,t);else if(un(t,"readystatechange"),Ii(t)==4){t.h=!1;try{const d=t.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=d===0){var i=String(t.H).match(wI)[1]||null;if(!i&&Ce.self&&Ce.self.location){var a=Ce.self.location.protocol;i=a.substr(0,a.length-1)}r=!KV.test(i?i.toLowerCase():"")}n=r}if(n)un(t,"complete"),un(t,"success");else{t.m=6;try{var l=2<Ii(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.aa()+"]",II(t)}}finally{Sg(t)}}}}function Sg(t,e){if(t.g){MI(t);const n=t.g,r=t.C[0]?Tp:null;t.g=null,t.C=null,e||un(t,"ready");try{n.onreadystatechange=r}catch{}}}function MI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ce.clearTimeout(t.A),t.A=null)}function Ii(t){return t.g?t.g.readyState:0}fe.aa=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}};fe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};fe.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),YV(e)}};function Rk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case jI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}fe.Ea=function(){return this.m};fe.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NI(t){let e="";return wx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Mx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=NI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ht(t,e,n))}function Bu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function LI(t){this.Ca=0,this.i=[],this.j=new gg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Bu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Bu("baseRetryDelayMs",5e3,t),this.bb=Bu("retryDelaySeedMs",1e4,t),this.$a=Bu("forwardChannelMaxRetries",2,t),this.ta=Bu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new CI(t&&t.concurrentRequestLimit),this.Fa=new HV,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}fe=LI.prototype;fe.ma=8;fe.G=1;function Nx(t){if(OI(t),t.G==3){var e=t.U++,n=zi(t.F);ht(n,"SID",t.I),ht(n,"RID",e),ht(n,"TYPE","terminate"),Ah(t,n),e=new Sh(t,t.j,e,void 0),e.K=2,e.v=xg(zi(n)),n=!1,Ce.navigator&&Ce.navigator.sendBeacon&&(n=Ce.navigator.sendBeacon(e.v.toString(),"")),!n&&Ce.Image&&(new Image().src=e.v,n=!0),n||(e.g=qI(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ch(e)}$I(t)}function Cg(t){t.g&&(Ox(t),t.g.cancel(),t.g=null)}function OI(t){Cg(t),t.u&&(Ce.clearTimeout(t.u),t.u=null),_p(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ce.clearTimeout(t.m),t.m=null)}function Eg(t){EI(t.h)||t.m||(t.m=!0,iI(t.Ja,t),t.C=0)}function ZV(t,e){return kI(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=xh(Tn(t.Ja,t,e),BI(t,t.C)),t.C++,!0)}fe.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Sh(this,this.j,t,void 0);let a=this.s;if(this.S&&(a?(a=Xj(a),Zj(a,this.S)):a=this.S),this.o!==null||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=PI(this,i,e),n=zi(this.F),ht(n,"RID",t),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),Ah(this,n),a&&(this.N?e="headers="+encodeURIComponent(String(NI(a)))+"&"+e:this.o&&Mx(n,this.o,a)),jx(this.h,i),this.Ya&&ht(n,"TYPE","init"),this.O?(ht(n,"$req",e),ht(n,"SID","null"),i.Z=!0,Fb(i,n,null)):Fb(i,n,e),this.G=2}}else this.G==3&&(t?Mk(this,t):this.i.length==0||EI(this.h)||Mk(this))};function Mk(t,e){var n;e?n=e.m:n=t.U++;const r=zi(t.F);ht(r,"SID",t.I),ht(r,"RID",n),ht(r,"AID",t.T),Ah(t,r),t.o&&t.s&&Mx(r,t.o,t.s),n=new Sh(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=PI(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),jx(t.h,n),Fb(n,r,e)}function Ah(t,e){t.ia&&wx(t.ia,function(n,r){ht(e,r,n)}),t.l&&bI({},function(n,r){ht(e,r,n)})}function PI(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Tn(t.l.Ra,t.l,t):null;e:{var i=t.i;let a=-1;for(;;){const l=["count="+n];a==-1?0<n?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let f=0;f<n;f++){let m=i[f].h;const g=i[f].g;if(m-=a,0>m)a=Math.max(0,i[f].h-100),d=!1;else try{GV(g,l,"req"+m+"_")}catch{r&&r(g)}}if(d){r=l.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function UI(t){t.g||t.u||(t.Z=1,iI(t.Ia,t),t.A=0)}function Lx(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=xh(Tn(t.Ia,t),BI(t,t.A)),t.A++,!0)}fe.Ia=function(){if(this.u=null,VI(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=xh(Tn(this.eb,this),t)}};fe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_n(10),Cg(this),VI(this))};function Ox(t){t.B!=null&&(Ce.clearTimeout(t.B),t.B=null)}function VI(t){t.g=new Sh(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=zi(t.sa);ht(e,"RID","rpc"),ht(e,"SID",t.I),ht(e,"CI",t.L?"0":"1"),ht(e,"AID",t.T),ht(e,"TYPE","xmlhttp"),Ah(t,e),t.o&&t.s&&Mx(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=xg(zi(e)),n.s=null,n.P=!0,pI(n,t)}fe.cb=function(){this.v!=null&&(this.v=null,Cg(this),Lx(this),_n(19))};function _p(t){t.v!=null&&(Ce.clearTimeout(t.v),t.v=null)}function zI(t,e){var n=null;if(t.g==e){_p(t),Ox(t),t.g=null;var r=2}else if(Hb(t.h,e))n=e.D,AI(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=yg(),un(r,new dI(r,n)),Eg(t)}else UI(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&ZV(t,e)||r==2&&Lx(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Wo(t,5);break;case 4:Wo(t,10);break;case 3:Wo(t,6);break;default:Wo(t,2)}}}function BI(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Wo(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Tn(t.kb,t);n||(n=new Jo("//www.google.com/images/cleardot.gif"),Ce.location&&Ce.location.protocol=="http"||kp(n,"https"),xg(n)),WV(n.toString(),r)}else _n(2);t.G=0,t.l&&t.l.va(e),$I(t),OI(t)}fe.kb=function(t){t?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function $I(t){if(t.G=0,t.la=[],t.l){const e=_I(t.h);(e.length!=0||t.i.length!=0)&&(Tk(t.la,e),Tk(t.la,t.i),t.h.i.length=0,vx(t.i),t.i.length=0),t.l.ua()}}function FI(t,e,n){var r=n instanceof Jo?zi(n):new Jo(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Ap(r,r.m);else{var i=Ce.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Jo(null,void 0);r&&kp(a,r),e&&(a.g=e),i&&Ap(a,i),n&&(a.l=n),r=a}return n=t.D,e=t.za,n&&e&&ht(r,n,e),ht(r,"VER",t.ma),Ah(t,r),r}function qI(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new St(new Eh({jb:!0})):new St(t.ra),e.Ka(t.H),e}function HI(){}fe=HI.prototype;fe.xa=function(){};fe.wa=function(){};fe.va=function(){};fe.ua=function(){};fe.Ra=function(){};function Dp(){if(Jl&&!(10<=Number(mV)))throw Error("Environmental error: no available transport.")}Dp.prototype.g=function(t,e){return new or(t,e)};function or(t,e){Xt.call(this),this.g=new LI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Sp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sp(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sc(this)}mn(or,Xt);or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;_n(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=FI(t,null,t.V),Eg(t)};or.prototype.close=function(){Nx(this.g)};or.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Cx(t),t=n);e.i.push(new FV(e.ab++,t)),e.G==3&&Eg(e)};or.prototype.M=function(){this.g.l=null,delete this.j,Nx(this.g),delete this.g,or.X.M.call(this)};function GI(t){_x.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mn(GI,_x);function WI(){Dx.call(this),this.status=1}mn(WI,Dx);function Sc(t){this.g=t}mn(Sc,HI);Sc.prototype.xa=function(){un(this.g,"a")};Sc.prototype.wa=function(t){un(this.g,new GI(t))};Sc.prototype.va=function(t){un(this.g,new WI)};Sc.prototype.ua=function(){un(this.g,"b")};Dp.prototype.createWebChannel=Dp.prototype.g;or.prototype.send=or.prototype.u;or.prototype.open=or.prototype.m;or.prototype.close=or.prototype.close;vg.NO_ERROR=0;vg.TIMEOUT=8;vg.HTTP_ERROR=6;hI.COMPLETE="complete";fI.EventType=Th;Th.OPEN="a";Th.CLOSE="b";Th.ERROR="c";Th.MESSAGE="d";Xt.prototype.listen=Xt.prototype.N;St.prototype.listenOnce=St.prototype.O;St.prototype.getLastError=St.prototype.Oa;St.prototype.getLastErrorCode=St.prototype.Ea;St.prototype.getStatus=St.prototype.aa;St.prototype.getResponseJson=St.prototype.Sa;St.prototype.getResponseText=St.prototype.fa;St.prototype.send=St.prototype.da;St.prototype.setWithCredentials=St.prototype.Ka;var JV=function(){return new Dp},ez=function(){return yg()},i1=vg,tz=hI,nz=Ea,Nk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},rz=Eh,bm=fI,iz=St,sz={};const Lk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new lg("@firebase/firestore");function Gb(){return Bs.logLevel}function oz(t){Bs.setLogLevel(t)}function ee(t,...e){if(Bs.logLevel<=$e.DEBUG){const n=e.map(Px);Bs.debug(`Firestore (${Cc}): ${t}`,...n)}}function jt(t,...e){if(Bs.logLevel<=$e.ERROR){const n=e.map(Px);Bs.error(`Firestore (${Cc}): ${t}`,...n)}}function ec(t,...e){if(Bs.logLevel<=$e.WARN){const n=e.map(Px);Bs.warn(`Firestore (${Cc}): ${t}`,...n)}}function Px(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+t;throw jt(e),new Error(e)}function me(t,e){t||ce()}function az(t,e){t||ce()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class cz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uz{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Qt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qt,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},d=f=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qt)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new YI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Yt(e)}}class dz{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(me(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class hz{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new dz(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mz{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=a=>{a.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.A=n.token,new fz(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=pz(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function tc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function QI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new pt(0,0))}static max(){return new ge(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $d.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $d?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),l=n.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends $d{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const gz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends $d{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return gz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ve.fromString(e))}static fromName(e){return new re(Ve.fromString(e).popFirst(5))}static empty(){return new re(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Wb(t){return t.fields.find(e=>e.kind===2)}function Po(t){return t.fields.filter(e=>e.kind!==2)}XI.UNKNOWN_ID=-1;class yz{constructor(e,n){this.fieldPath=e,this.kind=n}}class jp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new jp(0,ar.min())}}function ZI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ar(i,re.empty(),e)}function JI(t){return new ar(t.readTime,t.key,-1)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ge.min(),re.empty(),-1)}static max(){return new ar(ge.max(),re.empty(),-1)}}function Ux(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==e4)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&n()},f=>r(f))}),l=!0,a===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;n(e[m]).next(g=>{l[m]=g,++d,d===a&&r(l)},g=>i(g))}})}static doWhile(e,n){return new z((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Qt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new yd(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Vx(r.target.error);this.P.reject(new yd(e,i))}}static open(e,n,r,i){try{return new kg(n,e.transaction(i,r))}catch(a){throw new yd(n,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new bz(n)}}class Rr{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Rr.D(vt())===12.2&&jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),Bo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Nd())return!1;if(Rr.N())return!0;const e=vt(),n=Rr.D(e),r=0<n&&n<10,i=Rr.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&((e=sz)===null||e===void 0?void 0:e.$)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;n(l)},i.onblocked=()=>{r(new yd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new Z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new Z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new yd(e,l))},i.onupgradeneeded=a=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.S.F(l,i.transaction,a.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.O(e);const d=kg.open(this.db,e,a?"readonly":"readwrite",r),f=i(d).next(m=>(d.V(),m)).catch(m=>(d.abort(m),z.reject(m))).toPromise();return f.catch(()=>{}),await d.v,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&l<3;if(ee("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}class vz{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Bo(this.q.delete())}}class yd extends Z{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function to(t){return t.name==="IndexedDbTransactionError"}class bz{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bo(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),Bo(this.store.add(e))}get(e){return Bo(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),Bo(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),Bo(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new z((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new z((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new z((r,i)=>{n.onerror=a=>{const l=Vx(a.target.error);i(l)},n.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,n){const r=[];return new z((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new vz(d),m=n(d.primaryKey,d.value,f);if(m instanceof z){const g=m.catch(y=>(f.done(),z.reject(y)));r.push(g)}f.isDone?i():f.G===null?d.continue():d.continue(f.G)}}).next(()=>z.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Bo(t){return new z((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Vx(r.target.error);n(i)}})}let Ok=!1;function Vx(t){const e=Rr.D(vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ok||(Ok=!0,setTimeout(()=>{throw r},0)),r}}return t}class wz{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ee("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){to(n)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await eo(n)}await this.nt(6e4)})}}class xz{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,a=!0;return z.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return ee("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(ee("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,n,d))).next(()=>l.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,a)=>{const l=JI(a);Ux(l,r)>0&&(r=l)}),new ar(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}zn.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n,r,i,a,l,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class $s{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function n4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){return t==null}function Fd(t){return t===0&&1/t==-1/0}function r4(t){return typeof t=="number"&&Number.isInteger(t)&&!Fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new Sz("Invalid base64 string: "+i):i}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const Ez=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(me(!!t),typeof t=="string"){let e=0;const n=Ez.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function la(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function i4(t){const e=t.mapValue.fields.__previous_value__;return zx(e)?i4(e):e}function qd(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rp={nullValue:"NULL_VALUE"};function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zx(t)?4:s4(t)?9007199254740991:10:ce()}function hi(t,e){if(t===e)return!0;const n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qd(t).isEqual(qd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Fs(r.timestampValue),l=Fs(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return la(r.bytesValue).isEqual(la(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Tt(r.doubleValue),l=Tt(i.doubleValue);return a===l?Fd(a)===Fd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return tc(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Pk(a)!==Pk(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(l[d]===void 0||!hi(a[d],l[d])))return!1;return!0}(t,e);default:return ce()}}function Hd(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function qs(t,e){if(t===e)return 0;const n=ca(t),r=ca(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Tt(i.integerValue||i.doubleValue),d=Tt(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(t,e);case 3:return Uk(t.timestampValue,e.timestampValue);case 4:return Uk(qd(t),qd(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,a){const l=la(i),d=la(a);return l.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let f=0;f<l.length&&f<d.length;f++){const m=_e(l[f],d[f]);if(m!==0)return m}return _e(l.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=_e(Tt(i.latitude),Tt(a.latitude));return l!==0?l:_e(Tt(i.longitude),Tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let f=0;f<l.length&&f<d.length;++f){const m=qs(l[f],d[f]);if(m)return m}return _e(l.length,d.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ls.mapValue&&a===Ls.mapValue)return 0;if(i===Ls.mapValue)return 1;if(a===Ls.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),f=a.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const y=_e(d[g],m[g]);if(y!==0)return y;const w=qs(l[d[g]],f[m[g]]);if(w!==0)return w}return _e(d.length,m.length)}(t.mapValue,e.mapValue);default:throw ce()}}function Uk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Fs(t),r=Fs(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function nc(t){return Yb(t)}function Yb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Fs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?la(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,re.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Yb(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Yb(r.fields[d])}`;return a+"}"}(t.mapValue):ce();var e,n}function ua(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kb(t){return!!t&&"integerValue"in t}function Gd(t){return!!t&&"arrayValue"in t}function Vk(t){return!!t&&"nullValue"in t}function zk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ip(t){return!!t&&"mapValue"in t}function vd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function s4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function kz(t){return"nullValue"in t?rp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ua($s.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ce()}function Az(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ua($s.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ls:ce()}function Bk(t,e){const n=qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function $k(t,e){const n=qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.position=e,this.inclusive=n}}function Fk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=re.comparator(re.fromName(l.referenceValue),n.key):r=qs(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function qk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{}class Oe extends o4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _z(e,n,r):n==="array-contains"?new Iz(e,r):n==="in"?new h4(e,r):n==="not-in"?new Rz(e,r):n==="array-contains-any"?new Mz(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Dz(e,r):new jz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Je extends o4{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new Je(e,n)}matches(e){return rc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function rc(t){return t.op==="and"}function Qb(t){return t.op==="or"}function Bx(t){return a4(t)&&rc(t)}function a4(t){for(const e of t.filters)if(e instanceof Je)return!1;return!0}function Xb(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(Bx(t))return t.filters.map(e=>Xb(e)).join(",");{const e=t.filters.map(n=>Xb(n)).join(",");return`${t.op}(${e})`}}function l4(t,e){return t instanceof Oe?function(n,r){return r instanceof Oe&&n.op===r.op&&n.field.isEqual(r.field)&&hi(n.value,r.value)}(t,e):t instanceof Je?function(n,r){return r instanceof Je&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,a,l)=>i&&l4(a,r.filters[l]),!0):!1}(t,e):void ce()}function c4(t,e){const n=t.filters.concat(e);return Je.create(n,t.op)}function u4(t){return t instanceof Oe?function(e){return`${e.field.canonicalString()} ${e.op} ${nc(e.value)}`}(t):t instanceof Je?function(e){return e.op.toString()+" {"+e.getFilters().map(u4).join(" ,")+"}"}(t):"Filter"}class _z extends Oe{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class Dz extends Oe{constructor(e,n){super(e,"in",n),this.keys=d4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jz extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=d4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class Iz extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gd(n)&&Hd(n.arrayValue,this.value)}}class h4 extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hd(this.value.arrayValue,n)}}class Rz extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hd(this.value.arrayValue,n)}}class Mz extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n="asc"){this.field=e,this.dir=n}}function Nz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||an.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wm(this.root,e,this.comparator,!1)}getReverseIterator(){return new wm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wm(this.root,e,this.comparator,!0)}}class wm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??an.RED,this.left=i??an.EMPTY,this.right=a??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new an(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return an.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(t,e,n,r,i){return this}insert(t,e,n){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hk(this.data.getIterator())}getIteratorFrom(e){return new Hk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Hk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Bn([])}unionWith(e){let n=new rt(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ip(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vd(n)}setAll(e){let n=It.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=d.popLast()}l?r[d.lastSegment()]=vd(l):i.push(d.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());ip(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ip(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ka(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new cn(vd(this.value))}}function f4(t){const e=[];return ka(t.fields,(n,r)=>{const i=new It([n]);if(ip(r)){const a=f4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,i,a,l,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new lt(e,0,ge.min(),ge.min(),ge.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new lt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new lt(e,2,n,ge.min(),ge.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,ge.min(),ge.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this._t=null}}function Zb(t,e=null,n=[],r=[],i=null,a=null,l=null){return new Lz(t,e,n,r,i,a,l)}function da(t){const e=oe(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e._t=n}return e._t}function Dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Nz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qk(t.startAt,e.startAt)&&qk(t.endAt,e.endAt)}function Ip(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Rp(t,e){return t.filters.filter(n=>n instanceof Oe&&n.field.isEqual(e))}function Gk(t,e,n){let r=rp,i=!0;for(const a of Rp(t,e)){let l=rp,d=!0;switch(a.op){case"<":case"<=":l=kz(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=rp}Bk({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];Bk({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}function Wk(t,e,n){let r=Ls,i=!0;for(const a of Rp(t,e)){let l=Ls,d=!0;switch(a.op){case">=":case">":l=Az(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Ls}$k({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];$k({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n=null,r=[],i=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.wt=null,this.gt=null,this.startAt,this.endAt}}function m4(t,e,n,r,i,a,l,d){return new qi(t,e,n,r,i,a,l,d)}function Ec(t){return new qi(t)}function Yk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $x(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ag(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Fx(t){return t.collectionGroup!==null}function ea(t){const e=oe(t);if(e.wt===null){e.wt=[];const n=Ag(e),r=$x(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Gl(n)),e.wt.push(new Gl(It.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Gl(It.keyField(),a))}}}return e.wt}function qn(t){const e=oe(t);if(!e.gt)if(e.limitType==="F")e.gt=Zb(e.path,e.collectionGroup,ea(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const a of ea(e)){const l=a.dir==="desc"?"asc":"desc";n.push(new Gl(a.field,l))}const r=e.endAt?new Hs(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Hs(e.startAt.position,e.startAt.inclusive):null;e.gt=Zb(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function Jb(t,e){e.getFirstInequalityField(),Ag(t);const n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mp(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return Dh(qn(t),qn(e))&&t.limitType===e.limitType}function p4(t){return`${da(qn(t))}|lt:${t.limitType}`}function ew(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>u4(r)).join(", ")}]`),_h(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),`Target(${n})`}(qn(t))}; limitType=${t.limitType})`}function Ih(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):re.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ea(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,a,l){const d=Fk(i,a,l);return i.inclusive?d<=0:d<0}(n.startAt,ea(n),r)||n.endAt&&!function(i,a,l){const d=Fk(i,a,l);return i.inclusive?d>=0:d>0}(n.endAt,ea(n),r))}(t,e)}function g4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y4(t){return(e,n)=>{let r=!1;for(const i of ea(t)){const a=Oz(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Oz(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,a,l){const d=a.data.field(i),f=l.data.field(i);return d!==null&&f!==null?qs(d,f):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function b4(t){return{integerValue:""+t}}function w4(t,e){return r4(e)?b4(e):v4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this._=void 0}}function Pz(t,e,n){return t instanceof ic?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ha?T4(t,e):t instanceof fa?S4(t,e):function(r,i){const a=x4(r,i),l=Kk(a)+Kk(r.It);return Kb(a)&&Kb(r.It)?b4(l):v4(r.Tt,l)}(t,e)}function Uz(t,e,n){return t instanceof ha?T4(t,e):t instanceof fa?S4(t,e):n}function x4(t,e){return t instanceof sc?Kb(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class ic extends _g{}class ha extends _g{constructor(e){super(),this.elements=e}}function T4(t,e){const n=C4(e);for(const r of t.elements)n.some(i=>hi(i,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends _g{constructor(e){super(),this.elements=e}}function S4(t,e){let n=C4(e);for(const r of t.elements)n=n.filter(i=>!hi(i,r));return{arrayValue:{values:n}}}class sc extends _g{constructor(e,n){super(),this.Tt=e,this.It=n}}function Kk(t){return Tt(t.integerValue||t.doubleValue)}function C4(t){return Gd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.field=e,this.transform=n}}function Vz(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ha&&r instanceof ha||n instanceof fa&&r instanceof fa?tc(n.elements,r.elements,hi):n instanceof sc&&r instanceof sc?hi(n.It,r.It):n instanceof ic&&r instanceof ic}(t.transform,e.transform)}class zz{constructor(e,n){this.version=e,this.transformResults=n}}class ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dg{}function E4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ac(t.key,ft.none()):new kc(t.key,t.data,ft.none());{const n=t.data,r=cn.empty();let i=new rt(It.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Hi(t.key,r,new Bn(i.toArray()),ft.none())}}function Bz(t,e,n){t instanceof kc?function(r,i,a){const l=r.value.clone(),d=Xk(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(r,i,a){if(!sp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Xk(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(k4(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function bd(t,e,n,r){return t instanceof kc?function(i,a,l,d){if(!sp(i.precondition,a))return l;const f=i.value.clone(),m=Zk(i.fieldTransforms,d,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(i,a,l,d){if(!sp(i.precondition,a))return l;const f=Zk(i.fieldTransforms,d,a),m=a.data;return m.setAll(k4(i)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return sp(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function $z(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=x4(r.transform,i||null);a!=null&&(n===null&&(n=cn.empty()),n.set(r.field,a))}return n||null}function Qk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&tc(n,r,(i,a)=>Vz(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kc extends Dg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends Dg{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function k4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xk(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,Uz(l,d,n[i]))}return r}function Zk(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,Pz(a,l,e))}return r}class Ac extends Dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qx extends Dg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ue;function A4(t){switch(t){default:return ce();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function _4(t){if(t===void 0)return jt("GRPC error has no .code"),F.UNKNOWN;switch(t){case Lt.OK:return F.OK;case Lt.CANCELLED:return F.CANCELLED;case Lt.UNKNOWN:return F.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return F.INTERNAL;case Lt.UNAVAILABLE:return F.UNAVAILABLE;case Lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Lt.NOT_FOUND:return F.NOT_FOUND;case Lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Lt.ABORTED:return F.ABORTED;case Lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Lt.DATA_LOSS:return F.DATA_LOSS;default:return ce()}}(Ue=Lt||(Lt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return n4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=new Ct(re.comparator);function $n(){return qz}const D4=new Ct(re.comparator);function dd(...t){let e=D4;for(const n of t)e=e.insert(n.key,n);return e}function j4(t){let e=D4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ni(){return wd()}function I4(){return wd()}function wd(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hz=new Ct(re.comparator),Gz=new rt(re.comparator);function De(...t){let e=Gz;for(const n of t)e=e.add(n);return e}const Wz=new rt(_e);function jg(){return Wz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Nh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mh(ge.min(),i,jg(),$n(),De())}}class Nh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nh(r,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class R4{constructor(e,n){this.targetId=e,this.Rt=n}}class M4{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Jk{constructor(){this.Pt=0,this.vt=tA(),this.bt=Bt.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return this.Pt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=De(),n=De(),r=De();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new Nh(this.bt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=tA()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class Yz{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=$n(),this.Kt=eA(),this.Gt=new rt(_e)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const a=i.target;if(Ip(a))if(r===0){const l=new re(a.path);this.zt(n,l,lt.newNoDocument(l,ge.min()))}else me(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&Ip(d.target)){const f=new re(d.target.path);this.Ut.get(f)!==null||this.ne(l,f)||this.zt(l,f,lt.newNoDocument(f,e))}a.Ct&&(n.set(l,a.Nt()),a.kt())}});let r=De();this.Kt.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const m=this.Xt(f);return!m||m.purpose===2||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Mh(e,n,this.Gt,this.Ut,r);return this.Ut=$n(),this.Kt=eA(),this.Gt=new rt(_e),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.$t(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new Jk,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new rt(_e),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Jk),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function eA(){return new Ct(re.comparator)}function tA(){return new Ct(re.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz={asc:"ASCENDING",desc:"DESCENDING"},Qz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xz={and:"AND",or:"OR"};class Zz{constructor(e,n){this.databaseId=e,this.yt=n}}function oc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N4(t,e){return t.yt?e.toBase64():e.toUint8Array()}function Jz(t,e){return oc(t,e.toTimestamp())}function Rt(t){return me(!!t),ge.fromTimestamp(function(e){const n=Fs(e);return new pt(n.seconds,n.nanos)}(t))}function Hx(t,e){return function(n){return new Ve(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function L4(t){const e=Ve.fromString(t);return me(q4(e)),e}function Wd(t,e){return Hx(t.databaseId,e.path)}function oi(t,e){const n=L4(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(P4(n))}function tw(t,e){return Hx(t.databaseId,e)}function O4(t){const e=L4(t);return e.length===4?Ve.emptyPath():P4(e)}function Yd(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P4(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nA(t,e,n){return{name:Wd(t,e),fields:n.value.mapValue.fields}}function U4(t,e,n){const r=oi(t,e.name),i=Rt(e.updateTime),a=e.createTime?Rt(e.createTime):ge.min(),l=new cn({mapValue:{fields:e.fields}}),d=lt.newFoundDocument(r,i,a,l);return n&&d.setHasCommittedMutations(),n?d.setHasCommittedMutations():d}function eB(t,e){return"found"in e?function(n,r){me(!!r.found),r.found.name,r.found.updateTime;const i=oi(n,r.found.name),a=Rt(r.found.updateTime),l=r.found.createTime?Rt(r.found.createTime):ge.min(),d=new cn({mapValue:{fields:r.found.fields}});return lt.newFoundDocument(i,a,l,d)}(t,e):"missing"in e?function(n,r){me(!!r.missing),me(!!r.readTime);const i=oi(n,r.missing),a=Rt(r.readTime);return lt.newNoDocument(i,a)}(t,e):ce()}function tB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,m){return f.yt?(me(m===void 0||typeof m=="string"),Bt.fromBase64String(m||"")):(me(m===void 0||m instanceof Uint8Array),Bt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const m=f.code===void 0?F.UNKNOWN:_4(f.code);return new Z(m,f.message||"")}(l);n=new M4(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oi(t,r.document.name),a=Rt(r.document.updateTime),l=r.document.createTime?Rt(r.document.createTime):ge.min(),d=new cn({mapValue:{fields:r.document.fields}}),f=lt.newFoundDocument(i,a,l,d),m=r.targetIds||[],g=r.removedTargetIds||[];n=new op(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oi(t,r.document),a=r.readTime?Rt(r.readTime):ge.min(),l=lt.newNoDocument(i,a),d=r.removedTargetIds||[];n=new op([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oi(t,r.document),a=r.removedTargetIds||[];n=new op([],a,i,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,a=new Fz(i),l=r.targetId;n=new R4(l,a)}}return n}function Kd(t,e){let n;if(e instanceof kc)n={update:nA(t,e.key,e.value)};else if(e instanceof Ac)n={delete:Wd(t,e.key)};else if(e instanceof Hi)n={update:nA(t,e.key,e.data),updateMask:aB(e.fieldMask)};else{if(!(e instanceof qx))return ce();n={verify:Wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ic)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ha)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.It};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Jz(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce()}(t,e.precondition)),n}function nw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ft.updateTime(Rt(i.updateTime)):i.exists!==void 0?ft.exists(i.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;if("setToServerValue"in l)me(l.setToServerValue==="REQUEST_TIME"),d=new ic;else if("appendMissingElements"in l){const m=l.appendMissingElements.values||[];d=new ha(m)}else if("removeAllFromArray"in l){const m=l.removeAllFromArray.values||[];d=new fa(m)}else"increment"in l?d=new sc(a,l.increment):ce();const f=It.fromServerFormat(l.fieldPath);return new Rh(f,d)}(t,i)):[];if(e.update){e.update.name;const i=oi(t,e.update.name),a=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(d){const f=d.fieldPaths||[];return new Bn(f.map(m=>It.fromServerFormat(m)))}(e.updateMask);return new Hi(i,a,l,n,r)}return new kc(i,a,n,r)}if(e.delete){const i=oi(t,e.delete);return new Ac(i,n)}if(e.verify){const i=oi(t,e.verify);return new qx(i,n)}return ce()}function nB(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,i){let a=r.updateTime?Rt(r.updateTime):Rt(i);return a.isEqual(ge.min())&&(a=Rt(i)),new zz(a,r.transformResults||[])}(n,e))):[]}function V4(t,e){return{documents:[tw(t,e.path)]}}function z4(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=tw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tw(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(f.length!==0)return F4(Je.create(f,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(m=>function(g){return{field:Ll(g.field),direction:iB(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=function(f,m){return f.yt||_h(m)?m:{value:m}}(t,e.limit);var d;return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),n}function B4(t){let e=O4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(g){const y=$4(g);return y instanceof Je&&Bx(y)?y.getFilters():[y]}(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(g=>function(y){return new Gl(Ol(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g)));let d=null;n.limit&&(d=function(g){let y;return y=typeof g=="object"?g.value:g,_h(y)?null:y}(n.limit));let f=null;n.startAt&&(f=function(g){const y=!!g.before,w=g.values||[];return new Hs(w,y)}(n.startAt));let m=null;return n.endAt&&(m=function(g){const y=!g.before,w=g.values||[];return new Hs(w,y)}(n.endAt)),m4(e,i,l,a,d,"F",f,m)}function rB(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ce()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function $4(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ol(e.unaryFilter.field);return Oe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ol(e.unaryFilter.field);return Oe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ol(e.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ol(e.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(e){return Oe.create(Ol(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Je.create(e.compositeFilter.filters.map(n=>$4(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ce()}}(e.compositeFilter.op))}(t):ce()}function iB(t){return Kz[t]}function sB(t){return Qz[t]}function oB(t){return Xz[t]}function Ll(t){return{fieldPath:t.canonicalString()}}function Ol(t){return It.fromServerFormat(t.fieldPath)}function F4(t){return t instanceof Oe?function(e){if(e.op==="=="){if(zk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NAN"}};if(Vk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(zk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NAN"}};if(Vk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(e.field),op:sB(e.op),value:e.value}}}(t):t instanceof Je?function(e){const n=e.getFilters().map(r=>F4(r));return n.length===1?n[0]:{compositeFilter:{op:oB(e.op),filters:n}}}(t):ce()}function aB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function q4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rA(e)),e=lB(t.get(n),e);return rA(e)}function lB(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function rA(t){return t+""}function ri(t){const e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Ve.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const l=t.indexOf("",a);switch((l<0||l>n)&&ce(),t.charAt(l+1)){case"":const d=t.substring(a,l);let f;i.length===0?f=d:(i+=d,f=i,i=""),r.push(f);break;case"":i+=t.substring(a,l),i+="\0";break;case"":i+=t.substring(a,l+1);break;default:ce()}a=l+2}return new Ve(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t,e){return[t,jn(e)]}function H4(t,e,n){return[t,jn(e),n]}const cB={},uB=["prefixPath","collectionGroup","readTime","documentId"],dB=["prefixPath","collectionGroup","documentId"],hB=["collectionGroup","readTime","prefixPath","documentId"],fB=["canonicalId","targetId"],mB=["targetId","path"],pB=["path","targetId"],gB=["collectionId","parent"],yB=["indexId","uid"],vB=["uid","sequenceNumber"],bB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wB=["indexId","uid","orderedDocumentKey"],xB=["userId","collectionPath","documentId"],TB=["userId","collectionPath","largestBatchId"],SB=["userId","collectionGroup","largestBatchId"],G4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CB=[...G4,"documentOverlays"],W4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Y4=W4,EB=[...Y4,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw extends t4{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Jt(t,e){const n=oe(t);return Rr.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Bz(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=I4();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=n.has(i.key)?null:d;const f=E4(l,d);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(n,r)=>Qk(n,r))&&tc(this.baseMutations,e.baseMutations,(n,r)=>Qk(n,r))}}class Wx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=Hz;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Wx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r,i,a=ge.min(),l=ge.min(),d=Bt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.oe=e}}function kB(t,e){let n;if(e.document)n=U4(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=re.fromSegments(e.noDocument.path),i=pa(e.noDocument.readTime);n=lt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce();{const r=re.fromSegments(e.unknownDocument.path),i=pa(e.unknownDocument.version);n=lt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new pt(r[0],r[1]);return ge.fromTimestamp(i)}(e.readTime)),n}function sA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,a){return{name:Wd(i,a.key),fields:a.data.value.mapValue.fields,updateTime:oc(i,a.version.toTimestamp()),createTime:oc(i,a.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ma(e.version)};else{if(!e.isUnknownDocument())return ce();r.unknownDocument={path:n.path.toArray(),version:ma(e.version)}}return r}function Np(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ma(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pa(t){const e=new pt(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function $o(t,e){const n=(e.baseMutations||[]).map(a=>nw(t.oe,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>nw(t.oe,a)),i=pt.fromMillis(e.localWriteTimeMs);return new Gx(e.batchId,i,n,r)}function hd(t){const e=pa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?pa(t.lastLimboFreeSnapshotVersion):ge.min();let r;var i;return t.query.documents!==void 0?(me((i=t.query).documents.length===1),r=qn(Ec(O4(i.documents[0])))):r=function(a){return qn(B4(a))}(t.query),new Us(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Bt.fromBase64String(t.resumeToken))}function Q4(t,e){const n=ma(e.snapshotVersion),r=ma(e.lastLimboFreeSnapshotVersion);let i;i=Ip(e.target)?V4(t.oe,e.target):z4(t.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:da(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Kx(t){const e=B4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mp(e,e.limit,"L"):e}function s1(t,e){return new Yx(e.largestBatchId,nw(t.oe,e.overlayMutation))}function oA(t,e){const n=e.path.lastSegment();return[t,jn(e.path.popLast()),n]}function aA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ma(r.readTime),documentKey:jn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{getBundleMetadata(e,n){return lA(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pa(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return lA(e).put({bundleId:(r=n).id,createTime:ma(Rt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return cA(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Kx(i.bundledQuery),readTime:pa(i.readTime)};var i})}saveNamedQuery(e,n){return cA(e).put(function(r){return{name:r.name,readTime:ma(Rt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function lA(t){return Jt(t,"bundles")}function cA(t){return Jt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new Ig(e,r)}getOverlay(e,n){return $u(e).get(oA(this.userId,n)).next(r=>r?s1(this.Tt,r):null)}getOverlays(e,n){const r=ni();return z.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((a,l)=>{const d=new Yx(n,l);i.push(this.ce(e,d))}),z.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(l=>i.add(jn(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push($u(e).Y("collectionPathOverlayIndex",d))}),z.waitFor(a)}getOverlaysForCollection(e,n,r){const i=ni(),a=jn(n),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return $u(e).W("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const m=s1(this.Tt,f);i.set(m.getKey(),m)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const a=ni();let l;const d=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $u(e).X({index:"collectionGroupOverlayIndex",range:d},(f,m,g)=>{const y=s1(this.Tt,m);a.size()<i||y.largestBatchId===l?(a.set(y.getKey(),y),l=y.largestBatchId):g.done()}).next(()=>a)}ce(e,n){return $u(e).put(function(r,i,a){const[l,d,f]=oA(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Kd(r.oe,a.mutation)}}(this.Tt,this.userId,n))}}function $u(t){return Jt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Fd(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(la(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?s4(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):ce()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),re.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}Fo.Ee=new Fo;function _B(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function uA(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const a=_B(255&n[i]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class DB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.Pe()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=uA(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=uA(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}be(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class jB{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class IB{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Fu{constructor(){this.Le=new DB,this.qe=new jB(this.Le),this.Ue=new IB(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qo(this.indexId,this.documentKey,this.arrayValue,r)}}function xs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=dA(t.arrayValue,e.arrayValue),n!==0?n:(n=dA(t.directionalValue,e.directionalValue),n!==0?n:re.comparator(t.documentKey,e.documentKey)))}function dA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){me(e.collectionGroup===this.collectionId);const n=Wb(e);if(n!==void 0&&!this.He(n))return!1;const r=Po(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Qe.length||!this.Ye(this.Qe[a++],l))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){var e,n;if(me(t instanceof Oe||t instanceof Je),t instanceof Oe){if(t instanceof h4){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(a=>Oe.create(t.field,"==",a)))||[];return Je.create(i,"or")}return t}const r=t.filters.map(i=>X4(i));return Je.create(r,t.op)}function MB(t){if(t.getFilters().length===0)return[];const e=ow(X4(t));return me(Z4(e)),iw(e)||sw(e)?[e]:e.getFilters()}function iw(t){return t instanceof Oe}function sw(t){return t instanceof Je&&Bx(t)}function Z4(t){return iw(t)||sw(t)||function(e){if(e instanceof Je&&Qb(e)){for(const n of e.getFilters())if(!iw(n)&&!sw(n))return!1;return!0}return!1}(t)}function ow(t){if(me(t instanceof Oe||t instanceof Je),t instanceof Oe)return t;if(t.filters.length===1)return ow(t.filters[0]);const e=t.filters.map(r=>ow(r));let n=Je.create(e,t.op);return n=Lp(n),Z4(n)?n:(me(n instanceof Je),me(rc(n)),me(n.filters.length>1),n.filters.reduce((r,i)=>Qx(r,i)))}function Qx(t,e){let n;return me(t instanceof Oe||t instanceof Je),me(e instanceof Oe||e instanceof Je),n=t instanceof Oe?e instanceof Oe?function(r,i){return Je.create([r,i],"and")}(t,e):hA(t,e):e instanceof Oe?hA(e,t):function(r,i){if(me(r.filters.length>0&&i.filters.length>0),rc(r)&&rc(i))return c4(r,i.getFilters());const a=Qb(r)?r:i,l=Qb(r)?i:r,d=a.filters.map(f=>Qx(f,l));return Je.create(d,"or")}(t,e),Lp(n)}function hA(t,e){if(rc(e))return c4(e,t.getFilters());{const n=e.filters.map(r=>Qx(t,r));return Je.create(n,"or")}}function Lp(t){if(me(t instanceof Oe||t instanceof Je),t instanceof Oe)return t;const e=t.getFilters();if(e.length===1)return Lp(e[0]);if(a4(t))return t;const n=e.map(i=>Lp(i)),r=[];return n.forEach(i=>{i instanceof Oe?r.push(i):i instanceof Je&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Je.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.Ze=new Xx}addToCollectionParentIndex(e,n){return this.Ze.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ar.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Xx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Ve.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=new Uint8Array(0);class LB{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new Xx,this.tn=new no(r=>da(r),(r,i)=>Dh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const a={collectionId:r,parent:jn(i)};return fA(e).put(a)}return z.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[QI(n),""],!1,!0);return fA(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==n)break;r.push(ri(l.parent))}return r})}addFieldIndex(e,n){const r=Tm(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(n);delete i.indexId;const a=r.add(i);if(n.indexState){const l=Hu(e);return a.next(d=>{l.put(aA(d,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return a.next()}deleteFieldIndex(e,n){const r=Tm(e),i=Hu(e),a=qu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=qu(e);let i=!0;const a=new Map;return z.forEach(this.en(n),l=>this.nn(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=De();const d=[];return z.forEach(a,(f,m)=>{var g;ee("IndexedDbIndexManager",`Using index ${g=f,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`} to execute ${da(n)}`);const y=function(I,q){const D=Wb(q);if(D===void 0)return null;for(const M of Rp(I,D.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(m,f),w=function(I,q){const D=new Map;for(const M of Po(q))for(const $ of Rp(I,M.fieldPath))switch($.op){case"==":case"in":D.set(M.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return D.set(M.fieldPath.canonicalString(),$.value),Array.from(D.values())}return null}(m,f),x=function(I,q){const D=[];let M=!0;for(const $ of Po(q)){const Q=$.kind===0?Gk(I,$.fieldPath,I.startAt):Wk(I,$.fieldPath,I.startAt);D.push(Q.value),M&&(M=Q.inclusive)}return new Hs(D,M)}(m,f),T=function(I,q){const D=[];let M=!0;for(const $ of Po(q)){const Q=$.kind===0?Wk(I,$.fieldPath,I.endAt):Gk(I,$.fieldPath,I.endAt);D.push(Q.value),M&&(M=Q.inclusive)}return new Hs(D,M)}(m,f),C=this.sn(f,m,x),A=this.sn(f,m,T),_=this.rn(f,m,w),L=this.on(f.indexId,y,C,x.inclusive,A,T.inclusive,_);return z.forEach(L,I=>r.J(I,n.limit).next(q=>{q.forEach(D=>{const M=re.fromSegments(D.documentKey);l.has(M)||(l=l.add(M),d.push(M))})}))}).next(()=>d)}return z.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=MB(Je.create(e.filters,"and")).map(r=>Zb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,a,l,d){const f=(n!=null?n.length:1)*Math.max(r.length,a.length),m=f/(n!=null?n.length:1),g=[];for(let y=0;y<f;++y){const w=n?this.un(n[y/m]):xm,x=this.cn(e,w,r[y%m],i),T=this.an(e,w,a[y%m],l),C=d.map(A=>this.cn(e,w,A,!0));g.push(...this.createRange(x,T,C))}return g}cn(e,n,r,i){const a=new qo(e,re.empty(),n,r);return i?a:a.Ge()}an(e,n,r,i){const a=new qo(e,re.empty(),n,r);return i?a.Ge():a}nn(e,n){const r=new RB(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,n){let r=2;const i=this.en(n);return z.forEach(i,a=>this.nn(e,a).next(l=>{l?r!==0&&l.fields.length<function(d){let f=new rt(It.comparator),m=!1;for(const g of d.filters)for(const y of g.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?m=!0:f=f.add(y.field));for(const g of d.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(m?1:0)}(a)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new Fu;for(const i of Po(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const l=r.Ke(i.kind);Fo.Ee.ae(a,l)}return r.Be()}un(e){const n=new Fu;return Fo.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new Fu;return Fo.Ee.ae(ua(this.databaseId,n),r.Ke(function(i){const a=Po(i);return a.length===0?0:a[a.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new Fu);let a=0;for(const l of Po(e)){const d=r[a++];for(const f of i)if(this.fn(n,l.fieldPath)&&Gd(d))i=this.dn(i,l,d);else{const m=f.Ke(l.kind);Fo.Ee.ae(d,m)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new Fu;f.seed(d.Be()),Fo.Ee.ae(l,f.Ke(n.kind)),a.push(f)}return a}fn(e,n){return!!e.filters.find(r=>r instanceof Oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Tm(e),i=Hu(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(a=>{const l=[];return z.forEach(a,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(m,g){const y=g?new jp(g.sequenceNumber,new ar(pa(g.readTime),new re(ri(g.documentKey)),g.largestBatchId)):jp.empty(),w=m.fields.map(([x,T])=>new yz(It.fromServerFormat(x),T));return new XI(m.indexId,m.collectionGroup,w,y)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:_e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Tm(e),a=Hu(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(d=>z.forEach(d,f=>a.put(aA(f.indexId,this.user,l,r)))))}updateIndexEntries(e,n){const r=new Map;return z.forEach(n,(i,a)=>{const l=r.get(i.collectionGroup);return(l?z.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),z.forEach(d,f=>this.mn(e,i,f).next(m=>{const g=this.gn(a,f);return m.isEqual(g)?z.resolve():this.yn(e,a,f,m,g)}))))})}pn(e,n,r,i){return qu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return qu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=qu(e);let a=new rt(xs);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(l,d)=>{a=a.add(new qo(r.indexId,n,d.arrayValue,d.directionalValue))}).next(()=>a)}gn(e,n){let r=new rt(xs);const i=this.hn(n,e);if(i==null)return r;const a=Wb(n);if(a!=null){const l=e.data.field(a.fieldPath);if(Gd(l))for(const d of l.arrayValue.values||[])r=r.add(new qo(n.indexId,e.key,this.un(d),i))}else r=r.add(new qo(n.indexId,e.key,xm,i));return r}yn(e,n,r,i,a){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const l=[];return function(d,f,m,g,y){const w=d.getIterator(),x=f.getIterator();let T=bl(w),C=bl(x);for(;T||C;){let A=!1,_=!1;if(T&&C){const L=m(T,C);L<0?_=!0:L>0&&(A=!0)}else T!=null?_=!0:A=!0;A?(g(C),C=bl(x)):_?(y(T),T=bl(w)):(T=bl(w),C=bl(x))}}(i,a,xs,d=>{l.push(this.pn(e,n,r,d))},d=>{l.push(this.In(e,n,r,d))}),z.waitFor(l)}wn(e){let n=1;return Hu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((l,d)=>xs(l,d)).filter((l,d,f)=>!d||xs(l,f[d-1])!==0);const i=[];i.push(e);for(const l of r){const d=xs(l,e),f=xs(l,n);if(d===0)i[0]=e.Ge();else if(d>0&&f<0)i.push(l),i.push(l.Ge());else if(f>0)break}i.push(n);const a=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];const d=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,xm,[]],f=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,xm,[]];a.push(IDBKeyRange.bound(d,f))}return a}Tn(e,n){return xs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(mA)}getMinOffset(e,n){return z.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||ce())).next(mA)}}function fA(t){return Jt(t,"collectionParents")}function qu(t){return Jt(t,"indexEntries")}function Tm(t){return Jt(t,"indexConfiguration")}function Hu(t){return Jt(t,"indexState")}function mA(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Ux(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ar(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Un{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),a=[],l=IDBKeyRange.only(n.batchId);let d=0;const f=r.X({range:l},(g,y,w)=>(d++,w.delete()));a.push(f.next(()=>{me(d===1)}));const m=[];for(const g of n.mutations){const y=H4(e,g.key.path,n.batchId);a.push(i.delete(y)),m.push(g.key)}return z.waitFor(a).next(()=>m)}function Op(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ce();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class Rg{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){me(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Rg(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{n=!1,l.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const a=Pl(e),l=Ts(e);return l.add({}).next(d=>{me(typeof d=="number");const f=new Gx(d,n,r,i),m=function(w,x,T){const C=T.baseMutations.map(_=>Kd(w.oe,_)),A=T.mutations.map(_=>Kd(w.oe,_));return{userId:x,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:C,mutations:A}}(this.Tt,this.userId,f),g=[];let y=new rt((w,x)=>_e(w.canonicalString(),x.canonicalString()));for(const w of i){const x=H4(this.userId,w.key.path,d);y=y.add(w.key.path.popLast()),g.push(l.put(m)),g.push(a.put(x,cB))}return y.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.En[d]=f.keys()}),z.waitFor(g).next(()=>f)})}lookupMutationBatch(e,n){return Ts(e).get(n).next(r=>r?(me(r.userId===this.userId),$o(this.Tt,r)):null)}An(e,n){return this.En[n]?z.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ts(e).X({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&(me(d.batchId>=r),a=$o(this.Tt,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ts(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ts(e).W("userMutationsIndex",n).next(r=>r.map(i=>$o(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ap(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Pl(e).X({range:i},(l,d,f)=>{const[m,g,y]=l,w=ri(g);if(m===this.userId&&n.path.isEqual(w))return Ts(e).get(y).next(x=>{if(!x)throw ce();me(x.userId===this.userId),a.push($o(this.Tt,x))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(_e);const i=[];return n.forEach(a=>{const l=ap(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=Pl(e).X({range:d},(m,g,y)=>{const[w,x,T]=m,C=ri(x);w===this.userId&&a.path.isEqual(C)?r=r.add(T):y.done()});i.push(f)}),z.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=ap(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new rt(_e);return Pl(e).X({range:l},(f,m,g)=>{const[y,w,x]=f,T=ri(w);y===this.userId&&r.isPrefixOf(T)?T.length===i&&(d=d.add(x)):g.done()}).next(()=>this.Rn(e,d))}Rn(e,n){const r=[],i=[];return n.forEach(a=>{i.push(Ts(e).get(a).next(l=>{if(l===null)throw ce();me(l.userId===this.userId),r.push($o(this.Tt,l))}))}),z.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return J4(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Pn(n.batchId)}),z.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return z.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Pl(e).X({range:r},(a,l,d)=>{if(a[0]===this.userId){const f=ri(a[1]);i.push(f)}else d.done()}).next(()=>{me(i.length===0)})})}containsKey(e,n){return e6(e,this.userId,n)}vn(e){return t6(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function e6(t,e,n){const r=ap(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Pl(t).X({range:a,Z:!0},(d,f,m)=>{const[g,y,w]=d;g===e&&y===i&&(l=!0),m.done()}).next(()=>l)}function Ts(t){return Jt(t,"mutations")}function Pl(t){return Jt(t,"documentMutations")}function t6(t){return Jt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new ga(0)}static Sn(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new ga(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>ge.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>wl(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(me(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const a=[];return wl(e).X((l,d)=>{const f=hd(d);f.sequenceNumber<=n&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))}).next(()=>z.waitFor(a)).next(()=>i)}forEachTarget(e,n){return wl(e).X((r,i)=>{const a=hd(i);n(a)})}Dn(e){return gA(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}Cn(e,n){return gA(e).put("targetGlobalKey",n)}xn(e,n){return wl(e).put(Q4(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=da(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return wl(e).X({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const m=hd(d);Dh(n,m.target)&&(a=m,f.done())}).next(()=>a)}addMatchingKeys(e,n,r){const i=[],a=Ms(e);return n.forEach(l=>{const d=jn(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),z.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ms(e);return z.forEach(n,a=>{const l=jn(a.path);return z.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,n){const r=Ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ms(e);let a=De();return i.X({range:r,Z:!0},(l,d,f)=>{const m=ri(l[1]),g=new re(m);a=a.add(g)}).next(()=>a)}containsKey(e,n){const r=jn(n.path),i=IDBKeyRange.bound([r],[QI(r)],!1,!0);let a=0;return Ms(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,d],f,m)=>{l!==0&&(a++,m.done())}).next(()=>a>0)}ie(e,n){return wl(e).get(n).next(r=>r?hd(r):null)}}function wl(t){return Jt(t,"targets")}function gA(t){return Jt(t,"targetGlobal")}function Ms(t){return Jt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA([t,e],[n,r]){const i=_e(t,n);return i===0?_e(e,r):i}class PB{constructor(e){this.kn=e,this.buffer=new rt(yA),this.$n=0}Mn(){return++this.$n}On(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class UB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Fn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return this.Fn!==null}Bn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Fn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Bn(3e5)})}}class VB{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve(zn.at);const r=new PB(n);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(pA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pA):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,a,l,d,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,d=Date.now(),this.removeTargets(e,r,n))).next(y=>(a=y,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(m=Date.now(),Gb()<=$e.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${y} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:y})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new VB(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return Sm(e,r)}removeReference(e,n,r){return Sm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Sm(e,n)}jn(e,n){return function(r,i){let a=!1;return t6(r).tt(l=>e6(r,l,i).next(d=>(d&&(a=!0),z.resolve(!d)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(l,d)=>{if(d<=n){const f=this.jn(e,l).next(m=>{if(!m)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ge.min()),Ms(e).delete([0,jn(l.path)])))});i.push(f)}}).next(()=>z.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Sm(e,n)}Qn(e,n){const r=Ms(e);let i,a=zn.at;return r.X({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:m})=>{l===0?(a!==zn.at&&n(new re(ri(i)),a),a=m,i=f):a=zn.at}).next(()=>{a!==zn.at&&n(new re(ri(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sm(t,e){return Ms(t).put(function(n,r){return{targetId:0,path:jn(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Eo(e).put(r)}removeEntry(e,n,r){return Eo(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Np(a),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=lt.newInvalidDocument(n);return Eo(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(n))},(i,a)=>{r=this.Wn(n,a)}).next(()=>r)}Hn(e,n){let r={size:0,document:lt.newInvalidDocument(n)};return Eo(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Gu(n))},(i,a)=>{r={document:this.Wn(n,a),size:Op(a)}}).next(()=>r)}getEntries(e,n){let r=$n();return this.Jn(e,n,(i,a)=>{const l=this.Wn(i,a);r=r.insert(i,l)}).next(()=>r)}Yn(e,n){let r=$n(),i=new Ct(re.comparator);return this.Jn(e,n,(a,l)=>{const d=this.Wn(a,l);r=r.insert(a,d),i=i.insert(a,Op(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return z.resolve();let i=new rt(wA);n.forEach(f=>i=i.add(f));const a=IDBKeyRange.bound(Gu(i.first()),Gu(i.last())),l=i.getIterator();let d=l.getNext();return Eo(e).X({index:"documentKeyIndex",range:a},(f,m,g)=>{const y=re.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&wA(d,y)<0;)r(d,null),d=l.getNext();d&&d.isEqual(y)&&(r(d,m),d=l.hasNext()?l.getNext():null),d?g.j(Gu(d)):g.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const a=n.path,l=[a.popLast().toArray(),a.lastSegment(),Np(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eo(e).W(IDBKeyRange.bound(l,d,!0)).next(f=>{let m=$n();for(const g of f){const y=this.Wn(re.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);y.isFoundDocument()&&(Ih(n,y)||i.has(y.key))&&(m=m.insert(y.key,y))}return m})}getAllFromCollectionGroup(e,n,r,i){let a=$n();const l=bA(n,r),d=bA(n,ar.max());return Eo(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,m,g)=>{const y=this.Wn(re.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(y.key,y),a.size===i&&g.done()}).next(()=>a)}newChangeBuffer(e){return new $B(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return vA(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}zn(e,n){return vA(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=kB(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(ge.min())))return r}return lt.newInvalidDocument(e)}}function r6(t){return new BB(t)}class $B extends n6{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new no(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new rt((a,l)=>_e(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.ts.get(a);if(n.push(this.Xn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=sA(this.Xn.Tt,l);i=i.add(a.path.popLast());const m=Op(f);r+=m-d.size,n.push(this.Xn.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=sA(this.Xn.Tt,l.convertToNoDocument(ge.min()));n.push(this.Xn.addEntry(e,a,f))}}),i.forEach(a=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),n.push(this.Xn.updateMetadata(e,r)),z.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((a,l)=>{this.ts.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function vA(t){return Jt(t,"remoteDocumentGlobal")}function Eo(t){return Jt(t,"remoteDocumentsV14")}function Gu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bA(t,e){const n=e.documentKey.path.toArray();return[t,Np(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=_e(n[a],r[a]),i)return i;return i=_e(n.length,r.length),i||(i=_e(n[n.length-2],r[r.length-2]),i||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bd(r.mutation,i,Bn.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,De()).next(()=>r))}getLocalViewOfDocuments(e,n,r=De()){const i=ni();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=dd();return a.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,De()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,r,i){let a=$n();const l=wd(),d=wd();return n.forEach((f,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof Hi)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),bd(g.mutation,m,g.mutation.getFieldMask(),pt.now())):l.set(m.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,g)=>l.set(m,g)),n.forEach((m,g)=>{var y;return d.set(m,new FB(g,(y=l.get(m))!==null&&y!==void 0?y:null))}),d))}recalculateAndSaveOverlays(e,n){const r=wd();let i=new Ct((l,d)=>l-d),a=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let g=r.get(f)||Bn.empty();g=d.applyToLocalView(m,g),r.set(f,g);const y=(i.get(d.batchId)||De()).add(f);i=i.insert(d.batchId,y)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,g=f.value,y=I4();g.forEach(w=>{if(!a.has(w)){const x=E4(n.get(w),r.get(w));x!==null&&y.set(w,x),a=a.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,y))}return z.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):z.resolve(ni());let d=-1,f=a;return l.next(m=>z.forEach(m,(g,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),a.get(g)?z.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{f=f.insert(g,w)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,De())).next(g=>({batchId:d,changes:j4(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let a=dd();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,d=>{const f=function(m,g){return new qi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(a=>{i.forEach((d,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,lt.newInvalidDocument(m)))});let l=dd();return a.forEach((d,f)=>{const m=i.get(d);m!==void 0&&bd(m.mutation,f,Bn.empty(),pt.now()),Ih(n,f)&&(l=l.insert(d,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return z.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Rt(r.createTime)}),z.resolve()}getNamedQuery(e,n){return z.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:Kx(r.bundledQuery),readTime:Rt(r.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB{constructor(){this.overlays=new Ct(re.comparator),this.ss=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ni();return z.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ce(e,n,a)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=ni(),a=n.length+1,l=new re(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Ct((m,g)=>m-g);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=ni(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const d=ni(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,g)=>d.set(m,g)),!(d.size()>=i)););return z.resolve(d)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Yx(n,r));let a=this.ss.get(n);a===void 0&&(a=De(),this.ss.set(n,a)),this.ss.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.rs=new rt(Wt.os),this.us=new rt(Wt.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new Wt(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new re(new Ve([])),r=new Wt(n,e),i=new Wt(n,e+1),a=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),a.push(l.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new re(new Ve([])),r=new Wt(n,e),i=new Wt(n,e+1);let a=De();return this.us.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Wt(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return re.comparator(e.key,n.key)||_e(e.gs,n.gs)}static cs(e,n){return _e(e.gs,n.gs)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new rt(Wt.os)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Gx(a,n,r,i);this.mutationQueue.push(l);for(const d of i)this.ps=this.ps.add(new Wt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return z.resolve(l)}lookupMutationBatch(e,n){return z.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),a=i<0?0:i;return z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],l=>{const d=this.Is(l.gs);a.push(d)}),z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(_e);return n.forEach(i=>{const a=new Wt(i,0),l=new Wt(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,l],d=>{r=r.add(d.gs)})}),z.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;re.isDocumentKey(a)||(a=a.child(""));const l=new Wt(new re(a),0);let d=new rt(_e);return this.ps.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.gs)),!0)},l),z.resolve(this.Es(d))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return z.forEach(n.mutations,i=>{const a=new Wt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,n){const r=new Wt(n,0),i=this.ps.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.Rs=e,this.docs=new Ct(re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():lt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=$n();const l=n.path,d=new re(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Ux(JI(g),r)<=0||(i.has(g.key)||Ih(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return z.resolve(a)}getAllFromCollectionGroup(e,n,r,i){ce()}Ps(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YB(this)}getSize(e){return z.resolve(this.size)}}class YB extends n6{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e){this.persistence=e,this.vs=new no(n=>da(n),Dh),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Zx,this.targetCount=0,this.Ss=ga.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),z.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new ga(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.xn(n),z.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.vs.forEach((l,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.vs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),z.waitFor(a).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),z.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new zn(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new KB(this),this.indexManager=new NB,this.remoteDocumentCache=function(r){return new WB(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new K4(n),this.$s=new qB(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new GB(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new QB(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,n){return z.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class QB extends t4{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.Bs=new Zx,this.Ls=null}static qs(e){return new Mg(e)}get Us(){if(this.Ls)return this.Ls;throw ce()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),z.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Us,r=>{const i=re.fromPath(r);return this.Ks(e,i).next(a=>{a||n.removeEntry(i,ge.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return z.or([()=>z.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.Tt=e}F(e,n,r,i){const a=new kg("createOrUpgrade",n);r<1&&i>=1&&(function(d){d.createObjectStore("owner")}(e),function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0}),d.createObjectStore("documentMutations")}(e),xA(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=z.resolve();return r<3&&i>=3&&(r!==0&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),xA(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(a))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(d,f){return f.store("mutations").W().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iA,{unique:!0});const g=f.store("mutations"),y=m.map(w=>g.put(w));return z.waitFor(y)})}(e,a))),l=l.next(()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(l=l.next(()=>this.js(a))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:xB});f.createIndex("collectionPathOverlayIndex",TB,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",SB,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:uB});f.createIndex("documentKeyIndex",dB),f.createIndex("collectionGroupIndex",hB)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:yB}).createIndex("sequenceNumberIndex",vB,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:bB}).createIndex("documentKeyIndex",wB,{unique:!1})}(e))),l}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Op(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>z.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>z.forEach(d,f=>{me(f.userId===a.userId);const m=$o(this.Tt,f);return J4(e,a.userId,m).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,d)=>{const f=new Ve(l),m=function(g){return[0,jn(g)]}(f);a.push(n.get(m).next(g=>g?z.resolve():(y=>n.put({targetId:0,path:jn(y),sequenceNumber:i.highestListenSequenceNumber}))(f)))}).next(()=>z.waitFor(a))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:gB});const r=n.store("collectionParents"),i=new Xx,a=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:jn(f)})}};return n.store("remoteDocuments").X({Z:!0},(l,d)=>{const f=new Ve(l);return a(f.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([l,d,f],m)=>{const g=ri(d);return a(g.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const a=hd(i),l=Q4(this.Tt,a);return n.put(l)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((a,l)=>{const d=n.store("remoteDocumentsV14"),f=(m=l,m.document?new re(Ve.fromString(m.document.name).popFirst(5)):m.noDocument?re.fromSegments(m.noDocument.path):m.unknownDocument?re.fromSegments(m.unknownDocument.path):ce()).path.toArray();var m;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(g))}).next(()=>z.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=r6(this.Tt),a=new s6(Mg.qs,this.Tt.oe);return r.W().next(l=>{const d=new Map;return l.forEach(f=>{var m;let g=(m=d.get(f.userId))!==null&&m!==void 0?m:De();$o(this.Tt,f).keys().forEach(y=>g=g.add(y)),d.set(f.userId,g)}),z.forEach(d,(f,m)=>{const g=new Yt(m),y=Ig.ue(this.Tt,g),w=a.getIndexManager(g),x=Rg.ue(g,this.Tt,w,a.referenceDelegate);return new i6(i,x,y,w).recalculateAndSaveOverlaysForDocumentKeys(new rw(n,zn.at),f).next()})})}}function xA(t){t.createObjectStore("targetDocuments",{keyPath:mB}).createIndex("documentTargetsIndex",pB,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fB,{unique:!0}),t.createObjectStore("targetGlobal")}const o1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jx{constructor(e,n,r,i,a,l,d,f,m,g,y=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=l,this.document=d,this.Zs=m,this.Xs=g,this.ti=y,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=w=>Promise.resolve(),!Jx.C())throw new Z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zB(this,i),this.oi=n+"main",this.Tt=new K4(f),this.ui=new Rr(this.oi,this.ti,new XB(this.Tt)),this.Ns=new OB(this.referenceDelegate,this.Tt),this.remoteDocumentCache=r6(this.Tt),this.$s=new AB,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,g===!1&&jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,o1);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new zn(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(to(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Wu(e).get("owner").next(n=>z.resolve(this.yi(n)))}pi(e){return Cm(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Jt(n,"clientMetadata");return r.W().next(i=>{const a=this.Ei(i,18e5),l=i.filter(d=>a.indexOf(d)===-1);return z.forEach(l,d=>r.delete(d.clientId)).next(()=>l)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?z.resolve(!0):Wu(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,o1);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cm(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(a||l&&d)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new rw(e,zn.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Cm(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Rg.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LB(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Ig.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(l=this.ti)===15?EB:l===14?Y4:l===13?W4:l===12?CB:l===11?G4:void ce();var l;let d;return this.ui.runTransaction(e,i,a,f=>(d=new rw(f,this.Cs?this.Cs.next():zn.at),n==="readwrite-primary"?this._i(d).next(m=>!!m||this.wi(d)).next(m=>{if(!m)throw jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Z(F.FAILED_PRECONDITION,e4);return r(d)}).next(m=>this.gi(d).next(()=>m)):this.Di(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Di(e){return Wu(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Z(F.FAILED_PRECONDITION,o1)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wu(e).put("owner",n)}static C(){return Rr.C()}mi(e){const n=Wu(e);return n.get("owner").next(r=>this.yi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):z.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(jt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.Pi();const n=/(?:Version|Mobile)\/1[456]/;IP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return jt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){jt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wu(t){return Jt(t,"owner")}function Cm(t){return Jt(t,"clientMetadata")}function e2(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=De(),i=De();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new t2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(a=>a||this.Oi(e,n,i,r)).next(a=>a||this.Fi(e,n))}Mi(e,n){if(Yk(n))return z.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mp(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=De(...a);return this.$i.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.Bi(n,d);return this.Li(n,m,l,f.readTime)?this.Mi(e,Mp(n,null,"F")):this.qi(e,m,n,f)}))})))}Oi(e,n,r,i){return Yk(n)||i.isEqual(ge.min())?this.Fi(e,n):this.$i.getDocuments(e,r).next(a=>{const l=this.Bi(n,a);return this.Li(n,l,r,i)?this.Fi(e,n):(Gb()<=$e.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ew(n)),this.qi(e,l,n,ZI(i,-1)))})}Bi(e,n){let r=new rt(y4(e));return n.forEach((i,a)=>{Ih(e,a)&&(r=r.add(a))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,n){return Gb()<=$e.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ew(n)),this.$i.getDocumentsMatchingQuery(e,n,ar.min())}qi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new Ct(_e),this.Gi=new no(a=>da(a),Dh),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i6(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function a6(t,e,n,r){return new ZB(t,e,n,r)}async function l6(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let f=De();for(const m of i){l.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of a){d.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(m=>({Wi:m,removedBatchIds:l,addedBatchIds:d}))})})}function JB(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.ji.newChangeBuffer({trackRemovals:!0});return function(l,d,f,m){const g=f.batch,y=g.keys();let w=z.resolve();return y.forEach(x=>{w=w.next(()=>m.getEntry(d,x)).next(T=>{const C=f.docVersions.get(x);me(C!==null),T.version.compareTo(C)<0&&(g.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),m.addEntry(T)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(d,g))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=De();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function c6(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function e$(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const d=[];e.targetChanges.forEach((g,y)=>{const w=i.get(y);if(!w)return;d.push(n.Ns.removeMatchingKeys(a,g.removedDocuments,y).next(()=>n.Ns.addMatchingKeys(a,g.addedDocuments,y)));let x=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.has(y)?x=x.withResumeToken(Bt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,r)),i=i.insert(y,x),function(T,C,A){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(w,x,g)&&d.push(n.Ns.updateTargetData(a,x))});let f=$n(),m=De();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),d.push(u6(a,l,e.documentUpdates).next(g=>{f=g.Hi,m=g.Ji})),!r.isEqual(ge.min())){const g=n.Ns.getLastRemoteSnapshotVersion(a).next(y=>n.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(g)}return z.waitFor(d).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(n.Ki=i,a))}function u6(t,e,n){let r=De(),i=De();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=$n();return n.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(ge.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):ee("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Hi:l,Ji:i}})}function t$(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ac(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(a=>a?(i=a,z.resolve(i)):n.Ns.allocateTargetId(r).next(l=>(i=new Us(e,l,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function lc(t,e,n){const r=oe(t),i=r.Ki.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!to(l))throw l;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Pp(t,e,n){const r=oe(t);let i=ge.min(),a=De();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,m){const g=oe(d),y=g.Gi.get(m);return y!==void 0?z.resolve(g.Ki.get(y)):g.Ns.getTargetData(f,m)}(r,l,qn(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,n?i:ge.min(),n?a:De())).next(d=>(f6(r,g4(e),d),{documents:d,Yi:a})))}function d6(t,e){const n=oe(t),r=oe(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(l=>l?l.target:null))}function h6(t,e){const n=oe(t),r=n.Qi.get(e)||ge.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,ZI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(f6(n,e,i),i))}function f6(t,e,n){let r=t.Qi.get(e)||ge.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Qi.set(e,r)}async function n$(t,e,n,r){const i=oe(t);let a=De(),l=$n();for(const m of n){const g=e.Zi(m.metadata.name);m.document&&(a=a.add(g));const y=e.Xi(m);y.setReadTime(e.tr(m.metadata.readTime)),l=l.insert(g,y)}const d=i.ji.newChangeBuffer({trackRemovals:!0}),f=await ac(i,function(m){return qn(Ec(Ve.fromString(`__bundle__/docs/${m}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",m=>u6(m,d,l).next(g=>(d.apply(m),g)).next(g=>i.Ns.removeMatchingKeysForTargetId(m,f.targetId).next(()=>i.Ns.addMatchingKeys(m,a,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(m,g.Hi,g.Ji)).next(()=>g.Hi)))}async function r$(t,e,n=De()){const r=await ac(t,qn(Kx(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Rt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.$s.saveNamedQuery(a,e);const d=r.withResumeToken(Bt.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(d.targetId,d),i.Ns.updateTargetData(a,d).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,n,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}function TA(t,e){return`firestore_clients_${t}_${e}`}function SA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function a1(t,e){return`firestore_targets_${t}_${e}`}class Up{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new Z(i.error.code,i.error.message))),l?new Up(e,n,i.state,a):(jt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Z(r.error.code,r.error.message))),a?new xd(e,r.state,i):(jt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=jg();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=r4(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Vp(e,a):(jt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class n2{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new n2(n.clientId,n.onlineState):(jt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class aw{constructor(){this.activeTargetIds=jg()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l1{constructor(e,n,r,i,a){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ct(_e),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=TA(this.persistenceKey,this.rr),this.dr=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new aw),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.yr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(TA(this.persistenceKey,r));if(i){const a=Vp.er(r,i);a&&(this.ar=this.ar.insert(a.clientId,a))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(a1(this.persistenceKey,e));if(r){const i=xd.er(e,r);i&&(n=i.state)}}return this.Pr.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(a1(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(ee("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.$r(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let a=zn.at;if(i!=null)try{const l=JSON.parse(i);me(typeof l=="number"),a=l}catch(l){jt("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(n.newValue);r!==zn.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Fr(i)))}}}else this.hr.push(n)})}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,n,r){const i=new Up(this.currentUser,e,n,r),a=SA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const n=SA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=a1(this.persistenceKey,e),a=new xd(e,n,r);this.setItem(i,a.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Vp.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Up.er(new Yt(a),i,n)}$r(e,n){const r=this.mr.exec(e),i=Number(r[1]);return xd.er(i,n)}Ir(e){return n2.er(e)}Or(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),l=[],d=[];return a.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.qr(l,d).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=jg();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class m6{constructor(){this.Ur=new aw,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new aw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em=null;function c1(){return Em===null?Em=268435456+Math.round(2147483648*Math.random()):Em++,"0x"+Em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class a$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,a){const l=c1(),d=this.fo(e,n);ee("RestConnection",`Sending RPC '${e}' ${l}:`,d,r);const f={};return this._o(f,i,a),this.wo(e,d,f,r).then(m=>(ee("RestConnection",`Received RPC '${e}' ${l}: `,m),m),m=>{throw ec("RestConnection",`RPC '${e}' ${l} failed with error: `,m,"url: ",d,"request:",r),m})}mo(e,n,r,i,a,l){return this.lo(e,n,r,i,a)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,n){const r=s$[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){const a=c1();return new Promise((l,d)=>{const f=new iz;f.setWithCredentials(!0),f.listenOnce(tz.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case i1.NO_ERROR:const g=f.getResponseJson();ee(vn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case i1.TIMEOUT:ee(vn,`RPC '${e}' ${a} timed out`),d(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case i1.HTTP_ERROR:const y=f.getStatus();if(ee(vn,`RPC '${e}' ${a} failed with status:`,y,"response text:",f.getResponseText()),y>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w==null?void 0:w.error;if(x&&x.status&&x.message){const T=function(C){const A=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(A)>=0?A:F.UNKNOWN}(x.status);d(new Z(T,x.message))}else d(new Z(F.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{ee(vn,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(i);ee(vn,`RPC '${e}' ${a} sending request:`,i),f.send(n,"POST",m,r,15)})}yo(e,n,r){const i=c1(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=JV(),d=ez(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new rz({})),this._o(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const m=a.join("");ee(vn,`Creating RPC '${e}' stream ${i}: ${m}`,f);const g=l.createWebChannel(m,f);let y=!1,w=!1;const x=new o$({Yr:C=>{w?ee(vn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(y||(ee(vn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),y=!0),ee(vn,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},Zr:()=>g.close()}),T=(C,A,_)=>{C.listen(A,L=>{try{_(L)}catch(I){setTimeout(()=>{throw I},0)}})};return T(g,bm.EventType.OPEN,()=>{w||ee(vn,`RPC '${e}' stream ${i} transport opened.`)}),T(g,bm.EventType.CLOSE,()=>{w||(w=!0,ee(vn,`RPC '${e}' stream ${i} transport closed`),x.oo())}),T(g,bm.EventType.ERROR,C=>{w||(w=!0,ec(vn,`RPC '${e}' stream ${i} transport errored:`,C),x.oo(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),T(g,bm.EventType.MESSAGE,C=>{var A;if(!w){const _=C.data[0];me(!!_);const L=_,I=L.error||((A=L[0])===null||A===void 0?void 0:A.error);if(I){ee(vn,`RPC '${e}' stream ${i} received error:`,I);const q=I.status;let D=function($){const Q=Lt[$];if(Q!==void 0)return _4(Q)}(q),M=I.message;D===void 0&&(D=F.INTERNAL,M="Unknown error status: "+q+" with message "+I.message),w=!0,x.oo(new Z(D,M)),g.close()}else ee(vn,`RPC '${e}' stream ${i} received:`,_),x.uo(_)}}),T(d,nz.STAT_EVENT,C=>{C.stat===Nk.PROXY?ee(vn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Nk.NOPROXY&&ee(vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.ro()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(){return typeof window<"u"?window:null}function lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){return new Zz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n,r,i,a,l,d,f){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new r2(e,n)}$o(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(jt(n.toString()),jt("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class l$ extends g6{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.Tt=a}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=tB(this.Tt,e),r=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?Rt(a.readTime):ge.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Yd(this.Tt),n.addTarget=function(i,a){let l;const d=a.target;return l=Ip(d)?{documents:V4(i,d)}:{query:z4(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=N4(i,a.resumeToken):a.snapshotVersion.compareTo(ge.min())>0&&(l.readTime=oc(i,a.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=rB(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Yd(this.Tt),n.removeTarget=e,this.qo(n)}}class c$ extends g6{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=nB(e.writeResults,e.commitTime),r=Rt(e.commitTime);return this.listener.eu(r,n)}return me(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Yd(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Kd(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,n,r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.mo(e,n,r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class d${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(jt(n),this.cu=!1):ee("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(l=>{r.enqueueAndForget(async()=>{ro(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=oe(d);f.mu.add(4),await _c(f),f.pu.set("Unknown"),f.mu.delete(4),await Oh(f)}(this))})}),this.pu=new d$(r,i)}}async function Oh(t){if(ro(t))for(const e of t.gu)await e(!0)}async function _c(t){for(const e of t.gu)await e(!1)}function Ng(t,e){const n=oe(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),o2(n)?s2(n):jc(n).Mo()&&i2(n,e))}function Qd(t,e){const n=oe(t),r=jc(n);n.wu.delete(e),r.Mo()&&y6(n,e),n.wu.size===0&&(r.Mo()?r.Bo():ro(n)&&n.pu.set("Unknown"))}function i2(t,e){t.Iu.Ot(e.targetId),jc(t).Jo(e)}function y6(t,e){t.Iu.Ot(e),jc(t).Yo(e)}function s2(t){t.Iu=new Yz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),jc(t).start(),t.pu.au()}function o2(t){return ro(t)&&!jc(t).$o()&&t.wu.size>0}function ro(t){return oe(t).mu.size===0}function v6(t){t.Iu=void 0}async function f$(t){t.wu.forEach((e,n)=>{i2(t,e)})}async function m$(t,e){v6(t),o2(t)?(t.pu.fu(e),s2(t)):t.pu.set("Unknown")}async function p$(t,e,n){if(t.pu.set("Online"),e instanceof M4&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.wu.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.wu.delete(l),r.Iu.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zp(t,r)}else if(e instanceof op?t.Iu.Qt(e):e instanceof R4?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(ge.min()))try{const r=await c6(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Iu.ee(a);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=i.wu.get(f);m&&i.wu.set(f,m.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const f=i.wu.get(d);if(!f)return;i.wu.set(d,f.withResumeToken(Bt.EMPTY_BYTE_STRING,f.snapshotVersion)),y6(i,d);const m=new Us(f.target,d,1,f.sequenceNumber);i2(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await zp(t,r)}}async function zp(t,e,n){if(!to(e))throw e;t.mu.add(1),await _c(t),t.pu.set("Offline"),n||(n=()=>c6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Oh(t)})}function b6(t,e){return e().catch(n=>zp(t,n,e))}async function Dc(t){const e=oe(t),n=Gs(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;g$(e);)try{const i=await t$(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,y$(e,i)}catch(i){await zp(e,i)}w6(e)&&x6(e)}function g$(t){return ro(t)&&t._u.length<10}function y$(t,e){t._u.push(e);const n=Gs(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function w6(t){return ro(t)&&!Gs(t).$o()&&t._u.length>0}function x6(t){Gs(t).start()}async function v$(t){Gs(t).su()}async function b$(t){const e=Gs(t);for(const n of t._u)e.tu(n.mutations)}async function w$(t,e,n){const r=t._u.shift(),i=Wx.from(r,e,n);await b6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Dc(t)}async function x$(t,e){e&&Gs(t).Xo&&await async function(n,r){if(i=r.code,A4(i)&&i!==F.ABORTED){const a=n._u.shift();Gs(n).Fo(),await b6(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,r)),await Dc(n)}var i}(t,e),w6(t)&&x6(t)}async function EA(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.mu.add(3),await _c(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Oh(n)}async function lw(t,e){const n=oe(t);e?(n.mu.delete(2),await Oh(n)):e||(n.mu.add(2),await _c(n),n.pu.set("Unknown"))}function jc(t){return t.Tu||(t.Tu=function(e,n,r){const i=oe(e);return i.ru(),new l$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:f$.bind(null,t),no:m$.bind(null,t),Ho:p$.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.Fo(),o2(t)?s2(t):t.pu.set("Unknown")):(await t.Tu.stop(),v6(t))})),t.Tu}function Gs(t){return t.Eu||(t.Eu=function(e,n,r){const i=oe(e);return i.ru(),new c$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:v$.bind(null,t),no:x$.bind(null,t),nu:b$.bind(null,t),eu:w$.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.Fo(),await Dc(t)):(await t.Eu.stop(),t._u.length>0&&(ee("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,d=new a2(e,n,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ic(t,e){if(jt("AsyncQueue",`${e}: ${t}`),to(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=dd(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new Wl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.Au=new Ct(re.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):ce():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class cc{constructor(e,n,r,i,a,l,d,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new cc(e,n,Wl.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(){this.Pu=void 0,this.listeners=[]}}class S${constructor(){this.queries=new no(e=>p4(e),jh),this.onlineState="Unknown",this.vu=new Set}}async function l2(t,e){const n=oe(t),r=e.query;let i=!1,a=n.queries.get(r);if(a||(i=!0,a=new T$),i)try{a.Pu=await n.onListen(r)}catch(l){const d=Ic(l,`Initialization of query '${ew(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.listeners.push(e),e.bu(n.onlineState),a.Pu&&e.Vu(a.Pu)&&u2(n)}async function c2(t,e){const n=oe(t),r=e.query;let i=!1;const a=n.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=a.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function C$(t,e){const n=oe(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const d of l.listeners)d.Vu(i)&&(r=!0);l.Pu=i}}r&&u2(n)}function E$(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(n);r.queries.delete(e)}function u2(t){t.vu.forEach(e=>{e.next()})}class d2{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.$u||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n){this.Mu=e,this.byteLength=n}Ou(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.Tt=e}Zi(e){return oi(this.Tt,e)}Xi(e){return e.metadata.exists?U4(this.Tt,e.document,!1):lt.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Rt(e)}}class A${constructor(e,n,r){this.Fu=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T6(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=Ve.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new AA(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const d=(n.get(l)||De()).add(a);n.set(l,d)}}return n}async complete(){const e=await n$(this.localStore,new AA(this.Tt),this.documents,this.Fu.id),n=this.Lu(this.documents);for(const r of this.queries)await r$(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function T6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.key=e}}class C6{constructor(e){this.key=e}}class E6{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=De(),this.mutatedKeys=De(),this.ju=y4(e),this.zu=new Wl(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new kA,i=n?n.zu:this.zu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{const w=i.get(g),x=Ih(this.query,y)?y:null,T=!!w&&this.mutatedKeys.has(w.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;w&&x?w.data.isEqual(x.data)?T!==C&&(r.track({type:3,doc:x}),A=!0):this.Yu(w,x)||(r.track({type:2,doc:x}),A=!0,(f&&this.ju(x,f)>0||m&&this.ju(x,m)<0)&&(d=!0)):!w&&x?(r.track({type:0,doc:x}),A=!0):w&&!x&&(r.track({type:1,doc:w}),A=!0,(f||m)&&(d=!0)),A&&(x?(l=l.add(x),a=C?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{zu:l,Ju:r,Li:d,mutatedKeys:a}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((m,g)=>function(y,w){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return x(y)-x(w)}(m.type,g.type)||this.ju(m.doc,g.doc)),this.Zu(r);const l=n?this.Xu():[],d=this.Qu.size===0&&this.current?1:0,f=d!==this.Gu;return this.Gu=d,a.length!==0||f?{snapshot:new cc(this.query,e.zu,i,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new kA,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=De(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new C6(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new S6(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=De();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return cc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class _${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class D${constructor(e){this.key=e,this.ic=!1}}class j${constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new no(d=>p4(d),jh),this.uc=new Map,this.cc=new Set,this.ac=new Ct(re.comparator),this.hc=new Map,this.lc=new Zx,this.fc={},this.dc=new Map,this._c=ga.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function I$(t,e){const n=g2(t);let r,i;const a=n.oc.get(e);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const l=await ac(n.localStore,qn(e));n.isPrimaryClient&&Ng(n.remoteStore,l);const d=n.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=await h2(n,e,r,d==="current",l.resumeToken)}return i}async function h2(t,e,n,r,i){t.mc=(y,w,x)=>async function(T,C,A,_){let L=C.view.Hu(A);L.Li&&(L=await Pp(T.localStore,C.query,!1).then(({documents:D})=>C.view.Hu(D,L)));const I=_&&_.targetChanges.get(C.targetId),q=C.view.applyChanges(L,T.isPrimaryClient,I);return cw(T,C.targetId,q.tc),q.snapshot}(t,y,w,x);const a=await Pp(t.localStore,e,!0),l=new E6(e,a.Yi),d=l.Hu(a.documents),f=Nh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=l.applyChanges(d,t.isPrimaryClient,f);cw(t,n,m.tc);const g=new _$(e,n,l);return t.oc.set(e,g),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),m.snapshot}async function R$(t,e){const n=oe(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(a=>!jh(a,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Qd(n.remoteStore,r.targetId),uc(n,r.targetId)}).catch(eo)):(uc(n,r.targetId),await lc(n.localStore,r.targetId,!0))}async function M$(t,e,n){const r=y2(t);try{const i=await function(a,l){const d=oe(a),f=pt.now(),m=l.reduce((w,x)=>w.add(x.key),De());let g,y;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let x=$n(),T=De();return d.ji.getEntries(w,m).next(C=>{x=C,x.forEach((A,_)=>{_.isValidDocument()||(T=T.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,x)).next(C=>{g=C;const A=[];for(const _ of l){const L=$z(_,g.get(_.key).overlayedDocument);L!=null&&A.push(new Hi(_.key,L,f4(L.value.mapValue),ft.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,A,l)}).next(C=>{y=C;const A=C.applyToLocalDocumentSet(g,T);return d.documentOverlayCache.saveOverlays(w,C.batchId,A)})}).then(()=>({batchId:y.batchId,changes:j4(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let f=a.fc[a.currentUser.toKey()];f||(f=new Ct(_e)),f=f.insert(l,d),a.fc[a.currentUser.toKey()]=f}(r,i.batchId,n),await Gi(r,i.changes),await Dc(r.remoteStore)}catch(i){const a=Ic(i,"Failed to persist write");n.reject(a)}}async function k6(t,e){const n=oe(t);try{const r=await e$(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.hc.get(a);l&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?me(l.ic):i.removedDocuments.size>0&&(me(l.ic),l.ic=!1))}),await Gi(n,r,e)}catch(r){await eo(r)}}function _A(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=oe(a);d.onlineState=l;let f=!1;d.queries.forEach((m,g)=>{for(const y of g.listeners)y.bu(l)&&(f=!0)}),f&&u2(d)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function N$(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),a=i&&i.key;if(a){let l=new Ct(re.comparator);l=l.insert(a,lt.newNoDocument(a,ge.min()));const d=De().add(a),f=new Mh(ge.min(),new Map,new rt(_e),l,d);await k6(r,f),r.ac=r.ac.remove(a),r.hc.delete(e),p2(r)}else await lc(r.localStore,e,!1).then(()=>uc(r,e,n)).catch(eo)}async function L$(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await JB(n.localStore,e);m2(n,r,null),f2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gi(n,i)}catch(i){await eo(i)}}async function O$(t,e,n){const r=oe(t);try{const i=await function(a,l){const d=oe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,l).next(g=>(me(g!==null),m=g.keys(),d.mutationQueue.removeMutationBatch(f,g))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);m2(r,e,n),f2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gi(r,i)}catch(i){await eo(i)}}async function P$(t,e){const n=oe(t);ro(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const l=oe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Ic(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function f2(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function m2(t,e,n){const r=oe(t);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||A6(t,r)})}function A6(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Qd(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),p2(t))}function cw(t,e,n){for(const r of n)r instanceof S6?(t.lc.addReference(r.key,e),U$(t,r)):r instanceof C6?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||A6(t,r.key)):ce()}function U$(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.cc.add(r),p2(t))}function p2(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new re(Ve.fromString(e)),r=t._c.next();t.hc.set(r,new D$(n)),t.ac=t.ac.insert(n,r),Ng(t.remoteStore,new Us(qn(Ec(n.path)),r,2,zn.at))}}async function Gi(t,e,n){const r=oe(t),i=[],a=[],l=[];r.oc.isEmpty()||(r.oc.forEach((d,f)=>{l.push(r.mc(f,e,n).then(m=>{if((m||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,m!=null&&m.fromCache?"not-current":"current"),m){i.push(m);const g=t2.Ni(f.targetId,m);a.push(g)}}))}),await Promise.all(l),r.rc.Ho(i),await async function(d,f){const m=oe(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>z.forEach(f,y=>z.forEach(y.Ci,w=>m.persistence.referenceDelegate.addReference(g,y.targetId,w)).next(()=>z.forEach(y.xi,w=>m.persistence.referenceDelegate.removeReference(g,y.targetId,w)))))}catch(g){if(!to(g))throw g;ee("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const y=g.targetId;if(!g.fromCache){const w=m.Ki.get(y),x=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(x);m.Ki=m.Ki.insert(y,T)}}}(r.localStore,a))}async function V$(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await l6(n.localStore,e);n.currentUser=e,function(i,a){i.dc.forEach(l=>{l.forEach(d=>{d.reject(new Z(F.CANCELLED,a))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gi(n,r.Wi)}}function z$(t,e){const n=oe(t),r=n.hc.get(e);if(r&&r.ic)return De().add(r.key);{let i=De();const a=n.uc.get(e);if(!a)return i;for(const l of a){const d=n.oc.get(l);i=i.unionWith(d.view.Wu)}return i}}async function B$(t,e){const n=oe(t),r=await Pp(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&cw(n,e.targetId,i.tc),i}async function $$(t,e){const n=oe(t);return h6(n.localStore,e).then(r=>Gi(n,r))}async function F$(t,e,n,r){const i=oe(t),a=await function(l,d){const f=oe(l),m=oe(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.An(g,d).next(y=>y?f.localDocuments.getDocuments(g,y):z.resolve(null)))}(i.localStore,e);a!==null?(n==="pending"?await Dc(i.remoteStore):n==="acknowledged"||n==="rejected"?(m2(i,e,r||null),f2(i,e),function(l,d){oe(oe(l).mutationQueue).Pn(d)}(i.localStore,e)):ce(),await Gi(i,a)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}async function q$(t,e){const n=oe(t);if(g2(n),y2(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await DA(n,r.toArray());n.wc=!0,await lw(n.remoteStore,!0);for(const a of i)Ng(n.remoteStore,a)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((a,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(uc(n,l),lc(n.localStore,l,!0))),Qd(n.remoteStore,l)}),await i,await DA(n,r),function(a){const l=oe(a);l.hc.forEach((d,f)=>{Qd(l.remoteStore,f)}),l.lc._s(),l.hc=new Map,l.ac=new Ct(re.comparator)}(n),n.wc=!1,await lw(n.remoteStore,!1)}}async function DA(t,e,n){const r=oe(t),i=[],a=[];for(const l of e){let d;const f=r.uc.get(l);if(f&&f.length!==0){d=await ac(r.localStore,qn(f[0]));for(const m of f){const g=r.oc.get(m),y=await B$(r,g);y.snapshot&&a.push(y.snapshot)}}else{const m=await d6(r.localStore,l);d=await ac(r.localStore,m),await h2(r,_6(m),l,!1,d.resumeToken)}i.push(d)}return r.rc.Ho(a),i}function _6(t){return m4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function H$(t){const e=oe(t);return oe(oe(e.localStore).persistence).Si()}async function G$(t,e,n,r){const i=oe(t);if(i.wc)return void ee("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const l=await h6(i.localStore,g4(a[0])),d=Mh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Bt.EMPTY_BYTE_STRING);await Gi(i,l,d);break}case"rejected":await lc(i.localStore,e,!0),uc(i,e,r);break;default:ce()}}async function W$(t,e,n){const r=g2(t);if(r.wc){for(const i of e){if(r.uc.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const a=await d6(r.localStore,i),l=await ac(r.localStore,a);await h2(r,_6(a),l.targetId,!1,l.resumeToken),Ng(r.remoteStore,l)}for(const i of n)r.uc.has(i)&&await lc(r.localStore,i,!1).then(()=>{Qd(r.remoteStore,i),uc(r,i)}).catch(eo)}}function g2(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=k6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N$.bind(null,e),e.rc.Ho=C$.bind(null,e.eventManager),e.rc.gc=E$.bind(null,e.eventManager),e}function y2(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O$.bind(null,e),e}function Y$(t,e,n){const r=oe(t);(async function(i,a,l){try{const d=await a.getMetadata();if(await function(y,w){const x=oe(y),T=Rt(w.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",C=>x.$s.getBundleMetadata(C,w.id)).then(C=>!!C&&C.createTime.compareTo(T)>=0)}(i.localStore,d))return await a.close(),l._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(d)),Promise.resolve(new Set);l._updateProgress(T6(d));const f=new A$(d,i.localStore,a.Tt);let m=await a.yc();for(;m;){const y=await f.Bu(m);y&&l._updateProgress(y),m=await a.yc()}const g=await f.complete();return await Gi(i,g.Uu,void 0),await function(y,w){const x=oe(y);return x.persistence.runTransaction("Save bundle","readwrite",T=>x.$s.saveBundleMetadata(T,w))}(i.localStore,d),l._completeWith(g.progress),Promise.resolve(g.qu)}catch(d){return ec("SyncEngine",`Loading bundle failed with ${d}`),l._failWith(d),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class D6{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return a6(this.persistence,new o6,e.initialUser,this.Tt)}Tc(e){return new s6(Mg.qs,this.Tt)}Ic(e){return new m6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class j6 extends D6{constructor(e,n,r){super(),this.Pc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Pc.initialize(this,e),await y2(this.Pc.syncEngine),await Dc(this.Pc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return a6(this.persistence,new o6,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new UB(r,e.asyncQueue,n)}Rc(e,n){const r=new xz(n,this.persistence);return new wz(e.asyncQueue,r)}Tc(e){const n=e2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new Jx(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,p6(),lp(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new m6}}class K$ extends j6{constructor(e,n){super(e,n,!1),this.Pc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Pc.syncEngine;this.sharedClientState instanceof l1&&(this.sharedClientState.syncEngine={Br:F$.bind(null,n),Lr:G$.bind(null,n),qr:W$.bind(null,n),Si:H$.bind(null,n),Fr:$$.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await q$(this.Pc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=p6();if(!l1.C(n))throw new Z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=e2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new l1(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class v2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_A(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V$.bind(null,this.syncEngine),await lw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new S$}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new a$(i));var i;return function(a,l,d,f){return new u$(a,l,d,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>_A(this.syncEngine,d,0),l=CA.C()?new CA:new i$,new h$(n,r,i,a,l);var n,r,i,a,l}createSyncEngine(e,n){return function(r,i,a,l,d,f,m){const g=new j$(r,i,a,l,d,f);return m&&(g.wc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=oe(e);ee("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await _c(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):jt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new Qt,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new k$(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e===123)}async Cc(){for(;this.kc()<0&&!await this.$c(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.$c()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const a=oe(r),l=Yd(a.Tt)+"/documents",d={documents:i.map(y=>Wd(a.Tt,y))},f=await a.mo("BatchGetDocuments",l,d,i.length),m=new Map;f.forEach(y=>{const w=eB(a.Tt,y);m.set(w.key.toString(),w)});const g=[];return i.forEach(y=>{const w=m.get(y.toString());me(!!w),g.push(w)}),g}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=re.fromPath(r);this.mutations.push(new qx(i,this.precondition(i)))}),await async function(n,r){const i=oe(n),a=Yd(i.Tt)+"/documents",l={writes:r.map(d=>Kd(i.Tt,d))};await i.lo("Commit",a,l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ce();n=ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?ft.exists(!1):ft.updateTime(n):ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(n)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new r2(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){this.ko.vo(async()=>{const e=new X$(this.datastore),n=this.Fc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}Fc(e){try{const n=this.updateFunction(e);return!_h(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!A4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=KI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async a=>{ee("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ee("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ic(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function I6(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await l6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function R6(t,e){t.asyncQueue.verifyOperationInProgress();const n=await b2(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>EA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>EA(e.remoteStore,a)),t.onlineComponents=e}async function b2(t){return t.offlineComponents||(ee("FirestoreClient","Using default OfflineComponentProvider"),await I6(t,new D6)),t.offlineComponents}async function Og(t){return t.onlineComponents||(ee("FirestoreClient","Using default OnlineComponentProvider"),await R6(t,new v2)),t.onlineComponents}function M6(t){return b2(t).then(e=>e.persistence)}function w2(t){return b2(t).then(e=>e.localStore)}function N6(t){return Og(t).then(e=>e.remoteStore)}function x2(t){return Og(t).then(e=>e.syncEngine)}function eF(t){return Og(t).then(e=>e.datastore)}async function dc(t){const e=await Og(t),n=e.eventManager;return n.onListen=I$.bind(null,e.syncEngine),n.onUnlisten=R$.bind(null,e.syncEngine),n}function tF(t){return t.asyncQueue.enqueue(async()=>{const e=await M6(t),n=await N6(t);return e.setNetworkEnabled(!0),function(r){const i=oe(r);return i.mu.delete(0),Oh(i)}(n)})}function nF(t){return t.asyncQueue.enqueue(async()=>{const e=await M6(t),n=await N6(t);return e.setNetworkEnabled(!1),async function(r){const i=oe(r);i.mu.add(0),await _c(i),i.pu.set("Offline")}(n)})}function rF(t,e){const n=new Qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const l=await function(d,f){const m=oe(d);return m.persistence.runTransaction("read document","readonly",g=>m.localDocuments.getDocument(g,f))}(r,i);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const d=Ic(l,`Failed to get document '${i} from cache`);a.reject(d)}}(await w2(t),e,n)),n.promise}function L6(t,e,n={}){const r=new Qt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,f){const m=new Lg({next:y=>{a.enqueueAndForget(()=>c2(i,g));const w=y.docs.has(l);!w&&y.fromCache?f.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&d&&d.source==="server"?f.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new d2(Ec(l.path),m,{includeMetadataChanges:!0,$u:!0});return l2(i,g)}(await dc(t),t.asyncQueue,e,n,r)),r.promise}function iF(t,e){const n=new Qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const l=await Pp(r,i,!0),d=new E6(i,l.Yi),f=d.Hu(l.documents),m=d.applyChanges(f,!1);a.resolve(m.snapshot)}catch(l){const d=Ic(l,`Failed to execute query '${i} against cache`);a.reject(d)}}(await w2(t),e,n)),n.promise}function O6(t,e,n={}){const r=new Qt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,f){const m=new Lg({next:y=>{a.enqueueAndForget(()=>c2(i,g)),y.fromCache&&d.source==="server"?f.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),g=new d2(l,m,{includeMetadataChanges:!0,$u:!0});return l2(i,g)}(await dc(t),t.asyncQueue,e,n,r)),r.promise}function sF(t,e){const n=new Lg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).vu.add(i),i.next()}(await dc(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).vu.delete(i)}(await dc(t),n))}}function oF(t,e,n,r){const i=function(a,l){let d;return d=typeof a=="string"?new TextEncoder().encode(a):a,function(f,m){return new Q$(f,m)}(function(f,m){if(f instanceof Uint8Array)return jA(f,m);if(f instanceof ArrayBuffer)return jA(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),l)}(n,Lh(e));t.asyncQueue.enqueueAndForget(async()=>{Y$(await x2(t),i,r)})}function aF(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=oe(n);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(await w2(t),e))}const IA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P6(t,e,n,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RA(t){if(!re.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function MA(t){if(re.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function Fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pg(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function U6(t,e){if(e<=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,P6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NA(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lz;switch(n.type){case"gapi":const r=n.client;return new hz(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=IA.get(e);n&&(ee("ComponentProvider","Removing Datastore"),IA.delete(e),n.terminate())}(this),Promise.resolve()}}function lF(t,e,n,r={}){var i;const a=(t=Fe(t,Ph))._getSettings();if(a.host!=="firestore.googleapis.com"&&a.host!==e&&ec("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let l,d;if(typeof r.mockUserToken=="string")l=r.mockUserToken,d=Yt.MOCK_USER;else{l=_P(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Yt(f)}t._authCredentials=new cz(new YI(l,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}}class hn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hn(this.firestore,e,this._query)}}class ai extends hn{constructor(e,n,r){super(e,n,Ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new re(e))}withConverter(e){return new ai(this.firestore,e,this._path)}}function V6(t,e,...n){if(t=ye(t),T2("collection","path",e),t instanceof Ph){const r=Ve.fromString(e,...n);return MA(r),new ai(t,null,r)}{if(!(t instanceof ct||t instanceof ai))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return MA(r),new ai(t.firestore,null,r)}}function cF(t,e){if(t=Fe(t,Ph),T2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hn(t,null,function(n){return new qi(Ve.emptyPath(),n)}(e))}function Bp(t,e,...n){if(t=ye(t),arguments.length===1&&(e=KI.R()),T2("doc","path",e),t instanceof Ph){const r=Ve.fromString(e,...n);return RA(r),new ct(t,null,new re(r))}{if(!(t instanceof ct||t instanceof ai))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return RA(r),new ct(t.firestore,t instanceof ai?t.converter:null,new re(r))}}function z6(t,e){return t=ye(t),e=ye(e),(t instanceof ct||t instanceof ai)&&(e instanceof ct||e instanceof ai)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function B6(t,e){return t=ye(t),e=ye(e),t instanceof hn&&e instanceof hn&&t.firestore===e.firestore&&jh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new r2(this,"async_queue_retry"),this.Hc=()=>{const n=lp();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=lp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=lp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Qt;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!to(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw jt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=a2.createAndSchedule(this,e,n,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&ce()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function uw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class dF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=-1;class Et extends Ph{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new uF,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$6(this),this._firestoreClient.terminate()}}function en(t){return t._firestoreClient||$6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $6(t){var e;const n=t._freezeSettings(),r=function(i,a,l,d){return new Tz(i,a,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new J$(t._authCredentials,t._appCheckCredentials,t._queue,r)}function fF(t,e){q6(t=Fe(t,Et));const n=en(t),r=t._freezeSettings(),i=new v2;return F6(n,i,new j6(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function mF(t){q6(t=Fe(t,Et));const e=en(t),n=t._freezeSettings(),r=new v2;return F6(e,r,new K$(r,n.cacheSizeBytes))}function F6(t,e,n){const r=new Qt;return t.asyncQueue.enqueue(async()=>{try{await I6(t,n),await R6(t,e),r.resolve()}catch(i){const a=i;if(!function(l){return l.name==="FirebaseError"?l.code===F.FAILED_PRECONDITION||l.code===F.UNIMPLEMENTED:typeof DOMException<"u"&&l instanceof DOMException?l.code===22||l.code===20||l.code===11:!0}(a))throw a;ec("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}}).then(()=>r.promise)}function pF(t){if(t._initialized&&!t._terminated)throw new Z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Rr.C())return Promise.resolve();const r=n+"main";await Rr.delete(r)}(e2(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function gF(t){return function(e){const n=new Qt;return e.asyncQueue.enqueueAndForget(async()=>P$(await x2(e),n)),n.promise}(en(t=Fe(t,Et)))}function yF(t){return tF(en(t=Fe(t,Et)))}function vF(t){return nF(en(t=Fe(t,Et)))}function bF(t,e){const n=en(t=Fe(t,Et)),r=new dF;return oF(n,t._databaseId,e,r),r}function wF(t,e){return aF(en(t=Fe(t,Et)),e).then(n=>n?new hn(t,null,n.query):null)}function q6(t){if(t._initialized||t._terminated)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=class dw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dw(Bt.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dw(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=/^__.*__$/;class TF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new kc(e,this.data,n,this.fieldTransforms)}}class H6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function G6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class Vg{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,a===void 0&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Vg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return $p(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(G6(this.ra)&&xF.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class SF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Lh(e)}wa(e,n,r,i=!1){return new Vg({ra:e,methodName:n,_a:r,path:It.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function _a(t){const e=t._freezeSettings(),n=Lh(t._databaseId);return new SF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zg(t,e,n,r,i,a={}){const l=t.wa(a.merge||a.mergeFields?2:0,e,n,i);k2("Data must be an object, but it was:",l,r);const d=K6(r,l);let f,m;if(a.merge)f=new Bn(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const w=hw(e,y,n);if(!l.contains(w))throw new Z(F.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);X6(g,w)||g.push(w)}f=new Bn(g),m=l.fieldTransforms.filter(y=>f.covers(y.field))}else f=null,m=l.fieldTransforms;return new TF(new cn(d),f,m)}class Uh extends Aa{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uh}}function W6(t,e,n){return new Vg({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class S2 extends Aa{_toFieldTransform(e){return new Rh(e.path,new ic)}isEqual(e){return e instanceof S2}}class CF extends Aa{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=W6(this,e,!0),r=this.ma.map(a=>Da(a,n)),i=new ha(r);return new Rh(e.path,i)}isEqual(e){return this===e}}class EF extends Aa{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=W6(this,e,!0),r=this.ma.map(a=>Da(a,n)),i=new fa(r);return new Rh(e.path,i)}isEqual(e){return this===e}}class kF extends Aa{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new sc(e.Tt,w4(e.Tt,this.ga));return new Rh(e.path,n)}isEqual(e){return this===e}}function C2(t,e,n,r){const i=t.wa(1,e,n);k2("Data must be an object, but it was:",i,r);const a=[],l=cn.empty();ka(r,(f,m)=>{const g=A2(e,f,n);m=ye(m);const y=i.ha(g);if(m instanceof Uh)a.push(g);else{const w=Da(m,y);w!=null&&(a.push(g),l.set(g,w))}});const d=new Bn(a);return new H6(l,d,i.fieldTransforms)}function E2(t,e,n,r,i,a){const l=t.wa(1,e,n),d=[hw(e,r,n)],f=[i];if(a.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)d.push(hw(e,a[w])),f.push(a[w+1]);const m=[],g=cn.empty();for(let w=d.length-1;w>=0;--w)if(!X6(m,d[w])){const x=d[w];let T=f[w];T=ye(T);const C=l.ha(x);if(T instanceof Uh)m.push(x);else{const A=Da(T,C);A!=null&&(m.push(x),g.set(x,A))}}const y=new Bn(m);return new H6(g,y,l.fieldTransforms)}function Y6(t,e,n,r=!1){return Da(n,t.wa(r?4:3,e))}function Da(t,e){if(Q6(t=ye(t)))return k2("Unsupported field value:",e,t),K6(t,e);if(t instanceof Aa)return function(n,r){if(!G6(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let a=0;for(const l of n){let d=Da(l,r.la(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ye(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return w4(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=pt.fromDate(n);return{timestampValue:oc(r.Tt,i)}}if(n instanceof pt){const i=new pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:oc(r.Tt,i)}}if(n instanceof Ug)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ya)return{bytesValue:N4(r.Tt,n._byteString)};if(n instanceof ct){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hx(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${Pg(n)}`)}(t,e)}function K6(t,e){const n={};return n4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(r,i)=>{const a=Da(i,e.ua(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Q6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Ug||t instanceof ya||t instanceof ct||t instanceof Aa)}function k2(t,e,n){if(!Q6(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Pg(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function hw(t,e,n){if((e=ye(e))instanceof Ws)return e._internalPath;if(typeof e=="string")return A2(t,e);throw $p("Field path arguments must be of type string or ",t,!1,void 0,n)}const AF=new RegExp("[~\\*/\\[\\]]");function A2(t,e,n){if(e.search(AF)>=0)throw $p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ws(...e.split("."))._internalPath}catch{throw $p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $p(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Z(F.INVALID_ARGUMENT,d+t+f)}function X6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _F(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _F extends Xd{data(){return super.data()}}function Bg(t,e){return typeof e=="string"?A2(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _2{}class Vh extends _2{}function Ss(t,e,...n){let r=[];e instanceof _2&&r.push(e),r=r.concat(n),function(i){const a=i.filter(d=>d instanceof D2).length,l=i.filter(d=>d instanceof $g).length;if(a>1||a>0&&l>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class $g extends Vh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $g(e,n,r)}_apply(e){const n=this._parse(e);return eR(e._query,n),new hn(e.firestore,e.converter,Jb(e._query,n))}_parse(e){const n=_a(e.firestore);return function(i,a,l,d,f,m,g){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){OA(g,m);const w=[];for(const x of g)w.push(LA(d,i,x));y={arrayValue:{values:w}}}else y=LA(d,i,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||OA(g,m),y=Y6(l,a,g,m==="in"||m==="not-in");return Oe.create(f,m,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function DF(t,e,n){const r=e,i=Bg("where",t);return $g._create(i,r,n)}class D2 extends _2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new D2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Je.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const d of l)eR(a,d),a=Jb(a,d)}(e._query,n),new hn(e.firestore,e.converter,Jb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class j2 extends Vh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new j2(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Gl(i,a);return function(d,f){if($x(d)===null){const m=Ag(d);m!==null&&tR(d,m,f.field)}}(r,l),l}(e._query,this._field,this._direction);return new hn(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new qi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function jF(t,e="asc"){const n=e,r=Bg("orderBy",t);return j2._create(r,n)}class Fg extends Vh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fg(e,n,r)}_apply(e){return new hn(e.firestore,e.converter,Mp(e._query,this._limit,this._limitType))}}function IF(t){return U6("limit",t),Fg._create("limit",t,"F")}function RF(t){return U6("limitToLast",t),Fg._create("limitToLast",t,"L")}class qg extends Vh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new qg(e,n,r)}_apply(e){const n=J6(e,this.type,this._docOrFields,this._inclusive);return new hn(e.firestore,e.converter,function(r,i){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function MF(...t){return qg._create("startAt",t,!0)}function NF(...t){return qg._create("startAfter",t,!1)}class Hg extends Vh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hg(e,n,r)}_apply(e){const n=J6(e,this.type,this._docOrFields,this._inclusive);return new hn(e.firestore,e.converter,function(r,i){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function LF(...t){return Hg._create("endBefore",t,!1)}function OF(...t){return Hg._create("endAt",t,!0)}function J6(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof Xd)return function(i,a,l,d,f){if(!d)throw new Z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of ea(i))if(g.field.isKeyField())m.push(ua(a,d.key));else{const y=d.data.field(g.field);if(zx(y))throw new Z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const w=g.field.canonicalString();throw new Z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}m.push(y)}return new Hs(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_a(t.firestore);return function(a,l,d,f,m,g){const y=a.explicitOrderBy;if(m.length>y.length)throw new Z(F.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let x=0;x<m.length;x++){const T=m[x];if(y[x].field.isKeyField()){if(typeof T!="string")throw new Z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof T}`);if(!Fx(a)&&T.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${T}' contains a slash.`);const C=a.path.child(Ve.fromString(T));if(!re.isDocumentKey(C))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const A=new re(C);w.push(ua(l,A))}else{const C=Y6(d,f,T);w.push(C)}}return new Hs(w,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function LA(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fx(e)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!re.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ua(t,new re(r))}if(n instanceof ct)return ua(t,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pg(n)}.`)}function OA(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eR(t,e){if(e.isInequality()){const r=Ag(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Z(F.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=$x(t);a!==null&&tR(t,i,a)}const n=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function tR(t,e,n){if(!n.isEqual(e))throw new Z(F.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class I2{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ce()}}convertObject(e,n){const r={};return ka(e.fields,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertGeoPoint(e){return new Ug(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=i4(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qd(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);me(q4(r));const i=new $s(r.get(1),r.get(3)),a=new re(r.popFirst(5));return i.isEqual(n)||jt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class PF extends I2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bi extends Xd{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Td extends Bi{data(e={}){return super.data(e)}}class Ys{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Td(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const d=new Td(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const d=new Td(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:UF(l.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function UF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}function nR(t,e){return t instanceof Bi&&e instanceof Bi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ys&&e instanceof Ys&&t._firestore===e._firestore&&B6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t){t=Fe(t,ct);const e=Fe(t.firestore,Et);return L6(en(e),t._key).then(n=>R2(e,t,n))}class ja extends I2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function zF(t){t=Fe(t,ct);const e=Fe(t.firestore,Et),n=en(e),r=new ja(e);return rF(n,t._key).then(i=>new Bi(e,r,t._key,i,new Yo(i!==null&&i.hasLocalMutations,!0),t.converter))}function BF(t){t=Fe(t,ct);const e=Fe(t.firestore,Et);return L6(en(e),t._key,{source:"server"}).then(n=>R2(e,t,n))}function $F(t){t=Fe(t,hn);const e=Fe(t.firestore,Et),n=en(e),r=new ja(e);return Z6(t._query),O6(n,t._query).then(i=>new Ys(e,r,t,i))}function FF(t){t=Fe(t,hn);const e=Fe(t.firestore,Et),n=en(e),r=new ja(e);return iF(n,t._query).then(i=>new Ys(e,r,t,i))}function qF(t){t=Fe(t,hn);const e=Fe(t.firestore,Et),n=en(e),r=new ja(e);return O6(n,t._query,{source:"server"}).then(i=>new Ys(e,r,t,i))}function PA(t,e,n){t=Fe(t,ct);const r=Fe(t.firestore,Et),i=Gg(t.converter,e,n);return zh(r,[zg(_a(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ft.none())])}function UA(t,e,n,...r){t=Fe(t,ct);const i=Fe(t.firestore,Et),a=_a(i);let l;return l=typeof(e=ye(e))=="string"||e instanceof Ws?E2(a,"updateDoc",t._key,e,n,r):C2(a,"updateDoc",t._key,e),zh(i,[l.toMutation(t._key,ft.exists(!0))])}function HF(t){return zh(Fe(t.firestore,Et),[new Ac(t._key,ft.none())])}function GF(t,e){const n=Fe(t.firestore,Et),r=Bp(t),i=Gg(t.converter,e);return zh(n,[zg(_a(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function rR(t,...e){var n,r,i;t=ye(t);let a={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||uw(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(uw(e[l])){const y=e[l];e[l]=(n=y.next)===null||n===void 0?void 0:n.bind(y),e[l+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[l+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let f,m,g;if(t instanceof ct)m=Fe(t.firestore,Et),g=Ec(t._key.path),f={next:y=>{e[l]&&e[l](R2(m,t,y))},error:e[l+1],complete:e[l+2]};else{const y=Fe(t,hn);m=Fe(y.firestore,Et),g=y._query;const w=new ja(m);f={next:x=>{e[l]&&e[l](new Ys(m,w,y,x))},error:e[l+1],complete:e[l+2]},Z6(t._query)}return function(y,w,x,T){const C=new Lg(T),A=new d2(w,C,x);return y.asyncQueue.enqueueAndForget(async()=>l2(await dc(y),A)),()=>{C.bc(),y.asyncQueue.enqueueAndForget(async()=>c2(await dc(y),A))}}(en(m),g,d,f)}function WF(t,e){return sF(en(t=Fe(t,Et)),uw(e)?e:{next:e})}function zh(t,e){return function(n,r){const i=new Qt;return n.asyncQueue.enqueueAndForget(async()=>M$(await x2(n),r,i)),i.promise}(en(t),e)}function R2(t,e,n){const r=n.docs.get(e._key),i=new ja(t);return new Bi(t,i,e._key,r,new Yo(n.hasPendingWrites,n.fromCache),e.converter)}const YF={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_a(e)}set(e,n,r){this._verifyNotCommitted();const i=Ns(e,this._firestore),a=Gg(i.converter,n,r),l=zg(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Ns(e,this._firestore);let l;return l=typeof(n=ye(n))=="string"||n instanceof Ws?E2(this._dataReader,"WriteBatch.update",a._key,n,r,i):C2(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ns(e,this._firestore);return this._mutations=this._mutations.concat(new Ac(n._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ns(t,e){if((t=ye(t)).firestore!==e)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_a(e)}get(e){const n=Ns(e,this._firestore),r=new PF(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ce();const a=i[0];if(a.isFoundDocument())return new Xd(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Xd(this._firestore,r,n._key,null,n.converter);throw ce()})}set(e,n,r){const i=Ns(e,this._firestore),a=Gg(i.converter,n,r),l=zg(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const a=Ns(e,this._firestore);let l;return l=typeof(n=ye(n))=="string"||n instanceof Ws?E2(this._dataReader,"Transaction.update",a._key,n,r,i):C2(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=Ns(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ns(e,this._firestore),r=new ja(this._firestore);return super.get(e).then(i=>new Bi(this._firestore,r,n._key,i._document,new Yo(!1,!1),n.converter))}}function XF(t,e,n){t=Fe(t,Et);const r=Object.assign(Object.assign({},YF),n);return function(i){if(i.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new Qt;return i.asyncQueue.enqueueAndForget(async()=>{const f=await eF(i);new Z$(i.asyncQueue,f,l,a,d).run()}),d.promise}(en(t),i=>e(new QF(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return new Uh("deleteField")}function JF(){return new S2("serverTimestamp")}function eq(...t){return new CF("arrayUnion",t)}function tq(...t){return new EF("arrayRemove",t)}function nq(t){return new kF("increment",t)}(function(t,e=!0){(function(n){Cc=n})(Ca),Vi(new Cr("firestore",(n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new Et(new uz(n.getProvider("auth-internal")),new mz(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $s(d.options.projectId,f)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tr(Lk,"3.9.0",t),Tr(Lk,"3.9.0","esm2017")})();const rq="@firebase/firestore-compat",iq="0.3.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function zA(){if(!Cz())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Zd{constructor(e){this._delegate=e}static fromBase64String(e){return zA(),new Zd(ya.fromBase64String(e))}static fromUint8Array(e){return VA(),new Zd(ya.fromUint8Array(e))}toBase64(){return zA(),this._delegate.toBase64()}toUint8Array(){return VA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t){return sq(t,["next","error","complete"])}function sq(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{enableIndexedDbPersistence(e,n){return fF(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return mF(e._delegate)}clearIndexedDbPersistence(e){return pF(e._delegate)}}class iR{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $s||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ec("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){lF(this._delegate,e,n,r)}enableNetwork(){return yF(this._delegate)}disableNetwork(){return vF(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,P6("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gF(this._delegate)}onSnapshotsInSync(e){return WF(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hc(this,V6(this._delegate,e))}catch(n){throw An(n,"collection()","Firestore.collection()")}}doc(e){try{return new xr(this,Bp(this._delegate,e))}catch(n){throw An(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kn(this,cF(this._delegate,e))}catch(n){throw An(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return XF(this._delegate,n=>e(new sR(this,n)))}batch(){return en(this._delegate),new oR(new KF(this._delegate,e=>zh(this._delegate,e)))}loadBundle(e){return bF(this._delegate,e)}namedQuery(e){return wF(this._delegate,e).then(n=>n?new kn(this,n):null)}}class Wg extends I2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zd(new ya(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return xr.forKey(n,this.firestore,null)}}function aq(t){oz(t)}class sR{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Wg(e)}get(e){const n=Ko(e);return this._delegate.get(n).then(r=>new Jd(this._firestore,new Bi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ko(e);return r?(M2("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const a=Ko(e);return arguments.length===2?this._delegate.update(a,n):this._delegate.update(a,n,r,...i),this}delete(e){const n=Ko(e);return this._delegate.delete(n),this}}class oR{constructor(e){this._delegate=e}set(e,n,r){const i=Ko(e);return r?(M2("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const a=Ko(e);return arguments.length===2?this._delegate.update(a,n):this._delegate.update(a,n,r,...i),this}delete(e){const n=Ko(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class va{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Td(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=va.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(n);return a||(a=new va(e,new Wg(e),n),i.set(n,a)),a}}va.INSTANCES=new WeakMap;class xr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xr(n,new ct(n._delegate,r,new re(e)))}static forKey(e,n,r){return new xr(n,new ct(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hc(this.firestore,V6(this._delegate,e))}catch(n){throw An(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof ct?z6(this._delegate,e):!1}set(e,n){n=M2("DocumentReference.set",n);try{return n?PA(this._delegate,e,n):PA(this._delegate,e)}catch(r){throw An(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?UA(this._delegate,e):UA(this._delegate,e,n,...r)}catch(i){throw An(i,"updateDoc()","DocumentReference.update()")}}delete(){return HF(this._delegate)}onSnapshot(...e){const n=aR(e),r=lR(e,i=>new Jd(this.firestore,new Bi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rR(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=zF(this._delegate):(e==null?void 0:e.source)==="server"?n=BF(this._delegate):n=VF(this._delegate),n.then(r=>new Jd(this.firestore,new Bi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xr(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function An(t,e,n){return t.message=t.message.replace(e,n),t}function aR(t){for(const e of t)if(typeof e=="object"&&!fw(e))return e;return{}}function lR(t,e){var n,r;let i;return fw(t[0])?i=t[0]:fw(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:a=>{i.next&&i.next(e(a))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Jd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new xr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return nR(this._delegate,e._delegate)}}class eh extends Jd{data(e){const n=this._delegate.data(e);return az(n!==void 0),n}}class kn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Wg(e)}where(e,n,r){try{return new kn(this.firestore,Ss(this._delegate,DF(e,n,r)))}catch(i){throw An(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new kn(this.firestore,Ss(this._delegate,jF(e,n)))}catch(r){throw An(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kn(this.firestore,Ss(this._delegate,IF(e)))}catch(n){throw An(n,"limit()","Query.limit()")}}limitToLast(e){try{return new kn(this.firestore,Ss(this._delegate,RF(e)))}catch(n){throw An(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new kn(this.firestore,Ss(this._delegate,MF(...e)))}catch(n){throw An(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new kn(this.firestore,Ss(this._delegate,NF(...e)))}catch(n){throw An(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new kn(this.firestore,Ss(this._delegate,LF(...e)))}catch(n){throw An(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new kn(this.firestore,Ss(this._delegate,OF(...e)))}catch(n){throw An(n,"endAt()","Query.endAt()")}}isEqual(e){return B6(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=FF(this._delegate):(e==null?void 0:e.source)==="server"?n=qF(this._delegate):n=$F(this._delegate),n.then(r=>new mw(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=aR(e),r=lR(e,i=>new mw(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rR(this._delegate,n,r)}withConverter(e){return new kn(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lq{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new kn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new lq(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new eh(this._firestore,r))})}isEqual(e){return nR(this._delegate,e._delegate)}}class hc extends kn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xr(this.firestore,e):null}doc(e){try{return e===void 0?new xr(this.firestore,Bp(this._delegate)):new xr(this.firestore,Bp(this._delegate,e))}catch(n){throw An(n,"doc()","CollectionReference.doc()")}}add(e){return GF(this._delegate,e).then(n=>new xr(this.firestore,n))}isEqual(e){return z6(this._delegate,e._delegate)}withConverter(e){return new hc(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ko(t){return Fe(t,ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(...e){this._delegate=new Ws(...e)}static documentId(){return new N2(It.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof Ws?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._delegate=e}static serverTimestamp(){const e=JF();return e._methodName="FieldValue.serverTimestamp",new Ho(e)}static delete(){const e=ZF();return e._methodName="FieldValue.delete",new Ho(e)}static arrayUnion(...e){const n=eq(...e);return n._methodName="FieldValue.arrayUnion",new Ho(n)}static arrayRemove(...e){const n=tq(...e);return n._methodName="FieldValue.arrayRemove",new Ho(n)}static increment(e){const n=nq(e);return n._methodName="FieldValue.increment",new Ho(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq={Firestore:iR,GeoPoint:Ug,Timestamp:pt,Blob:Zd,Transaction:sR,WriteBatch:oR,DocumentReference:xr,DocumentSnapshot:Jd,Query:kn,QueryDocumentSnapshot:eh,QuerySnapshot:mw,CollectionReference:hc,FieldPath:N2,FieldValue:Ho,setLogLevel:aq,CACHE_SIZE_UNLIMITED:hF};function uq(t,e){t.INTERNAL.registerComponent(new Cr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cq)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dq(t){uq(t,(e,n)=>new iR(e,n,new oq)),t.registerVersion(rq,iq)}dq(J);function L2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Yu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},xl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function cR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fq=hq,mq=cR,uR=new Sa("auth","Firebase",cR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new lg("@firebase/auth");function cp(t,...e){BA.logLevel<=$e.ERROR&&BA.error(`Auth (${Ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw O2(t,...e)}function dn(t,...e){return O2(t,...e)}function dR(t,e,n){const r=Object.assign(Object.assign({},mq()),{[e]:n});return new Sa("auth","Firebase",r).create(e,{appName:t.name})}function Rc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fn(t,"argument-error"),dR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uR.create(t,...e)}function te(t,e,...n){if(!t)throw O2(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cp(e),new Error(e)}function Nr(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Map;function ir(t){Nr(t instanceof Function,"Expected a class definition");let e=$A.get(t);return e?(Nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$A.set(t,e),e)}function pq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function P2(){return FA()==="http:"||FA()==="https:"}function FA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P2()||Mj()||"connection"in navigator)?navigator.onLine:!0}function yq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=DP()||fx()}get(){return gq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(t,e){Nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=new Bh(3e4,6e4);function $t(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function tn(t,e,n,r,i={}){return fR(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=xc(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),hR.fetch()(mR(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},a))})}async function fR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},vq),e);try{const i=new wq(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw fd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw fd(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw fd(t,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw dR(t,g,m);fn(t,g)}}catch(i){if(i instanceof Kt)throw i;fn(t,"internal-error",{message:String(i)})}}async function Wi(t,e,n,r,i={}){const a=await tn(t,e,n,r,i);return"mfaPendingCredential"in a&&fn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function mR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?U2(t.config,i):`${t.config.apiScheme}://${i}`}class wq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),bq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xq(t,e){return tn(t,"POST","/v1/accounts:delete",e)}async function Tq(t,e){return tn(t,"POST","/v1/accounts:update",e)}async function Sq(t,e){return tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cq(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=Yg(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Sd(u1(i.auth_time)),issuedAtTime:Sd(u1(i.iat)),expirationTime:Sd(u1(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function u1(t){return Number(t)*1e3}function Yg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cp("JWT malformed, contained fewer than 3 sections"),null;try{const i=Rj(n);return i?JSON.parse(i):(cp("Failed to decode base64 JWT payload"),null)}catch(i){return cp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Eq(t){const e=Yg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kt&&kq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await $i(t,Sq(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?jq(a.providerUserInfo):[],d=Dq(t.providerData,l),f=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),g=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new pR(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function _q(t){const e=ye(t);await nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jq(t){return t.map(e=>{var{providerId:n}=e,r=L2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(t,e){const n=await fR(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=mR(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",hR.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Eq(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Iq(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new rh;return r&&(te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rh,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=L2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Aq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new pR(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await $i(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Cq(this,e)}reload(){return _q(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await $i(this,xq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,d,f,m,g;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,x=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=n.photoURL)!==null&&l!==void 0?l:void 0,C=(d=n.tenantId)!==null&&d!==void 0?d:void 0,A=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,_=(m=n.createdAt)!==null&&m!==void 0?m:void 0,L=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:I,emailVerified:q,isAnonymous:D,providerData:M,stsTokenManager:$}=n;te(I&&$,e,"internal-error");const Q=rh.fromJSON(this.name,$);te(typeof I=="string",e,"internal-error"),Cs(y,e.name),Cs(w,e.name),te(typeof q=="boolean",e,"internal-error"),te(typeof D=="boolean",e,"internal-error"),Cs(x,e.name),Cs(T,e.name),Cs(C,e.name),Cs(A,e.name),Cs(_,e.name),Cs(L,e.name);const ie=new ta({uid:I,auth:e,email:w,emailVerified:q,displayName:y,isAnonymous:D,photoURL:T,phoneNumber:x,tenantId:C,stsTokenManager:Q,createdAt:_,lastLoginAt:L});return M&&Array.isArray(M)&&(ie.providerData=M.map(he=>Object.assign({},he))),A&&(ie._redirectEventId=A),ie}static async _fromIdTokenResponse(e,n,r=!1){const i=new rh;i.updateFromServerResponse(n);const a=new ta({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nh(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gR.type="NONE";const fc=gR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e,n){return`firebase:${t}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=na(this.userKey,i.apiKey,a),this.fullPersistenceKey=na("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(ir(fc),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||ir(fc);const l=na(r,e.config.apiKey,e.name);let d=null;for(const m of n)try{const g=await m._get(l);if(g){const y=ta._fromJSON(e,g);m!==a&&(d=y),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Yl(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Yl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wR(e))return"Blackberry";if(xR(e))return"Webos";if(V2(e))return"Safari";if((e.includes("chrome/")||vR(e))&&!e.includes("edge/"))return"Chrome";if($h(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yR(t=vt()){return/firefox\//i.test(t)}function V2(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vR(t=vt()){return/crios\//i.test(t)}function bR(t=vt()){return/iemobile/i.test(t)}function $h(t=vt()){return/android/i.test(t)}function wR(t=vt()){return/blackberry/i.test(t)}function xR(t=vt()){return/webos/i.test(t)}function Mc(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Rq(t=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Mq(t=vt()){var e;return Mc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Nq(){return Nj()&&document.documentMode===10}function TR(t=vt()){return Mc(t)||$h(t)||xR(t)||wR(t)||/windows phone/i.test(t)||bR(t)}function Lq(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t,e=[]){let n;switch(t){case"Browser":n=qA(vt());break;case"Worker":n=`${qA(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ca}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new HA(this),this.idTokenSubscription=new HA(this),this.beforeStateQueue=new Oq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uR,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ye(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return te(l,this,"internal-error"),l.then(()=>a(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Zt(t){return ye(t)}class HA{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lj(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Uq(t,e,n){const r=Zt(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),a=CR(e),{host:l,port:d}=Vq(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||zq()}function CR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Vq(t){const e=CR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:GA(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:GA(l)}}}function GA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e){return tn(t,"POST","/v1/accounts:resetPassword",$t(t,e))}async function kR(t,e){return tn(t,"POST","/v1/accounts:update",e)}async function Bq(t,e){return tn(t,"POST","/v1/accounts:update",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q(t,e){return Wi(t,"POST","/v1/accounts:signInWithPassword",$t(t,e))}async function Kg(t,e){return tn(t,"POST","/v1/accounts:sendOobCode",$t(t,e))}async function Fq(t,e){return Kg(t,e)}async function qq(t,e){return Kg(t,e)}async function Hq(t,e){return Kg(t,e)}async function Gq(t,e){return Kg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wq(t,e){return Wi(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}async function Yq(t,e){return Wi(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Nc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ih(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ih(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return $q(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Wq(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return kR(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Yq(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oi(t,e){return Wi(t,"POST","/v1/accounts:signInWithIdp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq="http://localhost";class fi extends Nc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=L2(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new fi(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oi(e,n)}buildRequest(){const e={requestUri:Kq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qq(t,e){return tn(t,"POST","/v1/accounts:sendVerificationCode",$t(t,e))}async function Xq(t,e){return Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e))}async function Zq(t,e){const n=await Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e));if(n.temporaryProof)throw fd(t,"account-exists-with-different-credential",n);return n}const Jq={USER_NOT_FOUND:"user-not-found"};async function eH(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Wi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,n),Jq)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Nc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ra({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ra({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Xq(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Zq(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eH(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!n&&!i&&!a?null:new ra({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nH(t){const e=Ul(ld(t)).link,n=e?Ul(ld(e)).deep_link_id:null,r=Ul(ld(t)).deep_link_id;return(r?Ul(ld(r)).link:null)||r||n||e||t}class Qg{constructor(e){var n,r,i,a,l,d;const f=Ul(ld(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,g=(r=f.oobCode)!==null&&r!==void 0?r:null,y=tH((i=f.mode)!==null&&i!==void 0?i:null);te(m&&g&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=g,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=nH(e);try{return new Qg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return ih._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qg.parseLink(n);return te(r,"argument-error"),ih._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Yi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kl extends Lc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),fi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),fi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Kl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:d}=e;if(!r&&!i&&!n&&!a||!d)return null;try{return new Kl(d)._credential({idToken:n,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Lc{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Lc{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH="http://localhost";class mc extends Nc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=n;return!r||!i||!a||r!==i?null:new mc(r,a)}static _create(e,n){return new mc(e,n)}buildRequest(){return{requestUri:rH,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH="saml.";class Fp extends Yi{constructor(e){te(e.startsWith(iH),"argument-error"),super(e)}static credentialFromResult(e){return Fp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Fp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=mc.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return mc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Lc{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return Wi(t,"POST","/v1/accounts:signUp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ta._fromIdTokenResponse(e,r,i),l=WA(r);return new Er({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=WA(r);return new Er({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function WA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sH(t){var e;const n=Zt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Er({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await AR(n,{returnSecureToken:!0}),i=await Er._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp extends Kt{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qp.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new qp(e,n,r,i)}}function _R(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?qp._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oH(t,e){const n=ye(t);await Xg(!0,n,e);const{providerUserInfo:r}=await Tq(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=DR(r||[]);return n.providerData=n.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function z2(t,e,n=!1){const r=await $i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Er._forOperation(t,"link",r)}async function Xg(t,e,n){await nh(e);const r=DR(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const a=await $i(t,_R(r,i,e,t),n);te(a.idToken,r,"internal-error");const l=Yg(a.idToken);te(l,r,"internal-error");const{sub:d}=l;return te(t.uid===d,r,"user-mismatch"),Er._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e,n=!1){const r="signIn",i=await _R(t,r,e),a=await Er._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Zg(t,e){return IR(Zt(t),e)}async function RR(t,e){const n=ye(t);return await Xg(!1,n,e.providerId),z2(n,e)}async function MR(t,e){return jR(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aH(t,e){return Wi(t,"POST","/v1/accounts:signInWithCustomToken",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lH(t,e){const n=Zt(t),r=await aH(n,{token:e,returnSecureToken:!0}),i=await Er._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?B2._fromServerResponse(e,n):fn(e,"internal-error")}}class B2 extends Jg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new B2(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cH(t,e,n){const r=ye(t),i={requestType:"PASSWORD_RESET",email:e};n&&ey(r,i,n),await qq(r,i)}async function uH(t,e,n){await ER(ye(t),{oobCode:e,newPassword:n})}async function dH(t,e){await Bq(ye(t),{oobCode:e})}async function NR(t,e){const n=ye(t),r=await ER(n,{oobCode:e}),i=r.requestType;switch(te(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=Jg._fromServerResponse(Zt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function hH(t,e){const{data:n}=await NR(ye(t),e);return n.email}async function fH(t,e,n){const r=Zt(t),i=await AR(r,{returnSecureToken:!0,email:e,password:n}),a=await Er._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function mH(t,e,n){return Zg(ye(t),io.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pH(t,e,n){const r=ye(t),i={requestType:"EMAIL_SIGNIN",email:e};te(n.handleCodeInApp,r,"argument-error"),n&&ey(r,i,n),await Hq(r,i)}function gH(t,e){const n=Qg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function yH(t,e,n){const r=ye(t),i=io.credentialWithLink(e,n||th());return te(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Zg(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vH(t,e){return tn(t,"POST","/v1/accounts:createAuthUri",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bH(t,e){const n=P2()?th():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await vH(ye(t),r);return i||[]}async function wH(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&ey(n.auth,i,e);const{email:a}=await Fq(n.auth,i);a!==t.email&&await t.reload()}async function xH(t,e,n){const r=ye(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&ey(r.auth,a,n);const{email:l}=await Gq(r.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TH(t,e){return tn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SH(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await $i(r,TH(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const d=r.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function CH(t,e){return LR(ye(t),e,null)}function EH(t,e){return LR(ye(t),null,e)}async function LR(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await $i(t,kR(r,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kH(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const l=(n=(e=Yg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const d=l!=="anonymous"&&l!=="custom"?l:null;return new Ql(a,d)}}if(!r)return null;switch(r){case"facebook.com":return new AH(a,i);case"github.com":return new _H(a,i);case"google.com":return new DH(a,i);case"twitter.com":return new jH(a,i,t.screenName||null);case"custom":case"anonymous":return new Ql(a,null);default:return new Ql(a,r,i)}}class Ql{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class OR extends Ql{constructor(e,n,r,i){super(e,n,r),this.username=i}}class AH extends Ql{constructor(e,n){super(e,"facebook.com",n)}}class _H extends OR{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class DH extends Ql{constructor(e,n){super(e,"google.com",n)}}class jH extends OR{constructor(e,n,r){super(e,"twitter.com",n,r)}}function IH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:kH(n)}class Qo{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Qo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Qo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Qo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Qo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Zt(e),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(d=>Jg._fromServerResponse(r,d));te(i.mfaPendingCredential,r,"internal-error");const l=Qo._fromMfaPendingCredential(i.mfaPendingCredential);return new $2(l,a,async d=>{const f=await d._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const m=Object.assign(Object.assign({},i),{idToken:f.idToken,refreshToken:f.refreshToken});switch(n.operationType){case"signIn":const g=await Er._fromIdTokenResponse(r,n.operationType,m);return await r._updateCurrentUser(g.user),g;case"reauthenticate":return te(n.user,r,"internal-error"),Er._forOperation(n.user,n.operationType,m);default:fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function RH(t,e){var n;const r=ye(t),i=e;return te(e.customData.operationType,r,"argument-error"),te((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),$2._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:start",$t(t,e))}function NH(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:finalize",$t(t,e))}function LH(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(t,e))}class F2{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Jg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new F2(e)}async getSession(){return Qo._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),a=await $i(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await $i(this.user,LH(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const d1=new WeakMap;function OH(t){const e=ye(t);return d1.has(e)||d1.set(e,F2._fromUser(e)),d1.get(e)}const Hp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hp,"1"),this.storage.removeItem(Hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(){const t=vt();return V2(t)||Mc(t)}const UH=1e3,VH=10;class UR extends PR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=PH()&&Lq(),this.fallbackToPolling=TR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(r);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);Nq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,VH):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UR.type="LOCAL";const q2=UR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR extends PR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VR.type="SESSION";const ba=VR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ty(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async m=>m(n.origin,a)),f=await zH(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ty.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const m=Fh("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(w.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return window}function $H(t){zt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){return typeof zt().WorkerGlobalScope<"u"&&typeof zt().importScripts=="function"}async function FH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HH(){return H2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR="firebaseLocalStorageDb",GH=1,Gp="firebaseLocalStorage",BR="fbase_key";class qh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ny(t,e){return t.transaction([Gp],e?"readwrite":"readonly").objectStore(Gp)}function WH(){const t=indexedDB.deleteDatabase(zR);return new qh(t).toPromise()}function pw(){const t=indexedDB.open(zR,GH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gp,{keyPath:BR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gp)?e(r):(r.close(),await WH(),e(await pw()))})})}async function YA(t,e,n){const r=ny(t,!0).put({[BR]:e,value:n});return new qh(r).toPromise()}async function YH(t,e){const n=ny(t,!1).get(e),r=await new qh(n).toPromise();return r===void 0?null:r.value}function KA(t,e){const n=ny(t,!0).delete(e);return new qh(n).toPromise()}const KH=800,QH=3;class $R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>QH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return H2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ty._getInstance(HH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await FH(),!this.activeServiceWorker)return;this.sender=new BH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pw();return await YA(e,Hp,"1"),await KA(e,Hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ny(i,!1).getAll();return new qh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$R.type="LOCAL";const sh=$R;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(t,e){return tn(t,"POST","/v2/accounts/mfaSignIn:start",$t(t,e))}function ZH(t,e){return tn(t,"POST","/v2/accounts/mfaSignIn:finalize",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JH(t){return(await tn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function FR(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=dn("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",eG().appendChild(r)})}function qR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG=500,nG=6e4,km=1e12;class rG{constructor(e){this.auth=e,this.counter=km,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new iG(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||km;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||km;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||km;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class iG{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sG(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},nG)},tG))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sG(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=qR("rcb"),oG=new Bh(3e4,6e4),aG="https://www.google.com/recaptcha/api.js?";class lG{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=zt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(cG(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(zt().grecaptcha):new Promise((r,i)=>{const a=zt().setTimeout(()=>{i(dn(e,"network-request-failed"))},oG.get());zt()[h1]=()=>{zt().clearTimeout(a),delete zt()[h1];const d=zt().grecaptcha;if(!d){i(dn(e,"internal-error"));return}const f=d.render;d.render=(m,g)=>{const y=f(m,g);return this.counter++,y},this.hostLanguage=n,r(d)};const l=`${aG}?${xc({onload:h1,render:"explicit",hl:n})}`;FR(l).catch(()=>{clearTimeout(a),i(dn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=zt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cG(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class uG{async load(e){return new rG(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="recaptcha",dG={theme:"light",type:"image"};let hG=class{constructor(e,n=Object.assign({},dG),r){this.parameters=n,this.type=HR,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zt(r),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uG:new lG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=zt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(P2()&&!H2(),this.auth,"internal-error"),await fG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await JH(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function fG(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ra._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function mG(t,e,n){const r=Zt(t),i=await ry(r,e,ye(n));return new G2(i,a=>Zg(r,a))}async function pG(t,e,n){const r=ye(t);await Xg(!1,r,"phone");const i=await ry(r.auth,e,ye(n));return new G2(i,a=>RR(r,a))}async function gG(t,e,n){const r=ye(t),i=await ry(r.auth,e,ye(n));return new G2(i,a=>MR(r,a))}async function ry(t,e,n){var r;const i=await n.verify();try{te(typeof i=="string",t,"argument-error"),te(n.type===HR,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a)return te(l.type==="enroll",t,"internal-error"),(await MH(t,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{te(l.type==="signin",t,"internal-error");const d=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return te(d,t,"missing-multi-factor-info"),(await XH(t,{mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await Qq(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return l}}finally{n._reset()}}async function yG(t,e){await z2(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa=class up{constructor(e){this.providerId=up.PROVIDER_ID,this.auth=Zt(e)}verifyPhoneNumber(e,n){return ry(this.auth,e,ye(n))}static credential(e,n){return ra._fromVerification(e,n)}static credentialFromResult(e){const n=e;return up.credentialFromTaggedObject(n)}static credentialFromError(e){return up.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ra._fromTokenResponse(n,r):null}};wa.PROVIDER_ID="phone";wa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t,e){return e?ir(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2 extends Nc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vG(t){return IR(t.auth,new W2(t),t.bypassAuthState)}function bG(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),jR(n,new W2(t),t.bypassAuthState)}async function wG(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),z2(n,new W2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vG;case"linkViaPopup":case"linkViaRedirect":return wG;case"reauthViaPopup":case"reauthViaRedirect":return bG;default:fn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xG=new Bh(2e3,1e4);async function TG(t,e,n){const r=Zt(t);Rc(t,e,Yi);const i=Ia(r,n);return new Ri(r,"signInViaPopup",e,i).executeNotNull()}async function SG(t,e,n){const r=ye(t);Rc(r.auth,e,Yi);const i=Ia(r.auth,n);return new Ri(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function CG(t,e,n){const r=ye(t);Rc(r.auth,e,Yi);const i=Ia(r.auth,n);return new Ri(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ri extends GR{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ri.currentPopupAction&&Ri.currentPopupAction.cancel(),Ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Fh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,xG.get())};e()}}Ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EG="pendingRedirect",Cd=new Map;class kG extends GR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const r=await AG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AG(t,e){const n=YR(e),r=WR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Y2(t,e){return WR(t)._set(YR(e),"true")}function _G(){Cd.clear()}function K2(t,e){Cd.set(t._key(),e)}function WR(t){return ir(t._redirectPersistence)}function YR(t){return na(EG,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(t,e,n){return jG(t,e,n)}async function jG(t,e,n){const r=Zt(t);Rc(t,e,Yi),await r._initializationPromise;const i=Ia(r,n);return await Y2(i,r),i._openRedirect(r,e,"signInViaRedirect")}function IG(t,e,n){return RG(t,e,n)}async function RG(t,e,n){const r=ye(t);Rc(r.auth,e,Yi),await r.auth._initializationPromise;const i=Ia(r.auth,n);await Y2(i,r.auth);const a=await KR(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function MG(t,e,n){return NG(t,e,n)}async function NG(t,e,n){const r=ye(t);Rc(r.auth,e,Yi),await r.auth._initializationPromise;const i=Ia(r.auth,n);await Xg(!1,r,e.providerId),await Y2(i,r.auth);const a=await KR(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function LG(t,e){return await Zt(t)._initializationPromise,iy(t,e,!1)}async function iy(t,e,n=!1){const r=Zt(t),i=Ia(r,e),l=await new kG(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function KR(t){const e=Fh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG=10*60*1e3;class QR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OG&&this.cachedEventUids.clear(),this.cachedEventUids.has(QA(e))}saveEventToCache(e){this.cachedEventUids.add(QA(e)),this.lastProcessedEventTime=Date.now()}}function QA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function PG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e={}){return tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VG=/^https?/;async function zG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZR(t);for(const n of e)try{if(BG(n))return}catch{}fn(t,"unauthorized-domain")}function BG(t){const e=th(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!VG.test(n))return!1;if(UG.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G=new Bh(3e4,6e4);function XA(){const t=zt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function FG(t){return new Promise((e,n)=>{var r,i,a;function l(){XA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XA(),n(dn(t,"network-request-failed"))},timeout:$G.get()})}if(!((i=(r=zt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=zt().gapi)===null||a===void 0)&&a.load)l();else{const d=qR("iframefcb");return zt()[d]=()=>{gapi.load?l():n(dn(t,"network-request-failed"))},FR(`https://apis.google.com/js/api.js?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw dp=null,e})}let dp=null;function qG(t){return dp=dp||FG(t),dp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HG=new Bh(5e3,15e3),GG="__/auth/iframe",WG="emulator/auth/iframe",YG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QG(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?U2(e,WG):`https://${t.config.authDomain}/${GG}`,r={apiKey:e.apiKey,appName:t.name,v:Ca},i=KG.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${xc(r).slice(1)}`}async function XG(t){const e=await qG(t),n=zt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:QG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YG,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=dn(t,"network-request-failed"),d=zt().setTimeout(()=>{a(l)},HG.get());function f(){zt().clearTimeout(d),i(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JG=500,eW=600,tW="_blank",nW="http://localhost";class ZA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rW(t,e,n,r=JG,i=eW){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},ZG),{width:r.toString(),height:i.toString(),top:a,left:l}),m=vt().toLowerCase();n&&(d=vR(m)?tW:n),yR(m)&&(e=e||nW,f.scrollbars="yes");const g=Object.entries(f).reduce((w,[x,T])=>`${w}${x}=${T},`,"");if(Mq(m)&&d!=="_self")return iW(e||"",d),new ZA(null);const y=window.open(e||"",d,g);te(y,t,"popup-blocked");try{y.focus()}catch{}return new ZA(y)}function iW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW="__/auth/handler",oW="emulator/auth/handler";function gw(t,e,n,r,i,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ca,eventId:i};if(e instanceof Yi){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",OP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(a||{}))l[f]=m}if(e instanceof Lc){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const f of Object.keys(d))d[f]===void 0&&delete d[f];return`${aW(t)}?${xc(d).slice(1)}`}function aW({config:t}){return t.emulator?U2(t,oW):`https://${t.authDomain}/${sW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="webStorageSupport";class lW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ba,this._completeRedirectFn=iy,this._overrideRedirectResult=K2}async _openPopup(e,n,r,i){var a;Nr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=gw(e,n,r,th(),i);return rW(e,l,Fh())}async _openRedirect(e,n,r,i){return await this._originValidation(e),$H(gw(e,n,r,th(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Nr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await XG(e),r=new QR(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(f1,{type:f1},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[f1];l!==void 0&&n(!!l),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return TR()||V2()||Mc()}}const cW=lW;class uW{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ii("unexpected MultiFactorSessionType")}}}class Q2 extends uW{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Q2(e)}_finalizeEnroll(e,n,r){return NH(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return ZH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class JR{constructor(){}static assertion(e){return Q2._fromCredential(e)}}JR.FACTOR_ID="phone";var JA="@firebase/auth",e_="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function fW(t){Vi(new Cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:l}=r.options;return((d,f)=>{te(a&&!a.includes(":"),"invalid-api-key",{appName:d.name}),te(!(l!=null&&l.includes(":")),"argument-error",{appName:d.name});const m={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SR(t)},g=new Pq(d,f,m);return pq(g,n),g})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vi(new Cr("auth-internal",e=>{const n=Zt(e.getProvider("auth").getImmediate());return(r=>new dW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(JA,e_,hW(t)),Tr(JA,e_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mW=5*60;kP("authIdTokenMaxAge");fW("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=2e3;async function gW(t,e,n){var r;const{BuildInfo:i}=xa();Nr(e.sessionId,"AuthEvent did not contain a session ID");const a=await xW(e.sessionId),l={};return Mc()?l.ibi=i.packageName:$h()?l.apn=i.packageName:fn(t,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=a,gw(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,l)}async function yW(t){const{BuildInfo:e}=xa(),n={};Mc()?n.iosBundleId=e.packageName:$h()?n.androidPackageName=e.packageName:fn(t,"operation-not-supported-in-this-environment"),await ZR(t,n)}function vW(t){const{cordova:e}=xa();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,Rq()?"_blank":"_system","location=yes"),n(i)})})}async function bW(t,e,n){const{cordova:r}=xa();let i=()=>{};try{await new Promise((a,l)=>{let d=null;function f(){var y;a();const w=(y=r.plugins.browsertab)===null||y===void 0?void 0:y.close;typeof w=="function"&&w(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function m(){d||(d=window.setTimeout(()=>{l(dn(t,"redirect-cancelled-by-user"))},pW))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&m()}e.addPassiveListener(f),document.addEventListener("resume",m,!1),$h()&&document.addEventListener("visibilitychange",g,!1),i=()=>{e.removePassiveListener(f),document.removeEventListener("resume",m,!1),document.removeEventListener("visibilitychange",g,!1),d&&window.clearTimeout(d)}})}finally{i()}}function wW(t){var e,n,r,i,a,l,d,f,m,g;const y=xa();te(typeof((e=y==null?void 0:y.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=y==null?void 0:y.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((a=(i=(r=y==null?void 0:y.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((f=(d=(l=y==null?void 0:y.cordova)===null||l===void 0?void 0:l.plugins)===null||d===void 0?void 0:d.browsertab)===null||f===void 0?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((g=(m=y==null?void 0:y.cordova)===null||m===void 0?void 0:m.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function xW(t){const e=TW(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function TW(t){if(Nr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=20;class CW extends QR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function EW(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:_W(),postBody:null,tenantId:t.tenantId,error:dn(t,"no-auth-event")}}function kW(t,e){return yw()._set(vw(t),e)}async function t_(t){const e=await yw()._get(vw(t));return e&&await yw()._remove(vw(t)),e}function AW(t,e){var n,r;const i=jW(e);if(i.includes("/__/auth/callback")){const a=hp(i),l=a.firebaseError?DW(decodeURIComponent(a.firebaseError)):null,d=(r=(n=l==null?void 0:l.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],f=d?dn(d):null;return f?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function _W(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<SW;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function yw(){return ir(q2)}function vw(t){return na("authEvent",t.config.apiKey,t.name)}function DW(t){try{return JSON.parse(t)}catch{return null}}function jW(t){const e=hp(t),n=e.link?decodeURIComponent(e.link):void 0,r=hp(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return hp(i).link||i||r||n||t}function hp(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ul(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=500;class RW{constructor(){this._redirectPersistence=ba,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=iy,this._overrideRedirectResult=K2}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new CW(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){fn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){wW(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),_G(),await this._originValidation(e);const l=EW(e,r,i);await kW(e,l);const d=await gW(e,l,n),f=await vW(d);return bW(e,a,f)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yW(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=xa(),l=setTimeout(async()=>{await t_(e),n.onEvent(n_())},IW),d=async g=>{clearTimeout(l);const y=await t_(e);let w=null;y&&(g!=null&&g.url)&&(w=AW(y,g.url)),n.onEvent(w||n_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const f=i,m=`${a.packageName.toLowerCase()}://`;xa().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(m)&&d({url:g}),typeof f=="function")try{f(g)}catch(y){console.error(y)}}}}const MW=RW;function n_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NW(t,e){Zt(t)._logFramework(e)}var LW="@firebase/auth-compat",OW="0.3.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=1e3;function Ed(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function UW(){return Ed()==="http:"||Ed()==="https:"}function e7(t=vt()){return!!((Ed()==="file:"||Ed()==="ionic:"||Ed()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function VW(){return fx()||hx()}function zW(){return Nj()&&(document==null?void 0:document.documentMode)===11}function BW(t=vt()){return/Edge\/\d+/.test(t)}function $W(t=vt()){return zW()||BW(t)}function t7(){try{const t=self.localStorage,e=Fh();if(t)return t.setItem(e,"1"),t.removeItem(e),$W()?Nd():!0}catch{return X2()&&Nd()}return!1}function X2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function m1(){return(UW()||Mj()||e7())&&!VW()&&t7()&&!X2()}function n7(){return e7()&&typeof document<"u"}async function FW(){return n7()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},PW);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function qW(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={LOCAL:"local",NONE:"none",SESSION:"session"},Ku=te,r7="persistence";function HW(t,e){if(Ku(Object.values(rr).includes(e),t,"invalid-persistence-type"),fx()){Ku(e!==rr.SESSION,t,"unsupported-persistence-type");return}if(hx()){Ku(e===rr.NONE,t,"unsupported-persistence-type");return}if(X2()){Ku(e===rr.NONE||e===rr.LOCAL&&Nd(),t,"unsupported-persistence-type");return}Ku(e===rr.NONE||t7(),t,"unsupported-persistence-type")}async function bw(t){await t._initializationPromise;const e=i7(),n=na(r7,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function GW(t,e){const n=i7();if(!n)return[];const r=na(r7,t,e);switch(n.getItem(r)){case rr.NONE:return[fc];case rr.LOCAL:return[sh,ba];case rr.SESSION:return[ba];default:return[]}}function i7(){var t;try{return((t=qW())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=te;class Os{constructor(){this.browserResolver=ir(cW),this.cordovaResolver=ir(MW),this.underlyingResolver=null,this._redirectPersistence=ba,this._completeRedirectFn=iy,this._overrideRedirectResult=K2}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return n7()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return WW(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await FW();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(t){return t.unwrap()}function YW(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KW(t){return o7(t)}function QW(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new XW(t,RH(t,e))}else if(r){const i=o7(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function o7(t){const{_tokenResponse:e}=t instanceof Kt?t.customData:t;if(!e)return null;if(!(t instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return wa.credentialFromResult(t);const n=e.providerId;if(!n||n===Yu.PASSWORD)return null;let r;switch(n){case Yu.GOOGLE:r=Jr;break;case Yu.FACEBOOK:r=Zr;break;case Yu.GITHUB:r=ei;break;case Yu.TWITTER:r=ti;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:d,nonce:f}=e;return!a&&!l&&!i&&!d?null:d?n.startsWith("saml.")?mc._create(n,d):fi._fromParams({providerId:n,signInMethod:n,pendingToken:d,idToken:i,accessToken:a}):new Kl(n).credential({idToken:i,accessToken:a,rawNonce:f})}return t instanceof Kt?r.credentialFromError(t):r.credentialFromResult(t)}function Vn(t,e){return e.catch(n=>{throw n instanceof Kt&&QW(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:KW(n),additionalUserInfo:IH(n),user:Mi.getOrCreate(i)}})}async function ww(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Vn(t,n.confirm(r))}}class XW{constructor(e,n){this.resolver=n,this.auth=YW(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Vn(s7(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this._delegate=e,this.multiFactor=OH(e)}static getOrCreate(e){return Mi.USER_MAP.has(e)||Mi.USER_MAP.set(e,new Mi(e)),Mi.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Vn(this.auth,RR(this._delegate,e))}async linkWithPhoneNumber(e,n){return ww(this.auth,pG(this._delegate,e,n))}async linkWithPopup(e){return Vn(this.auth,CG(this._delegate,e,Os))}async linkWithRedirect(e){return await bw(Zt(this.auth)),MG(this._delegate,e,Os)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Vn(this.auth,MR(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return ww(this.auth,gG(this._delegate,e,n))}reauthenticateWithPopup(e){return Vn(this.auth,SG(this._delegate,e,Os))}async reauthenticateWithRedirect(e){return await bw(Zt(this.auth)),IG(this._delegate,e,Os)}sendEmailVerification(e){return wH(this._delegate,e)}async unlink(e){return await oH(this._delegate,e),this}updateEmail(e){return CH(this._delegate,e)}updatePassword(e){return EH(this._delegate,e)}updatePhoneNumber(e){return yG(this._delegate,e)}updateProfile(e){return SH(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return xH(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mi.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=te;class xw{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Qu(r,"invalid-api-key",{appName:e.name}),Qu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Os:void 0;this._delegate=n.initialize({options:{persistence:ZW(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(fq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Uq(this._delegate,e,n)}applyActionCode(e){return dH(this._delegate,e)}checkActionCode(e){return NR(this._delegate,e)}confirmPasswordReset(e,n){return uH(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Vn(this._delegate,fH(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return bH(this._delegate,e)}isSignInWithEmailLink(e){return gH(this._delegate,e)}async getRedirectResult(){Qu(m1(),this._delegate,"operation-not-supported-in-this-environment");const e=await LG(this._delegate,Os);return e?Vn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){NW(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:a,complete:l}=r_(e,n,r);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,n,r){const{next:i,error:a,complete:l}=r_(e,n,r);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,n){return pH(this._delegate,e,n)}sendPasswordResetEmail(e,n){return cH(this._delegate,e,n||void 0)}async setPersistence(e){HW(this._delegate,e);let n;switch(e){case rr.SESSION:n=ba;break;case rr.LOCAL:n=await ir(sh)._isAvailable()?sh:q2;break;case rr.NONE:n=fc;break;default:return fn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Vn(this._delegate,sH(this._delegate))}signInWithCredential(e){return Vn(this._delegate,Zg(this._delegate,e))}signInWithCustomToken(e){return Vn(this._delegate,lH(this._delegate,e))}signInWithEmailAndPassword(e,n){return Vn(this._delegate,mH(this._delegate,e,n))}signInWithEmailLink(e,n){return Vn(this._delegate,yH(this._delegate,e,n))}signInWithPhoneNumber(e,n){return ww(this._delegate,mG(this._delegate,e,n))}async signInWithPopup(e){return Qu(m1(),this._delegate,"operation-not-supported-in-this-environment"),Vn(this._delegate,TG(this._delegate,e,Os))}async signInWithRedirect(e){return Qu(m1(),this._delegate,"operation-not-supported-in-this-environment"),await bw(this._delegate),DG(this._delegate,e,Os)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return hH(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}xw.Persistence=rr;function r_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:l=>i(l&&Mi.getOrCreate(l)),error:e,complete:n}}function ZW(t,e){const n=GW(t,e);if(typeof self<"u"&&!n.includes(sh)&&n.push(sh),typeof window<"u")for(const r of[q2,ba])n.includes(r)||n.push(r);return n.includes(fc)||n.push(fc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.providerId="phone",this._delegate=new wa(s7(J.auth()))}static credential(e,n){return wa.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Z2.PHONE_SIGN_IN_METHOD=wa.PHONE_SIGN_IN_METHOD;Z2.PROVIDER_ID=wa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW=te;class eY{constructor(e,n,r=J.app()){var i;JW((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new hG(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY="auth-compat";function nY(t){t.INTERNAL.registerComponent(new Cr(tY,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new xw(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xl.EMAIL_SIGNIN,PASSWORD_RESET:xl.PASSWORD_RESET,RECOVER_EMAIL:xl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:xl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:xl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:xl.VERIFY_EMAIL}},EmailAuthProvider:io,FacebookAuthProvider:Zr,GithubAuthProvider:ei,GoogleAuthProvider:Jr,OAuthProvider:Kl,SAMLAuthProvider:Fp,PhoneAuthProvider:Z2,PhoneMultiFactorGenerator:JR,RecaptchaVerifier:eY,TwitterAuthProvider:ti,Auth:xw,AuthCredential:Nc,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(LW,OW)}nY(J);const a7={apiKey:"AIzaSyAR1iBrxuTXBeFfcMSgwV1AtaisdrT-nME",authDomain:"runeraffle-6fb42.firebaseapp.com",projectId:"runeraffle-6fb42",storageBucket:"runeraffle-6fb42.appspot.com",messagingSenderId:"646334419214",appId:"1:646334419214:web:4ffbeb5b4daf40f2a066a4"};J.apps.length||J.initializeApp(a7);const Ra=J.auth(),ze=J.firestore(),rY=new J.auth.GoogleAuthProvider,iY=async()=>{try{return(await Ra.signInWithPopup(rY)).user}catch(t){throw console.error("Error signing in with Google: ",t),t}},sY=async(t,e,n)=>{try{const r=await Ra.createUserWithEmailAndPassword(t,e);return n&&r.user&&(await r.user.updateProfile({displayName:n}),await r.user.sendEmailVerification()),r.user}catch(r){throw console.error("Error registering with email: ",r),r}},oY=async(t,e)=>{try{return(await Ra.signInWithEmailAndPassword(t,e)).user}catch(n){throw console.error("Error logging in with email: ",n),n}},aY=async()=>{try{await Ra.signOut()}catch(t){throw console.error("Error signing out: ",t),t}},lY=()=>Ra.currentUser,cY=t=>Ra.onAuthStateChanged(t),uY=async t=>{try{await Ra.sendPasswordResetEmail(t)}catch(e){throw console.error("Error sending password reset email: ",e),e}},sy=ze.collection("notifications"),Oc=async t=>{const e={...t,read:!1,createdAt:J.firestore.FieldValue.serverTimestamp()};return(await sy.add(e)).id},Tw=async t=>{try{console.log(`Getting notifications for user ID: ${t}`);const e=await sy.where("userId","==",t).orderBy("createdAt","desc").limit(50).get();return console.log(`Found ${e.size} notifications for user ${t}`),e.docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw e instanceof Error&&e.message.includes("requires an index")&&console.error(`
        ------------------------------------------------------------
        MISSING FIRESTORE INDEX DETECTED!
        
        Your notification query requires a Firestore index that does not exist yet.
        Follow these steps to fix it:
        
        1. Go to your Firebase Console
        2. Navigate to Firestore Database → Indexes
        3. Create a new composite index with:
           - Collection: notifications
           - Fields:
             - userId (Ascending)
             - createdAt (Descending)
        
        Or click this link in the error message to create it automatically.
        ------------------------------------------------------------
      `),e}},l7=async t=>{await sy.doc(t).update({read:!0})},Sw=async t=>{const e=ze.batch();(await sy.where("userId","==",t).where("read","==",!1).get()).docs.forEach(r=>{e.update(r.ref,{read:!0})}),await e.commit()},c7=async(t,e,n,r,i)=>{await Oc({userId:t,type:"ticket_purchase",title:"Ticket Purchased",message:`You've successfully purchased ticket #${i} for "${r}".`,competitionId:e,ticketId:n})},u7=async(t,e,n,r)=>{await Oc({userId:t,type:"competition_ending",title:"Competition Ending Soon",message:`The competition "${n}" is ending soon! Don't miss your chance to win.`,competitionId:e,imageUrl:r})},d7=async(t,e,n,r,i)=>{await Oc({userId:t,type:"competition_winner",title:"Congratulations! You Won!",message:`You've won "${r}" in the "${n}" competition!`,competitionId:e,imageUrl:i})},dY=async(t,e,n,r="system")=>await Oc({userId:t,type:r,title:e,message:n}),hY=async(t,e,n,r,i)=>{console.log(`Creating ticket notification for user ID: ${t}`,{ticketId:e,ticketSubject:n,updatedBy:r,statusChange:i});let a="Support Ticket Updated",l="";i==="test"?(l=`This is a test notification for ticket "${n}". If you're seeing this, notifications are working properly.`,a="Test Notification"):i==="new"?(l=`New support ticket created: "${n}"`,a="New Support Ticket"):i==="assigned"?(l=`You have been assigned to support ticket: "${n}"`,a="Ticket Assigned"):i==="unassigned"?(l=`You have been unassigned from support ticket: "${n}"`,a="Ticket Unassigned"):i?(l=`Your ticket "${n}" status has been changed to ${i}.`,a="Ticket Status Changed"):r==="admin"?(l=`An admin has replied to your ticket "${n}".`,a="New Admin Response"):(l=`New message from user in ticket "${n}".`,a="New User Message");try{const d=await Oc({userId:t,type:"ticket_update",title:a,message:l,supportTicketId:e});return console.log(`Successfully created notification (ID: ${d}) for user ${t}`),d}catch(d){throw console.error(`Failed to create notification for user ${t}:`,d),d}},oy=Object.freeze(Object.defineProperty({__proto__:null,createNotification:Oc,getUserNotifications:Tw,markAllNotificationsRead:Sw,markNotificationRead:l7,notifyCompetitionEnding:u7,notifyTicketPurchase:c7,notifyTicketUpdate:hY,notifyUser:dY,notifyWinner:d7},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="type.googleapis.com/google.protobuf.Int64Value",mY="type.googleapis.com/google.protobuf.UInt64Value";function h7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Cw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Cw(e));if(typeof t=="function"||typeof t=="object")return h7(t,e=>Cw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Wp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case fY:case mY:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Wp(e)):typeof t=="function"||typeof t=="object"?h7(t,e=>Wp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xl extends Kt{constructor(e,n,r){super(`${f7}/${e}`,n||""),this.details=r}}function pY(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function gY(t,e){let n=pY(t),r=n,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!i_[l])return new Xl("internal","internal");n=i_[l],r=l}const d=a.message;typeof d=="string"&&(r=d),i=a.details,i!==void 0&&(i=Wp(i))}}catch{}return n==="ok"?null:new Xl(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yY{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="us-central1";function vY(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}let bY=class{constructor(e,n,r,i,a=s_,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new yY(n,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin,this.region=s_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function wY(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function xY(t,e,n){return r=>CY(t,e,r,n||{})}function TY(t,e,n){return r=>m7(t,e,r,n||{})}async function SY(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function CY(t,e,n,r){const i=t._url(e);return m7(t,i,n,r)}async function m7(t,e,n,r){n=Cw(n);const i={data:n},a={},l=await t.contextProvider.getContext();l.authToken&&(a.Authorization="Bearer "+l.authToken),l.messagingToken&&(a["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=l.appCheckToken);const d=r.timeout||7e4,f=vY(d),m=await Promise.race([SY(e,i,a,t.fetchImpl),f.promise,t.cancelAllRequests]);if(f.cancel(),!m)throw new Xl("cancelled","Firebase Functions instance was deleted.");const g=gY(m.status,m.json);if(g)throw g;if(!m.json)throw new Xl("internal","Response is not valid JSON object.");let y=m.json.data;if(typeof y>"u"&&(y=m.json.result),typeof y>"u")throw new Xl("internal","Response is missing data field.");return{data:Wp(y)}}const o_="@firebase/functions",a_="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY="auth-internal",kY="app-check-internal",AY="messaging-internal";function _Y(t,e){const n=(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider(EY),d=r.getProvider(AY),f=r.getProvider(kY);return new bY(a,l,d,f,i,t)};Vi(new Cr(f7,n,"PUBLIC").setMultipleInstances(!0)),Tr(o_,a_,e),Tr(o_,a_,"esm2017")}function l_(t,e,n){wY(ye(t),e,n)}function DY(t,e,n){return xY(ye(t),e,n)}function jY(t,e,n){return TY(ye(t),e,n)}_Y(fetch.bind(self));const IY="@firebase/functions-compat",RY="0.3.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return DY(this._delegate,e,n)}httpsCallableFromURL(e,n){return jY(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new Kt("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new Kt("functions","Port missing in origin provided to useFunctionsEmulator()");return l_(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return l_(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY="us-central1",NY=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e??MY});return new p7(n,r)};function LY(){const t={Functions:p7};J.INTERNAL.registerComponent(new Cr("functions-compat",NY,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LY();J.registerVersion(IY,RY);const g7=async(t,e,n,r,i)=>{try{const l=await J.functions().httpsCallable("sendEmail")({to:t,subject:e,html:n,template:r,data:i});return console.log("[EMAIL SERVICE] Email sent successfully via cloud function"),!0}catch(a){return console.error("[EMAIL SERVICE] Error sending email:",a),console.log(`[EMAIL SERVICE] Fallback: Sending email to ${t}`),console.log(`[EMAIL SERVICE] Subject: ${e}`),console.log(`[EMAIL SERVICE] Body: ${n}`),!1}},OY=async(t,e,n,r,i,a,l)=>{const d=`Ticket Purchase Confirmation - ${n}`,f=`
    <h1>Ticket Purchase Confirmation</h1>
    <p>Hello ${e},</p>
    <p>Thank you for purchasing a ticket for the "${n}" competition!</p>
    <h2>Ticket Details:</h2>
    <ul>
      <li>Ticket Number: #${r}</li>
      <li>Purchase Date: ${i.toLocaleDateString()}</li>
      <li>Competition Ends: ${a.toLocaleDateString()}</li>
    </ul>
    <p>You can view the competition details and track your entry at:<br/>
    <a href="${window.location.origin}/competition/${l}">${window.location.origin}/competition/${l}</a></p>
    <p>Good luck!</p>
    <p>The RuneRaffle Team</p>
  `;return g7(t,d,f,"ticket_purchase",{displayName:e,competitionTitle:n,ticketNumber:r,purchaseDate:i,competitionEndsAt:a,competitionId:l})},PY=async(t,e,n,r,i,a)=>{const l=`Congratulations! You've Won - ${n}`,d=`
    <h1>Congratulations! You're a Winner!</h1>
    <p>Hello ${e},</p>
    <p>CONGRATULATIONS! You're a winner in the "${n}" competition!</p>
    <h2>Prize Details:</h2>
    <ul>
      <li>Prize: ${r}</li>
      <li>Value: ${i}</li>
    </ul>
    <p>You can verify the draw results at:<br/>
    <a href="${window.location.origin}/verification/${a}">${window.location.origin}/verification/${a}</a></p>
    <p>Our team will contact you shortly to arrange the delivery of your prize.</p>
    <p>Best regards,</p>
    <p>The RuneRaffle Team</p>
  `;return g7(t,l,d,"winner_notification",{displayName:e,competitionTitle:n,prize:r,prizeValue:i,competitionId:a})},pi=ze.collection("competitions"),ay=ze.collection("tickets"),Ta=ze.collection("users"),Hh=ze.collection("supportTickets"),Ew=ze.collection("ticketMessages"),y7=async()=>(await pi.get()).docs.map(e=>({id:e.id,...e.data()})),oh=async()=>(await pi.where("status","in",["active","ending"]).orderBy("createdAt","desc").get()).docs.map(e=>({id:e.id,...e.data()})),ly=async()=>(await pi.where("status","in",["complete"]).orderBy("completedAt","desc").get()).docs.map(e=>({id:e.id,...e.data()})),Ki=async t=>{const n=await pi.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},v7=async t=>{const e={...t,ticketsSold:0,createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp(),triviaQuestion:t.triviaQuestion||"What game is RuneScape developed by?",triviaAnswer:t.triviaAnswer||"Jagex"};return(await pi.add(e)).id},cy=async(t,e)=>{await pi.doc(t).update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},b7=async t=>{await pi.doc(t).delete()},w7=async(t,e,n,r,i)=>{await pi.doc(t).update({status:"complete",completedAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp(),winner:e,seed:n,blockHash:r,winningTicket:i})},x7=async(t,e=!1)=>{if(await pi.doc(t).update({status:"cancelled",updatedAt:J.firestore.FieldValue.serverTimestamp()}),e)try{await E7(t)}catch(r){console.error(`Error processing automatic refunds for competition ${t}:`,r)}},uy=async t=>{const e={...t,purchasedAt:J.firestore.FieldValue.serverTimestamp(),isWinner:!1},n=await ay.add(e),r=pi.doc(t.competitionId),i=await r.get();if(i.exists){const a=i.data();await r.update({ticketsSold:a.ticketsSold+1,updatedAt:J.firestore.FieldValue.serverTimestamp()}),await c7(t.userId,t.competitionId,n.id,a.title,t.ticketNumber);const l=await Ta.doc(t.userId).get();if(l.exists){const d=l.data();d&&d.email&&OY(d.email,d.displayName||"User",a.title,t.ticketNumber,new Date,a.endsAt.toDate(),t.competitionId).catch(f=>console.error("Error sending email:",f))}}return n.id},dy=async t=>(await ay.where("userId","==",t).orderBy("purchasedAt","desc").get()).docs.map(n=>({id:n.id,...n.data()})),J2=async t=>(await ay.where("competitionId","==",t).orderBy("purchasedAt","asc").get()).docs.map(n=>({id:n.id,...n.data()})),T7=async t=>{await Ta.doc(t.email).set({...t,createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()})},kw=async t=>{const n=await Ta.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},UY=async(t,e)=>{await Ta.doc(t).update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},hy=async(t,e)=>{await Ta.doc(t).update({credits:e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},e5=async t=>{try{console.log(`Looking up auth user ID for email: ${t}`);try{console.log("Checking auth collection first (best method)");const e=await J.firestore().collection("auth").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].id;return console.log(`Found user auth ID via auth collection: ${n}`),n}}catch(e){console.error("Error checking auth collection:",e)}try{console.log("Looking for auth UID in users collection by email field");const e=await J.firestore().collection("users").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data();if(n&&n.uid)return console.log(`Found user auth ID via user collection: ${n.uid}`),n.uid}}catch(e){console.error("Error checking users by email query:",e)}try{console.log("Checking if email is the document ID");const e=await Ta.doc(t).get();if(e.exists){const n=e.data();if(n&&n.uid)return console.log(`Found user auth ID via direct document lookup: ${n.uid}`),n.uid}}catch(e){console.error("Error checking user document by email ID:",e)}console.log("Looking for the user in the firebase authentication context");try{const e=await J.firestore().collection("currentUsers").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data();if(n&&n.uid)return console.log(`Found user auth UID via currentUsers collection: ${n.uid}`),n.uid}}catch(e){console.log("Error checking currentUsers collection:",e)}try{console.log(`Attempting to get the user document with email ${t}`);const e=await Ta.where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].id;return console.log(`Found user document ID: ${n}`),n}}catch(e){console.error("Error getting user document ID:",e)}console.log("No auth UID found directly. Checking notification history for this user.");try{const e=await J.firestore().collection("notifications").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data().userId;return console.log(`Found user ID from past notifications: ${n}`),n}}catch(e){console.log("Error checking notification history:",e)}return console.warn(`WARNING: Could not find auth ID for ${t}. This will likely cause notifications not to show up in the UI. Using email as fallback.`),console.warn("IMPORTANT: Make sure your UI is looking for notifications with the same user ID format as what's being created."),t}catch(e){return console.error(`Error getting auth user ID for ${t}:`,e),null}},S7=async t=>{try{console.log("Creating new support ticket:",{userEmail:t.userEmail,userId:t.userId,subject:t.subject});const e={...t,status:"open",createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()},r=(await Hh.add(e)).id;console.log(`Support ticket created with ID: ${r}`);try{const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:d}=await Promise.resolve().then(()=>oy);return{notifyTicketUpdate:d}},[]),{notifyAllAdmins:a}=await oa(async()=>{const{notifyAllAdmins:d}=await import("./adminService--PKiJ0ZU.js");return{notifyAllAdmins:d}},[]),l=await a(d=>(console.log(`Sending new ticket notification to admin: ${d}`),i(d,r,t.subject,"user","new")));console.log(`Sent new ticket notifications to ${l} admins`)}catch(i){console.error("Error sending notifications to admins:",i)}return r}catch(e){throw console.error("Error creating support ticket:",e),e}},fy=async t=>{const n=await Hh.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},Aw=async(t,e)=>{try{console.log(`Updating support ticket ${t}:`,e);const n=Hh.doc(t),r=await fy(t);if(!r)throw console.error(`Cannot update ticket ${t} - not found`),new Error(`Ticket not found: ${t}`);await n.update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()}),console.log(`Ticket ${t} updated successfully`);const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:a}=await Promise.resolve().then(()=>oy);return{notifyTicketUpdate:a}},void 0);if(r){if(e.status&&e.status!==r.status){const l=await e5(r.userEmail)||r.userId;console.log(`Status changed to ${e.status} - notifying user: ${l} (original userId: ${r.userId})`),await i(l,t,r.subject,"admin",e.status)}e.assignedTo&&e.assignedTo!==r.assignedTo&&(console.log(`Ticket assigned to new admin: ${e.assignedTo}`),await i(e.assignedTo,t,r.subject,"admin","assigned"),r.assignedTo&&(console.log(`Notifying previous admin ${r.assignedTo} about unassignment`),await i(r.assignedTo,t,r.subject,"admin","unassigned")))}}catch(n){throw console.error("Error updating support ticket:",n),n}},t5=async t=>(await Hh.where("userId","==",t).orderBy("createdAt","desc").get()).docs.map(n=>({id:n.id,...n.data()})),C7=async()=>(await Hh.where("status","in",["open","in_progress"]).orderBy("priority","desc").orderBy("createdAt","asc").get()).docs.map(e=>({id:e.id,...e.data()})),n5=async t=>{try{console.log(`Adding new ticket message to ticket ${t.ticketId}:`,{isAdmin:t.isAdmin,userId:t.userId});const e={...t,createdAt:J.firestore.FieldValue.serverTimestamp()},n=await Ew.add(e);console.log(`Message added successfully with ID: ${n.id}`),await Ew.doc(t.ticketId).update({updatedAt:J.firestore.FieldValue.serverTimestamp()}),console.log(`Fetching ticket data for ${t.ticketId} to send notifications`);const r=await fy(t.ticketId);if(r){console.log("Found ticket:",{subject:r.subject,userId:r.userId,userEmail:r.userEmail,assignedTo:r.assignedTo}),console.log("Importing notification services");const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:a}=await Promise.resolve().then(()=>oy);return{notifyTicketUpdate:a}},void 0);if(t.isAdmin){const l=await e5(r.userEmail)||r.userId;console.log(`Admin message detected - sending notification to ticket owner: ${l} (original userId: ${r.userId})`),await i(l,t.ticketId,r.subject,"admin")}else if(r.assignedTo)console.log(`User message detected - notifying assigned admin: ${r.assignedTo}`),await i(r.assignedTo,t.ticketId,r.subject,"user");else{console.log("No assigned admin - notifying all admins");const{notifyAllAdmins:a}=await oa(async()=>{const{notifyAllAdmins:d}=await import("./adminService--PKiJ0ZU.js");return{notifyAllAdmins:d}},[]),l=await a(d=>(console.log(`Sending notification to admin: ${d}`),i(d,t.ticketId,r.subject,"user")));console.log(`Sent notifications to ${l} admins`)}}else console.error(`No ticket found with ID ${t.ticketId} - cannot send notifications`);return n.id}catch(e){throw console.error("Error adding ticket message:",e),e}},Yp=async t=>(await Ew.where("ticketId","==",t).orderBy("createdAt","asc").get()).docs.map(n=>({id:n.id,...n.data()})),E7=async t=>{try{const e=await J2(t),n=await Ki(t);if(!n)throw new Error(`Competition ${t} not found`);if(n.status!=="cancelled")throw new Error(`Competition ${t} is not cancelled, current status: ${n.status}`);let r=0,i=0;const a={};for(const d of e)d.refunded||(a[d.userId]||(a[d.userId]={tickets:[],totalRefund:0}),a[d.userId].tickets.push(d),a[d.userId].totalRefund+=n.ticketPrice);const l=ze.batch();for(const d in a){const{tickets:f,totalRefund:m}=a[d];try{const g=await ze.collection("users").where("uid","==",d).limit(1).get();if(g.empty){console.error(`User ${d} not found, skipping refund`);continue}const y=g.docs[0],x=y.data().credits+m;l.update(y.ref,{credits:x,updatedAt:J.firestore.FieldValue.serverTimestamp()});for(const T of f)T.id&&l.update(ay.doc(T.id),{refunded:!0,updatedAt:J.firestore.FieldValue.serverTimestamp()});r++,i+=m;try{const{notifyUser:T}=await oa(async()=>{const{notifyUser:C}=await Promise.resolve().then(()=>oy);return{notifyUser:C}},void 0);await T(d,"Refund Processed",`Your ${f.length} ticket(s) for "${n.title}" have been refunded (${m} credits).`,"system")}catch(T){console.error("Error sending refund notification:",T)}}catch(g){console.error(`Error processing refund for user ${d}:`,g)}}return await l.commit(),{success:!0,refundedUsers:r,totalCreditsRefunded:i}}catch(e){throw console.error(`Error refunding cancelled competition ${t}:`,e),e}},VY=Object.freeze(Object.defineProperty({__proto__:null,addTicketMessage:n5,buyTicket:uy,cancelCompetition:x7,completeCompetition:w7,createCompetition:v7,createSupportTicket:S7,createUser:T7,deleteCompetition:b7,getActiveCompetitions:oh,getAuthUserIdByEmail:e5,getCompetition:Ki,getCompetitionTickets:J2,getCompetitions:y7,getCompletedCompetitions:ly,getOpenSupportTickets:C7,getSupportTicket:fy,getTicketMessages:Yp,getUser:kw,getUserSupportTickets:t5,getUserTickets:dy,refundCancelledCompetitionTickets:E7,updateCompetition:cy,updateSupportTicket:Aw,updateUser:UY,updateUserCredits:hy},Symbol.toStringTag,{value:"Module"})),k7=k.createContext({currentUser:null,isLoading:!0,userCredits:0,isAdmin:!1,setUserCredits:()=>{}}),zY=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(!0),[a,l]=k.useState(100),[d,f]=k.useState(!1);k.useEffect(()=>{const g=lY();g&&n(g);const y=cY(async w=>{if(n(w),w&&w.email)try{let x=await kw(w.email);x||(console.log(`Creating Firestore document for user: ${w.email}`),await T7({email:w.email,displayName:w.displayName||w.email,credits:100,isAdmin:!1}),x=await kw(w.email)),x&&(l(x.credits),f(x.isAdmin))}catch(x){console.error("Error fetching/creating user profile:",x)}else l(100),f(!1);i(!1)});return()=>y()},[]);const m={currentUser:e,isLoading:r,userCredits:a,isAdmin:d,setUserCredits:l};return u.jsx(k7.Provider,{value:m,children:t})},Gn=()=>k.useContext(k7),BY=mi`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,$Y=mi`
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
`,FY=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  ${t=>t.fullPage&&`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: hsla(var(--background), 0.8);
    z-index: 50;
  `}
`,qY=b.div`
  position: relative;
  width: ${t=>t.size}px;
  height: ${t=>t.size}px;
  display: flex;
  justify-content: center;
  align-items: center;
`,HY=b.svg`
  animation: ${BY} 2s linear infinite;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,GY=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${$Y} 1.5s ease-in-out infinite;
  font-family: 'Inter', sans-serif;
  font-weight: 800;
  font-size: 24px;
  line-height: 1;
`,WY=b.span`
  color: white;
`,YY=b.span`
  color: hsl(var(--primary));
`;function ia({size:t=60,fullPage:e=!1}){return u.jsx(FY,{fullPage:e,children:u.jsxs(qY,{size:t,children:[u.jsxs(HY,{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4",stroke:"hsla(var(--primary), 0.3)"}),u.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4",stroke:"hsl(var(--primary))",strokeDasharray:"125.6",strokeDashoffset:"37.7",strokeLinecap:"round"})]}),u.jsxs(GY,{children:[u.jsx(WY,{children:"R"}),u.jsx(YY,{children:"R"})]})]})})}const KY=b.div`
  position: relative;
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  padding: 2rem;
  margin-bottom: 2rem;
  width: ${t=>t.fullWidth?"100%":"auto"};
  
  ${t=>t.withGlow&&`
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.12);
    border: 1px solid transparent;
    background-image: 
      linear-gradient(hsl(var(--card)), hsl(var(--card))), 
      linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
    background-origin: border-box;
    background-clip: padding-box, border-box;
  `}
  
  ${t=>t.withPattern&&`
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('/images/pattern.svg') repeat;
      opacity: 0.05;
      z-index: 0;
    }
  `}
`,QY=b.div`
  position: relative;
  z-index: 1;
`;function Pi({children:t,withGlow:e=!1,withPattern:n=!1,fullWidth:r=!1}){return u.jsx(KY,{withGlow:e,withPattern:n,fullWidth:r,children:u.jsx(QY,{children:t})})}const XY=mi`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,ZY=mi`
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
`,JY=mi`
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
`,eK=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,p1=b.section`
  margin-bottom: 4rem;
`,tK=b.div`
  padding: 6rem 2rem;
  margin-bottom: 4rem;
  text-align: center;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, hsl(var(--background)), hsl(222, 47%, 15%));
  border-radius: 1rem;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: radial-gradient(circle at 20px 20px, rgba(255, 255, 255, 0.05) 2px, transparent 0);
    background-size: 30px 30px;
    opacity: 0.4;
    z-index: 0;
  }
  
  @media (max-width: 768px) {
    padding: 4rem 1rem;
  }
`,nK=b.div`
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
`,rK=b.h1`
  font-size: 4.5rem;
  font-weight: 800;
  margin-bottom: 1.5rem;
  line-height: 1;
  letter-spacing: -0.03em;
  animation: ${XY} 6s ease-in-out infinite;
  
  @media (max-width: 768px) {
    font-size: 3rem;
  }
`,iK=b.span`
  color: white;
`,sK=b.span`
  color: hsl(var(--primary));
`,oK=b.p`
  font-size: 1.5rem;
  margin-bottom: 2.5rem;
  color: hsl(var(--foreground) / 0.9);
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  animation: fadeIn 1s ease-out;
  animation-delay: 0.3s;
  animation-fill-mode: both;
  
  @media (max-width: 768px) {
    font-size: 1.2rem;
  }
`,c_=b.div`
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 2rem;
`,r5=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,_w=b(r5)`
  background-color: hsl(var(--primary));
  color: white;
  padding: 0.875rem 2rem;
  font-size: 1.125rem;
  font-weight: 600;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
  position: relative;
  overflow: hidden;
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: ${ZY} 3s infinite;
    background-size: 200% 100%;
  }

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }
`,g1=b(r5)`
  background-color: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 0.875rem 2rem;
  font-size: 1.125rem;
  font-weight: 600;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,aK=b.div`
  border-radius: 1rem;
  padding: 2.5rem;
  position: relative;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    cursor: pointer;
  }
`,lK=b.div`
  display: flex;
  flex-direction: column;
  gap: 2rem;
  position: relative;
  z-index: 1;
`,cK=b.div`
  flex: 2;
`,uK=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
`,y1=b.span`
  background-color: ${t=>{switch(t.variant){case"featured":return"rgba(245, 158, 11, 0.2)";case"limited":return"rgba(239, 68, 68, 0.2)";default:return"rgba(0, 136, 204, 0.2)"}}};
  color: ${t=>{switch(t.variant){case"featured":return"rgb(245, 158, 11)";case"limited":return"rgb(239, 68, 68)";default:return"rgb(0, 174, 239)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,fp=b.h2`
  font-size: 1.75rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,u_=b.p`
  margin-bottom: 1.5rem;
  opacity: 0.9;
  line-height: 1.6;
`,d_=b.div`
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.7);
`,dK=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
`,h_=b.div`
  margin: 1.5rem 0;
`,f_=b.div`
  height: 8px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`,m_=b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`,p_=b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,hK=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 1rem 0;
  padding: 1rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.5rem;
`,fK=b.div`
  width: 2.5rem;
  height: 2.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  color: hsl(var(--primary));
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`,mK=b.div`
  flex: 1;
`,pK=b.div`
  font-weight: 600;
  font-size: 1.125rem;
`,gK=b.div`
  font-size: 0.875rem;
  opacity: 0.7;
`,yK=b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`,g_=b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`,vK=b.div`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`,bK=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
`,wK=b.button`
  color: hsl(var(--primary));
  font-weight: 500;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  
  &:hover {
    text-decoration: underline;
  }
`,xK=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
`,TK=b.div`
  border-radius: 0.75rem;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }
`,SK=b.div`
  height: 10rem;
  background-color: rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
`,CK=b.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
`,EK=b.div`
  position: relative;
  z-index: 1;
  width: 3.5rem;
  height: 3.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`,kK=b.div`
  padding: 1.25rem;
`,AK=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
`,_K=b.span`
  background-color: ${t=>{switch(t.difficulty){case"easy":return"rgba(22, 163, 74, 0.2)";case"medium":return"rgba(245, 158, 11, 0.2)";case"hard":return"rgba(239, 68, 68, 0.2)";default:return"rgba(22, 163, 74, 0.2)"}}};
  color: ${t=>{switch(t.difficulty){case"easy":return"rgb(22, 163, 74)";case"medium":return"rgb(245, 158, 11)";case"hard":return"rgb(239, 68, 68)";default:return"rgb(22, 163, 74)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,DK=b.span`
  background-color: rgba(0, 174, 239, 0.2);
  color: rgb(0, 174, 239);
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,jK=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,IK=b.p`
  font-size: 0.875rem;
  margin-bottom: 1rem;
  opacity: 0.9;
  line-height: 1.6;
`,RK=b.div`
  font-size: 0.75rem;
  font-weight: 500;
  margin-bottom: 0.25rem;
  color: rgba(255, 255, 255, 0.7);
`,MK=b.div`
  font-size: 1.125rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
  margin-bottom: 1rem;
`,NK=b(_w)`
  width: 100%;
  text-align: center;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
`,LK=b(fp)`
  text-align: center;
  margin-bottom: 3rem;
`,OK=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
`,PK=b.div`
  text-align: center;
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 2.5rem;
  transition: all 0.3s ease;
  animation: ${JY} 10s ease-in-out infinite;
  animation-delay: ${t=>(t.itemKey||0)*2}s;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  border: 1px solid transparent;
  background-clip: padding-box, border-box;
  background-origin: padding-box, border-box;
  background-image: 
    linear-gradient(to bottom, hsl(var(--card)), hsl(var(--card))), 
    linear-gradient(to bottom, hsla(var(--primary), 0.2), transparent);
  
  &:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }
  
  &:hover .step-icon {
    transform: scale(1.1);
    background-color: rgba(0, 174, 239, 0.3);
  }
  
  &:hover .step-icon::after {
    opacity: 1;
  }
`,UK=b.div`
  width: 5rem;
  height: 5rem;
  background-color: ${t=>`rgba(${t.color}, 0.2)`};
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem auto;
  transition: all 0.3s ease;
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 9999px;
    border: 2px solid ${t=>`rgba(${t.color}, 0.3)`};
    opacity: 0;
    transition: all 0.3s ease;
  }
`,VK=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 14L15 8M9.5 8.5H9.51M14.5 13.5H14.51M19 21V15.5C19 15.5 19 15 18.5 15C18 15 17 14.5 17 13.5C17 12.5 18 12 18.5 12C19 12 19 11.5 19 11.5V5C19 3.89543 18.1046 3 17 3H7C5.89543 3 5 3.89543 5 5V11.5C5 11.5 5 12 5.5 12C6 12 7 12.5 7 13.5C7 14.5 6 15 5.5 15C5 15 5 15.5 5 15.5V21C5 22.1046 5.89543 23 7 23H17C18.1046 23 19 22.1046 19 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),y_=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4.16667 10H15.8333M15.8333 10L10 4.16667M15.8333 10L10 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),v_=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}},zK=b.span`
  font-size: 1.25rem;
  font-weight: bold;
  color: ${t=>`rgb(${t.color})`};
`,BK=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
`,$K=b.p`
  opacity: 0.9;
  line-height: 1.6;
`;function FK(){const[t,e]=k.useState(1),[n,r]=k.useState(null),[i,a]=k.useState([]),[l,d]=k.useState(!0),[f,m]=k.useState(null),[g,y]=k.useState(!1),[w,x]=k.useState(null),[T,C]=k.useState(!1),{currentUser:A,userCredits:_,setUserCredits:L}=Gn(),I=Pt();k.useEffect(()=>{q()},[]);const q=async()=>{try{d(!0),m(null);const ae=await oh();if(ae.length>0){const Ae=[...ae].sort((H,W)=>W.ticketsSold-H.ticketsSold);r(Ae[0]),a(ae.slice(0,4))}else r(null),a([])}catch(ae){console.error("Error fetching competitions:",ae),m("Failed to load competitions. Please try again later.")}finally{d(!1)}},D=()=>{if(n){const ae=Math.min(Math.floor((_||0)/n.ticketPrice),n.totalTickets-n.ticketsSold);t<ae&&e(t+1)}else e(ae=>ae+1)},M=()=>{t>1&&e(t-1)},$=()=>{I("/competitions")},Q=()=>{I("/how-it-works")},ie=ae=>{I(`/competition/${ae}`)},he=()=>{I("/competitions")},Ie=()=>{I("/login")},ne=()=>{I("/profile")},ke=async()=>{if(!A||!n||!n.id){A||Ie();return}const ae=t*n.ticketPrice;if(_<ae){alert("Not enough credits to purchase tickets.");return}if(n.ticketsSold+t>n.totalTickets){alert("Not enough tickets available.");return}C(!0);try{for(let Ae=0;Ae<t;Ae++)await uy({competitionId:n.id,userId:A.uid,ticketNumber:n.ticketsSold+Ae+1});r({...n,ticketsSold:n.ticketsSold+t}),L(_-ae),e(1),y(!0),setTimeout(()=>{y(!1)},3e3)}catch(Ae){console.error("Error purchasing tickets:",Ae),alert("Failed to purchase tickets. Please try again.")}finally{C(!1)}};return u.jsxs(eK,{children:[u.jsx(tK,{children:u.jsxs(nK,{children:[u.jsxs(rK,{children:[u.jsx(iK,{children:"Rune"}),u.jsx(sK,{children:"Raffle"})]}),u.jsx(oK,{children:"Enter exclusive RuneScape item giveaways with verified fair draw technology. Buy tickets, win rare items, and join a community of passionate players."}),u.jsxs(c_,{children:[u.jsxs(_w,{onClick:$,children:["Browse Competitions ",u.jsx(y_,{})]}),u.jsx(g1,{onClick:Q,children:"How It Works"})]})]})}),u.jsx(p1,{children:l?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{})}):f?u.jsx(Pi,{withGlow:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:f}),u.jsx(r5,{onClick:q,children:"Try Again"})]})}):n?u.jsx(Pi,{withGlow:!0,withPattern:!0,children:u.jsx(aK,{onClick:()=>n.id&&ie(n.id),children:u.jsx(lK,{children:u.jsxs(cK,{children:[u.jsxs(uK,{children:[u.jsx(y1,{variant:"featured",children:"Featured"}),u.jsxs(y1,{variant:"primary",children:["Ends in ",v_(n.endsAt)]}),n.status==="ending"&&u.jsx(y1,{variant:"limited",children:"Limited Time"})]}),u.jsx(fp,{children:n.title}),u.jsx(u_,{children:n.description}),u.jsxs(h_,{children:[u.jsx(d_,{children:"Ticket Sales Progress"}),u.jsx(f_,{children:u.jsx(m_,{width:`${Math.min(Math.round(n.ticketsSold/n.totalTickets*100),100)}%`})}),u.jsxs(p_,{children:[u.jsxs("span",{children:[n.ticketsSold,"/",n.totalTickets," tickets sold"]}),u.jsxs("span",{children:[Math.min(Math.round(n.ticketsSold/n.totalTickets*100),100),"% filled"]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx(d_,{children:"Prize Pool:"}),u.jsx(dK,{children:n.prize})]}),u.jsxs(hK,{children:[u.jsx(fK,{children:u.jsx(VK,{})}),u.jsxs(mK,{children:[u.jsxs(pK,{children:["1 Ticket = ",n.ticketPrice," Credits"]}),u.jsx(gK,{children:"Buy more tickets to increase your chances"})]}),u.jsxs(yK,{children:[u.jsx(g_,{onClick:M,disabled:t<=1,children:"-"}),u.jsx(vK,{children:t}),u.jsx(g_,{onClick:D,disabled:t>=Math.min(Math.floor((_||0)/n.ticketPrice),n.totalTickets-n.ticketsSold),children:"+"})]})]}),u.jsx(_w,{onClick:A?ke:Ie,disabled:T||!!A&&(_||0)<t*n.ticketPrice,children:A?T?"Processing...":g?"Purchase Complete!":`Buy ${t} Ticket${t>1?"s":""} (${t*n.ticketPrice} Credits)`:"Sign In to Buy Tickets"}),u.jsx("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",justifyContent:"center"},children:u.jsx(g1,{onClick:ae=>{ae.stopPropagation(),n.id&&ie(n.id)},children:"View Details"})}),A&&_<n.ticketPrice&&u.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:u.jsx("a",{href:"#",onClick:ae=>{ae.preventDefault(),ne()},style:{color:"hsl(var(--primary))",textDecoration:"none"},children:"Add more credits to your account"})})]})})})}):u.jsx(Pi,{withGlow:!0,withPattern:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx(fp,{children:"No active competitions"}),u.jsx(u_,{children:"Check back soon for new competitions!"})]})})}),u.jsxs(p1,{children:[u.jsxs(bK,{children:[u.jsx(fp,{children:"Active Competitions"}),u.jsxs(wK,{onClick:he,children:["View All",u.jsx(y_,{})]})]}),l?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading competitions..."}):f?u.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"red"},children:f}):i.length===0?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"No other active competitions found."}):u.jsx(xK,{children:i.map(ae=>u.jsxs(TK,{onClick:()=>ae.id&&ie(ae.id),children:[u.jsx(SK,{children:ae.imageUrl?u.jsx(CK,{src:ae.imageUrl,alt:ae.title}):u.jsx(EK,{children:u.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",color:"rgb(0, 174, 239)",children:u.jsx("path",{d:"M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm1-8.41l2.54 2.53a1 1 0 0 1-1.42 1.42L11.3 12.7A1 1 0 0 1 11 12V8a1 1 0 0 1 2 0v3.59z"})})})}),u.jsxs(kK,{children:[u.jsxs(AK,{children:[u.jsx(_K,{difficulty:ae.difficulty,children:ae.difficulty.charAt(0).toUpperCase()+ae.difficulty.slice(1)}),u.jsxs(DK,{children:["Ends in ",v_(ae.endsAt)]})]}),u.jsx(jK,{children:ae.title}),u.jsx(IK,{children:ae.description}),u.jsxs(h_,{children:[u.jsx(f_,{children:u.jsx(m_,{width:`${Math.min(Math.round(ae.ticketsSold/ae.totalTickets*100),100)}%`})}),u.jsxs(p_,{children:[u.jsxs("span",{children:[ae.ticketsSold,"/",ae.totalTickets," tickets"]}),u.jsxs("span",{children:[Math.min(Math.round(ae.ticketsSold/ae.totalTickets*100),100),"%"]})]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx(RK,{children:"Prize Pool:"}),u.jsx(MK,{children:ae.prize})]}),u.jsx(NK,{onClick:Ae=>{Ae.stopPropagation(),ae.id&&ie(ae.id)},children:"Enter Raffle"})]})]},ae.id))})]}),u.jsxs(p1,{children:[u.jsx(LK,{children:"How Our Raffles Work"}),u.jsx(OK,{children:[{step:1,title:"Buy Tickets",description:"Purchase tickets using credits. The more tickets you buy, the higher your chances of winning."},{step:2,title:"Wait for the Draw",description:"Once all tickets are sold, our provably fair system randomly selects a winning ticket."},{step:3,title:"Collect Your Prize",description:"If you win, we'll contact you to arrange delivery of your in-game prize within 24 hours."}].map((ae,Ae)=>u.jsxs(PK,{itemKey:Ae,children:[u.jsx(UK,{className:"step-icon",color:"0, 174, 239",children:u.jsx(zK,{color:"0, 174, 239",children:ae.step})}),u.jsx(BK,{children:ae.title}),u.jsx($K,{children:ae.description})]},Ae))}),u.jsx(c_,{style:{justifyContent:"center",marginTop:"2rem"},children:u.jsx(g1,{onClick:Q,children:"Learn More About Our Fair Draw System"})})]})]})}const qK=b.button`
  height: 2.5rem;
  width: 2.5rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.3);
  }
`,HK=b.span`
  font-size: 1rem;
  font-weight: 600;
`;function GK(){const{currentUser:t}=Gn(),e=Pt(),n=()=>t!=null&&t.email?t.email.charAt(0).toUpperCase():"U",r=()=>{e("/profile")};return u.jsx(qK,{onClick:r,title:"View Profile",children:u.jsx(HK,{children:n()})})}const WK=b.button`
  position: relative;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.375rem;
  transition: background-color 0.2s;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,YK=b.div`
  position: absolute;
  top: 0;
  right: 0;
  background-color: hsl(var(--primary));
  color: white;
  font-size: 0.75rem;
  font-weight: bold;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
`,KK=b.div`
  position: absolute;
  top: 100%;
  right: 0;
  width: 320px;
  max-width: 100vw;
  max-height: 400px;
  overflow-y: auto;
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  margin-top: 0.5rem;
  z-index: 50;
`,QK=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
`,XK=b.h3`
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
`,ZK=b.button`
  background: none;
  border: none;
  color: hsl(var(--primary));
  font-size: 0.875rem;
  cursor: pointer;
  &:hover {
    text-decoration: underline;
  }
`,JK=b.div`
  max-height: 320px;
  overflow-y: auto;
`,eQ=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,tQ=b.div`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  background-color: ${t=>t.isRead?"transparent":"rgba(59, 130, 246, 0.05)"};
  cursor: pointer;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }
`,nQ=b.div`
  font-weight: 600;
  margin-bottom: 0.25rem;
`,rQ=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 0.5rem;
`,iQ=b.div`
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
`,sQ=b.div`
  padding: 2rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,oQ=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),aQ=t=>{if(!t)return"";try{const e=t.toDate(),r=new Date().getTime()-e.getTime(),i=Math.round(r/6e4),a=Math.round(r/36e5),l=Math.round(r/864e5);return i<1?"Just now":i<60?`${i}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:e.toLocaleDateString()}catch(e){return console.error("Error formatting notification time:",e),""}};function lQ(){const{currentUser:t,isAdmin:e}=Gn(),[n,r]=k.useState([]),[i,a]=k.useState(0),[l,d]=k.useState(!1),[f,m]=k.useState(!1),g=k.useRef(null),y=Pt();k.useEffect(()=>{(async()=>{if(t){m(!0);try{console.log("Loading notifications for user:",t.uid);const _=await Tw(t.uid);console.log(`Found ${_.length} notifications for user.uid: ${t.uid}`);let L=[..._];if(t.email)try{console.log("Also checking for notifications with email:",t.email);const I=await Tw(t.email);console.log(`Found ${I.length} notifications for user.email: ${t.email}`);const q=new Set(L.map(M=>M.id)),D=I.filter(M=>M.id&&!q.has(M.id));console.log(`Adding ${D.length} unique notifications from email lookup`),L=[...L,...D]}catch(I){console.error("Error loading notifications by email:",I)}L.sort((I,q)=>!I.createdAt||!q.createdAt?0:q.createdAt.seconds-I.createdAt.seconds),console.log(`Total combined notifications: ${L.length}`),r(L),a(L.filter(I=>!I.read).length)}catch(_){console.error("Error loading notifications:",_)}finally{m(!1)}}})();const A=_=>{g.current&&!g.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[t]);const w=async C=>{if(!C.read&&C.id)try{await l7(C.id),r(A=>A.map(_=>_.id===C.id?{..._,read:!0}:_)),a(A=>Math.max(0,A-1))}catch(A){console.error("Error marking notification as read:",A)}d(!1),setTimeout(()=>{if(console.log("Navigating based on notification type:",{type:C.type,competitionId:C.competitionId,supportTicketId:C.supportTicketId}),C.type==="ticket_update"&&C.supportTicketId)if(console.log(`Navigating to support ticket: ${C.supportTicketId}`),e){const A=C.supportTicketId;y(`/admin?tab=support&ticketId=${A}`)}else y(`/support?ticketId=${C.supportTicketId}`);else C.type==="competition_winner"&&C.competitionId?(console.log(`Navigating to winner competition: ${C.competitionId}`),y(`/competition/${C.competitionId}`)):C.competitionId?(console.log(`Navigating to competition: ${C.competitionId}`),y(`/competition/${C.competitionId}`)):C.type==="ticket_purchase"&&C.ticketId?(console.log(`Navigating to ticket details: ${C.ticketId}`),y(`/profile/tickets?ticketId=${C.ticketId}`)):C.type==="credit_update"?(console.log("Navigating to profile/credits"),y("/profile/credits")):C.type==="system"?console.log("System notification - no specific navigation"):console.log("No specific navigation path for this notification type")},100)},x=async()=>{if(t)try{if(await Sw(t.uid),t.email)try{await Sw(t.email)}catch(C){console.error("Error marking email notifications as read:",C)}r(C=>C.map(A=>({...A,read:!0}))),a(0)}catch(C){console.error("Error marking all notifications as read:",C)}},T=()=>{d(C=>!C)};return t?u.jsxs("div",{style:{position:"relative"},children:[u.jsxs(WK,{onClick:T,children:[u.jsx(oQ,{}),i>0&&u.jsx(YK,{children:i>9?"9+":i})]}),l&&u.jsxs(KK,{ref:g,children:[u.jsxs(QK,{children:[u.jsx(XK,{children:"Notifications"}),i>0&&u.jsx(ZK,{onClick:x,children:"Mark all as read"})]}),u.jsx(JK,{children:f?u.jsx(eQ,{children:"Loading notifications..."}):n.length>0?n.map(C=>u.jsxs(tQ,{isRead:C.read,onClick:()=>w(C),children:[u.jsx(nQ,{children:C.title}),u.jsx(rQ,{children:C.message}),u.jsx(iQ,{children:aQ(C.createdAt)})]},C.id)):u.jsx(sQ,{children:"No notifications"})})]})]}):null}const cQ=b.header`
  position: sticky;
  top: 0;
  z-index: 50;
  width: 100%;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background-color: hsl(222, 47%, 11%);
`,uQ=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;
`,dQ=b.div`
  display: flex;
  height: 4rem;
  align-items: center;
  justify-content: space-between;
`,hQ=b.div`
  display: flex;
  align-items: center;
`,fQ=b(bh)`
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 1.5rem;
  text-decoration: none;
  color: white;
  position: relative;
  
  &:hover {
    color: hsl(var(--primary));
  }
  
  span {
    letter-spacing: 0.5px;
  }
`,mQ=b.span`
  color: hsl(var(--primary));
  font-weight: 800;
`,pQ=b.nav`
  display: flex;
  margin-left: 2.5rem;
  gap: 2rem;
`,Uo=b(bh)`
  font-size: 0.9rem;
  font-weight: 500;
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  transition: all 0.2s;
  padding: 0.5rem 0.75rem;
  cursor: pointer;
  text-decoration: none;
  position: relative;
  
  &:hover {
    color: white;
  }
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: ${t=>t.active?"100%":"0"};
    height: 2px;
    background-color: hsl(var(--primary));
    transition: width 0.2s ease;
  }
  
  &:hover::after {
    width: 100%;
  }
`,gQ=b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`,A7=b.button`
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
`,Am=b(A7)`
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: none;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,_m=b(A7)`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  
  &:hover {
    background-color: hsl(var(--primary), 0.9);
    transform: translateY(-1px);
  }
`,yQ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.375rem;
  margin-right: 0.5rem;
`,vQ=b.div`
  width: 1.25rem;
  height: 1.25rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: hsl(var(--primary));
`,bQ=b.span`
  font-weight: 600;
  font-size: 0.875rem;
  color: white;
`,wQ=b.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: hidden;
  transition: max-height 0.3s ease;
  max-height: ${({isOpen:t})=>t?"300px":"0"};
  background-color: hsl(222, 47%, 11%);
`,xQ=b.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0.5rem 0;
`,Tl=b(Uo)`
  padding: 0.75rem 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  
  &:last-child {
    border-bottom: none;
  }
`,TQ=b.button`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 24px;
  height: 20px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  margin-right: 1rem;

  span {
    width: 100%;
    height: 2px;
    background-color: white;
    transition: all 0.3s ease;
    transform-origin: left;
  }
  
  &.open {
    span:first-of-type {
      transform: rotate(45deg);
    }
    
    span:nth-of-type(2) {
      opacity: 0;
    }
    
    span:last-of-type {
      transform: rotate(-45deg);
    }
  }
`,b_=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 0.75rem 1rem 1rem;
`,SQ=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});function CQ(){const[t,e]=k.useState(window.innerWidth<768),[n,r]=k.useState(!1),{currentUser:i,userCredits:a,isAdmin:l}=Gn(),d=Hn(),f=Pt();k.useEffect(()=>{const w=()=>{const x=window.innerWidth<768;e(x),x||r(!1)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const m=d.pathname,g=async()=>{try{await aY(),f("/"),r(!1)}catch(w){console.error("Error logging out:",w)}},y=()=>{r(!n)};return u.jsx(cQ,{children:u.jsxs(uQ,{children:[u.jsxs(dQ,{children:[u.jsxs(hQ,{children:[t&&u.jsxs(TQ,{onClick:y,className:n?"open":"","aria-label":"Toggle menu",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx(fQ,{to:"/",children:u.jsxs("span",{children:["Rune",u.jsx(mQ,{children:"Raffle"})]})}),!t&&u.jsxs(pQ,{children:[u.jsx(Uo,{to:"/",active:m==="/"?"true":void 0,children:"Home"}),u.jsx(Uo,{to:"/competitions",active:m==="/competitions"||m.startsWith("/competition/")?"true":void 0,children:"Competitions"}),u.jsx(Uo,{to:"/winners",active:m==="/winners"?"true":void 0,children:"Winners"}),u.jsx(Uo,{to:"/how-it-works",active:m==="/how-it-works"?"true":void 0,children:"How It Works"}),u.jsx(Uo,{to:"/support",active:m==="/support"?"true":void 0,children:"Support"}),l&&u.jsx(Uo,{to:"/admin",active:m==="/admin"?"true":void 0,children:"Admin"})]})]}),u.jsx(gQ,{children:i?u.jsxs(u.Fragment,{children:[u.jsxs(yQ,{children:[u.jsx(vQ,{children:u.jsx(SQ,{})}),u.jsx(bQ,{children:a})]}),u.jsx(lQ,{}),!t&&u.jsxs(u.Fragment,{children:[u.jsx(Am,{onClick:()=>f("/profile"),children:"Profile"}),u.jsx(_m,{onClick:g,children:"Logout"})]}),t&&u.jsx(GK,{})]}):!t&&u.jsxs(u.Fragment,{children:[u.jsx(Am,{onClick:()=>f("/login"),children:"Login"}),u.jsx(_m,{onClick:()=>f("/register"),children:"Sign Up"})]})})]}),t&&u.jsxs(wQ,{isOpen:n,children:[u.jsxs(xQ,{children:[u.jsx(Tl,{to:"/",active:m==="/"?"true":void 0,children:"Home"}),u.jsx(Tl,{to:"/competitions",active:m==="/competitions"||m.startsWith("/competition/")?"true":void 0,children:"Competitions"}),u.jsx(Tl,{to:"/winners",active:m==="/winners"?"true":void 0,children:"Winners"}),u.jsx(Tl,{to:"/how-it-works",active:m==="/how-it-works"?"true":void 0,children:"How It Works"}),u.jsx(Tl,{to:"/support",active:m==="/support"?"true":void 0,children:"Support"}),l&&u.jsx(Tl,{to:"/admin",active:m==="/admin"?"true":void 0,children:"Admin"})]}),i?u.jsxs(b_,{children:[u.jsx(Am,{onClick:()=>{f("/profile"),r(!1)},children:"Profile"}),u.jsx(_m,{onClick:g,children:"Logout"})]}):u.jsxs(b_,{children:[u.jsx(Am,{onClick:()=>{f("/login"),r(!1)},children:"Login"}),u.jsx(_m,{onClick:()=>{f("/register"),r(!1)},children:"Sign Up"})]})]})]})})}const EQ=b.footer`
  width: 100%;
  background-color: hsl(222, 47%, 8%);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: 3rem 0 1.5rem;
`,kQ=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
`,AQ=b.div`
  margin-bottom: 2rem;
`,_Q=b.div`
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 2rem;
  color: white;

  span {
    letter-spacing: 0.5px;
  }
`,DQ=b.span`
  color: hsl(var(--primary));
  font-weight: 800;
`,jQ=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2.5rem;
`,Dm=b.a`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  background-color: hsl(222, 47%, 11%);
  color: rgba(255, 255, 255, 0.8);
  transition: all 0.2s ease;

  &:hover {
    background-color: hsl(var(--primary));
    color: white;
    transform: translateY(-3px);
  }
`,IQ=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2.5rem;
  
  @media (max-width: 640px) {
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
`,Xu=b.a`
  color: rgba(255, 255, 255, 0.7);
  font-size: 1rem;
  font-weight: 500;
  transition: color 0.2s ease;
  text-decoration: none;
  
  &:hover {
    color: white;
  }
`,RQ=b.div`
  text-align: center;
  margin-bottom: 2rem;
  max-width: 900px;
`,MQ=b.p`
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.875rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
`,NQ=b.p`
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.75rem;
  line-height: 1.6;
`,LQ=b.div`
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.875rem;
  text-align: center;
`,OQ=b.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  background-color: hsl(222, 47%, 11%);
  padding: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 640px) {
    flex-direction: column;
  }
`,PQ=b.p`
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.875rem;
  margin: 0;
`;b.button`
  background-color: transparent;
  border: none;
  color: white;
  padding: 0.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`;const UQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"})}),VQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})}),zQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),BQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})});function $Q(){const t=new Date().getFullYear();return u.jsxs(u.Fragment,{children:[u.jsx(EQ,{children:u.jsxs(kQ,{children:[u.jsx(AQ,{children:u.jsxs(_Q,{children:["Rune",u.jsx(DQ,{children:"Raffle"})]})}),u.jsxs(jQ,{children:[u.jsx(Dm,{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:u.jsx(UQ,{})}),u.jsx(Dm,{href:"https://discord.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Discord",children:u.jsx(VQ,{})}),u.jsx(Dm,{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",children:u.jsx(zQ,{})}),u.jsx(Dm,{href:"https://tiktok.com",target:"_blank",rel:"noopener noreferrer","aria-label":"TikTok",children:u.jsx(BQ,{})})]}),u.jsxs(IQ,{children:[u.jsx(Xu,{href:"/about",children:"About"}),u.jsx(Xu,{href:"/fairness",children:"Fairness"}),u.jsx(Xu,{href:"/support",children:"Support"}),u.jsx(Xu,{href:"/terms",children:"Terms of Service"}),u.jsx(Xu,{href:"/privacy",children:"Privacy Policy"})]}),u.jsxs(RQ,{children:[u.jsx(MQ,{children:"RuneRaffle.com is not affiliated, endorsed by, or in any way associated with RuneScape, Jagex Ltd or any of its subsidiaries or its affiliates."}),u.jsx(NQ,{children:"RuneRaffle.com is a fan-made raffle website created for the RuneScape community."})]}),u.jsxs(LQ,{children:["©",t,"-",t+3," RuneRaffle. All Rights Reserved."]})]})}),u.jsx(OQ,{children:u.jsx(PQ,{children:"This website uses cookies to improve your experience. By using this site, you agree to our use of cookies."})})]})}const FQ=b.div`
  display: grid;
  gap: 1.5rem;
  
  @media (min-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }
`,w_=b.div`
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
`,x_=b.div`
  padding: 1rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
  display: flex;
  align-items: center;
  justify-content: space-between;
`,T_=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,qQ=b.a`
  font-size: 0.875rem;
  color: hsl(var(--primary));
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`,S_=b.div`
  padding: 1.5rem;
`,HQ=b.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
`,jm=b.div`
  text-align: center;
  padding: 1rem;
`,Im=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: hsl(var(--primary));
`,Rm=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,GQ=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,WQ=b.div`
  padding: 1rem;
  border-radius: 0.5rem;
  border: 1px solid hsl(var(--border));
  
  &:hover {
    background-color: hsla(var(--muted), 0.05);
  }
`,YQ=b.h4`
  font-size: 1rem;
  font-weight: 500;
  margin: 0 0 0.25rem;
`,KQ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,QQ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
`,XQ=b.div`
  font-size: 2rem;
  font-weight: bold;
  color: hsl(var(--primary));
`,ZQ=b.div`
  text-align: center;
  padding: 2rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,JQ=b.div`
  text-align: center;
  padding: 1.5rem 1rem;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,eX=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: opacity 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
`;function tX(){const{currentUser:t,userCredits:e,setUserCredits:n}=Gn(),[r,i]=k.useState([]),[a,l]=k.useState(!1),[d,f]=k.useState({totalCompetitions:0,winCount:0,ticketsBought:0,spentCredits:0}),m=Pt();k.useEffect(()=>{t&&g()},[t]);const g=async()=>{if(t){l(!0);try{const x=await dy(t.uid),T=x.filter(q=>q.isWinner).length,C=x.length,A=await Promise.all(x.map(async q=>{const D=await Ki(q.competitionId);return{...q,competition:D}})),_=A.reduce((q,D)=>{var M;return q+(((M=D.competition)==null?void 0:M.ticketPrice)||0)},0),I=A.sort((q,D)=>{var Q,ie;const M=(Q=q.purchasedAt)!=null&&Q.toDate?q.purchasedAt.toDate():new Date(0);return((ie=D.purchasedAt)!=null&&ie.toDate?D.purchasedAt.toDate():new Date(0)).getTime()-M.getTime()}).slice(0,3);i(I),f({totalCompetitions:x.length,winCount:T,ticketsBought:C,spentCredits:_})}catch(x){console.error("Error loading user data:",x)}finally{l(!1)}}},y=x=>{if(!x||!x.toDate)return"Unknown date";const T=x.toDate();return new Date(T).toLocaleDateString()},w=()=>{if(!(t!=null&&t.email))return;const x=e+100;oa(async()=>{const{updateUser:T}=await Promise.resolve().then(()=>VY);return{updateUser:T}},void 0).then(({updateUser:T})=>{const C=t.email||"";T(C,{credits:x}).then(()=>{n(x)}).catch(A=>{console.error("Error adding credits:",A)})})};return a?u.jsx(ZQ,{children:"Loading your dashboard..."}):u.jsxs(FQ,{children:[u.jsxs(w_,{children:[u.jsxs(x_,{children:[u.jsx(T_,{children:"Recent Competitions"}),u.jsx(qQ,{href:"#",onClick:x=>{x.preventDefault(),m("/competitions")},children:"View all"})]}),u.jsx(S_,{children:r.length>0?u.jsx(GQ,{children:r.map(x=>{var T;return u.jsxs(WQ,{children:[u.jsx(YQ,{children:((T=x.competition)==null?void 0:T.title)||"Unknown Competition"}),u.jsxs("div",{style:{fontSize:"0.875rem",color:"hsl(var(--muted-foreground))"},children:["Ticket #",x.ticketNumber]}),u.jsxs(KQ,{children:[u.jsx("div",{children:y(x.purchasedAt)}),u.jsx("div",{style:{color:x.isWinner?"rgb(22, 163, 74)":"inherit",fontWeight:x.isWinner?500:400},children:x.isWinner?"🏆 Winner":"Entered"})]})]},x.id)})}):u.jsxs(JQ,{children:["You haven't entered any competitions yet.",u.jsx("div",{style:{marginTop:"1rem"},children:u.jsx("button",{onClick:()=>m("/competitions"),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer"},children:"Browse Competitions"})})]})})]}),u.jsxs(w_,{children:[u.jsx(x_,{children:u.jsx(T_,{children:"Available Credits"})}),u.jsxs(S_,{children:[u.jsxs(QQ,{children:[u.jsx(XQ,{children:e}),u.jsx(eX,{onClick:w,children:"Add Credits"})]}),u.jsx("div",{style:{fontSize:"0.875rem",color:"hsl(var(--muted-foreground))",marginBottom:"1.5rem"},children:"Credits are used to enter competitions. Each competition has a different credit cost."}),u.jsxs(HQ,{children:[u.jsxs(jm,{children:[u.jsx(Im,{children:d.totalCompetitions}),u.jsx(Rm,{children:"Total Competitions"})]}),u.jsxs(jm,{children:[u.jsx(Im,{children:d.winCount}),u.jsx(Rm,{children:"Competitions Won"})]}),u.jsxs(jm,{children:[u.jsx(Im,{children:d.ticketsBought}),u.jsx(Rm,{children:"Tickets Purchased"})]}),u.jsxs(jm,{children:[u.jsx(Im,{children:d.spentCredits}),u.jsx(Rm,{children:"Credits Spent"})]})]})]})]})]})}const i5=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,nX=mi`
  from { opacity: 0; transform: translateX(-10px); }
  to { opacity: 1; transform: translateX(0); }
`,v1=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 1rem 1.5rem;
  color: hsl(var(--foreground));
`,rX=b.div`
  margin-bottom: 2rem;
  animation: ${i5} 0.5s ease-out forwards;
  
  h1 {
    font-size: 2.5rem;
    font-weight: bold;
    
    @media (max-width: 768px) {
      font-size: 2rem;
    }
  }
`,iX=b.div`
  display: flex;
  flex-direction: column;
  gap: 2rem;
  
  @media (min-width: 1024px) {
    flex-direction: row;
  }
`,sX=b.div`
  width: 100%;
  margin-bottom: 1.5rem;
  animation: ${nX} 0.5s ease-out forwards;
  
  @media (min-width: 1024px) {
    width: 16rem;
    flex-shrink: 0;
  }
`,oX=b.nav`
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  overflow: hidden;
  position: sticky;
  top: 1.5rem;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
`,Mm=b.a`
  display: flex;
  align-items: center;
  padding: 0.875rem 1.25rem;
  border-left: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  background-color: ${t=>t.active?"hsla(var(--primary), 0.05)":"transparent"};
  font-weight: ${t=>t.active?"600":"400"};
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background-color: ${t=>!t.active&&"hsla(var(--muted), 0.05)"};
  }
`,aX=b.div`
  flex: 1;
  animation: ${i5} 0.5s ease-out forwards;
  animation-delay: 0.1s;
  opacity: 0;
`,C_=b.section`
  margin-bottom: 2.5rem;
`,b1=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
  color: hsl(var(--foreground));
  display: flex;
  align-items: center;
  
  &::after {
    content: '';
    flex-grow: 1;
    height: 1px;
    background-color: hsl(var(--border));
    margin-left: 1rem;
  }
`,E_=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 0;
  font-size: 1.125rem;
  color: hsl(var(--muted-foreground));
  
  p {
    margin-top: 1.5rem;
  }
`,lX=b.div`
  text-align: center;
  padding: 3rem 1rem;
  border: 1px dashed hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--muted-foreground));
  background-color: hsla(var(--muted), 0.03);
`;b.div`
  margin-bottom: 2rem;
`;b.div`
  padding: 0;
`;b.div`
  margin-bottom: 1.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  padding: 1.5rem;
  border-radius: 0.75rem;
  color: white;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
`;b.div`
  margin-bottom: 2rem;
`;b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
`;b.div`
  height: 1px;
  background-color: hsl(var(--border));
  margin-bottom: 2rem;
  margin-top: 2rem;
`;const cX=b.div`
  margin-top: 2rem;
  animation: ${i5} 0.5s ease-out forwards;
  animation-delay: 0.2s;
  opacity: 0;
`,uX=b.button`
  padding: 0.75rem 1rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
  }
`,dX=b.table`
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 0.5rem;
  overflow: hidden;
  margin-bottom: 1.5rem;
`,Sl=b.th`
  text-align: left;
  padding: 1rem;
  background-color: hsl(var(--card));
  color: white;
  font-weight: 600;
  font-size: 0.875rem;
  
  &:first-of-type {
    border-top-left-radius: 0.5rem;
  }
  
  &:last-of-type {
    border-top-right-radius: 0.5rem;
  }
`,hX=b.tr`
  background-color: ${t=>t.isWinner?"rgba(22, 163, 74, 0.05)":"transparent"};
  
  &:hover {
    background-color: hsla(var(--muted), 0.05);
  }
`,Cl=b.td`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  font-size: 0.875rem;
`,fX=b.a`
  color: hsl(var(--primary));
  text-decoration: none;
  cursor: pointer;
  
  &:hover {
    text-decoration: underline;
  }
`,mX=b.span`
  display: inline-block;
  padding: 0.25rem 0.625rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${t=>t.status==="active"?"rgba(59, 130, 246, 0.2)":t.status==="ending"?"rgba(245, 158, 11, 0.2)":t.status==="winner"?"rgba(22, 163, 74, 0.2)":"rgba(255, 255, 255, 0.1)"};
  color: ${t=>t.status==="active"?"rgb(59, 130, 246)":t.status==="ending"?"rgb(245, 158, 11)":t.status==="winner"?"rgb(22, 163, 74)":"white"};
`,k_=b.button`
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`;function pX(){const{currentUser:t,isLoading:e,isAdmin:n}=Gn(),r=Pt(),[i,a]=k.useState("profile"),[l,d]=k.useState([]),[f,m]=k.useState(!1);k.useEffect(()=>{t&&g()},[t]),k.useEffect(()=>{!e&&!t&&r("/login")},[e,t,r]);const g=async()=>{if(t){m(!0);try{const y=await dy(t.uid),w=await Promise.all(y.map(async x=>{const T=await Ki(x.competitionId);return{...x,competition:T}}));d(w)}catch(y){console.error("Error loading tickets:",y)}finally{m(!1)}}};return e?u.jsx(v1,{children:u.jsxs(E_,{children:[u.jsx(ia,{size:80}),u.jsx("p",{children:"Loading profile..."})]})}):t?u.jsxs(v1,{children:[u.jsx(rX,{children:u.jsx("h1",{children:"My Account"})}),u.jsxs(iX,{children:[u.jsx(sX,{children:u.jsxs(oX,{children:[u.jsx(Mm,{active:i==="profile",onClick:()=>a("profile"),children:"Profile"}),u.jsx(Mm,{active:i==="orders",onClick:()=>a("orders"),children:"My Tickets"}),u.jsx(Mm,{onClick:()=>r("/support"),children:"Support"}),u.jsx(Mm,{active:i==="referrals",onClick:()=>a("referrals"),children:"Referrals"})]})}),u.jsxs(aX,{children:[i==="profile"&&u.jsx(Pi,{withGlow:!0,children:u.jsx(tX,{})}),i==="orders"&&u.jsxs(C_,{children:[u.jsx(b1,{children:"Ticket History"}),f?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"2rem 0"},children:u.jsx(ia,{size:50})}):l.length>0?u.jsxs(dX,{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx(Sl,{children:"Ticket #"}),u.jsx(Sl,{children:"Competition"}),u.jsx(Sl,{children:"Purchase Date"}),u.jsx(Sl,{children:"Price"}),u.jsx(Sl,{children:"Status"}),u.jsx(Sl,{children:"Actions"})]})}),u.jsx("tbody",{children:l.map(y=>{var w,x,T,C,A;return u.jsxs(hX,{isWinner:y.isWinner,children:[u.jsx(Cl,{children:y.ticketNumber}),u.jsx(Cl,{children:u.jsx(fX,{onClick:()=>r(`/competition/${y.competitionId}`),children:((w=y.competition)==null?void 0:w.title)||"Unknown Competition"})}),u.jsx(Cl,{children:gX(y.purchasedAt)}),u.jsxs(Cl,{children:[((x=y.competition)==null?void 0:x.ticketPrice)||0," credits"]}),u.jsx(Cl,{children:u.jsx(mX,{status:y.isWinner?"winner":((T=y.competition)==null?void 0:T.status)==="complete"?"ended":"active",children:y.isWinner?"🏆 Winner":((C=y.competition)==null?void 0:C.status)==="complete"?"Ended":((A=y.competition)==null?void 0:A.status)==="ending"?"Ending Soon":"Active"})}),u.jsxs(Cl,{children:[u.jsx(k_,{onClick:()=>r(`/competition/${y.competitionId}`),children:"View"}),y.isWinner&&u.jsx(k_,{style:{marginLeft:"0.5rem",backgroundColor:"rgba(22, 163, 74, 0.2)",color:"rgb(22, 163, 74)"},onClick:()=>r(`/verification/${y.competitionId}`),children:"Verify"})]})]},y.id)})})]}):u.jsxs(lX,{children:[u.jsx("p",{children:"You haven't entered any competitions yet."}),u.jsx("button",{onClick:()=>r("/competitions"),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:500,backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer",marginTop:"1rem"},children:"Browse Competitions"})]})]}),i==="referrals"&&u.jsxs(C_,{children:[u.jsx(b1,{children:"My Referrals"}),u.jsxs(Pi,{withGlow:!0,withPattern:!0,children:[u.jsx("p",{style:{marginBottom:"1.5rem"},children:"Earn rewards by referring friends to RuneRaffle. Track your referrals and rewards here."}),u.jsx("button",{onClick:()=>r("/referrals"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:500,backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:y=>{y.currentTarget.style.transform="translateY(-2px)",y.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseOut:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none"},children:"Go to Referral Program"})]})]})]})]}),n&&u.jsx(cX,{children:u.jsxs(Pi,{withGlow:!0,children:[u.jsx(b1,{children:"Admin Tools"}),u.jsx(uX,{onClick:()=>r("/admin"),children:"Go to Admin Dashboard"})]})})]}):u.jsx(v1,{children:u.jsxs(E_,{children:[u.jsx(ia,{size:80}),u.jsx("p",{children:"Redirecting to login..."})]})})}const gX=t=>{if(!t||!t.toDate)return"Unknown date";const e=t.toDate();return new Date(e).toLocaleDateString()},_7=50,D7=25,yX=async(t,e)=>{try{const r=await J.functions().httpsCallable("generateReferralCode")(),{referralCode:i,isNew:a}=r.data;return console.log(`[REFERRAL] ${a?"Generated":"Retrieved"} referral code: ${i}`),i}catch(n){return console.error("[REFERRAL] Error getting/creating referral code:",n),console.log("[REFERRAL] Falling back to local referral code generation"),vX(t)}},vX=async(t,e)=>{const n=ze.collection("referrals"),r=await n.where("userId","==",t).limit(1).get();if(!r.empty)return r.docs[0].data().code;const i=bX(t),a={code:i,userId:t,referredUsers:[],createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()};return await n.add(a),i},bX=t=>{const e=t.substring(0,6),n=Math.random().toString(36).substring(2,6).toUpperCase();return`${e}-${n}`},wX=async t=>{const n=await ze.collection("referrals").where("code","==",t).limit(1).get();if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},xX=async(t,e,n)=>{try{const i=await J.functions().httpsCallable("processReferral")({referralCode:t});return console.log("[REFERRAL] Processed referral through cloud function"),i.data.success}catch(r){return console.error("[REFERRAL] Error processing referral through cloud function:",r),console.log("[REFERRAL] Falling back to local referral processing"),TX(t,e,n)}},TX=async(t,e,n)=>{try{const r=await wX(t);if(!r||!r.id)return console.error(`Invalid referral code: ${t}`),!1;if(r.userId===e)return console.error("User cannot refer themselves"),!1;if(r.referredUsers.includes(e))return console.error("User already referred"),!1;await ze.collection("referrals").doc(r.id).update({referredUsers:J.firestore.FieldValue.arrayUnion(e),updatedAt:J.firestore.FieldValue.serverTimestamp()});const a=ze.collection("referralRewards"),l={referrerId:r.userId,referredUserId:e,creditAmount:_7,status:"pending",createdAt:J.firestore.FieldValue.serverTimestamp()};await a.add(l);const d=await ze.collection("users").doc(r.userId).get();return d.exists&&d.data()&&await hy(n,D7),!0}catch(r){return console.error("Error processing referral:",r),!1}},SX=async t=>{try{return(await J.functions().httpsCallable("getUserReferrals")()).data}catch(e){return console.error("[REFERRAL] Error getting user referrals through cloud function:",e),console.log("[REFERRAL] Falling back to local referral retrieval"),CX(t)}},CX=async t=>{const n=await ze.collection("referrals").where("userId","==",t).get();return n.empty?[]:n.docs.map(r=>({id:r.id,...r.data()}))},EX=async t=>{const e=await SX(t);if(e.length===0)return{totalReferrals:0,pendingRewards:0,completedRewards:0,totalEarned:0};const n=e.reduce((m,g)=>m+g.referredUsers.length,0),i=await ze.collection("referralRewards").where("referrerId","==",t).get();if(i.empty)return{totalReferrals:n,pendingRewards:0,completedRewards:0,totalEarned:0};const a=i.docs.map(m=>m.data()),l=a.filter(m=>m.status==="pending").length,d=a.filter(m=>m.status==="completed").length,f=a.filter(m=>m.status==="completed").reduce((m,g)=>m+g.creditAmount,0);return{totalReferrals:n,pendingRewards:l,completedRewards:d,totalEarned:f}},kX=b.div`
  display: flex;
  flex-direction: ${t=>t.vertical?"column":"row"};
  gap: 0.75rem;
  margin: 1rem 0;
`,Gh=b.button`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  background-color: ${t=>t.bgColor};
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }
  
  svg {
    width: 1.25rem;
    height: 1.25rem;
  }
`,AX=({url:t,title:e})=>{const n=()=>{const r=`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Gh,{onClick:n,bgColor:"#1DA1F2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M22 5.8C21.2483 6.1263 20.4534 6.34419 19.64 6.45C20.4982 5.92831 21.1413 5.12621 21.45 4.19C20.6438 4.66 19.7593 4.99469 18.84 5.18C18.2245 4.52484 17.405 4.0759 16.5098 3.90723C15.6147 3.73857 14.6945 3.85958 13.8938 4.2531C13.093 4.64661 12.4569 5.29455 12.0852 6.09405C11.7135 6.89354 11.6273 7.79301 11.84 8.65C10.2094 8.57305 8.61444 8.16651 7.15865 7.45839C5.70287 6.75027 4.41885 5.75739 3.39 4.53C3.02914 5.15798 2.83952 5.86882 2.84 6.59C2.83872 7.26149 3.00422 7.92163 3.32176 8.51342C3.63929 9.10521 4.09752 9.60936 4.66 9.98C4.00798 9.96031 3.36989 9.7822 2.8 9.46V9.51C2.8036 10.4383 3.12129 11.3372 3.7199 12.0613C4.31851 12.7854 5.15615 13.2893 6.07 13.49C5.46409 13.6544 4.8285 13.6778 4.21 13.56C4.46168 14.3612 4.96624 15.0598 5.6562 15.5703C6.34617 16.0808 7.18675 16.3776 8.06 16.42C6.6172 17.5491 4.83588 18.1747 3 18.29C3.69472 18.8003 4.4681 19.193 5.28491 19.4527C6.10172 19.7124 6.9483 19.8355 7.8 19.8173C11.9486 19.7417 15.558 16.8846 17.001 13.01C17.3389 12.2254 17.5857 11.4043 17.736 10.561C18.5161 9.96318 19.1863 9.23099 19.72 8.39C18.9668 8.73161 18.1575 8.95841 17.33 9.06C18.1932 8.5367 18.8409 7.73654 19.15 6.8C18.3236 7.27212 17.4392 7.60818 16.52 7.79C15.9182 7.18744 15.1337 6.78146 14.2875 6.63193C13.4412 6.48239 12.5696 6.59789 11.7961 6.96121C11.0225 7.32453 10.3884 7.91593 9.98728 8.65608C9.58613 9.39622 9.43645 10.2466 9.56 11.08H9.28C9.05141 11.0852 8.82328 11.0734 8.598 11.045C8.598 8.768 10.438 6.856 12.731 6.714C12.928 6.7 13.124 6.7 13.32 6.7C15.498 6.7 17.308 8.233 17.641 10.27C17.641 10.27 17.673 10.367 17.673 10.464C17.7182 10.8271 17.7408 11.1927 17.741 11.559L17.726 11.912C17.726 15.043 15.186 17.611 12.055 17.642H12.002C11.8942 17.642 11.7864 17.642 11.6787 17.642C9.651 17.642 7.859 16.701 6.7 15.251C8.23118 15.1171 9.68342 14.5156 10.8486 13.5274C12.0138 12.5392 12.8354 11.2148 13.205 9.754C12.5595 9.75619 11.9309 9.56953 11.4046 9.21779C10.8783 8.86606 10.4808 8.36807 10.272 7.788C10.9752 7.76732 11.668 7.60154 12.302 7.3C11.7388 7.05067 11.2509 6.67464 10.8794 6.20288C10.5079 5.73112 10.2643 5.1787 10.17 4.593C10.816 4.91 11.536 5.097 12.271 5.135C11.1256 4.3766 10.4185 3.02791 10.44 1.593C10.44 1.201 10.496 0.827 10.593 0.473C12.6574 2.96681 15.7044 4.48586 18.97 4.72C18.9466 4.47595 18.9342 4.23062 18.933 3.985C18.933 1.782 20.722 0 22.925 0H22.939C23.9702 0.0152816 24.9525 0.459188 25.673 1.221C26.5016 1.05358 27.2987 0.741367 28.033 0.296C27.7648 1.18349 27.1757 1.94152 26.372 2.425C27.1383 2.33715 27.8869 2.14078 28.593 1.845C28.0367 2.6153 27.357 3.29123 26.581 3.835C26.6543 4.31703 26.6907 4.80395 26.69 5.292C26.69 13.485 20.569 23 10.361 23C7.80286 23.0014 5.29285 22.2975 3.106 20.968L3 20.904C5.05151 20.9433 7.07241 20.3773 8.838 19.26L9 19.156L8.635 19.063C6.54037 18.6175 4.71326 17.3417 3.612 15.543L3.458 15.267L3.581 15.283C4.30539 15.3528 5.03884 15.2533 5.72 14.992L6.127 14.826L5.687 14.767C3.41354 14.3701 1.61178 12.5667 1.219 10.294L1.178 10.024L1.425 10.112C2.08084 10.3921 2.78562 10.53 3.498 10.516L3.87 10.516L3.538 10.298C1.75269 9.11397 0.749609 7.0311 1.02432 4.9327C1.29903 2.8343 2.80973 1.07396 4.882 0.351L5.147 0.259L5.332 0.454C7.98998 3.38325 11.6118 5.1017 15.44 5.24C15.5463 5.24228 15.6523 5.2345 15.758 5.217L15.875 5.2L15.862 5.082C15.687 3.53 16.221 2.001 17.3 0.908C18.0432 0.15654 19.0333 -0.225698 20.0539 -0.147398C21.0744 -0.0690983 22.0002 0.461458 22.602 1.299L22.687 1.416L22.822 1.389C23.698 1.278 24.5593 1.06855 25.388 0.766L26.08 0.511L25.698 1.143C25.4753 1.49784 25.2025 1.81954 24.889 2.095L24.386 2.531L24.982 2.388C25.3631 2.30049 25.737 2.1855 26.1 2.044L26.872 1.787L26.353 2.422C25.8515 3.01882 25.2954 3.56744 24.693 4.062C24.6277 4.67737 24.5337 5.28952 24.411 5.895C24.3303 7.32594 24.0382 8.73682 23.544 10.083C23.0503 11.4325 22.3609 12.7015 21.5 13.843C20.639 14.9861 19.5975 15.9772 18.419 16.774C16.3576 18.2058 13.9539 19.0258 11.463 19.13H11.427C9.08065 19.13 6.81856 18.2911 5.053 16.793L4.846 16.602L5.113 16.694C5.90106 16.9513 6.72554 17.0837 7.556 17.086H7.605C7.557 17.057 7.515 17.022 7.471 16.985C6.40526 16.0761 5.68656 14.81 5.45596 13.4147C5.22537 12.0195 5.49896 10.5851 6.221 9.399L6.42 9.093L6.067 9.293C5.24134 9.74936 4.49616 10.3514 3.87 11.068L3.515 11.468L3.837 11.022C3.84761 10.5221 3.89259 10.0233 3.972 9.528C3.97725 9.46084 3.98491 9.39382 3.995 9.327C3.64043 9.46017 3.29821 9.6228 2.976 9.812L2.347 10.233L3.02 9.632C2.80296 8.83865 2.75304 8.00813 2.874 7.195L3.097 5.854L1.967 6.801C1.61444 7.09342 1.3255 7.45468 1.116 7.861L0.966 8.145L1.094 7.832C1.18207 7.62137 1.28271 7.4176 1.395 7.221L1.605 6.856L1.342 7.186C1.12 7.434 0.944 7.723 0.824 8.038L0.664 8.462L0.789 8.021C0.85 7.827 0.923 7.638 1.008 7.455L1.191 7.08L0.937 7.417C0.77 7.641 0.649 7.893 0.579 8.161L0.465 8.592L0.558 8.148C0.686971 7.65491 0.909894 7.19324 1.214 6.788L1.613 6.245L1.111 6.702C0.788 7.002 0.54 7.365 0.384 7.764L0.131 8.389L0.347 7.748C0.451 7.429 0.597 7.124 0.782 6.843L1.157 6.305L0.687 6.812C0.58 6.929 0.501 7.064 0.454 7.21L0.378 7.45L0.417 7.202C0.476 6.849 0.631 6.518 0.86 6.244L1.414 5.577L0.729 6.201C0.604 6.317 0.491 6.444 0.39 6.581L0.224 6.795L0.354 6.6C0.437065 6.46989 0.530045 6.34655 0.632 6.231L0.966 5.86L0.551 6.239C0.395 6.383 0.292 6.573 0.259 6.78L0.215 7.052L0.214 6.773C0.214 6.615 0.252 6.459 0.326 6.317L0.498 6.012L0.296 6.293C0.220729 6.40767 0.164094 6.53435 0.128 6.667L0.076 6.861L0.083 6.658C0.0957336 6.52566 0.129903 6.39646 0.184 6.276L0.303 6.039L0.178 6.267C0.124 6.371 0.091 6.485 0.081 6.602L0.067 6.773L0.053 6.592C0.0466406 6.32041 0.123726 6.05465 0.271 5.831L0.505 5.503L0.244 5.844C0.15 5.972 0.093 6.121 0.079 6.277L0.06 6.491L0.044 6.269C0.0356654 6.1541 0.0448436 6.03866 0.0712 5.92723C0.0975564 5.81581 0.140561 5.70996 0.198 5.615L0.384 5.362L0.175 5.626C0.115 5.709 0.07 5.803 0.042 5.902L0 6.055L0.007 5.9C0.0119349 5.81718 0.0283116 5.7353 0.056 5.656L0.125 5.483L0.041 5.653C0.0159342 5.71412 0.0021402 5.77817 1.12764e-07 5.843L-0.003 5.956L-0.001 5.84C0.00133171 5.75653 0.0185033 5.67429 0.05 5.599L0.107 5.461L0.049 5.59C0.0187223 5.67414 0.00192402 5.76084 0 5.848L0 5.957L0 5.847C-6.04546e-05 5.7754 0.0147021 5.70453 0.0437 5.638L0.114 5.483L0.037 5.651C0.0124273 5.72999 0.0002182 5.81166 0 5.894L0.003 6L0 5.893C0.00266466 5.8061 0.0194323 5.7211 0.05 5.642L0.121 5.491L0.04 5.658C0.0130511 5.74144 0.000205079 5.82798 0 5.915L0.004 6.018L0 5.911C0.00225869 5.82336 0.0191525 5.73748 0.05 5.658L0.119 5.504L0.039 5.67C0.0117511 5.75745 -0.00131225 5.84726 0.000139117 5.937L0.004 6.037L0 5.933C0.0033277 5.8298 0.0293555 5.72903 0.076 5.637L0.182 5.444L0.05 5.663C0.0178435 5.75897 0.000782188 5.85794 0 5.957L0.004 6.072L0 5.953C0.00410598 5.83959 0.0319093 5.72875 0.081 5.628L0.188 5.434L0.054 5.655C0.0183755 5.7522 -0.000110984 5.85301 9.95727e-08 5.954L0.004 6.072L-0.001 5.951C0.00322566 5.83717 0.0309991 5.72592 0.08 5.625L0.188 5.429L0.053 5.652C0.0181054 5.74981 0.000100156 5.84975 0 5.95L0.004 6.067L0 5.95L0.004 5.834L0 5.95L0.004 6.067Z",fill:"currentColor"})}),"Twitter"]})},_X=({url:t,title:e})=>{const n=()=>{const r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}&quote=${encodeURIComponent(e)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Gh,{onClick:n,bgColor:"#1877F2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M24 12.073C24 5.404 18.627 0 12 0C5.37 0 0 5.404 0 12.073C0 18.065 4.388 23.04 10.125 23.952V15.563H7.078V12.073H10.125V9.415C10.125 6.39 11.917 4.717 14.658 4.717C15.97 4.717 17.344 4.953 17.344 4.953V7.925H15.83C14.34 7.925 13.875 8.85 13.875 9.803V12.073H17.203L16.67 15.563H13.875V23.952C19.612 23.04 24 18.065 24 12.073Z",fill:"currentColor"})}),"Facebook"]})},DX=({url:t,title:e,description:n})=>{const r=()=>{const i=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}&title=${encodeURIComponent(e)}${n?`&summary=${encodeURIComponent(n)}`:""}`;window.open(i,"_blank","noopener,noreferrer")};return u.jsxs(Gh,{onClick:r,bgColor:"#0A66C2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M20.447 20.452H16.893V14.883C16.893 13.555 16.866 11.846 15.041 11.846C13.188 11.846 12.905 13.291 12.905 14.785V20.452H9.35103V9H12.765V10.561H12.811C13.288 9.661 14.448 8.711 16.181 8.711C19.782 8.711 20.448 11.081 20.448 14.166V20.452H20.447ZM5.33903 7.433C4.19303 7.433 3.27403 6.509 3.27403 5.368C3.27403 4.227 4.19403 3.305 5.33903 3.305C6.48003 3.305 7.40003 4.227 7.40003 5.368C7.40003 6.509 6.47903 7.433 5.33903 7.433ZM7.11703 20.452H3.56103V9H7.11703V20.452Z",fill:"currentColor"})}),"LinkedIn"]})},jX=({url:t,title:e})=>{const n=()=>{const r=`https://wa.me/?text=${encodeURIComponent(`${e} ${t}`)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Gh,{onClick:n,bgColor:"#25D366",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M17.472 14.382C17.204 14.248 15.739 13.527 15.493 13.438C15.246 13.35 15.066 13.305 14.887 13.573C14.707 13.842 14.133 14.518 13.975 14.697C13.816 14.877 13.658 14.899 13.39 14.766C13.122 14.632 12.132 14.315 10.97 13.278C10.055 12.462 9.445 11.462 9.287 11.193C9.128 10.925 9.27 10.777 9.404 10.641C9.526 10.518 9.673 10.321 9.809 10.163C9.945 10.005 9.99 9.894 10.078 9.714C10.166 9.534 10.122 9.377 10.055 9.243C9.99 9.109 9.383 7.642 9.158 7.106C8.941 6.584 8.721 6.656 8.556 6.646C8.397 6.637 8.217 6.637 8.038 6.637C7.858 6.637 7.567 6.702 7.32 6.97C7.074 7.238 6.309 7.959 6.309 9.426C6.309 10.893 7.381 12.316 7.518 12.496C7.654 12.676 9.442 15.429 12.171 16.729C12.833 17.022 13.348 17.203 13.75 17.338C14.412 17.557 15.013 17.528 15.485 17.461C16.01 17.386 17.218 16.749 17.443 16.125C17.667 15.501 17.667 14.965 17.601 14.853C17.535 14.742 17.355 14.675 17.087 14.541M12.04 21.933H12.035C10.2422 21.9334 8.48473 21.4504 6.931 20.527L6.586 20.327L2.855 21.336L3.879 17.695L3.658 17.339C2.65082 15.7382 2.11493 13.8829 2.116 11.987C2.118 6.491 6.544 2.066 12.04 2.066C14.691 2.066 17.178 3.078 19.042 4.944C19.9651 5.86371 20.6988 6.95356 21.1992 8.15591C21.6997 9.35826 21.9566 10.6485 21.954 11.953C21.952 17.45 17.527 21.933 12.04 21.933M20.494 3.492C19.3376 2.32837 17.9595 1.40929 16.4418 0.796438C14.924 0.183584 13.2951 -0.112069 11.66 -0.0749934C5.287 -0.0749934 0.115 5.093 0.112 11.466C0.110545 13.4775 0.633001 15.447 1.625 17.183L0 23L5.947 21.41C7.62514 22.3129 9.51882 22.7849 11.444 22.785H11.45C17.823 22.785 22.995 17.616 22.998 11.243C23.0359 9.60953 22.7408 7.9824 22.0995 6.46482C21.4583 4.94723 20.5119 3.5655 19.333 2.401",fill:"currentColor"})}),"WhatsApp"]})},IX=({url:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})};return u.jsx(Gh,{onClick:r,bgColor:e?"#22c55e":"#64748b",children:e?u.jsxs(u.Fragment,{children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"currentColor"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z",fill:"currentColor"})}),"Copy Link"]})})};function j7({title:t,url:e,description:n,image:r,vertical:i=!1}){return u.jsxs(kX,{vertical:i,children:[u.jsx(AX,{url:e,title:t}),u.jsx(_X,{url:e,title:t}),u.jsx(DX,{url:e,title:t,description:n}),u.jsx(jX,{url:e,title:t}),u.jsx(IX,{url:e})]})}const RX=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,MX=b.div`
  margin-bottom: 2rem;
`,NX=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,LX=b.p`
  font-size: 1.125rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 1.5rem;
`,w1=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  margin-bottom: 2rem;
`,x1=b.div`
  padding: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,T1=b.h2`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,S1=b.p`
  color: hsl(var(--muted-foreground));
  margin-bottom: 0;
`,C1=b.div`
  padding: 1.5rem;
`,OX=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
`,PX=b.div`
  background-color: hsl(var(--muted) / 0.1);
  padding: 1.5rem;
  border-radius: 0.5rem;
  border: 1px dashed hsl(var(--border));
  text-align: center;
  font-family: monospace;
  font-size: 1.5rem;
  font-weight: bold;
  letter-spacing: 2px;
  color: hsl(var(--primary));
`,A_=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  
  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
`,UX=b.div`
  margin-top: 2rem;
  background-color: hsl(var(--muted) / 0.1);
  padding: 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  word-break: break-all;
`,VX=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
`,Nm=b.div`
  background-color: hsl(var(--muted) / 0.1);
  padding: 1.5rem;
  border-radius: 0.5rem;
  text-align: center;
`,Lm=b.div`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: hsl(var(--primary));
`,Om=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,zX=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
`,__=b.div`
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,D_=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,j_=b.p`
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
  margin-bottom: 0;
  flex-grow: 1;
`,I_=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  color: hsl(var(--primary));
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,BX=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));
`,$X=b.div`
  text-align: center;
  padding: 2rem 1rem;
  color: hsl(var(--destructive));
  background-color: hsl(var(--destructive) / 0.1);
  border-radius: 0.5rem;
  margin-bottom: 2rem;
`;function FX(){const{currentUser:t}=Gn(),[e,n]=k.useState(null),[r,i]=k.useState(null),[a,l]=k.useState(!0),[d,f]=k.useState(null),[m,g]=k.useState(!1),y=t&&e?`${window.location.origin}/register?ref=${e}`:"";k.useEffect(()=>{(async()=>{if(!(!t||!t.email))try{l(!0),f(null);const C=await yX(t.uid,t.email);n(C);const A=await EX(t.uid);i(A)}catch(C){console.error("Error loading referral data:",C),f("Failed to load referral data. Please try again later.")}finally{l(!1)}})()},[t]);const w=()=>{e&&navigator.clipboard.writeText(e).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})},x=()=>{y&&navigator.clipboard.writeText(y).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})};return a?u.jsx(BX,{children:"Loading referral information..."}):u.jsxs(RX,{children:[u.jsxs(MX,{children:[u.jsx(NX,{children:"Refer Friends, Earn Credits"}),u.jsx(LX,{children:"Share your unique referral code with friends and earn credits when they sign up and participate."})]}),d&&u.jsx($X,{children:d}),u.jsxs(zX,{children:[u.jsxs(__,{children:[u.jsx(D_,{children:"You'll receive"}),u.jsx(j_,{children:"When someone uses your referral code to sign up and makes their first purchase, you'll receive credits as a reward."}),u.jsxs(I_,{children:[u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),_7," credits"]})]}),u.jsxs(__,{children:[u.jsx(D_,{children:"They'll receive"}),u.jsx(j_,{children:"Your friends will also get bonus credits when they sign up using your referral code. A win-win for everyone!"}),u.jsxs(I_,{children:[u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),D7," credits"]})]})]}),u.jsxs(w1,{children:[u.jsxs(x1,{children:[u.jsx(T1,{children:"Your Referral Code"}),u.jsx(S1,{children:"Share this code with friends or use the direct link below."})]}),u.jsxs(C1,{children:[u.jsxs(OX,{children:[u.jsx(PX,{children:e}),u.jsx(A_,{onClick:w,children:m?u.jsxs(u.Fragment,{children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"currentColor"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z",fill:"currentColor"})}),"Copy Code"]})})]}),u.jsxs(UX,{children:[u.jsx("strong",{children:"Direct sign-up link:"})," ",y,u.jsx(A_,{onClick:x,style:{marginTop:"1rem"},children:m?"Link Copied!":"Copy Sign-up Link"})]})]})]}),u.jsxs(w1,{children:[u.jsxs(x1,{children:[u.jsx(T1,{children:"Share Your Referral Link"}),u.jsx(S1,{children:"Easily share your referral link on social media or via message."})]}),u.jsx(C1,{children:u.jsx(j7,{title:"Join me on RuneRaffle and get free credits!",url:y,description:"Sign up using my referral link and get bonus credits to start entering raffles for epic RuneScape prizes."})})]}),r&&u.jsxs(w1,{children:[u.jsxs(x1,{children:[u.jsx(T1,{children:"Your Referral Stats"}),u.jsx(S1,{children:"Track how many friends you've referred and credits you've earned."})]}),u.jsx(C1,{children:u.jsxs(VX,{children:[u.jsxs(Nm,{children:[u.jsx(Lm,{children:r.totalReferrals}),u.jsx(Om,{children:"Total Referrals"})]}),u.jsxs(Nm,{children:[u.jsx(Lm,{children:r.pendingRewards}),u.jsx(Om,{children:"Pending Rewards"})]}),u.jsxs(Nm,{children:[u.jsx(Lm,{children:r.completedRewards}),u.jsx(Om,{children:"Completed Rewards"})]}),u.jsxs(Nm,{children:[u.jsx(Lm,{children:r.totalEarned}),u.jsx(Om,{children:"Total Credits Earned"})]})]})})]})]})}const qX=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,HX=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,GX=b.div`
  margin-bottom: 2rem;
`,WX=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;

  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,YX=b.p`
  font-size: 1.125rem;
  margin-bottom: 2rem;
  opacity: 0.9;
  line-height: 1.6;
`,KX=b.div`
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  justify-content: center;

  @media (max-width: 768px) {
    justify-content: flex-start;
    overflow-x: auto;
    padding-bottom: 0.5rem;
  }
`,Pm=b.button`
  padding: 0.75rem 1.25rem;
  border-radius: 0.5rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.05)"};
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  border: none;
  box-shadow: ${t=>t.active?"0 4px 12px rgba(99, 102, 241, 0.2)":"none"};
  
  &:hover {
    background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.1)"};
    transform: translateY(-2px);
  }
`;b.div`
  height: 1px;
  background-color: rgba(255, 255, 255, 0.1);
  margin: 2rem 0;
`;const QX=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
  }
`,XX=b.h2`
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
`,ZX=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,JX=b.span`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,eZ=b.select`
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
  }
`,tZ=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
`,nZ=b.div`
  border-radius: 0.75rem;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
  animation: ${qX} 0.5s ease-out forwards;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,rZ=b.div`
  height: 10rem;
  background-color: rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
`,iZ=b.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
`,sZ=b.div`
  position: relative;
  z-index: 1;
  width: 3.5rem;
  height: 3.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgb(0, 174, 239);
`,oZ=b.div`
  position: absolute;
  top: 0.75rem;
  left: 0.75rem;
  display: flex;
  gap: 0.5rem;
  z-index: 2;
`,aZ=b.div`
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  background-color: ${t=>{switch(t.status){case"active":return"rgba(22, 163, 74, 0.8)";case"ending":return"rgba(245, 158, 11, 0.8)";case"complete":return"rgba(107, 114, 128, 0.8)";default:return"rgba(22, 163, 74, 0.8)"}}};
  color: white;
  text-transform: uppercase;
`,lZ=b.div`
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  background-color: ${t=>{switch(t.difficulty){case"easy":return"rgba(22, 163, 74, 0.8)";case"medium":return"rgba(245, 158, 11, 0.8)";case"hard":return"rgba(239, 68, 68, 0.8)";default:return"rgba(22, 163, 74, 0.8)"}}};
  color: white;
`,cZ=b.div`
  padding: 1.25rem;
`,uZ=b.div`
  margin-top: -1.5rem;
  margin-bottom: 1rem;
  background-color: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.2);
  color: rgb(245, 158, 11);
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  display: inline-block;
`,dZ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,hZ=b.p`
  font-size: 0.875rem;
  margin-bottom: 1rem;
  opacity: 0.9;
  line-height: 1.6;
`,fZ=b.div`
  margin: 1rem 0;
`,mZ=b.div`
  height: 6px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`,pZ=b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`,gZ=b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`,yZ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`;b.div`
  display: flex;
  flex-direction: column;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
`;b.div`
  display: flex;
  flex-direction: column;
  align-items: flex-end;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
  color: ${t=>t.color||"white"};
`;b.div`
  text-align: center;
  padding: 3rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.75rem;
`;b.div`
  width: 4rem;
  height: 4rem;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem auto;
  color: rgba(255, 255, 255, 0.5);
`;b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`;b.p`
  opacity: 0.7;
  max-width: 24rem;
  margin: 0 auto;
`;b.div`
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 2rem;
`;b.button`
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.375rem;
  border: none;
  background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.05)"};
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  cursor: pointer;
  
  &:hover {
    background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.1)"};
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;const R_=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),vZ=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}};function bZ(){const[t,e]=k.useState("all"),[n,r]=k.useState([]),[i,a]=k.useState(!0),[l,d]=k.useState(null),[f,m]=k.useState("popularity"),g=Pt();k.useEffect(()=>{y()},[t]);const y=async()=>{try{a(!0),d(null);let T=[];t==="completed"?T=await ly():(T=await oh(),t==="active"?T=T.filter(A=>A.status==="active"):t==="ending"&&(T=T.filter(A=>A.status==="ending")));const C=w(T,f);r(C)}catch(T){console.error("Error fetching competitions:",T),d("Failed to load competitions. Please try again.")}finally{a(!1)}},w=(T,C)=>{switch(C){case"popularity":return[...T].sort((A,_)=>_.ticketsSold/_.totalTickets-A.ticketsSold/A.totalTickets);case"newest":return[...T].sort((A,_)=>{var L,I;return(((L=_.createdAt)==null?void 0:L.seconds)||0)-(((I=A.createdAt)==null?void 0:I.seconds)||0)});case"ending-soon":return[...T].sort((A,_)=>{const L=A.endsAt?new Date(A.endsAt.seconds*1e3):new Date(0),I=_.endsAt?new Date(_.endsAt.seconds*1e3):new Date(0);return L.getTime()-I.getTime()});case"price-low":return[...T].sort((A,_)=>A.ticketPrice-_.ticketPrice);case"price-high":return[...T].sort((A,_)=>_.ticketPrice-A.ticketPrice);default:return T}},x=T=>{g(`/competition/${T}`)};return u.jsxs(HX,{children:[u.jsxs(GX,{children:[u.jsx(WX,{children:"Competitions"}),u.jsx(YX,{children:"Browse and enter our current RuneScape raffles. Each entry gives you a chance to win valuable items with our provably fair drawing system."})]}),u.jsxs(Pi,{withGlow:!0,children:[u.jsxs(KX,{children:[u.jsx(Pm,{active:t==="all",onClick:()=>e("all"),children:"All Competitions"}),u.jsx(Pm,{active:t==="active",onClick:()=>e("active"),children:"Active"}),u.jsx(Pm,{active:t==="ending",onClick:()=>e("ending"),children:"Ending Soon"}),u.jsx(Pm,{active:t==="completed",onClick:()=>e("completed"),children:"Completed"})]}),u.jsxs(QX,{children:[u.jsx(XX,{children:t==="all"?"All Competitions":t==="active"?"Active Competitions":t==="ending"?"Ending Soon":"Completed Competitions"}),u.jsxs(ZX,{children:[u.jsx(JX,{children:"Sort by:"}),u.jsxs(eZ,{value:f,onChange:T=>{m(T.target.value),r(w(n,T.target.value))},children:[u.jsx("option",{value:"popularity",children:"Popularity"}),u.jsx("option",{value:"newest",children:"Newest"}),u.jsx("option",{value:"ending-soon",children:"Ending Soon"}),u.jsx("option",{value:"price-low",children:"Price: Low to High"}),u.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]}),i?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{})}):l?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:l}),u.jsx("button",{onClick:y,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer"},children:"Try Again"})]}):n.length===0?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"No competitions found for the selected filter."}):u.jsx(tZ,{children:n.map((T,C)=>u.jsxs(nZ,{onClick:()=>x(T.id),style:{animationDelay:`${C*.05}s`},children:[u.jsxs(rZ,{children:[T.imageUrl?u.jsx(iZ,{src:T.imageUrl,alt:T.title}):u.jsx(sZ,{children:u.jsx(R_,{})}),u.jsxs(oZ,{children:[u.jsx(aZ,{status:T.status,children:T.status}),u.jsx(lZ,{difficulty:T.difficulty,children:T.difficulty})]})]}),u.jsxs(cZ,{children:[u.jsx(uZ,{children:T.prizeValue}),u.jsx(dZ,{children:T.title}),u.jsx(hZ,{children:T.description}),u.jsxs(fZ,{children:[u.jsx(mZ,{children:u.jsx(pZ,{width:`${T.ticketsSold/T.totalTickets*100}%`})}),u.jsxs(gZ,{children:[u.jsxs("span",{children:[T.ticketsSold," / ",T.totalTickets," tickets sold"]}),u.jsxs("span",{children:[Math.round(T.ticketsSold/T.totalTickets*100),"%"]})]})]}),u.jsxs(yZ,{children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.125rem"},children:[T.ticketPrice," credits"]}),u.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:"per ticket"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{color:"rgb(14, 165, 233)"},children:u.jsx(R_,{})}),u.jsx("div",{style:{fontWeight:"bold"},children:T.status==="complete"?"Completed":vZ(T.endsAt)})]}),u.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,textAlign:"right"},children:T.status==="complete"?"Winner drawn":"remaining"})]})]})]})]},T.id))})]})]})}const E1=b.div`
  margin-top: 2rem;
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
`,k1=b.h3`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,wZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1.5rem;
  gap: 1rem;
`,xZ=b.div`
  font-size: 1.5rem;
  font-weight: 500;
  padding: 0 1rem;
`,Dw=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  ${t=>t.variant==="primary"?`
    background: hsl(var(--primary));
    color: white;
    border: none;
    
    &:hover:not(:disabled) {
      opacity: 0.9;
    }
  `:t.variant==="danger"?`
    background: hsl(var(--destructive));
    color: white;
    border: none;
    
    &:hover:not(:disabled) {
      opacity: 0.9;
    }
  `:`
    background: transparent;
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    
    &:hover:not(:disabled) {
      background: hsl(var(--accent));
    }
  `}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,M_=b(Dw)`
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  padding: 0;
`,TZ=b.div`
  background: hsl(var(--accent));
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
`,A1=b.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
  
  &:last-child {
    margin-bottom: 0;
    padding-top: 0.5rem;
    border-top: 1px solid hsl(var(--border));
    font-weight: 600;
  }
`,SZ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,CZ=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-bottom: 1rem;
`,EZ=b.div`
  padding: 1rem;
  background-color: rgba(22, 163, 74, 0.1);
  color: rgb(22, 163, 74);
  border-radius: 0.5rem;
  margin-bottom: 1rem;
`;function kZ({competition:t,onPurchaseComplete:e,ticketCount:n,ticketPrice:r,onIncrement:i,onDecrement:a,onPurchase:l,loading:d,success:f,disabled:m}){const{currentUser:g,userCredits:y,setUserCredits:w}=Gn(),[x,T]=k.useState(1),[C,A]=k.useState(!1),[_,L]=k.useState(!1),[I,q]=k.useState(null),D=n!==void 0?n:x,M=r!==void 0?r:(t==null?void 0:t.ticketPrice)||0,$=d!==void 0?d:C,Q=f!==void 0?f:_;k.useEffect(()=>{t&&(T(1),L(!1),q(null))},[t==null?void 0:t.id]);const ie=t?t.totalTickets-t.ticketsSold:99,he=Math.floor(y/M),Ie=Math.min(ie,he,10),ne=D*M,ke=y<ne,ae=()=>{i?i():D<Ie&&T(W=>W+1)},Ae=()=>{a?a():D>1&&T(W=>W-1)},H=async()=>{if(l){await l();return}if(!(!g||!(t!=null&&t.id))&&!ke){A(!0),q(null);try{const W=t.ticketsSold+1,se=[];for(let R=0;R<D;R++){const X=W+R;se.push(uy({competitionId:t.id,userId:g.uid,ticketNumber:X}))}await Promise.all(se);const Se=y-ne;g.email&&(await hy(g.email,Se),w(Se)),L(!0),e&&e(),setTimeout(()=>{L(!1)},3e3)}catch(W){console.error("Error purchasing tickets:",W),q(W.message||"Failed to purchase tickets")}finally{A(!1)}}};return(t==null?void 0:t.status)!=="active"?u.jsxs(E1,{children:[u.jsx(k1,{children:"Ticket Purchase"}),u.jsx("div",{children:"This competition is no longer accepting entries."})]}):ie<=0?u.jsxs(E1,{children:[u.jsx(k1,{children:"Ticket Purchase"}),u.jsx("div",{children:"All tickets for this competition have been sold."})]}):u.jsxs(E1,{children:[u.jsx(k1,{children:"Purchase Tickets"}),Q?u.jsxs(u.Fragment,{children:[u.jsxs(EZ,{children:["Congratulations! You have successfully purchased ",D," ticket",D!==1?"s":"","."]}),u.jsx(Dw,{variant:"primary",onClick:()=>L(!1),children:"Purchase More Tickets"})]}):u.jsxs(u.Fragment,{children:[u.jsxs(SZ,{children:[u.jsx("span",{children:"Available Credits:"}),u.jsx("strong",{children:y})]}),u.jsxs(wZ,{children:[u.jsx(M_,{onClick:Ae,disabled:D<=1||$,children:"-"}),u.jsx(xZ,{children:D}),u.jsx(M_,{onClick:ae,disabled:D>=Ie||$,children:"+"})]}),u.jsxs(TZ,{children:[u.jsxs(A1,{children:[u.jsx("div",{children:"Ticket Price:"}),u.jsxs("div",{children:[M," credits"]})]}),u.jsxs(A1,{children:[u.jsx("div",{children:"Quantity:"}),u.jsx("div",{children:D})]}),u.jsxs(A1,{children:[u.jsx("div",{children:"Total:"}),u.jsxs("div",{children:[ne," credits"]})]})]}),ke&&u.jsx(CZ,{children:"You don't have enough credits. Please add more credits or reduce the number of tickets."}),I&&u.jsx("div",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:I}),u.jsx(Dw,{variant:"primary",onClick:H,disabled:ke||$||D<=0,children:$?"Processing...":`Buy ${D} Ticket${D!==1?"s":""}`})]})]})}const _1=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,N_=b.button`
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
  margin-bottom: 2rem;
  padding: 0.5rem;
  border-radius: 0.375rem;
  
  &:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.05);
  }
`,AZ=b.div`
  display: grid;
  grid-template-columns: 1fr 350px;
  gap: 2rem;
  
  @media (max-width: 1024px) {
    grid-template-columns: 1fr;
  }
`,_Z=b.div``,DZ=b.div`
  @media (max-width: 1024px) {
    grid-row: 1;
    margin-bottom: 2rem;
  }
`,L_=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
`,O_=b.div`
  padding: 1.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
`,P_=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,jZ=b.p`
  font-size: 0.875rem;
  opacity: 0.9;
  line-height: 1.6;
`,U_=b.div`
  padding: 1.5rem;
`;b.div`
  padding: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`;const IZ=b.div`
  margin-bottom: 2rem;
`,RZ=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
`,D1=b.span`
  background-color: ${t=>{switch(t.variant){case"featured":return"rgba(245, 158, 11, 0.2)";case"limited":return"rgba(239, 68, 68, 0.2)";case"status":return"rgba(22, 163, 74, 0.2)";default:return"rgba(0, 136, 204, 0.2)"}}};
  color: ${t=>{switch(t.variant){case"featured":return"rgb(245, 158, 11)";case"limited":return"rgb(239, 68, 68)";case"status":return"rgb(22, 163, 74)";default:return"rgb(0, 174, 239)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,MZ=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;

  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,NZ=b.p`
  font-size: 1.125rem;
  margin-bottom: 2rem;
  opacity: 0.9;
  line-height: 1.6;
`,LZ=b.div`
  margin-top: 3rem;
  margin-bottom: 1.5rem;
`,j1=b.h2`
  font-size: 1.75rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,V_=b.div`
  display: flex;
  background-color: hsl(var(--card));
  padding: 1.5rem;
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  margin-bottom: 2rem;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`,z_=b.div`
  width: 5rem;
  height: 5rem;
  flex-shrink: 0;
  background-color: rgba(245, 158, 11, 0.1);
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 1.5rem;
  color: rgb(245, 158, 11);
  
  @media (max-width: 768px) {
    margin-right: 0;
    margin-bottom: 1rem;
  }
`,B_=b.div`
  flex: 1;
`,$_=b.h3`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,F_=b.div`
  font-size: 1.125rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
  margin-bottom: 1rem;
`,q_=b.p`
  opacity: 0.9;
  line-height: 1.6;
`;b.div`
  margin: 1.5rem 0;
`;b.div`
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.7);
`;b.div`
  height: 8px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`;b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`;b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.75rem;
`;b.span`
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
`;b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 1rem 0;
  padding: 1rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.5rem;
`;b.div`
  width: 2.5rem;
  height: 2.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  color: hsl(var(--primary));
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`;b.div`
  flex: 1;
`;b.div`
  font-weight: 600;
  font-size: 1.125rem;
`;b.div`
  font-size: 0.875rem;
  opacity: 0.7;
`;b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`;b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;b.div`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`;const OZ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  
  &:hover {
    transform: translateY(-2px);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
`;b(OZ)`
  background-color: hsl(var(--primary));
  color: white;
`;b.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin: 1.5rem 0;
`;b.div`
  display: flex;
  flex-direction: column;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 0.25rem;
`;const PZ=b.span`
  font-weight: 600;
`;b(PZ)`
  color: ${t=>t.ending?"rgb(245, 158, 11)":"white"};
`;b.div`
  margin-top: 3rem;
`;b.div`
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 0.375rem;
  padding: 1rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin: 1rem 0;
`;b.div`
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 1.5rem;
`;b.button`
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  cursor: pointer;
  font-weight: 500;
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.7)"};
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  transition: all 0.2s ease;
  
  &:hover {
    color: white;
  }
`;const UZ=b.div`
  height: 300px;
  width: 100%;
  border-radius: 0.75rem;
  margin-bottom: 2rem;
  background-color: hsl(var(--card));
  background-image: ${t=>t.imageUrl?`url(${t.imageUrl})`:"none"};
  background-size: cover;
  background-position: center;
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 0.75rem;
    opacity: ${t=>t.imageUrl?1:0};
  }
`,H_=b.div`
  height: 1px;
  background-color: rgba(255, 255, 255, 0.1);
  margin: 2rem 0;
`,VZ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
`,G_=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M15.8333 10H4.16675M4.16675 10L10.0001 4.16667M4.16675 10L10.0001 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),W_=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 17C8.41015 17 5.5 14.0899 5.5 10.5V4.5H18.5V10.5C18.5 14.0899 15.5899 17 12 17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M8.5 20.5H15.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M12 17V20.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M18.5 7.5H20.5C21.6046 7.5 22.5 6.60457 22.5 5.5C22.5 4.39543 21.6046 3.5 20.5 3.5H18.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M5.5 7.5H3.5C2.39543 7.5 1.5 6.60457 1.5 5.5C1.5 4.39543 2.39543 3.5 3.5 3.5H5.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),zZ=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M13.3333 9.16667V6.66667C13.3333 4.36548 11.4678 2.5 9.16667 2.5C6.86548 2.5 5 4.36548 5 6.66667V9.16667M6.66667 17.5H11.6667C12.5871 17.5 13.3333 16.7538 13.3333 15.8333V10.8333C13.3333 9.91286 12.5871 9.16667 11.6667 9.16667H6.66667C5.74619 9.16667 5 9.91286 5 10.8333V15.8333C5 16.7538 5.74619 17.5 6.66667 17.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),BZ=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
`,$Z=b.h4`
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,FZ=b.p`
  margin-bottom: 1.25rem;
  line-height: 1.6;
`,qZ=b.input`
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 0.375rem;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
  }
`,HZ=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
  
  &:disabled {
    background-color: rgba(255, 255, 255, 0.2);
    cursor: not-allowed;
  }
`,Y_=b.div`
  margin-top: 1rem;
  padding: 0.75rem;
  border-radius: 0.375rem;
  background-color: ${t=>t.correct?"rgba(22, 163, 74, 0.2)":"rgba(239, 68, 68, 0.2)"};
  color: ${t=>t.correct?"rgb(22, 163, 74)":"rgb(239, 68, 68)"};
  font-weight: 500;
`,GZ=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10 10.8333V10C10.9205 10 11.6667 9.25381 11.6667 8.33333C11.6667 7.41286 10.9205 6.66667 10 6.66667C9.07953 6.66667 8.33334 7.41286 8.33334 8.33333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M9.99999 13.3333H10.0083",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),WZ=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}},YZ=b.section`
  margin-top: 3rem;
  margin-bottom: 2rem;
`,I1=b.div`
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.25rem;
  margin-bottom: 1rem;
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  transition: transform 0.2s, box-shadow 0.2s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  }
`,R1=b.div`
  background-color: hsl(var(--primary));
  color: white;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.125rem;
  flex-shrink: 0;
`,M1=b.div`
  flex: 1;
`,N1=b.h4`
  margin: 0 0 0.5rem 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: white;
`,L1=b.p`
  margin: 0;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.5;
  font-size: 0.875rem;
`;b.div`
  display: flex;
  align-items: center;
  margin-bottom: 0.75rem;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`;b.span`
  font-weight: 600;
`;b.div`
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
  background-color: ${t=>{switch(t.status){case"active":return"rgb(22, 163, 74)";case"ending":return"rgb(245, 158, 11)";case"complete":return"rgb(22, 163, 74)";case"cancelled":return"rgb(239, 68, 68)";default:return"rgba(255, 255, 255, 0.5)"}}};
  margin-right: 0.5rem;
`;const KZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
`,QZ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`,XZ=b.div`
  display: flex;
  align-items: center;
`,K_=b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,ZZ=b.span`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`,JZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
`,eJ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`,tJ=b.span`
  font-weight: 600;
`;b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`;const nJ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: hsl(var(--primary));
  color: white;
  
  &:hover {
    transform: translateY(-2px);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
`,rJ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
`,iJ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`,sJ=b.span`
  font-weight: 600;
`,oJ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`,aJ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,lJ=b.span`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`;function cJ(){const{id:t}=ex(),{currentUser:e,userCredits:n,setUserCredits:r}=Gn(),i=Pt(),[a,l]=k.useState(1),[d,f]=k.useState(null),[m,g]=k.useState(!0),[y,w]=k.useState(null),[x,T]=k.useState(!1),[C,A]=k.useState(!1),[_,L]=k.useState(""),[I,q]=k.useState(!1),[D,M]=k.useState(!1),[$,Q]=k.useState(""),[ie,he]=k.useState(0),Ie=()=>{he(se=>se+1)};k.useEffect(()=>{(async()=>{if(!t){w("Competition ID is missing"),g(!1);return}try{const Se=await Ki(t);Se?f(Se):w("Competition not found")}catch(Se){console.error("Error fetching competition:",Se),w("Failed to load competition details")}finally{g(!1)}})()},[t]);const ne=()=>{const se=d?Math.min(Math.floor(n/d.ticketPrice),d.totalTickets-d.ticketsSold):0;a<se&&l(a+1)},ke=()=>{a>1&&l(a-1)},ae=()=>{i("/competitions")},Ae=()=>{if(!d)return;const se=d.triviaAnswer||"Jagex";_.trim().toLowerCase()===se.toLowerCase()?(M(!0),q(!0),Q("")):(M(!1),q(!0),Q("Incorrect answer. Please try again."),setTimeout(()=>{q(!1),Q("")},3e3))},H=async()=>{if(!e||!d||!d.id)return;if(!D){Q("Please answer the trivia question correctly before purchasing tickets.");return}const se=a*d.ticketPrice;if(n<se){alert("Not enough credits to purchase tickets.");return}if(d.ticketsSold+a>d.totalTickets){alert("Not enough tickets available.");return}T(!0);try{for(let Se=0;Se<a;Se++)await uy({competitionId:d.id,userId:e.uid,ticketNumber:d.ticketsSold+Se+1});f({...d,ticketsSold:d.ticketsSold+a}),r(n-se),l(1),A(!0),setTimeout(()=>{A(!1)},3e3)}catch(Se){console.error("Error purchasing tickets:",Se),alert("Failed to purchase tickets. Please try again.")}finally{T(!1)}};if(m)return u.jsx(_1,{children:u.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading competition details..."})});if(y||!d)return u.jsxs(_1,{children:[u.jsxs(N_,{onClick:ae,children:[u.jsx(G_,{})," Back to Competitions"]}),u.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"red"},children:y||"Competition not found"})]});d.totalTickets-d.ticketsSold;const W=d.status==="complete"||d.status==="cancelled";return WZ(d.endsAt),Math.min(Math.round(d.ticketsSold/d.totalTickets*100),100),u.jsxs(_1,{children:[u.jsxs(N_,{onClick:ae,children:[u.jsx(G_,{})," Back to Competitions"]}),u.jsxs(AZ,{children:[u.jsxs(_Z,{children:[d.imageUrl&&u.jsx(UZ,{imageUrl:d.imageUrl}),u.jsxs(IZ,{children:[u.jsxs(RZ,{children:[u.jsx(D1,{variant:"status",children:d.status==="active"?"Active":d.status==="ending"?"Ending Soon":d.status==="complete"?"Completed":"Cancelled"}),u.jsx(D1,{variant:"primary",children:d.difficulty}),d.status==="ending"&&u.jsx(D1,{variant:"limited",children:"Limited Time"})]}),u.jsx(MZ,{children:d.title}),u.jsx(NZ,{children:d.description})]}),u.jsx(LZ,{children:u.jsx(j1,{children:"Prize Details"})}),u.jsxs(V_,{children:[u.jsx(z_,{children:u.jsx(W_,{})}),u.jsxs(B_,{children:[u.jsx($_,{children:d.prize}),u.jsxs(F_,{children:["Value: ",d.prizeValue]}),u.jsx(q_,{children:"Win this amazing prize by participating in our raffle. Each ticket gives you a chance to win!"})]})]}),d.status==="complete"&&d.winner&&u.jsxs(L_,{children:[u.jsx(O_,{children:u.jsx(P_,{children:"Winner Announcement"})}),u.jsxs(U_,{children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Winner:"}),u.jsx("div",{children:d.winner.username||d.winner.email})]}),d.winningTicket&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Winning Ticket:"}),u.jsxs("div",{children:["#",d.winningTicket]})]}),d.seed&&u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Verification Seed:"}),u.jsx("div",{style:{fontFamily:"monospace",backgroundColor:"rgba(0,0,0,0.2)",padding:"0.5rem",borderRadius:"0.25rem",wordBreak:"break-all"},children:d.seed})]})]})]}),u.jsxs(YZ,{children:[u.jsx(j1,{children:"How It Works"}),u.jsxs("div",{children:[u.jsxs(I1,{children:[u.jsx(R1,{children:"1"}),u.jsxs(M1,{children:[u.jsx(N1,{children:"Purchase Tickets"}),u.jsx(L1,{children:"Use your credits to buy raffle tickets. Each ticket gives you one entry in the draw and increases your chances of winning. You can purchase multiple tickets for better odds."})]})]}),u.jsxs(I1,{children:[u.jsx(R1,{children:"2"}),u.jsxs(M1,{children:[u.jsx(N1,{children:"Fair Random Drawing"}),u.jsx(L1,{children:"When all tickets are sold or the competition end date is reached, a winner is selected using our provably fair system that ensures complete transparency and randomness in the selection process."})]})]}),u.jsxs(I1,{children:[u.jsx(R1,{children:"3"}),u.jsxs(M1,{children:[u.jsx(N1,{children:"Claim Your Prize"}),u.jsx(L1,{children:"Winners are notified immediately, and prizes are delivered directly to your account. No complicated claims process - just enjoy your winnings and good luck on your next entry!"})]})]})]})]}),u.jsx(H_,{}),u.jsx(j1,{children:"Prize Details"}),u.jsxs(V_,{children:[u.jsx(z_,{children:u.jsx(W_,{})}),u.jsxs(B_,{children:[u.jsx($_,{children:d.prize}),u.jsxs(F_,{children:["Value: ",d.prizeValue]}),u.jsx(q_,{children:"The winner will be contacted via email to arrange prize delivery."})]})]})]}),u.jsx(DZ,{children:u.jsxs(L_,{children:[u.jsxs(O_,{children:[u.jsx(P_,{children:"Purchase Tickets"}),u.jsx(jZ,{children:"Buy tickets to enter this competition. Each ticket gives you a chance to win."})]}),u.jsxs(U_,{children:[!W&&u.jsxs(BZ,{children:[u.jsxs($Z,{children:[u.jsx(GZ,{})," Skill-Based Entry Question"]}),u.jsx(FZ,{children:d.triviaQuestion||"What game is RuneScape developed by?"}),D?u.jsx(Y_,{correct:!0,children:"Correct! You may now purchase tickets."}):u.jsxs(u.Fragment,{children:[u.jsx(qZ,{placeholder:"Enter your answer",value:_,onChange:se=>L(se.target.value),disabled:D}),u.jsx(HZ,{onClick:Ae,disabled:!_.trim(),children:"Submit Answer"}),I&&!D&&u.jsx(Y_,{correct:!1,children:$||"Incorrect answer. Please try again."})]})]}),W?u.jsxs(aJ,{children:[u.jsx(zZ,{}),u.jsxs(lJ,{children:["This competition has ",d.status==="complete"?"ended":"been cancelled","."]})]}):u.jsxs(u.Fragment,{children:[u.jsxs(KZ,{children:[u.jsx(QZ,{children:"Number of Tickets"}),u.jsxs(XZ,{children:[u.jsx(K_,{onClick:ke,disabled:a===1,children:"-"}),u.jsx(ZZ,{children:a}),u.jsx(K_,{onClick:ne,disabled:a>=Math.min(Math.floor(n/d.ticketPrice),d.totalTickets-d.ticketsSold),children:"+"})]})]}),u.jsxs(JZ,{children:[u.jsx(eJ,{children:"Total Price"}),u.jsxs(tJ,{children:[a*d.ticketPrice," credits"]})]}),u.jsx(nJ,{onClick:H,disabled:!D||x||n<a*d.ticketPrice,children:x?"Processing...":C?"Purchase Complete!":"Buy Tickets"}),u.jsxs(rJ,{children:[u.jsxs(iJ,{children:["Available Credits: ",u.jsx(sJ,{children:n})]}),u.jsx(oJ,{onClick:()=>i("/profile/credits"),children:"Add Credits"})]})]})]})]})})]}),d&&e&&u.jsx(kZ,{competition:d,onPurchaseComplete:Ie}),u.jsx(H_,{}),u.jsx(VZ,{children:"Share this competition"}),u.jsx(j7,{title:`Check out this RuneRaffle competition: ${d.title}`,url:window.location.href,description:`${d.description} Prize value: ${d.prizeValue} credits. Enter now!`})]})}const uJ=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,dJ=b.div`
  margin-bottom: 2rem;
  text-align: ${t=>t.centered?"center":"left"};
  animation: ${t=>t.withAnimation?uJ:"none"} 0.5s ease-out forwards;
`,hJ=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: hsl(var(--foreground));
  line-height: 1.2;
  
  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,fJ=b.p`
  font-size: 1.125rem;
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  line-height: 1.6;
  max-width: 800px;
  margin-left: ${t=>{var e;return((e=t.style)==null?void 0:e.textAlign)==="center"?"auto":"0"}};
  margin-right: ${t=>{var e;return((e=t.style)==null?void 0:e.textAlign)==="center"?"auto":"0"}};
`,mJ=b.div`
  margin-top: 1.5rem;
`;function Um({title:t,description:e,children:n,centered:r=!1,withAnimation:i=!0}){return u.jsxs(dJ,{centered:r,withAnimation:i,children:[u.jsx(hJ,{children:t}),e&&u.jsx(fJ,{style:{textAlign:r?"center":"left"},children:e}),n&&u.jsx(mJ,{children:n})]})}const pJ=mi`
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
`,Vm=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,gJ=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,yJ=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: ${pJ} 0.5s ease-out forwards;
  opacity: 0;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,vJ=b.div`
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
  padding: 1.5rem;
  position: relative;
`,bJ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,wJ=b.div`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,xJ=b.div`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background-color: rgba(245, 158, 11, 0.2);
  color: rgb(245, 158, 11);
  font-weight: 600;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
`,TJ=b.div`
  padding: 1.5rem;
`,SJ=b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: white;
`,CJ=b.p`
  font-size: 0.875rem;
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  line-height: 1.6;
`,EJ=b.div`
  margin-bottom: 1.5rem;
  padding: 0.75rem;
  background-color: rgba(245, 158, 11, 0.05);
  border-radius: 0.5rem;
  border: 1px dashed rgba(245, 158, 11, 0.2);
`,kJ=b.div`
  font-weight: 600;
  margin-bottom: 0.25rem;
`,AJ=b.div`
  font-weight: bold;
  color: rgb(245, 158, 11);
  font-size: 1.125rem;
  margin-bottom: 0.75rem;
`,_J=b.div`
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`,DJ=b.div`
  font-weight: 600;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,jJ=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,O1=b.div`
  display: flex;
  justify-content: space-between;
  font-size: 0.875rem;
  overflow: hidden;
  
  @media (max-width: 768px) {
    flex-direction: column;
    gap: 0.25rem;
  }
`,P1=b.span`
  color: rgba(255, 255, 255, 0.7);
`,U1=b.span`
  font-family: monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
  
  @media (max-width: 768px) {
    max-width: 100%;
  }
`,IJ=b.a`
  color: hsl(var(--primary));
  text-decoration: none;
  font-size: 0.875rem;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  margin-top: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    text-decoration: underline;
    color: hsl(var(--primary) / 0.8);
  }
`,RJ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  margin-top: 1rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,MJ=b(RJ)`
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,NJ=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM7.1 11.5L3.6 8.1L4.8 6.9L7.1 9.2L11.1 5.4L12.3 6.6L7.1 11.5Z",fill:"#10B981"})}),LJ=()=>u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M8.5 3.5V1H1V11H11V3.5H8.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M8.5 7.5L11 5L8.5 2.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),OJ=t=>{if(!t||!t.toDate)return"Unknown date";const e=t.toDate(),n={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,n)};function PJ(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),[i,a]=k.useState(null),l=Pt();k.useEffect(()=>{(async()=>{try{r(!0);const g=await ly();e(g)}catch(g){console.error("Error fetching winners:",g),a("Failed to load winners. Please try again later.")}finally{r(!1)}})()},[]);const d=m=>{l(`/competition/${m}`)},f=m=>{l(`/verification/${m}`)};return n?u.jsxs(Vm,{children:[u.jsx(Um,{title:"Recent Winners",description:"Loading winner information...",centered:!0}),u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{size:80})})]}):i?u.jsxs(Vm,{children:[u.jsx(Um,{title:"Recent Winners",centered:!0}),u.jsx(Pi,{withGlow:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1.5rem"},children:i}),u.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Try Again"})]})})]}):t.length===0?u.jsx(Vm,{children:u.jsx(Um,{title:"Recent Winners",description:"No completed competitions yet. Check back soon!",centered:!0})}):u.jsxs(Vm,{children:[u.jsx(Um,{title:"Recent Winners",description:"Congratulations to all our past competition winners! Browse through the list of winners and see what prizes they've taken home.",centered:!0}),u.jsx(Pi,{withGlow:!0,children:u.jsx(gJ,{children:t.map((m,g)=>{var y;return u.jsxs(yJ,{style:{animationDelay:`${g*.1}s`},children:[u.jsxs(vJ,{children:[u.jsx(bJ,{children:((y=m.winner)==null?void 0:y.username)||"Anonymous Winner"}),u.jsx(wJ,{children:OJ(m.completedAt)}),u.jsx(xJ,{children:"Winner"})]}),u.jsxs(TJ,{children:[u.jsx(SJ,{children:m.title}),u.jsx(CJ,{children:m.description.length>100?m.description.substring(0,100)+"...":m.description}),u.jsxs(EJ,{children:[u.jsx(kJ,{children:"Prize Won:"}),u.jsx(AJ,{children:m.prize}),u.jsxs("div",{children:["Valued at: ",m.prizeValue]})]}),u.jsxs(_J,{children:[u.jsxs(DJ,{children:[u.jsx(NJ,{})," Verified Fair Draw"]}),u.jsxs(jJ,{children:[u.jsxs(O1,{children:[u.jsx(P1,{children:"Draw Seed:"}),u.jsx(U1,{children:m.seed||"N/A"})]}),u.jsxs(O1,{children:[u.jsx(P1,{children:"Total Tickets:"}),u.jsx(U1,{children:m.ticketsSold})]}),u.jsxs(O1,{children:[u.jsx(P1,{children:"Winning Ticket:"}),u.jsx(U1,{children:m.winningTicket||"N/A"})]})]}),u.jsxs(IJ,{onClick:()=>f(m.id),children:["Verify Draw Results ",u.jsx(LJ,{})]})]}),u.jsx(MJ,{onClick:()=>d(m.id),children:"View Competition Details"})]})]},m.id)})})})]})}const s5=k.createContext({});function o5(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const a5=typeof window<"u",I7=a5?k.useLayoutEffect:k.useEffect,my=k.createContext(null),l5=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class UJ extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function VJ({children:t,isPresent:e,anchorX:n}){const r=k.useId(),i=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(l5);return k.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:g,right:y}=a.current;if(e||!i.current||!d||!f)return;const w=n==="left"?`left: ${g}`:`right: ${y}`;i.current.dataset.motionPopId=r;const x=document.createElement("style");return l&&(x.nonce=l),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[e]),u.jsx(UJ,{isPresent:e,childRef:i,sizeRef:a,children:k.cloneElement(t,{ref:i})})}const zJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:d})=>{const f=o5(BJ),m=k.useId(),g=k.useCallback(w=>{f.set(w,!0);for(const x of f.values())if(!x)return;r&&r()},[f,r]),y=k.useMemo(()=>({id:m,initial:e,isPresent:n,custom:i,onExitComplete:g,register:w=>(f.set(w,!1),()=>f.delete(w))}),a?[Math.random(),g]:[n,g]);return k.useMemo(()=>{f.forEach((w,x)=>f.set(x,!1))},[n]),k.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=u.jsx(VJ,{isPresent:n,anchorX:d,children:t})),u.jsx(my.Provider,{value:y,children:t})};function BJ(){return new Map}function R7(t=!0){const e=k.useContext(my);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const l=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const zm=t=>t.key||"";function Q_(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const $J=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:d="left"})=>{const[f,m]=R7(l),g=k.useMemo(()=>Q_(t),[t]),y=l&&!f?[]:g.map(zm),w=k.useRef(!0),x=k.useRef(g),T=o5(()=>new Map),[C,A]=k.useState(g),[_,L]=k.useState(g);I7(()=>{w.current=!1,x.current=g;for(let D=0;D<_.length;D++){const M=zm(_[D]);y.includes(M)?T.delete(M):T.get(M)!==!0&&T.set(M,!1)}},[_,y.length,y.join("-")]);const I=[];if(g!==C){let D=[...g];for(let M=0;M<_.length;M++){const $=_[M],Q=zm($);y.includes(Q)||(D.splice(M,0,$),I.push($))}return a==="wait"&&I.length&&(D=I),L(Q_(D)),A(g),null}const{forceRender:q}=k.useContext(s5);return u.jsx(u.Fragment,{children:_.map(D=>{const M=zm(D),$=l&&!f?!1:g===_||y.includes(M),Q=()=>{if(T.has(M))T.set(M,!0);else return;let ie=!0;T.forEach(he=>{he||(ie=!1)}),ie&&(q==null||q(),L(x.current),l&&(m==null||m()),r&&r())};return u.jsx(zJ,{isPresent:$,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,onExitComplete:$?void 0:Q,anchorX:d,children:D},M)})})};function c5(t,e){t.indexOf(e)===-1&&t.push(e)}function u5(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let M7=()=>{};const FJ={useManualTiming:!1};function d5(t){let e;return()=>(e===void 0&&(e=t()),e)}const Sr=t=>t,ah=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class h5{constructor(){this.subscriptions=[]}add(e){return c5(this.subscriptions,e),()=>u5(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const li=t=>t*1e3,ci=t=>t/1e3;function N7(t,e){return e?t*(1e3/e):0}const qJ=d5(()=>window.ScrollTimeline!==void 0);class HJ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(qJ()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GJ extends HJ{then(e,n){return this.finished.finally(e).then(()=>{})}}const X_={value:null},f5=t=>Array.isArray(t)&&typeof t[0]=="number",WJ={};function YJ(t,e){const n=d5(t);return()=>WJ[e]??n()}const lh=YJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),L7=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(a/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},md=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,jw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:md([0,.65,.55,1]),circOut:md([.55,0,1,.45]),backIn:md([.31,.01,.66,-.59]),backOut:md([.33,1.53,.69,.99])};function O7(t,e){if(t)return typeof t=="function"&&lh()?L7(t,e):f5(t)?md(t):Array.isArray(t)?t.map(n=>O7(n,e)||jw.easeOut):jw[t]}function KJ(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:f}={},m=void 0){const g={[e]:n};f&&(g.offset=f);const y=O7(d,i);return Array.isArray(y)&&(g.easing=y),t.animate(g,{delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:m})}function m5(t){return typeof t=="function"&&"applyToOptions"in t}function p5(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Kp=2e4;function g5(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Kp;)e+=n,r=t.next(e);return e>=Kp?1/0:e}function QJ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(g5(r),Kp);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:ci(i)}}function P7(t){return!!(typeof t=="function"&&lh()||!t||typeof t=="string"&&(t in jw||lh())||f5(t)||Array.isArray(t)&&t.every(P7))}function Z_(t,e){t.timeline=e,t.onfinish=null}const Bm=["read","resolveKeyframes","update","preRender","render","postRender"];function XJ(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},f=0;function m(y){l.has(y)&&(g.schedule(y),t()),f++,y(d)}const g={schedule:(y,w=!1,x=!1)=>{const C=x&&i?n:r;return w&&l.add(y),C.has(y)||C.add(y),y},cancel:y=>{r.delete(y),l.delete(y)},process:y=>{if(d=y,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(m),e&&X_.value&&X_.value.frameloop[e].push(f),f=0,n.clear(),i=!1,a&&(a=!1,g.process(y))}};return g}const ZJ=40;function U7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Bm.reduce((_,L)=>(_[L]=XJ(a,e?L:void 0),_),{}),{read:d,resolveKeyframes:f,update:m,preRender:g,render:y,postRender:w}=l,x=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,ZJ),1),i.timestamp=_,i.isProcessing=!0,d.process(i),f.process(i),m.process(i),g.process(i),y.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},T=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Bm.reduce((_,L)=>{const I=l[L];return _[L]=(q,D=!1,M=!1)=>(n||T(),I.schedule(q,D,M)),_},{}),cancel:_=>{for(let L=0;L<Bm.length;L++)l[Bm[L]].cancel(_)},state:i,steps:l}}const{schedule:at,cancel:Ks,state:on,steps:V1}=U7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0),{schedule:y5}=U7(queueMicrotask,!1);let mp;function JJ(){mp=void 0}const ui={now:()=>(mp===void 0&&ui.set(on.isProcessing||FJ.useManualTiming?on.timestamp:performance.now()),mp),set:t=>{mp=t,queueMicrotask(JJ)}},Ir={x:!1,y:!1};function V7(){return Ir.x||Ir.y}function eee(t){return t==="x"||t==="y"?Ir[t]?null:(Ir[t]=!0,()=>{Ir[t]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function tee(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function z7(t,e){const n=tee(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function J_(t){return!(t.pointerType==="touch"||V7())}function nee(t,e,n={}){const[r,i,a]=z7(t,n),l=d=>{if(!J_(d))return;const{target:f}=d,m=e(f,d);if(typeof m!="function"||!f)return;const g=y=>{J_(y)&&(m(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,i)};return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const B7=(t,e)=>e?t===e?!0:B7(t,e.parentElement):!1,v5=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ree=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iee(t){return ree.has(t.tagName)||t.tabIndex!==-1}const pd=new WeakSet;function e3(t){return e=>{e.key==="Enter"&&t(e)}}function z1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const see=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=e3(()=>{if(pd.has(n))return;z1(n,"down");const i=e3(()=>{z1(n,"up")}),a=()=>z1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function t3(t){return v5(t)&&!V7()}function oee(t,e,n={}){const[r,i,a]=z7(t,n),l=d=>{const f=d.currentTarget;if(!t3(d)||pd.has(f))return;pd.add(f);const m=e(f,d),g=(x,T)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),!(!t3(x)||!pd.has(f))&&(pd.delete(f),typeof m=="function"&&m(x,{success:T}))},y=x=>{g(x,f===window||f===document||n.useGlobalTarget||B7(f,x.target))},w=x=>{g(x,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",w,i)};return r.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d instanceof HTMLElement&&(d.addEventListener("focus",m=>see(m,i)),!iee(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}const n3=30,aee=t=>!isNaN(parseFloat(t));class lee{constructor(e,n={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=ui.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ui.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aee(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new h5);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>n3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,n3);return N7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ch(t,e){return new lee(t,e)}const $7=k.createContext({strict:!1}),r3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const t in r3)pc[t]={isEnabled:e=>r3[t].some(n=>!!e[n])};function cee(t){for(const e in t)pc[e]={...pc[e],...t[e]}}const uee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uee.has(t)}let F7=t=>!Qp(t);function dee(t){t&&(F7=e=>e.startsWith("on")?!Qp(e):t(e))}try{dee(require("@emotion/is-prop-valid").default)}catch{}function hee(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(F7(i)||n===!0&&Qp(i)||!e&&!Qp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function fee(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const py=k.createContext({});function gy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function uh(t){return typeof t=="string"||Array.isArray(t)}const b5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],w5=["initial",...b5];function yy(t){return gy(t.animate)||w5.some(e=>uh(t[e]))}function q7(t){return!!(yy(t)||t.variants)}function mee(t,e){if(yy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||uh(n)?n:void 0,animate:uh(r)?r:void 0}}return t.inherit!==!1?e:{}}function pee(t){const{initial:e,animate:n}=mee(t,k.useContext(py));return k.useMemo(()=>({initial:e,animate:n}),[i3(e),i3(n)])}function i3(t){return Array.isArray(t)?t.join(" "):t}const gee=Symbol.for("motionComponentSymbol");function zl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function yee(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):zl(n)&&(n.current=r))},[e])}const x5=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vee="framerAppearId",H7="data-"+x5(vee),G7=k.createContext({});function bee(t,e,n,r,i){var C,A;const{visualElement:a}=k.useContext(py),l=k.useContext($7),d=k.useContext(my),f=k.useContext(l5).reducedMotion,m=k.useRef(null);r=r||l.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:a,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,y=k.useContext(G7);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&wee(m.current,n,i,y);const w=k.useRef(!1);k.useInsertionEffect(()=>{g&&w.current&&g.update(n,d)});const x=n[H7],T=k.useRef(!!x&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,x))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,x)));return I7(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),y5.render(g.render),T.current&&g.animationState&&g.animationState.animateChanges())}),k.useEffect(()=>{g&&(!T.current&&g.animationState&&g.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,x)}),T.current=!1))}),g}function wee(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:f,layoutRoot:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:W7(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&zl(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:m})}function W7(t){if(t)return t.options.allowProjection!==!1?t.projection:W7(t.parent)}function xee({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&cee(t);function a(d,f){let m;const g={...k.useContext(l5),...d,layoutId:Tee(d)},{isStatic:y}=g,w=pee(d),x=r(d,y);if(!y&&a5){See();const T=Cee(g);m=T.MeasureLayout,w.visualElement=bee(i,x,g,e,T.ProjectionNode)}return u.jsxs(py.Provider,{value:w,children:[m&&w.visualElement?u.jsx(m,{visualElement:w.visualElement,...g}):null,n(i,d,yee(x,w.visualElement,f),x,y,w.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=k.forwardRef(a);return l[gee]=i,l}function Tee({layoutId:t}){const e=k.useContext(s5).id;return e&&t!==void 0?e+"-"+t:t}function See(t,e){k.useContext($7).strict}function Cee(t){const{drag:e,layout:n}=pc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Y7=t=>e=>typeof e=="string"&&e.startsWith(t),T5=Y7("--"),Eee=Y7("var(--"),S5=t=>Eee(t)?kee.test(t.split("/*")[0].trim()):!1,kee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dh={};function Aee(t){for(const e in t)dh[e]=t[e],T5(e)&&(dh[e].isCSSVariable=!0)}const Pc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ma=new Set(Pc);function K7(t,{layout:e,layoutId:n}){return Ma.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!dh[t]||t==="opacity")}const xn=t=>!!(t&&t.getVelocity),Q7=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Fi=(t,e,n)=>n>e?e:n<t?t:n,Uc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},hh={...Uc,transform:t=>Fi(0,1,t)},$m={...Uc,default:1},Wh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rs=Wh("deg"),di=Wh("%"),xe=Wh("px"),_ee=Wh("vh"),Dee=Wh("vw"),s3={...di,parse:t=>di.parse(t)/100,transform:t=>di.transform(t*100)},jee={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},Iee={rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:$m,scaleX:$m,scaleY:$m,scaleZ:$m,skew:Rs,skewX:Rs,skewY:Rs,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:hh,originX:s3,originY:s3,originZ:xe},o3={...Uc,transform:Math.round},C5={...jee,...Iee,zIndex:o3,size:xe,fillOpacity:hh,strokeOpacity:hh,numOctaves:o3},Ree={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Mee=Pc.length;function Nee(t,e,n){let r="",i=!0;for(let a=0;a<Mee;a++){const l=Pc[a],d=t[l];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(l.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const m=Q7(d,C5[l]);if(!f){i=!1;const g=Ree[l]||l;r+=`${g}(${m}) `}n&&(e[l]=m)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function E5(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const f in e){const m=e[f];if(Ma.has(f)){l=!0;continue}else if(T5(f)){i[f]=m;continue}else{const g=Q7(m,C5[f]);f.startsWith("origin")?(d=!0,a[f]=g):r[f]=g}}if(e.transform||(l||n?r.transform=Nee(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${f} ${m} ${g}`}}const k5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function X7(t,e,n){for(const r in e)!xn(e[r])&&!K7(r,n)&&(t[r]=e[r])}function Lee({transformTemplate:t},e){return k.useMemo(()=>{const n=k5();return E5(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Oee(t,e){const n=t.style||{},r={};return X7(r,n,t),Object.assign(r,Lee(t,e)),r}function Pee(t,e){const n={},r=Oee(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Uee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function A5(t){return typeof t!="string"||t.includes("-")?!1:!!(Uee.indexOf(t)>-1||/[A-Z]/u.test(t))}const Vee={offset:"stroke-dashoffset",array:"stroke-dasharray"},zee={offset:"strokeDashoffset",array:"strokeDasharray"};function Bee(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Vee:zee;t[a.offset]=xe.transform(-r);const l=xe.transform(e),d=xe.transform(n);t[a.array]=`${l} ${d}`}function a3(t,e,n){return typeof t=="string"?t:xe.transform(e+n*t)}function $ee(t,e,n){const r=a3(e,t.x,t.width),i=a3(n,t.y,t.height);return`${r} ${i}`}function _5(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:f=0,...m},g,y){if(E5(t,m,y),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:x,dimensions:T}=t;w.transform&&(T&&(x.transform=w.transform),delete w.transform),T&&(i!==void 0||a!==void 0||x.transform)&&(x.transformOrigin=$ee(T,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(w.x=e),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),l!==void 0&&Bee(w,l,d,f,!1)}const Z7=()=>({...k5(),attrs:{}}),D5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Fee(t,e,n,r){const i=k.useMemo(()=>{const a=Z7();return _5(a,e,D5(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};X7(a,t.style,t),i.style={...a,...i.style}}return i}function qee(t=!1){return(n,r,i,{latestValues:a},l)=>{const f=(A5(n)?Fee:Pee)(r,a,l,n),m=hee(r,typeof n=="string",t),g=n!==k.Fragment?{...m,...f,ref:i}:{},{children:y}=r,w=k.useMemo(()=>xn(y)?y.get():y,[y]);return k.createElement(n,{...g,children:w})}}function l3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function j5(t,e,n,r){if(typeof e=="function"){const[i,a]=l3(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=l3(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const Iw=t=>Array.isArray(t),Hee=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Gee=t=>Iw(t)?t[t.length-1]||0:t;function pp(t){const e=xn(t)?t.get():t;return Hee(e)?e.toValue():e}function Wee({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const l={latestValues:Yee(r,i,a,t),renderState:e()};return n&&(l.onMount=d=>n({props:r,current:d,...l}),l.onUpdate=d=>n(d)),l}const J7=t=>(e,n)=>{const r=k.useContext(py),i=k.useContext(my),a=()=>Wee(t,e,r,i);return n?a():o5(a)};function Yee(t,e,n,r){const i={},a=r(t,{});for(const w in a)i[w]=pp(a[w]);let{initial:l,animate:d}=t;const f=yy(t),m=q7(t);e&&m&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const y=g?d:l;if(y&&typeof y!="boolean"&&!gy(y)){const w=Array.isArray(y)?y:[y];for(let x=0;x<w.length;x++){const T=j5(t,w[x]);if(T){const{transitionEnd:C,transition:A,..._}=T;for(const L in _){let I=_[L];if(Array.isArray(I)){const q=g?I.length-1:0;I=I[q]}I!==null&&(i[L]=I)}for(const L in C)i[L]=C[L]}}}return i}function I5(t,e,n){var a;const{style:r}=t,i={};for(const l in r)(xn(r[l])||e.style&&xn(e.style[l])||K7(l,t)||((a=n==null?void 0:n.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(i[l]=r[l]);return i}const Kee={useVisualState:J7({scrapeMotionValuesFromProps:I5,createRenderState:k5})};function eM(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function tM(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const nM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rM(t,e,n,r){tM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(nM.has(i)?i:x5(i),e.attrs[i])}function iM(t,e,n){const r=I5(t,e,n);for(const i in t)if(xn(t[i])||xn(e[i])){const a=Pc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const c3=["x","y","width","height","cx","cy","r"],Qee={useVisualState:J7({scrapeMotionValuesFromProps:iM,createRenderState:Z7,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const d in i)if(Ma.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<c3.length;d++){const f=c3[d];t[f]!==e[f]&&(l=!0)}l&&at.read(()=>{eM(n,r),at.render(()=>{_5(r,i,D5(n.tagName),t.transformTemplate),rM(n,r)})})}})};function Xee(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...A5(r)?Qee:Kee,preloadedFeatures:t,useRender:qee(i),createVisualElement:e,Component:r};return xee(l)}}function fh(t,e,n){const r=t.getProps();return j5(r,e,n!==void 0?n:r.custom,t)}const sM=new Set(["width","height","top","left","right","bottom",...Pc]);function Zee(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ch(n))}function Jee(t,e){const n=fh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const d=Gee(a[l]);Zee(t,l,d)}}function ete(t){return!!(xn(t)&&t.add)}function Rw(t,e){const n=t.getValue("willChange");if(ete(n))return n.add(e)}function oM(t){return t.props[H7]}const aM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tte=1e-7,nte=12;function rte(t,e,n,r,i){let a,l,d=0;do l=e+(n-e)/2,a=aM(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>tte&&++d<nte);return l}function Yh(t,e,n,r){if(t===e&&n===r)return Sr;const i=a=>rte(a,0,1,t,n);return a=>a===0||a===1?a:aM(i(a),e,r)}const lM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cM=t=>e=>1-t(1-e),uM=Yh(.33,1.53,.69,.99),R5=cM(uM),dM=lM(R5),hM=t=>(t*=2)<1?.5*R5(t):.5*(2-Math.pow(2,-10*(t-1))),M5=t=>1-Math.sin(Math.acos(t)),fM=cM(M5),mM=lM(M5),pM=t=>/^0[^.\s]+$/u.test(t);function ite(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pM(t):!0}const kd=t=>Math.round(t*1e5)/1e5,N5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ste(t){return t==null}const ote=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,L5=(t,e)=>n=>!!(typeof n=="string"&&ote.test(n)&&n.startsWith(t)||e&&!ste(n)&&Object.prototype.hasOwnProperty.call(n,e)),gM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(N5);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},ate=t=>Fi(0,255,t),B1={...Uc,transform:t=>Math.round(ate(t))},Xo={test:L5("rgb","red"),parse:gM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+B1.transform(t)+", "+B1.transform(e)+", "+B1.transform(n)+", "+kd(hh.transform(r))+")"};function lte(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Mw={test:L5("#"),parse:lte,transform:Xo.transform},Bl={test:L5("hsl","hue"),parse:gM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+di.transform(kd(e))+", "+di.transform(kd(n))+", "+kd(hh.transform(r))+")"},wn={test:t=>Xo.test(t)||Mw.test(t)||Bl.test(t),parse:t=>Xo.test(t)?Xo.parse(t):Bl.test(t)?Bl.parse(t):Mw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xo.transform(t):Bl.transform(t)},cte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ute(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(N5))==null?void 0:e.length)||0)+(((n=t.match(cte))==null?void 0:n.length)||0)>0}const yM="number",vM="color",dte="var",hte="var(",u3="${}",fte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(fte,f=>(wn.test(f)?(r.color.push(a),i.push(vM),n.push(wn.parse(f))):f.startsWith(hte)?(r.var.push(a),i.push(dte),n.push(f)):(r.number.push(a),i.push(yM),n.push(parseFloat(f))),++a,u3)).split(u3);return{values:n,split:d,indexes:r,types:i}}function bM(t){return mh(t).values}function wM(t){const{split:e,types:n}=mh(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=n[l];d===yM?a+=kd(i[l]):d===vM?a+=wn.transform(i[l]):a+=i[l]}return a}}const mte=t=>typeof t=="number"?0:t;function pte(t){const e=bM(t);return wM(t)(e.map(mte))}const Qs={test:ute,parse:bM,createTransformer:wM,getAnimatableNone:pte},gte=new Set(["brightness","contrast","saturate","opacity"]);function yte(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(N5)||[];if(!r)return t;const i=n.replace(r,"");let a=gte.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const vte=/\b([a-z-]*)\(.*?\)/gu,Nw={...Qs,getAnimatableNone:t=>{const e=t.match(vte);return e?e.map(yte).join(" "):t}},bte={...C5,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:Nw,WebkitFilter:Nw},xM=t=>bte[t];function TM(t,e){let n=xM(t);return n!==Nw&&(n=Qs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wte=new Set(["auto","none","0"]);function xte(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!wte.has(a)&&mh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=TM(n,i)}const Zo=t=>t*180/Math.PI,Lw=t=>{const e=Zo(Math.atan2(t[1],t[0]));return Ow(e)},Tte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Lw,rotateZ:Lw,skewX:t=>Zo(Math.atan(t[1])),skewY:t=>Zo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ow=t=>(t=t%360,t<0&&(t+=360),t),d3=Lw,h3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),f3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Ste={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:h3,scaleY:f3,scale:t=>(h3(t)+f3(t))/2,rotateX:t=>Ow(Zo(Math.atan2(t[6],t[5]))),rotateY:t=>Ow(Zo(Math.atan2(-t[2],t[0]))),rotateZ:d3,rotate:d3,skewX:t=>Zo(Math.atan(t[4])),skewY:t=>Zo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function m3(t){return t.includes("scale")?1:0}function Pw(t,e){if(!t||t==="none")return m3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Ste,i=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Tte,i=d}if(!i)return m3(e);const a=r[e],l=i[1].split(",").map(Ete);return typeof a=="function"?a(l):l[a]}const Cte=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Pw(n,e)};function Ete(t){return parseFloat(t.trim())}const p3=t=>t===Uc||t===xe,kte=new Set(["x","y","z"]),Ate=Pc.filter(t=>!kte.has(t));function _te(t){const e=[];return Ate.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Pw(e,"x"),y:(t,{transform:e})=>Pw(e,"y")};gc.translateX=gc.x;gc.translateY=gc.y;const sa=new Set;let Uw=!1,Vw=!1;function SM(){if(Vw){const t=Array.from(sa).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=_te(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))==null||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Vw=!1,Uw=!1,sa.forEach(t=>t.complete()),sa.clear()}function CM(){sa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Vw=!0)})}function Dte(){CM(),SM()}class O5{constructor(e,n,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sa.add(this),Uw||(Uw=!0,at.read(CM),at.resolveKeyframes(SM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const f=r.readValue(n,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const EM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),jte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ite(t){const e=jte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function kM(t,e,n=1){const[r,i]=Ite(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return EM(l)?parseFloat(l):l}return S5(i)?kM(i,e,n+1):i}const AM=t=>e=>e.test(t),Rte={test:t=>t==="auto",parse:t=>t},_M=[Uc,xe,di,Rs,Dee,_ee,Rte],g3=t=>_M.find(AM(t));class DM extends O5{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),S5(m))){const g=kM(m,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!sM.has(r)||e.length!==2)return;const[i,a]=e,l=g3(i),d=g3(a);if(l!==d)if(p3(l)&&p3(d))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)ite(e[i])&&r.push(i);r.length&&xte(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=gc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([f,m])=>{e.getValue(f).set(m)}),this.resolveNoneKeyframes()}}const y3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qs.test(t)||t==="0")&&!t.startsWith("url("));function Mte(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Nte(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=y3(i,e),d=y3(a,e);return!l||!d?!1:Mte(t)||(n==="spring"||m5(n))&&r}const Lte=t=>t!==null;function vy(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Lte),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Ote=40;class jM{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ui.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Ote?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Dte(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ui.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:f,isGenerator:m}=this.options;if(!m&&!Nte(e,r,i,a))if(l)this.options.duration=0;else{f&&f(vy(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yt=(t,e,n)=>t+(e-t)*n;function $1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Pte({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;i=$1(f,d,t+1/3),a=$1(f,d,t),l=$1(f,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Xp(t,e){return n=>n>0?e:t}const F1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Ute=[Mw,Xo,Bl],Vte=t=>Ute.find(e=>e.test(t));function v3(t){const e=Vte(t);if(!e)return!1;let n=e.parse(t);return e===Bl&&(n=Pte(n)),n}const b3=(t,e)=>{const n=v3(t),r=v3(e);if(!n||!r)return Xp(t,e);const i={...n};return a=>(i.red=F1(n.red,r.red,a),i.green=F1(n.green,r.green,a),i.blue=F1(n.blue,r.blue,a),i.alpha=yt(n.alpha,r.alpha,a),Xo.transform(i))},zte=(t,e)=>n=>e(t(n)),Kh=(...t)=>t.reduce(zte),zw=new Set(["none","hidden"]);function Bte(t,e){return zw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $te(t,e){return n=>yt(t,e,n)}function P5(t){return typeof t=="number"?$te:typeof t=="string"?S5(t)?Xp:wn.test(t)?b3:Hte:Array.isArray(t)?IM:typeof t=="object"?wn.test(t)?b3:Fte:Xp}function IM(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>P5(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function Fte(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=P5(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function qte(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][r[a]],d=t.values[l]??0;n[i]=d,r[a]++}return n}const Hte=(t,e)=>{const n=Qs.createTransformer(e),r=mh(t),i=mh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?zw.has(t)&&!i.values.length||zw.has(e)&&!r.values.length?Bte(t,e):Kh(IM(qte(r,i),i.values),n):Xp(t,e)};function RM(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):P5(t)(t,e)}const Gte=5;function MM(t,e,n){const r=Math.max(e-Gte,0);return N7(n-t(r),e-r)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},w3=.001;function Wte({duration:t=xt.duration,bounce:e=xt.bounce,velocity:n=xt.velocity,mass:r=xt.mass}){let i,a,l=1-e;l=Fi(xt.minDamping,xt.maxDamping,l),t=Fi(xt.minDuration,xt.maxDuration,ci(t)),l<1?(i=m=>{const g=m*l,y=g*t,w=g-n,x=Bw(m,l),T=Math.exp(-y);return w3-w/x*T},a=m=>{const y=m*l*t,w=y*n+n,x=Math.pow(l,2)*Math.pow(m,2)*t,T=Math.exp(-y),C=Bw(Math.pow(m,2),l);return(-i(m)+w3>0?-1:1)*((w-x)*T)/C}):(i=m=>{const g=Math.exp(-m*t),y=(m-n)*t+1;return-.001+g*y},a=m=>{const g=Math.exp(-m*t),y=(n-m)*(t*t);return g*y});const d=5/t,f=Kte(i,a,d);if(t=li(t),isNaN(f))return{stiffness:xt.stiffness,damping:xt.damping,duration:t};{const m=Math.pow(f,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:t}}}const Yte=12;function Kte(t,e,n){let r=n;for(let i=1;i<Yte;i++)r=r-t(r)/e(r);return r}function Bw(t,e){return t*Math.sqrt(1-e*e)}const Qte=["duration","bounce"],Xte=["stiffness","damping","mass"];function x3(t,e){return e.some(n=>t[n]!==void 0)}function Zte(t){let e={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...t};if(!x3(t,Xte)&&x3(t,Qte))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Fi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:xt.mass,stiffness:i,damping:a}}else{const n=Wte(t);e={...e,...n,mass:xt.mass},e.isResolvedFromDuration=!0}return e}function Zp(t=xt.visualDuration,e=xt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:a},{stiffness:f,damping:m,mass:g,duration:y,velocity:w,isResolvedFromDuration:x}=Zte({...n,velocity:-ci(n.velocity||0)}),T=w||0,C=m/(2*Math.sqrt(f*g)),A=l-a,_=ci(Math.sqrt(f/g)),L=Math.abs(A)<5;r||(r=L?xt.restSpeed.granular:xt.restSpeed.default),i||(i=L?xt.restDelta.granular:xt.restDelta.default);let I;if(C<1){const D=Bw(_,C);I=M=>{const $=Math.exp(-C*_*M);return l-$*((T+C*_*A)/D*Math.sin(D*M)+A*Math.cos(D*M))}}else if(C===1)I=D=>l-Math.exp(-_*D)*(A+(T+_*A)*D);else{const D=_*Math.sqrt(C*C-1);I=M=>{const $=Math.exp(-C*_*M),Q=Math.min(D*M,300);return l-$*((T+C*_*A)*Math.sinh(Q)+D*A*Math.cosh(Q))/D}}const q={calculatedDuration:x&&y||null,next:D=>{const M=I(D);if(x)d.done=D>=y;else{let $=0;C<1&&($=D===0?li(T):MM(I,D,M));const Q=Math.abs($)<=r,ie=Math.abs(l-M)<=i;d.done=Q&&ie}return d.value=d.done?l:M,d},toString:()=>{const D=Math.min(g5(q),Kp),M=L7($=>q.next(D*$).value,D,30);return D+"ms "+M},toTransition:()=>{}};return q}Zp.applyToOptions=t=>{const e=QJ(t,100,Zp);return t.ease=lh()?e.ease:"easeOut",t.duration=li(e.duration),t.type="keyframes",t};function T3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:f,restDelta:m=.5,restSpeed:g}){const y=t[0],w={done:!1,value:y},x=Q=>d!==void 0&&Q<d||f!==void 0&&Q>f,T=Q=>d===void 0?f:f===void 0||Math.abs(d-Q)<Math.abs(f-Q)?d:f;let C=n*e;const A=y+C,_=l===void 0?A:l(A);_!==A&&(C=_-y);const L=Q=>-C*Math.exp(-Q/r),I=Q=>_+L(Q),q=Q=>{const ie=L(Q),he=I(Q);w.done=Math.abs(ie)<=m,w.value=w.done?_:he};let D,M;const $=Q=>{x(w.value)&&(D=Q,M=Zp({keyframes:[w.value,T(w.value)],velocity:MM(I,Q,w.value),damping:i,stiffness:a,restDelta:m,restSpeed:g}))};return $(0),{calculatedDuration:null,next:Q=>{let ie=!1;return!M&&D===void 0&&(ie=!0,q(Q),$(Q)),D!==void 0&&Q>=D?M.next(Q-D):(!ie&&q(Q),w)}}}const Jte=Yh(.42,0,1,1),ene=Yh(0,0,.58,1),NM=Yh(.42,0,.58,1),tne=t=>Array.isArray(t)&&typeof t[0]!="number",nne={linear:Sr,easeIn:Jte,easeInOut:NM,easeOut:ene,circIn:M5,circInOut:mM,circOut:fM,backIn:R5,backInOut:dM,backOut:uM,anticipate:hM},S3=t=>{if(f5(t)){M7(t.length===4);const[e,n,r,i]=t;return Yh(e,n,r,i)}else if(typeof t=="string")return nne[t];return t};function rne(t,e,n){const r=[],i=n||RM,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Sr:e;d=Kh(f,d)}r.push(d)}return r}function ine(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(M7(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=rne(e,r,i),f=d.length,m=g=>{if(l&&g<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const w=ah(t[y],t[y+1],g);return d[y](w)};return n?g=>m(Fi(t[0],t[a-1],g)):m}function sne(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ah(0,e,r);t.push(yt(n,1,i))}}function one(t){const e=[0];return sne(e,t.length-1),e}function ane(t,e){return t.map(n=>n*e)}function lne(t,e){return t.map(()=>e||NM).splice(0,t.length-1)}function Jp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=tne(r)?r.map(S3):S3(r),a={done:!1,value:e[0]},l=ane(n&&n.length===e.length?n:one(e),t),d=ine(l,e,{ease:Array.isArray(i)?i:lne(e,i)});return{calculatedDuration:t,next:f=>(a.value=d(f),a.done=f>=t,a)}}const cne=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>Ks(e),now:()=>on.isProcessing?on.timestamp:ui.now()}},une={decay:T3,inertia:T3,tween:Jp,keyframes:Jp,spring:Zp},dne=t=>t/100;class U5 extends jM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||O5,d=(f,m)=>this.onKeyframesResolved(f,m);this.resolver=new l(a,d,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=m5(n)?n:une[n]||Jp;let f,m;d!==Jp&&typeof e[0]!="number"&&(f=Kh(dne,RM(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});a==="mirror"&&(m=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=g5(g));const{calculatedDuration:y}=g,w=y+i,x=w*(r+1)-i;return{generator:g,mirroredGenerator:m,mapPercentToKeyframes:f,calculatedDuration:y,resolvedDuration:w,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:Q}=this.options;return{done:!0,value:Q[Q.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:m,totalDuration:g,resolvedDuration:y}=r;if(this.startTime===null)return a.next(0);const{delay:w,repeat:x,repeatType:T,repeatDelay:C,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-w*(this.speed>=0?1:-1),L=this.speed>=0?_<0:_>g;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let I=this.currentTime,q=a;if(x){const Q=Math.min(this.currentTime,g)/y;let ie=Math.floor(Q),he=Q%1;!he&&Q>=1&&(he=1),he===1&&ie--,ie=Math.min(ie,x+1),!!(ie%2)&&(T==="reverse"?(he=1-he,C&&(he-=C/y)):T==="mirror"&&(q=l)),I=Fi(0,1,he)*y}const D=L?{done:!1,value:f[0]}:q.next(I);d&&(D.value=d(D.value));let{done:M}=D;!L&&m!==null&&(M=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return $&&i!==void 0&&(D.value=vy(f,this.options,i)),A&&A(D.value),$&&this.finish(),D}get duration(){const{resolved:e}=this;return e?ci(e.calculatedDuration):0}get time(){return ci(this.currentTime)}set time(e){e=li(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ci(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=cne,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const hne=new Set(["opacity","clipPath","filter","transform"]),fne=d5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eg=10,mne=2e4;function pne(t){return m5(t.type)||t.type==="spring"||!P7(t.ease)}function gne(t,e){const n=new U5({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<mne;)r=n.sample(a),i.push(r.value),a+=eg;return{times:void 0,keyframes:i,duration:a-eg,ease:"linear"}}const LM={anticipate:hM,backInOut:dM,circInOut:mM};function yne(t){return t in LM}class C3 extends jM{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new DM(a,(l,d)=>this.onKeyframesResolved(l,d),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:f,startTime:m}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&lh()&&yne(a)&&(a=LM[a]),pne(this.options)){const{onComplete:y,onUpdate:w,motionValue:x,element:T,...C}=this.options,A=gne(e,C);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,i=A.times,a=A.ease,l="keyframes"}const g=KJ(d.owner.current,f,e,{...this.options,duration:r,times:i,ease:a});return g.startTime=m??this.calcStartTime(),this.pendingTimeline?(Z_(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:y}=this.options;d.set(vy(e,this.options,n)),y&&y(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ci(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ci(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=li(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Sr;const{animation:r}=n;Z_(r,e)}return Sr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:g,onComplete:y,element:w,...x}=this.options,T=new U5({...x,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),C=li(this.time);m.setWithVelocity(T.sample(C-eg).value,T.sample(C).value,eg)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=n.owner.getProps();return fne()&&r&&hne.has(r)&&(r!=="transform"||!m)&&!f&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const vne={type:"spring",stiffness:500,damping:25,restSpeed:10},bne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),wne={type:"keyframes",duration:.8},xne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tne=(t,{keyframes:e})=>e.length>2?wne:Ma.has(t)?t.startsWith("scale")?bne(e[1]):vne:xne;function Sne({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:f,elapsed:m,...g}){return!!Object.keys(g).length}const V5=(t,e,n,r={},i,a)=>l=>{const d=p5(r,t)||{},f=d.delay||r.delay||0;let{elapsed:m=0}=r;m=m-li(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:w=>{e.set(w),d.onUpdate&&d.onUpdate(w)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};Sne(d)||(g={...g,...Tne(t,g)}),g.duration&&(g.duration=li(g.duration)),g.repeatDelay&&(g.repeatDelay=li(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(y=!0)),g.allowFlatten=!d.type&&!d.ease,y&&!a&&e.get()!==void 0){const w=vy(g.keyframes,d);if(w!==void 0)return at.update(()=>{g.onUpdate(w),g.onComplete()}),new GJ([])}return!a&&C3.supports(g)?new C3(g):new U5(g)};function Cne({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function OM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...d}=e;r&&(a=r);const f=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in d){const y=t.getValue(g,t.latestValues[g]??null),w=d[g];if(w===void 0||m&&Cne(m,g))continue;const x={delay:n,...p5(a||{},g)};let T=!1;if(window.MotionHandoffAnimation){const A=oM(t);if(A){const _=window.MotionHandoffAnimation(A,g,at);_!==null&&(x.startTime=_,T=!0)}}Rw(t,g),y.start(V5(g,y,w,t.shouldReduceMotion&&sM.has(g)?{type:!1}:x,t,T));const C=y.animation;C&&f.push(C)}return l&&Promise.all(f).then(()=>{at.update(()=>{l&&Jee(t,l)})}),f}function $w(t,e,n={}){var f;const r=fh(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(OM(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:w}=i;return Ene(t,e,g+m,y,w,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,g]=d==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(n.delay)])}function Ene(t,e,n=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,f=i===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(t.variantChildren).sort(kne).forEach((m,g)=>{m.notify("AnimationStart",e),l.push($w(m,e,{...a,delay:n+f(g)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(l)}function kne(t,e){return t.sortNodePosition(e)}function Ane(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>$w(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=$w(t,e,n);else{const i=typeof e=="function"?fh(t,e,n.custom):e;r=Promise.all(OM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function PM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const _ne=w5.length;function UM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?UM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<_ne;n++){const r=w5[n],i=t.props[r];(uh(i)||i===!1)&&(e[r]=i)}return e}const Dne=[...b5].reverse(),jne=b5.length;function Ine(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Ane(t,n,r)))}function Rne(t){let e=Ine(t),n=E3(),r=!0;const i=f=>(m,g)=>{var w;const y=fh(t,g,f==="exit"?(w=t.presenceContext)==null?void 0:w.custom:void 0);if(y){const{transition:x,transitionEnd:T,...C}=y;m={...m,...C,...T}}return m};function a(f){e=f(t)}function l(f){const{props:m}=t,g=UM(t.parent)||{},y=[],w=new Set;let x={},T=1/0;for(let A=0;A<jne;A++){const _=Dne[A],L=n[_],I=m[_]!==void 0?m[_]:g[_],q=uh(I),D=_===f?L.isActive:null;D===!1&&(T=A);let M=I===g[_]&&I!==m[_]&&q;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),L.protectedKeys={...x},!L.isActive&&D===null||!I&&!L.prevProp||gy(I)||typeof I=="boolean")continue;const $=Mne(L.prevProp,I);let Q=$||_===f&&L.isActive&&!M&&q||A>T&&q,ie=!1;const he=Array.isArray(I)?I:[I];let Ie=he.reduce(i(_),{});D===!1&&(Ie={});const{prevResolvedValues:ne={}}=L,ke={...ne,...Ie},ae=W=>{Q=!0,w.has(W)&&(ie=!0,w.delete(W)),L.needsAnimating[W]=!0;const se=t.getValue(W);se&&(se.liveStyle=!1)};for(const W in ke){const se=Ie[W],Se=ne[W];if(x.hasOwnProperty(W))continue;let R=!1;Iw(se)&&Iw(Se)?R=!PM(se,Se):R=se!==Se,R?se!=null?ae(W):w.add(W):se!==void 0&&w.has(W)?ae(W):L.protectedKeys[W]=!0}L.prevProp=I,L.prevResolvedValues=Ie,L.isActive&&(x={...x,...Ie}),r&&t.blockInitialAnimation&&(Q=!1),Q&&(!(M&&$)||ie)&&y.push(...he.map(W=>({animation:W,options:{type:_}})))}if(w.size){const A={};if(typeof m.initial!="boolean"){const _=fh(t,Array.isArray(m.initial)?m.initial[0]:m.initial);_&&_.transition&&(A.transition=_.transition)}w.forEach(_=>{const L=t.getBaseTarget(_),I=t.getValue(_);I&&(I.liveStyle=!0),A[_]=L??null}),y.push({animation:A})}let C=!!y.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(y):Promise.resolve()}function d(f,m){var y;if(n[f].isActive===m)return Promise.resolve();(y=t.variantChildren)==null||y.forEach(w=>{var x;return(x=w.animationState)==null?void 0:x.setActive(f,m)}),n[f].isActive=m;const g=l(f);for(const w in n)n[w].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>n,reset:()=>{n=E3(),r=!0}}}function Mne(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PM(e,t):!1}function ko(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function E3(){return{animate:ko(!0),whileInView:ko(),whileHover:ko(),whileTap:ko(),whileDrag:ko(),whileFocus:ko(),exit:ko()}}class so{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Nne extends so{constructor(e){super(e),e.animationState||(e.animationState=Rne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();gy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Lne=0;class One extends so{constructor(){super(...arguments),this.id=Lne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Pne={animation:{Feature:Nne},exit:{Feature:One}};function ph(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Qh(t){return{point:{x:t.pageX,y:t.pageY}}}const Une=t=>e=>v5(e)&&t(e,Qh(e));function Ad(t,e,n,r){return ph(t,e,Une(n),r)}function VM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Vne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zne(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const zM=1e-4,Bne=1-zM,$ne=1+zM,BM=.01,Fne=0-BM,qne=0+BM;function Dn(t){return t.max-t.min}function Hne(t,e,n){return Math.abs(t-e)<=n}function k3(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=Dn(n)/Dn(e),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Bne&&t.scale<=$ne||isNaN(t.scale))&&(t.scale=1),(t.translate>=Fne&&t.translate<=qne||isNaN(t.translate))&&(t.translate=0)}function _d(t,e,n,r){k3(t.x,e.x,n.x,r?r.originX:void 0),k3(t.y,e.y,n.y,r?r.originY:void 0)}function A3(t,e,n){t.min=n.min+e.min,t.max=t.min+Dn(e)}function Gne(t,e,n){A3(t.x,e.x,n.x),A3(t.y,e.y,n.y)}function _3(t,e,n){t.min=e.min-n.min,t.max=t.min+Dn(e)}function Dd(t,e,n){_3(t.x,e.x,n.x),_3(t.y,e.y,n.y)}const D3=()=>({translate:0,scale:1,origin:0,originPoint:0}),$l=()=>({x:D3(),y:D3()}),j3=()=>({min:0,max:0}),Dt=()=>({x:j3(),y:j3()});function wr(t){return[t("x"),t("y")]}function q1(t){return t===void 0||t===1}function Fw({scale:t,scaleX:e,scaleY:n}){return!q1(t)||!q1(e)||!q1(n)}function Vo(t){return Fw(t)||$M(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function $M(t){return I3(t.x)||I3(t.y)}function I3(t){return t&&t!=="0%"}function tg(t,e,n){const r=t-n,i=e*r;return n+i}function R3(t,e,n,r,i){return i!==void 0&&(t=tg(t,i,r)),tg(t,n,r)+e}function qw(t,e=0,n=1,r,i){t.min=R3(t.min,e,n,r,i),t.max=R3(t.max,e,n,r,i)}function FM(t,{x:e,y:n}){qw(t.x,e.translate,e.scale,e.originPoint),qw(t.y,n.translate,n.scale,n.originPoint)}const M3=.999999999999,N3=1.0000000000001;function Wne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=n[d],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ql(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,FM(t,l)),r&&Vo(a.latestValues)&&ql(t,a.latestValues))}e.x<N3&&e.x>M3&&(e.x=1),e.y<N3&&e.y>M3&&(e.y=1)}function Fl(t,e){t.min=t.min+e,t.max=t.max+e}function L3(t,e,n,r,i=.5){const a=yt(t.min,t.max,i);qw(t,e,n,a,r)}function ql(t,e){L3(t.x,e.x,e.scaleX,e.scale,e.originX),L3(t.y,e.y,e.scaleY,e.scale,e.originY)}function qM(t,e){return VM(zne(t.getBoundingClientRect(),e))}function Yne(t,e,n){const r=qM(t,n),{scroll:i}=e;return i&&(Fl(r.x,i.offset.x),Fl(r.y,i.offset.y)),r}const HM=({current:t})=>t?t.ownerDocument.defaultView:null,O3=(t,e)=>Math.abs(t-e);function Kne(t,e){const n=O3(t.x,e.x),r=O3(t.y,e.y);return Math.sqrt(n**2+r**2)}class GM{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=G1(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,x=Kne(y.offset,{x:0,y:0})>=3;if(!w&&!x)return;const{point:T}=y,{timestamp:C}=on;this.history.push({...T,timestamp:C});const{onStart:A,onMove:_}=this.handlers;w||(A&&A(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,y)},this.handlePointerMove=(y,w)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=H1(w,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(y,w)=>{this.end();const{onEnd:x,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=G1(y.type==="pointercancel"?this.lastMoveEventInfo:H1(w,this.transformPagePoint),this.history);this.startEvent&&x&&x(y,A),T&&T(y,A)},!v5(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=Qh(e),d=H1(l,this.transformPagePoint),{point:f}=d,{timestamp:m}=on;this.history=[{...f,timestamp:m}];const{onSessionStart:g}=n;g&&g(e,G1(d,this.history)),this.removeListeners=Kh(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ks(this.updatePoint)}}function H1(t,e){return e?{point:e(t.point)}:t}function P3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function G1({point:t},e){return{point:t,delta:P3(t,WM(e)),offset:P3(t,Qne(e)),velocity:Xne(e,.1)}}function Qne(t){return t[0]}function WM(t){return t[t.length-1]}function Xne(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=WM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>li(e)));)n--;if(!r)return{x:0,y:0};const a=ci(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Zne(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function U3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Jne(t,{top:e,left:n,bottom:r,right:i}){return{x:U3(t.x,n,i),y:U3(t.y,e,r)}}function V3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ere(t,e){return{x:V3(t.x,e.x),y:V3(t.y,e.y)}}function tre(t,e){let n=.5;const r=Dn(t),i=Dn(e);return i>r?n=ah(e.min,e.max-r,t.min):r>i&&(n=ah(t.min,t.max-i,e.min)),Fi(0,1,n)}function nre(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hw=.35;function rre(t=Hw){return t===!1?t=0:t===!0&&(t=Hw),{x:z3(t,"left","right"),y:z3(t,"top","bottom")}}function z3(t,e,n){return{min:B3(t,e),max:B3(t,n)}}function B3(t,e){return typeof t=="number"?t:t[e]||0}const ire=new WeakMap;class sre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Qh(g).point)},a=(g,y)=>{const{drag:w,dragPropagation:x,onDragStart:T}=this.getProps();if(w&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eee(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(A=>{let _=this.getAxisMotionValue(A).get()||0;if(di.test(_)){const{projection:L}=this.visualElement;if(L&&L.layout){const I=L.layout.layoutBox[A];I&&(_=Dn(I)*(parseFloat(_)/100))}}this.originPoint[A]=_}),T&&at.postRender(()=>T(g,y)),Rw(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(g,y)=>{const{dragPropagation:w,dragDirectionLock:x,onDirectionLock:T,onDrag:C}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:A}=y;if(x&&this.currentDirection===null){this.currentDirection=ore(A),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",y.point,A),this.updateAxis("y",y.point,A),this.visualElement.render(),C&&C(g,y)},d=(g,y)=>this.stop(g,y),f=()=>wr(g=>{var y;return this.getAnimationState(g)==="paused"&&((y=this.getAxisMotionValue(g).animation)==null?void 0:y.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new GM(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:HM(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&at.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Fm(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Zne(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&zl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Jne(r.layoutBox,e):this.constraints=!1,this.elastic=rre(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=nre(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=Yne(r,i.root,this.visualElement.getTransformPagePoint());let l=ere(i.layout.layoutBox,a);if(n){const d=n(Vne(l));this.hasMutatedConstraints=!!d,d&&(l=VM(d))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=wr(g=>{if(!Fm(g,n,this.currentDirection))return;let y=f&&f[g]||{};l&&(y={min:0,max:0});const w=i?200:1e6,x=i?40:1e7,T={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,T)});return Promise.all(m).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Rw(this.visualElement,e),r.start(V5(e,r,0,n,this.visualElement,!1))}stopAnimation(){wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wr(n=>{const{drag:r}=this.getProps();if(!Fm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[n];a.set(e[n]-yt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const f=d.get();i[l]=tre({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wr(l=>{if(!Fm(l,e,null))return;const d=this.getAxisMotionValue(l),{min:f,max:m}=this.constraints[l];d.set(yt(f,m,i[l]))})}addListeners(){if(!this.visualElement.current)return;ire.set(this.visualElement,this);const e=this.visualElement.current,n=Ad(e,"pointerdown",f=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();zl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),at.read(r);const l=ph(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(wr(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Hw,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function Fm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ore(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class are extends so{constructor(e){super(e),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new sre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const $3=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class lre extends so{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(e){this.session=new GM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:HM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:$3(e),onStart:$3(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&at.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(xe.test(t))t=parseFloat(t);else return t;const n=F3(t,e.target.x),r=F3(t,e.target.y);return`${n}% ${r}%`}},cre={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qs.parse(t);if(i.length>5)return r;const a=Qs.createTransformer(t),l=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;i[0+l]/=d,i[1+l]/=f;const m=yt(d,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=m),typeof i[3+l]=="number"&&(i[3+l]/=m),a(i)}};class ure extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Aee(dre),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),gp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||at.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),y5.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YM(t){const[e,n]=R7(),r=k.useContext(s5);return u.jsx(ure,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(G7),isPresent:e,safeToRemove:n})}const dre={borderRadius:{...Zu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zu,borderTopRightRadius:Zu,borderBottomLeftRadius:Zu,borderBottomRightRadius:Zu,boxShadow:cre};function hre(t,e,n){const r=xn(t)?t:ch(t);return r.start(V5("",r,e,n)),r.animation}function fre(t){return t instanceof SVGElement&&t.tagName!=="svg"}const mre=(t,e)=>t.depth-e.depth;class pre{constructor(){this.children=[],this.isDirty=!1}add(e){c5(this.children,e),this.isDirty=!0}remove(e){u5(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(mre),this.isDirty=!1,this.children.forEach(e)}}function gre(t,e){const n=ui.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Ks(r),t(a-e))};return at.read(r,!0),()=>Ks(r)}const KM=["TopLeft","TopRight","BottomLeft","BottomRight"],yre=KM.length,q3=t=>typeof t=="string"?parseFloat(t):t,H3=t=>typeof t=="number"||xe.test(t);function vre(t,e,n,r,i,a){i?(t.opacity=yt(0,n.opacity!==void 0?n.opacity:1,bre(r)),t.opacityExit=yt(e.opacity!==void 0?e.opacity:1,0,wre(r))):a&&(t.opacity=yt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<yre;l++){const d=`border${KM[l]}Radius`;let f=G3(e,d),m=G3(n,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||H3(f)===H3(m)?(t[d]=Math.max(yt(q3(f),q3(m),r),0),(di.test(m)||di.test(f))&&(t[d]+="%")):t[d]=m}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function G3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const bre=QM(0,.5,fM),wre=QM(.5,.95,Sr);function QM(t,e,n){return r=>r<t?0:r>e?1:n(ah(t,e,r))}function W3(t,e){t.min=e.min,t.max=e.max}function yr(t,e){W3(t.x,e.x),W3(t.y,e.y)}function Y3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function K3(t,e,n,r,i){return t-=e,t=tg(t,1/n,r),i!==void 0&&(t=tg(t,1/i,r)),t}function xre(t,e=0,n=1,r=.5,i,a=t,l=t){if(di.test(e)&&(e=parseFloat(e),e=yt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=yt(a.min,a.max,r);t===a&&(d-=e),t.min=K3(t.min,e,n,d,i),t.max=K3(t.max,e,n,d,i)}function Q3(t,e,[n,r,i],a,l){xre(t,e[n],e[r],e[i],e.scale,a,l)}const Tre=["x","scaleX","originX"],Sre=["y","scaleY","originY"];function X3(t,e,n,r){Q3(t.x,e,Tre,n?n.x:void 0,r?r.x:void 0),Q3(t.y,e,Sre,n?n.y:void 0,r?r.y:void 0)}function Z3(t){return t.translate===0&&t.scale===1}function XM(t){return Z3(t.x)&&Z3(t.y)}function J3(t,e){return t.min===e.min&&t.max===e.max}function Cre(t,e){return J3(t.x,e.x)&&J3(t.y,e.y)}function eD(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ZM(t,e){return eD(t.x,e.x)&&eD(t.y,e.y)}function tD(t){return Dn(t.x)/Dn(t.y)}function nD(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Ere{constructor(){this.members=[]}add(e){c5(this.members,e),e.scheduleRender()}remove(e){if(u5(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kre(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:w,skewX:x,skewY:T}=n;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),x&&(r+=`skewX(${x}deg) `),T&&(r+=`skewY(${T}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(r+=`scale(${d}, ${f})`),r||"none"}const W1=["","X","Y","Z"],Are={visibility:"hidden"},rD=1e3;let _re=0;function Y1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function JM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=oM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&JM(r)}function e9({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=_re++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ire),this.nodes.forEach(Ore),this.nodes.forEach(Pre),this.nodes.forEach(Rre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new pre)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new h5),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const f=this.eventHandlers.get(l);f&&f.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fre(l),this.instance=l;const{layoutId:f,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||f)&&(this.isLayoutDirty=!0),t){let y;const w=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=gre(w,250),gp.hasAnimatedSinceResize&&(gp.hasAnimatedSinceResize=!1,this.nodes.forEach(sD))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeLayoutChanged:x,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||g.getDefaultTransition()||$re,{onLayoutAnimationStart:A,onLayoutAnimationComplete:_}=g.getProps(),L=!this.targetLayout||!ZM(this.targetLayout,T),I=!w&&x;if(this.options.layoutRoot||this.resumeFrom||I||w&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,I);const q={...p5(C,"layout"),onPlay:A,onComplete:_};(g.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else w||sD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ure),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&JM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iD);return}this.isUpdating||this.nodes.forEach(Nre),this.isUpdating=!1,this.nodes.forEach(Lre),this.nodes.forEach(Dre),this.nodes.forEach(jre),this.clearAllSnapshots();const d=ui.now();on.delta=Fi(0,1e3/60,d-on.timestamp),on.timestamp=d,on.isProcessing=!0,V1.update.process(on),V1.preRender.process(on),V1.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mre),this.sharedNodes.forEach(Vre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!XM(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&(d||Vo(this.latestValues)||g)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return l&&(f=this.removeTransform(f)),Fre(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return Dt();const d=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(qre))){const{scroll:g}=this.root;g&&(Fl(d.x,g.offset.x),Fl(d.y,g.offset.y))}return d}removeElementScroll(l){var f;const d=Dt();if(yr(d,l),(f=this.scroll)!=null&&f.wasRoot)return d;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:w}=g;g!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&yr(d,l),Fl(d.x,y.offset.x),Fl(d.y,y.offset.y))}return d}applyTransform(l,d=!1){const f=Dt();yr(f,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ql(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Vo(g.latestValues)&&ql(f,g.latestValues)}return Vo(this.latestValues)&&ql(f,this.latestValues),f}removeTransform(l){const d=Dt();yr(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Vo(m.latestValues))continue;Fw(m.latestValues)&&m.updateSnapshot();const g=Dt(),y=m.measurePageBox();yr(g,y),X3(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Vo(this.latestValues)&&X3(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var w;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Dd(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),FM(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),Dd(this.relativeTargetOrigin,this.target,x.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Fw(this.parent.latestValues)||$M(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===on.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;yr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;Wne(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Dt());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Y3(this.prevProjectionDelta.x,this.projectionDelta.x),Y3(this.prevProjectionDelta.y,this.projectionDelta.y)),_d(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!nD(this.projectionDelta.x,this.prevProjectionDelta.x)||!nD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$l(),this.projectionDelta=$l(),this.projectionDeltaWithTransform=$l()}setAnimationOrigin(l,d=!1){const f=this.snapshot,m=f?f.latestValues:{},g={...this.latestValues},y=$l();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const w=Dt(),x=f?f.source:void 0,T=this.layout?this.layout.source:void 0,C=x!==T,A=this.getStack(),_=!A||A.members.length<=1,L=!!(C&&!_&&this.options.crossfade===!0&&!this.path.some(Bre));this.animationProgress=0;let I;this.mixTargetDelta=q=>{const D=q/1e3;oD(y.x,l.x,D),oD(y.y,l.y,D),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dd(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zre(this.relativeTarget,this.relativeTargetOrigin,w,D),I&&Cre(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Dt()),yr(I,this.relativeTarget)),C&&(this.animationValues=g,vre(g,m,this.latestValues,D,L,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{gp.hasAnimatedSinceResize=!0,this.currentAnimation=hre(0,rD,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:g}=l;if(!(!d||!f||!m)){if(this!==l&&this.layout&&m&&t9(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||Dt();const y=Dn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+y;const w=Dn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+w}yr(d,f),ql(d,g),_d(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new Ere),this.sharedNodes.get(l).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var d;const{layoutId:l}=this.options;return l?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:l}=this.options;return l?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&Y1("z",l,m,this.animationValues);for(let g=0;g<W1.length;g++)Y1(`rotate${W1[g]}`,l,m,this.animationValues),Y1(`skew${W1[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Are;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=pp(l==null?void 0:l.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=pp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=kre(this.projectionDeltaWithTransform,this.treeScale,g),f&&(d.transform=f(g,d.transform));const{x:y,y:w}=this.projectionDelta;d.transformOrigin=`${y.origin*100}% ${w.origin*100}% 0`,m.animationValues?d.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in dh){if(g[x]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:A}=dh[x],_=d.transform==="none"?g[x]:T(g[x],m);if(C){const L=C.length;for(let I=0;I<L;I++)d[C[I]]=_}else A?this.options.visualElement.renderState.vars[x]=_:d[x]=_}return this.options.layoutId&&(d.pointerEvents=m===this?pp(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(iD),this.root.sharedNodes.clear()}}}function Dre(t){t.updateLayout()}function jre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?wr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],x=Dn(w);w.min=r[y].min,w.max=w.min+x}):t9(a,e.layoutBox,r)&&wr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],x=Dn(r[y]);w.max=w.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[y].max=t.relativeTarget[y].min+x)});const d=$l();_d(d,r,e.layoutBox);const f=$l();l?_d(f,t.applyTransform(i,!0),e.measuredBox):_d(f,r,e.layoutBox);const m=!XM(d);let g=!1;if(!t.resumeFrom){const y=t.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:x}=y;if(w&&x){const T=Dt();Dd(T,e.layoutBox,w.layoutBox);const C=Dt();Dd(C,r,x.layoutBox),ZM(T,C)||(g=!0),y.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=T,t.relativeParent=y)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Ire(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Rre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Mre(t){t.clearSnapshot()}function iD(t){t.clearMeasurements()}function Nre(t){t.isLayoutDirty=!1}function Lre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sD(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ore(t){t.resolveTargetDelta()}function Pre(t){t.calcProjection()}function Ure(t){t.resetSkewAndRotation()}function Vre(t){t.removeLeadSnapshot()}function oD(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function aD(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function zre(t,e,n,r){aD(t.x,e.x,n.x,r),aD(t.y,e.y,n.y,r)}function Bre(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const $re={duration:.45,ease:[.4,0,.1,1]},lD=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cD=lD("applewebkit/")&&!lD("chrome/")?Math.round:Sr;function uD(t){t.min=cD(t.min),t.max=cD(t.max)}function Fre(t){uD(t.x),uD(t.y)}function t9(t,e,n){return t==="position"||t==="preserve-aspect"&&!Hne(tD(e),tD(n),.2)}function qre(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Hre=e9({attachResizeListener:(t,e)=>ph(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),K1={current:void 0},n9=e9({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!K1.current){const t=new Hre({});t.mount(window),t.setOptions({layoutScroll:!0}),K1.current=t}return K1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Gre={pan:{Feature:lre},drag:{Feature:are,ProjectionNode:n9,MeasureLayout:YM}};function dD(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&at.postRender(()=>a(e,Qh(e)))}class Wre extends so{mount(){const{current:e}=this.node;e&&(this.unmount=nee(e,(n,r)=>(dD(this.node,r,"Start"),i=>dD(this.node,i,"End"))))}unmount(){}}class Yre extends so{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Kh(ph(this.node.current,"focus",()=>this.onFocus()),ph(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hD(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&at.postRender(()=>a(e,Qh(e)))}class Kre extends so{mount(){const{current:e}=this.node;e&&(this.unmount=oee(e,(n,r)=>(hD(this.node,r,"Start"),(i,{success:a})=>hD(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gw=new WeakMap,Q1=new WeakMap,Qre=t=>{const e=Gw.get(t.target);e&&e(t)},Xre=t=>{t.forEach(Qre)};function Zre({root:t,...e}){const n=t||document;Q1.has(n)||Q1.set(n,{});const r=Q1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Xre,{root:t,...e})),r[i]}function Jre(t,e,n){const r=Zre(e);return Gw.set(t,n),r.observe(t),()=>{Gw.delete(t),r.unobserve(t)}}const eie={some:0,all:1};class tie extends so{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:eie[i]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),w=m?g:y;w&&w(f)};return Jre(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nie(e,n))&&this.startObserver()}unmount(){}}function nie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const rie={inView:{Feature:tie},tap:{Feature:Kre},focus:{Feature:Yre},hover:{Feature:Wre}},iie={layout:{ProjectionNode:n9,MeasureLayout:YM}},Ww={current:null},r9={current:!1};function sie(){if(r9.current=!0,!!a5)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ww.current=t.matches;t.addListener(e),e()}else Ww.current=!1}const oie=[..._M,wn,Qs],aie=t=>oie.find(AM(t)),lie=new WeakMap;function cie(t,e,n){for(const r in e){const i=e[r],a=n[r];if(xn(i))t.addValue(r,i);else if(xn(a))t.addValue(r,ch(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,ch(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class uie{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=O5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ui.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,at.render(this.render,!1,!0))};const{latestValues:f,renderState:m,onUpdate:g}=l;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=yy(n),this.isVariantNode=q7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in w){const T=w[x];f[x]!==void 0&&xn(T)&&T.set(f[x],!1)}}mount(e){this.current=e,lie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),r9.current||sie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ww.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ks(this.notifyUpdate),Ks(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ma.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pc){const n=pc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fD.length;r++){const i=fD[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=cie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ch(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(EM(r)||pM(r))?r=parseFloat(r):!aie(r)&&Qs.test(n)&&(r=TM(e,n)),this.setBaseTarget(e,xn(r)?r.get():r)),xn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=j5(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!xn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new h5),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class i9 extends uie{constructor(){super(...arguments),this.KeyframeResolver=DM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function die(t){return window.getComputedStyle(t)}class hie extends i9{constructor(){super(...arguments),this.type="html",this.renderInstance=tM}readValueFromInstance(e,n){if(Ma.has(n))return Cte(e,n);{const r=die(e),i=(T5(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qM(e,n)}build(e,n,r){E5(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return I5(e,n,r)}}class fie extends i9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&eM(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ma.has(n)){const r=xM(n);return r&&r.default||0}return n=nM.has(n)?n:x5(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return iM(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&at.postRender(this.updateDimensions)}build(e,n,r){_5(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){rM(e,n,r,i)}mount(e){this.isSVGTag=D5(e.tagName),super.mount(e)}}const mie=(t,e)=>A5(t)?new fie(e):new hie(e,{allowProjection:t!==k.Fragment}),pie=Xee({...Pne,...rie,...Gre,...iie},mie),by=fee(pie),gie=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
  
  @media (max-width: 768px) {
    padding: 1rem;
  }
`,yie=b.div`
  text-align: center;
  padding: 4rem 1rem;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  border-radius: 1rem;
  margin-bottom: 4rem;
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('/images/pattern.svg') repeat;
    opacity: 0.1;
  }
  
  @media (max-width: 768px) {
    padding: 2.5rem 1rem;
    margin-bottom: 2rem;
  }
`,vie=b.div`
  position: relative;
  z-index: 1;
`,bie=b.h1`
  font-size: 3.5rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
  color: white;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

  @media (max-width: 768px) {
    font-size: 2.5rem;
  }
`,wie=b.p`
  font-size: 1.25rem;
  margin-bottom: 2rem;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
`,xie=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-bottom: 4rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }
`,Tie=b(by.div)`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 2rem;
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    border-color: hsl(var(--primary));
  }
`,El=b.div`
  width: 3rem;
  height: 3rem;
  border-radius: 9999px;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  position: relative;
  z-index: 1;
`,kl=b.h3`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,Ao=b.p`
  opacity: 0.9;
  line-height: 1.6;
  margin-bottom: 1.5rem;
`,Sie=b.div`
  position: absolute;
  top: 0;
  right: 0;
  width: 100px;
  height: 100px;
  opacity: 0.1;
  transform: translate(20px, -20px);
`,Cie=b.div`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 3rem;
  margin-bottom: 4rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 768px) {
    padding: 1.5rem;
    margin-bottom: 2.5rem;
  }
  
  h2 {
    font-size: 1.75rem;
    margin-bottom: 1rem;
    
    @media (max-width: 768px) {
      font-size: 1.5rem;
    }
  }
`;b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
`;b.div`
  display: flex;
  align-items: flex-start;
  gap: 1rem;
`;b.div`
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 0.5rem;
  background-color: hsl(var(--primary));
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
`;b.div`
  flex: 1;
`;b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`;b.p`
  opacity: 0.9;
  line-height: 1.6;
`;const Eie=b.div`
  margin-top: 4rem;
`,kie=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
`,Aie=b(by.div)`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  
  &:hover {
    border-color: hsl(var(--primary));
  }
`,_ie=b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
`,Die=b(by.p)`
  opacity: 0.9;
  line-height: 1.6;
  margin: 0;
`,jie=b.button`
  padding: 1rem 2rem;
  border-radius: 0.5rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  font-size: 1.125rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
`,Iie=b.div`
  display: flex;
  justify-content: center;
  margin-top: 3rem;
`,Rie=b.svg`
  width: 20px;
  height: 20px;
  transform: ${t=>t.isExpanded?"rotate(90deg)":"none"};
  transition: transform 0.2s ease;
`,mD=({isExpanded:t})=>u.jsx(Rie,{isExpanded:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4.16675 10H15.8334M15.8334 10L10.0001 4.16667M15.8334 10L10.0001 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Mie=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M20.5899 22C20.5899 18.13 16.7399 15 11.9999 15C7.25991 15 3.40991 18.13 3.40991 22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Nie=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),pD=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4 7V5C4 4.44772 4.44772 4 5 4H19C19.5523 4 20 4.44772 20 5V7M4 7V19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V7M4 7H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Lie=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Oie=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),X1=b.div`
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 0.5rem;
  padding: 1rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin: 1rem 0;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 768px) {
    font-size: 0.75rem;
    padding: 0.75rem;
  }
`,Pie=b.div`
  background-color: rgba(245, 158, 11, 0.1);
  border-left: 4px solid rgb(245, 158, 11);
  padding: 1.5rem;
  margin: 2rem 0;
  border-radius: 0.5rem;
`,Uie=b.div`
  font-weight: bold;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgb(245, 158, 11);
`,Vie=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M8.57465 3.34064L1.51631 15.0782C1.37078 15.3327 1.29873 15.6223 1.30566 15.9158C1.31258 16.2093 1.3982 16.4949 1.55414 16.7417C1.71008 16.9885 1.9309 17.1866 2.19475 17.3142C2.4586 17.4419 2.75334 17.4942 3.04798 17.4656H17.1647C17.4593 17.4942 17.754 17.4419 18.0179 17.3142C18.2817 17.1866 18.5026 16.9885 18.6585 16.7417C18.8144 16.4949 18.9 16.2093 18.907 15.9158C18.9139 15.6223 18.8418 15.3327 18.6963 15.0782L11.638 3.34064C11.473 3.10683 11.2463 2.92137 10.9818 2.80094C10.7172 2.6805 10.4246 2.62964 10.1363 2.62964C9.84798 2.62964 9.55538 2.6805 9.29083 2.80094C9.02628 2.92137 8.79957 3.10683 8.63465 3.34064V3.34064Z",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10.1064 7.5V10.8333",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10.1064 14.1667H10.1147",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ju=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 1rem;
  padding: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  &:hover {
    border-color: hsl(var(--primary));
  }
  
  @media (max-width: 768px) {
    flex-direction: column;
    gap: 1rem;
    padding: 1.25rem;
  }
`,ed=b.div`
  flex: 1;
`;function zie(){const t=Pt(),[e,n]=k.useState(null),r=[{number:1,title:"Create an Account",description:"Sign up for a free RuneRaffle account. You'll need this to enter raffles and track your entries.",icon:u.jsx(Mie,{})},{number:2,title:"Purchase Credits",description:"Add credits to your account. Credits are used to purchase raffle tickets, with each raffle having its own ticket price.",icon:u.jsx(Nie,{})},{number:3,title:"Choose a Raffle",description:"Browse our active raffles and select the prizes you're interested in winning. Each raffle has a limited number of tickets available.",icon:u.jsx(pD,{})},{number:4,title:"Buy Tickets",description:"Purchase one or more tickets for your chosen raffle. The more tickets you buy, the higher your chances of winning. Some raffles have limits on how many tickets one user can purchase.",icon:u.jsx(pD,{})},{number:5,title:"Wait for the Draw",description:"Once all tickets are sold, the raffle ends and a winner is automatically selected using our provably fair system.",icon:u.jsx(Lie,{})},{number:6,title:"Collect Your Prize",description:"If you win, we'll contact you to arrange delivery of your prize. All prizes are delivered within 24 hours of the draw.",icon:u.jsx(Oie,{})}],i=[{question:"How does the provably fair system work?",answer:"Our system uses a combination of server-generated seeds and blockchain data to ensure random and verifiable results. Each draw can be independently verified by anyone."},{question:"What happens if I win?",answer:"If you win a raffle, you'll receive an email notification and in-app notification. Our team will contact you to arrange the delivery of your prize."},{question:"How do I verify a draw result?",answer:"You can verify any draw result by visiting the verification page for that competition. The page will show you the exact process used to determine the winner."},{question:"How long do I have to wait to receive my prize?",answer:"If you win, we'll contact you via the email associated with your account. Prizes are delivered in-game within 24 hours of the draw completion. Make sure to provide your correct RuneScape username when prompted."},{question:"Are there limits to how many tickets I can buy?",answer:"Yes, most raffles have a maximum number of tickets per user to ensure fair participation. This limit is clearly displayed on each raffle page."},{question:"What happens if a raffle doesn't sell all tickets?",answer:"Most raffles have a set time limit. If all tickets aren't sold by the end date, the draw will still take place with the tickets that have been purchased. In rare cases, we may extend the raffle period, but this will always be clearly communicated."},{question:"Can I get a refund for my tickets?",answer:"Generally, all ticket purchases are final. However, if a raffle is cancelled for any reason, all credits will be refunded to your account automatically."}];return u.jsxs(gie,{children:[u.jsx(yie,{children:u.jsxs(vie,{children:[u.jsx(bie,{children:"How RuneRaffle Works"}),u.jsx(wie,{children:"Learn about our fair and transparent raffle system that allows players to win epic RuneScape prizes. Our draws are provably fair and fully transparent."})]})}),u.jsx(xie,{children:r.map((a,l)=>u.jsxs(Tie,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.1},whileHover:{scale:1.02},children:[u.jsx(El,{children:a.number}),u.jsx(Sie,{children:a.icon}),u.jsx(kl,{children:a.title}),u.jsx(Ao,{children:a.description})]},a.number))}),u.jsxs(Cie,{children:[u.jsx("h2",{children:"Our Provably Fair System"}),u.jsx(Ao,{children:"We use a sophisticated cryptographic system to ensure complete fairness and transparency in our draws. Here's how it works:"}),u.jsxs("div",{style:{marginTop:"2rem"},children:[u.jsxs(Ju,{children:[u.jsx(El,{children:"1"}),u.jsxs(ed,{children:[u.jsx(kl,{children:"Creating a Cryptographic Seed"}),u.jsx(Ao,{children:"Before the raffle begins, our system generates a random seed. This seed is then hashed using SHA-256 encryption, creating a unique cryptographic fingerprint that cannot be reverse-engineered."}),u.jsxs(X1,{children:["Original Seed: 8f6b0a06c7d1e2f354b9a687c0d31e25",u.jsx("br",{}),"SHA-256 Hash: 7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200126d9069"]})]})]}),u.jsxs(Ju,{children:[u.jsx(El,{children:"2"}),u.jsxs(ed,{children:[u.jsx(kl,{children:"Public Hash Verification"}),u.jsx(Ao,{children:"The hash is published publicly at the start of the raffle, so everyone can see it. This proves we've already determined a seed but cannot change it, as any modification would produce a completely different hash."})]})]}),u.jsxs(Ju,{children:[u.jsx(El,{children:"3"}),u.jsxs(ed,{children:[u.jsx(kl,{children:"Adding External Entropy"}),u.jsx(Ao,{children:"When the raffle ends, we combine our original seed with a source of external entropy that couldn't have been predicted when the raffle started. We use the hash of the most recent Bitcoin block at the time the raffle ends."}),u.jsxs(X1,{children:["Original Seed: 8f6b0a06c7d1e2f354b9a687c0d31e25",u.jsx("br",{}),"Bitcoin Block Hash: 0000000000000000000392ff974383c752f58e86f86abc293ade35208c5c4808",u.jsx("br",{}),"Combined Value: 8f6b0a06c7d1e2f354b9a687c0d31e250000000000000000000392ff974383c752f58e86f86abc293ade35208c5c4808"]})]})]}),u.jsxs(Ju,{children:[u.jsx(El,{children:"4"}),u.jsxs(ed,{children:[u.jsx(kl,{children:"Selecting the Winner"}),u.jsx(Ao,{children:"The combined value is hashed again, and the resulting number is used to determine the winning ticket. This is done by taking the modulo of the number with the total tickets sold."}),u.jsxs(X1,{children:["Final Hash: e9c0f8f2d5b5a9e7b5c6d3f9a8c7b6a5d4f3e2d1c0b9a8f7e6d5c4b3a2f1e0d9",u.jsx("br",{}),"Numeric Value (first 8 chars): 0xe9c0f8f2 = 3,922,317,554",u.jsx("br",{}),"Total Tickets: 500",u.jsx("br",{}),"Winning Ticket Number: 3,922,317,554 % 500 = 54"]})]})]}),u.jsxs(Ju,{children:[u.jsx(El,{children:"5"}),u.jsxs(ed,{children:[u.jsx(kl,{children:"Revealing the Original Seed"}),u.jsx(Ao,{children:"After the winner is selected, we publish the original seed. Anyone can verify that:"}),u.jsxs("ul",{style:{listStyleType:"disc",paddingLeft:"1.5rem",marginBottom:"1rem"},children:[u.jsx("li",{children:"The SHA-256 hash of our original seed matches the pre-published hash"}),u.jsx("li",{children:"The Bitcoin block hash we used is authentic and corresponds to the correct block"}),u.jsx("li",{children:"When combined, these values correctly determine the winning ticket"})]})]})]}),u.jsxs(Pie,{children:[u.jsxs(Uie,{children:[u.jsx(Vie,{}),"Important Note"]}),u.jsx("p",{style:{fontSize:window.innerWidth<768?"0.9rem":"1rem"},children:"Our provably fair system ensures that neither we nor any player can manipulate the outcome. The combination of our pre-committed seed and external entropy from the Bitcoin blockchain guarantees a completely fair and transparent draw."})]})]})]}),u.jsxs(Eie,{children:[u.jsx("h2",{children:"Frequently Asked Questions"}),u.jsx(kie,{children:i.map((a,l)=>u.jsxs(Aie,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.1},onClick:()=>n(e===l?null:l),children:[u.jsxs(_ie,{children:[a.question,u.jsx(mD,{isExpanded:e===l})]}),u.jsx($J,{children:e===l&&u.jsx(by.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:u.jsx(Die,{children:a.answer})})})]},l))})]}),u.jsx(Iie,{children:u.jsxs(jie,{onClick:()=>t("/competitions"),children:["Start Entering Raffles",u.jsx(mD,{isExpanded:!1})]})})]})}const Bie=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
  padding: 1.5rem;
  background: linear-gradient(to bottom, rgba(13, 6, 32, 0.8) 0%, rgba(13, 6, 32, 0.95) 100%);
`,$ie=b.div`
  width: 100%;
  max-width: 450px;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  overflow: hidden;
`,Fie=b.div`
  padding: 1.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  text-align: center;
`,qie=b.h1`
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
`,Hie=b.p`
  font-size: 0.9rem;
  opacity: 0.9;
`,Gie=b.div`
  padding: 1.5rem;
`,Wie=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,Z1=b.button`
  flex: 1;
  padding: 0.75rem 1rem;
  background: transparent;
  border: none;
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  font-weight: ${t=>t.active?"600":"400"};
  cursor: pointer;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  transition: all 0.2s ease;

  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`,Yie=b.form`
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,qm=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,Hm=b.label`
  font-size: 0.9rem;
  font-weight: 500;
  color: hsl(var(--foreground));
`,Gm=b.input`
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 1rem;
  transition: border-color 0.2s ease;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,s9=b.button`
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  border: none;
  background: hsl(var(--primary));
  color: white;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s ease;
  margin-top: 0.5rem;

  &:hover {
    background: hsl(265, 83%, 45%);
  }

  &:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }
`,Kie=b(s9)`
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
`,Qie=b.div`
  display: flex;
  align-items: center;
  margin: 1.5rem 0;
  color: hsl(var(--muted-foreground));
  font-size: 0.9rem;

  &::before, &::after {
    content: '';
    flex: 1;
    height: 1px;
    background: hsl(var(--border));
  }

  &::before {
    margin-right: 1rem;
  }

  &::after {
    margin-left: 1rem;
  }
`,Xie=b.div`
  color: hsl(var(--destructive));
  font-size: 0.9rem;
  margin-top: 0.5rem;
`,Zie=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M21.8055 10.0415H21V10H12V14H17.6515C16.827 16.3285 14.6115 18 12 18C8.6865 18 6 15.3135 6 12C6 8.6865 8.6865 6 12 6C13.5295 6 14.921 6.577 15.9805 7.5195L18.809 4.691C17.023 3.0265 14.634 2 12 2C6.4775 2 2 6.4775 2 12C2 17.5225 6.4775 22 12 22C17.5225 22 22 17.5225 22 12C22 11.3295 21.931 10.675 21.8055 10.0415Z",fill:"white"})});function gD({mode:t="login"}){const[e,n]=k.useState(t),[r,i]=k.useState(""),[a,l]=k.useState(""),[d,f]=k.useState(""),[m,g]=k.useState(""),[y,w]=k.useState(null),[x,T]=k.useState(null),[C,A]=k.useState(!1),_=Pt(),L=Hn();k.useEffect(()=>{const M=new URLSearchParams(L.search).get("ref");M&&(g(M),n("register"))},[L]);const I=async D=>{D.preventDefault(),w(null),T(null),A(!0);try{if(e==="login")await oY(r,a),_("/");else if(e==="register"){const M=await sY(r,a,d);if(m&&M)try{const $=await xX(m,M.uid,r);T($?"Account created with referral bonus! Please check your email for verification.":"Account created! Referral code could not be processed. Please check your email for verification.")}catch($){console.error("Error processing referral:",$),T("Account created! Referral code could not be processed. Please check your email for verification.")}else T("Account created! Please check your email for verification.");setTimeout(()=>_("/"),2e3)}else e==="reset"&&(await uY(r),T("Password reset email sent. Please check your inbox."))}catch(M){console.error("Auth error:",M);const $=M.code||"";$.includes("auth/user-not-found")||$.includes("auth/wrong-password")?w("Invalid email or password. Please try again."):$.includes("auth/email-already-in-use")?w("This email is already registered. Please log in instead."):$.includes("auth/weak-password")?w("Password should be at least 6 characters long."):$.includes("auth/invalid-email")?w("Please enter a valid email address."):$.includes("auth/network-request-failed")?w("Network error. Please check your connection and try again."):$.includes("auth/too-many-requests")?w("Too many failed attempts. Please try again later."):$.includes("auth/api-key-not-valid")?w("Authentication service error. Please contact support."):w(M.message||"An error occurred during authentication")}finally{A(!1)}},q=async()=>{w(null),A(!0);try{await iY(),_("/")}catch(D){console.error("Google sign-in error:",D);const M=D.code||"";M.includes("auth/popup-closed-by-user")?w("Sign-in popup was closed. Please try again."):M.includes("auth/popup-blocked")?w("Sign-in popup was blocked. Please allow popups for this site."):M.includes("auth/cancelled-popup-request")?w(null):M.includes("auth/network-request-failed")?w("Network error. Please check your connection and try again."):M.includes("auth/too-many-requests")?w("Too many failed attempts. Please try again later."):M.includes("auth/api-key-not-valid")?w("Authentication service error. Please contact support."):w(D.message||"An error occurred during Google sign-in")}finally{A(!1)}};return u.jsx(Bie,{children:u.jsxs($ie,{children:[u.jsxs(Fie,{children:[u.jsx(qie,{children:e==="login"?"Welcome Back":e==="register"?"Create Account":"Reset Password"}),u.jsx(Hie,{children:e==="login"?"Sign in to your account to continue":e==="register"?"Create a new account to get started":"Enter your email to reset your password"})]}),u.jsxs(Gie,{children:[u.jsxs(Wie,{children:[u.jsx(Z1,{active:e==="login",onClick:()=>{n("login"),w(null),T(null)},children:"Login"}),u.jsx(Z1,{active:e==="register",onClick:()=>{n("register"),w(null),T(null)},children:"Register"}),u.jsx(Z1,{active:e==="reset",onClick:()=>{n("reset"),w(null),T(null)},children:"Reset"})]}),x&&u.jsx("div",{style:{padding:"0.75rem",backgroundColor:"rgba(22, 163, 74, 0.1)",color:"rgb(22, 163, 74)",borderRadius:"0.375rem",marginBottom:"1rem"},children:x}),u.jsxs(Yie,{onSubmit:I,children:[e==="register"&&u.jsxs(u.Fragment,{children:[u.jsxs(qm,{children:[u.jsx(Hm,{htmlFor:"displayName",children:"Display Name"}),u.jsx(Gm,{id:"displayName",type:"text",value:d,onChange:D=>f(D.target.value),placeholder:"Your display name",required:!0,autoComplete:"name"})]}),u.jsxs(qm,{children:[u.jsx(Hm,{htmlFor:"referralCode",children:"Referral Code (Optional)"}),u.jsx(Gm,{id:"referralCode",type:"text",value:m,onChange:D=>g(D.target.value),placeholder:"Enter referral code",autoComplete:"off"})]})]}),u.jsxs(qm,{children:[u.jsx(Hm,{htmlFor:"email",children:"Email"}),u.jsx(Gm,{id:"email",type:"email",value:r,onChange:D=>i(D.target.value),placeholder:"email@example.com",required:!0,autoComplete:"email"})]}),e!=="reset"&&u.jsxs(qm,{children:[u.jsx(Hm,{htmlFor:"password",children:"Password"}),u.jsx(Gm,{id:"password",type:"password",value:a,onChange:D=>l(D.target.value),placeholder:"••••••••",required:!0,autoComplete:e==="login"?"current-password":"new-password"})]}),y&&u.jsx(Xie,{children:y}),u.jsx(s9,{type:"submit",disabled:C,children:C?"Processing...":e==="login"?"Sign In":e==="register"?"Create Account":"Reset Password"})]}),e!=="reset"&&u.jsxs(u.Fragment,{children:[u.jsx(Qie,{children:"Or continue with"}),u.jsxs(Kie,{type:"button",onClick:q,disabled:C,children:[u.jsx(Zie,{}),"Sign in with Google"]})]}),e==="login"&&u.jsx("div",{style:{textAlign:"center",marginTop:"1rem",fontSize:"0.875rem",color:"hsl(var(--muted-foreground))"},children:u.jsx("a",{href:"#",onClick:D=>{D.preventDefault(),n("reset"),w(null),T(null)},style:{color:"hsl(var(--primary))",textDecoration:"none"},children:"Forgot your password?"})})]})]})})}const Jie=b.div`
  overflow-x: auto;
`,ese=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,tse=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,Es=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,nse=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,rse=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,ks=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,ise=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  
  ${({status:t})=>{switch(t){case"active":return`
          background-color: rgba(34, 197, 94, 0.1);
          color: rgb(34, 197, 94);
        `;case"ending":return`
          background-color: rgba(234, 179, 8, 0.1);
          color: rgb(234, 179, 8);
        `;case"complete":return`
          background-color: rgba(59, 130, 246, 0.1);
          color: rgb(59, 130, 246);
        `;case"cancelled":return`
          background-color: rgba(239, 68, 68, 0.1);
          color: rgb(239, 68, 68);
        `;default:return""}}}
`,Xh=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  margin-right: 0.5rem;
  
  &:last-child {
    margin-right: 0;
  }
`,sse=b(Xh)`
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`,ose=b(Xh)`
  background-color: hsl(var(--secondary) / 0.1);
  color: hsl(var(--secondary));
  
  &:hover {
    background-color: hsl(var(--secondary) / 0.2);
  }
`,ase=b(Xh)`
  background-color: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
  
  &:hover {
    background-color: rgba(34, 197, 94, 0.2);
  }
`,lse=b(Xh)`
  background-color: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
  
  &:hover {
    background-color: rgba(239, 68, 68, 0.2);
  }
  
  /* Add a title attribute for hover tooltip */
  &:after {
    content: attr(title);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.5rem;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  &:hover:after {
    visibility: visible;
    opacity: 1;
  }
`,cse=b(Xh)`
  background-color: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
  
  &:hover {
    background-color: rgba(239, 68, 68, 0.2);
  }
  
  /* Add a title attribute for hover tooltip */
  &:after {
    content: attr(title);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.5rem;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  &:hover:after {
    visibility: visible;
    opacity: 1;
  }
`,use=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,dse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,hse=b.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
`;function fse(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),i=Pt();k.useEffect(()=>{(async()=>{try{const w=await y7();e(w)}catch(w){console.error("Error fetching competitions:",w)}finally{r(!1)}})()},[]);const a=y=>{i(`/competition/${y}`)},l=y=>{i(`/admin/edit-competition/${y}`)},d=async y=>{if(window.confirm("Are you sure you want to delete this competition? This action cannot be undone."))try{await b7(y),e(t.filter(w=>w.id!==y)),alert("Competition deleted successfully")}catch(w){console.error("Error deleting competition:",w),alert("Failed to delete competition")}},f=async y=>{if(window.confirm(`Are you sure you want to cancel this competition?
Note: This keeps the competition in the system but marks it as cancelled.`)){const w=window.confirm("Do you want to automatically refund all purchased tickets for this competition?");try{await x7(y,w),e(t.map(x=>x.id===y?{...x,status:"cancelled"}:x)),alert(w?"Competition cancelled and refund process initiated. Users will receive credits for purchased tickets.":"Competition cancelled successfully. No refunds were processed.")}catch(x){console.error("Error cancelling competition:",x),alert("Failed to cancel competition")}}},m=async y=>{if(window.confirm("This would normally open a modal for drawing the winner. Do you want to simulate completion?"))try{const w={userId:"simulated-user-id",username:"SimulatedWinner",email:"winner@example.com"};await cy(y,{status:"complete",completedAt:J.firestore.Timestamp.now(),winner:w,seed:"0x"+Math.random().toString(16).substring(2,10),blockHash:"0x"+Math.random().toString(16).substring(2,66),winningTicket:Math.floor(Math.random()*1e3)+1}),e(t.map(x=>x.id===y?{...x,status:"complete",completedAt:J.firestore.Timestamp.now(),winner:w}:x)),alert("Competition completed successfully")}catch(w){console.error("Error completing competition:",w),alert("Failed to complete competition")}},g=y=>y?y.toDate().toLocaleDateString():"N/A";return n?u.jsx(use,{children:"Loading competitions..."}):t.length===0?u.jsx(dse,{children:"No competitions found. Create one to get started."}):u.jsx(Jie,{children:u.jsxs(ese,{children:[u.jsx(tse,{children:u.jsxs("tr",{children:[u.jsx(Es,{children:"Title"}),u.jsx(Es,{children:"Status"}),u.jsx(Es,{children:"Difficulty"}),u.jsx(Es,{children:"Ticket Price"}),u.jsx(Es,{children:"Tickets"}),u.jsx(Es,{children:"Created"}),u.jsx(Es,{children:"Ends"}),u.jsx(Es,{children:"Actions"})]})}),u.jsx(nse,{children:t.map(y=>u.jsxs(rse,{children:[u.jsx(ks,{children:y.title}),u.jsx(ks,{children:u.jsx(ise,{status:y.status,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})}),u.jsx(ks,{children:y.difficulty.charAt(0).toUpperCase()+y.difficulty.slice(1)}),u.jsxs(ks,{children:[y.ticketPrice," Credits"]}),u.jsxs(ks,{children:[y.ticketsSold," / ",y.totalTickets]}),u.jsx(ks,{children:g(y.createdAt)}),u.jsx(ks,{children:g(y.endsAt)}),u.jsx(ks,{children:u.jsxs(hse,{children:[u.jsx(ose,{onClick:()=>a(y.id),children:"View"}),y.status!=="complete"&&y.status!=="cancelled"&&u.jsxs(u.Fragment,{children:[u.jsx(sse,{onClick:()=>l(y.id),children:"Edit"}),u.jsx(ase,{onClick:()=>m(y.id),children:"Complete"}),u.jsx(lse,{onClick:()=>f(y.id),title:"Cancel marks competition as cancelled but keeps it in the system",children:"Cancel"})]}),u.jsx(cse,{onClick:()=>d(y.id),title:"Delete permanently removes the competition from the database",children:"Delete"})]})})]},y.id))})]})})}const mse=b.div`
  overflow-x: auto;
`,pse=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,gse=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,_o=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,yse=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,vse=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Do=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,bse=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${({admin:t})=>t?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)"};
  color: ${({admin:t})=>t?"rgb(34, 197, 94)":"rgb(59, 130, 246)"};
`,o9=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  margin-right: 0.5rem;
  
  &:last-child {
    margin-right: 0;
  }
`,wse=b(o9)`
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`,xse=b(o9)`
  background-color: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
  
  &:hover {
    background-color: rgba(34, 197, 94, 0.2);
  }
`,Tse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Sse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Cse=b.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
`;function Ese(){const[t,e]=k.useState([]),[n,r]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const g=(await ze.collection("users").get()).docs.map(y=>({id:y.id,...y.data()}));e(g)}catch(f){console.error("Error fetching users:",f)}finally{r(!1)}})()},[]);const i=async(d,f)=>{const m=parseInt(prompt(`Current credits: ${f}. Enter amount to add:`)||"0");if(isNaN(m)||m<0){alert("Please enter a valid number of credits");return}try{const g=f+m;await hy(d,g),e(t.map(y=>y.email===d?{...y,credits:g}:y)),alert(`Added ${m} credits to ${d}. New balance: ${g}`)}catch(g){console.error("Error adding credits:",g),alert("Failed to add credits")}},a=async(d,f)=>{if(window.confirm(`Are you sure you want to ${f?"remove":"grant"} admin privileges to ${d}?`))try{await ze.collection("users").doc(d).update({isAdmin:!f,updatedAt:new Date}),e(t.map(g=>g.email===d?{...g,isAdmin:!f}:g)),alert(`${f?"Removed":"Granted"} admin privileges for ${d}`)}catch(m){console.error("Error toggling admin status:",m),alert("Failed to update admin status")}},l=d=>d?new Date(d.seconds*1e3).toLocaleDateString():"N/A";return n?u.jsx(Tse,{children:"Loading users..."}):t.length===0?u.jsx(Sse,{children:"No users found."}):u.jsx(mse,{children:u.jsxs(pse,{children:[u.jsx(gse,{children:u.jsxs("tr",{children:[u.jsx(_o,{children:"Email"}),u.jsx(_o,{children:"Display Name"}),u.jsx(_o,{children:"Role"}),u.jsx(_o,{children:"Credits"}),u.jsx(_o,{children:"Joined"}),u.jsx(_o,{children:"Last Updated"}),u.jsx(_o,{children:"Actions"})]})}),u.jsx(yse,{children:t.map(d=>u.jsxs(vse,{children:[u.jsx(Do,{children:d.email}),u.jsx(Do,{children:d.displayName||"Not set"}),u.jsx(Do,{children:u.jsx(bse,{admin:d.isAdmin,children:d.isAdmin?"Admin":"User"})}),u.jsx(Do,{children:d.credits}),u.jsx(Do,{children:l(d.createdAt)}),u.jsx(Do,{children:l(d.updatedAt)}),u.jsx(Do,{children:u.jsxs(Cse,{children:[u.jsx(xse,{onClick:()=>i(d.email,d.credits),children:"Add Credits"}),u.jsx(wse,{onClick:()=>a(d.email,d.isAdmin),children:d.isAdmin?"Remove Admin":"Make Admin"})]})})]},d.email))})]})})}const kse=b.div`
  overflow-x: auto;
`,Ase=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,_se=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,jo=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,Dse=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,jse=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Io=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,Ise=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Rse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Mse=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  background-color: hsl(var(--secondary) / 0.1);
  color: hsl(var(--secondary));
  
  &:hover {
    background-color: hsl(var(--secondary) / 0.2);
  }
`,Nse=b.span`
  display: inline-block;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  
  &:hover {
    text-decoration: underline;
  }
`,Lse=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`;function Ose(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),i=Pt();k.useEffect(()=>{(async()=>{try{const g=await ly();e(g)}catch(g){console.error("Error fetching completed competitions:",g)}finally{r(!1)}})()},[]);const a=m=>{i(`/competition/${m}`)},l=m=>m?new Date(m.seconds*1e3).toLocaleDateString():"N/A",d=m=>{navigator.clipboard.writeText(m).then(()=>alert("Copied to clipboard!")).catch(g=>console.error("Could not copy text: ",g))},f=m=>{var y,w;const g=`
Competition: ${m.title}
Completed: ${l(m.completedAt)}
Winner: ${(y=m.winner)==null?void 0:y.username} (${(w=m.winner)==null?void 0:w.email})
Seed: ${m.seed}
Block Hash: ${m.blockHash}
Winning Ticket: ${m.winningTicket}
    `;alert(g)};return n?u.jsx(Ise,{children:"Loading completed competitions..."}):t.length===0?u.jsx(Rse,{children:"No completed competitions found."}):u.jsx(kse,{children:u.jsxs(Ase,{children:[u.jsx(_se,{children:u.jsxs("tr",{children:[u.jsx(jo,{children:"Competition"}),u.jsx(jo,{children:"Prize"}),u.jsx(jo,{children:"Completed Date"}),u.jsx(jo,{children:"Winner"}),u.jsx(jo,{children:"Seed"}),u.jsx(jo,{children:"Winning Ticket"}),u.jsx(jo,{children:"Actions"})]})}),u.jsx(Dse,{children:t.map(m=>{var g;return u.jsxs(jse,{children:[u.jsx(Io,{children:m.title}),u.jsx(Io,{children:m.prizeValue}),u.jsx(Io,{children:l(m.completedAt)}),u.jsx(Io,{children:(g=m.winner)==null?void 0:g.username}),u.jsx(Io,{children:u.jsx(Nse,{onClick:()=>d(m.seed||""),title:"Click to copy",children:m.seed||"N/A"})}),u.jsx(Io,{children:m.winningTicket||"N/A"}),u.jsxs(Io,{children:[u.jsx(Mse,{onClick:()=>a(m.id),children:"View"})," ",u.jsx(Lse,{onClick:()=>f(m),children:"Verification"})]})]},m.id)})})]})})}const yD=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
`,vD=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  color: hsl(var(--foreground));
`,Pse=b.form`
  display: grid;
  gap: 1.5rem;
`,vr=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,J1=b.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  
  @media (min-width: 640px) {
    grid-template-columns: 1fr 1fr;
  }
`,br=b.label`
  font-size: 0.875rem;
  font-weight: 500;
  color: hsl(var(--foreground));
`,As=b.input`
  width: 100%;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,bD=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  resize: vertical;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,wD=b.select`
  width: 100%;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,a9=b.button`
  padding: 0.625rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
`,Use=b(a9)`
  background-color: hsl(var(--primary));
  color: white;

  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Vse=b(a9)`
  background-color: transparent;
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--border));

  &:hover {
    background-color: hsl(var(--muted) / 0.3);
  }
`,zse=b.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem;
`,Bse=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-top: 0.5rem;
`;function $se({competitionId:t,onCancel:e,onSuccess:n}){const[r,i]=k.useState({title:"",description:"",prize:"",prizeValue:"",imageUrl:"",difficulty:"medium",ticketPrice:3,totalTickets:500,endsAt:new Date(Date.now()+6048e5).toISOString().split("T")[0],status:"active",triviaQuestion:"",triviaAnswer:""}),[a,l]=k.useState(!1),[d,f]=k.useState(null),[m,g]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){g(!0);try{const T=await Ki(t);if(T){const C=T.endsAt.toDate().toISOString().split("T")[0];i({title:T.title||"",description:T.description||"",prize:T.prize||"",prizeValue:T.prizeValue||"",imageUrl:T.imageUrl||"",difficulty:T.difficulty||"medium",ticketPrice:T.ticketPrice||3,totalTickets:T.totalTickets||500,endsAt:C,status:T.status||"active",triviaQuestion:T.triviaQuestion||"",triviaAnswer:T.triviaAnswer||""})}else f("Competition not found")}catch(T){console.error("Error fetching competition:",T),f(T.message||"An error occurred while fetching the competition")}finally{g(!1)}}})()},[t]);const y=x=>{const{name:T,value:C}=x.target;i(A=>({...A,[T]:C}))},w=async x=>{x.preventDefault(),f(""),l(!0);try{if(!r.title||!r.description||!r.prize||!r.prizeValue||!r.ticketPrice||!r.totalTickets||!r.endsAt||!r.triviaQuestion||!r.triviaAnswer)throw new Error("Please fill in all required fields.");if(Number(r.ticketPrice)<=0)throw new Error("Ticket price must be greater than 0.");if(Number(r.totalTickets)<=0)throw new Error("Total tickets must be greater than 0.");const T=new Date(r.endsAt);if(T<=new Date)throw new Error("End date must be in the future.");const C={...r,ticketPrice:Number(r.ticketPrice),totalTickets:Number(r.totalTickets),status:r.status,difficulty:r.difficulty,endsAt:J.firestore.Timestamp.fromDate(T)};t?(await cy(t,C),alert("Competition updated successfully!")):(await v7(C),alert("Competition created successfully!")),n?n():e()}catch(T){console.error("Error saving competition:",T),f(T.message||"An error occurred while saving the competition.")}finally{l(!1)}};return m?u.jsx(yD,{children:u.jsx(vD,{children:"Loading competition data..."})}):u.jsxs(yD,{children:[u.jsx(vD,{children:t?"Edit Competition":"Create New Competition"}),u.jsxs(Pse,{onSubmit:w,children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"title",children:"Title*"}),u.jsx(As,{id:"title",name:"title",value:r.title,onChange:y,placeholder:"e.g. Dragon Slayer Challenge",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"description",children:"Description*"}),u.jsx(bD,{id:"description",name:"description",value:r.description,onChange:y,placeholder:"Provide details about the competition and prizes",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"imageUrl",children:"Image URL"}),u.jsx(As,{id:"imageUrl",name:"imageUrl",value:r.imageUrl,onChange:y,placeholder:"https://example.com/image.jpg"}),u.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",opacity:.7},children:"Provide a URL to an image for this competition (optional)"})]}),u.jsxs(J1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"prize",children:"Prize*"}),u.jsx(As,{id:"prize",name:"prize",value:r.prize,onChange:y,placeholder:"e.g. Dragon Gear + 100M OSRS Gold",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"prizeValue",children:"Prize Value Display*"}),u.jsx(As,{id:"prizeValue",name:"prizeValue",value:r.prizeValue,onChange:y,placeholder:"e.g. 100M OSRS Gold",required:!0})]})]}),u.jsxs(J1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"difficulty",children:"Difficulty"}),u.jsxs(wD,{id:"difficulty",name:"difficulty",value:r.difficulty,onChange:y,children:[u.jsx("option",{value:"easy",children:"Easy"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"hard",children:"Hard"})]})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"status",children:"Status"}),u.jsxs(wD,{id:"status",name:"status",value:r.status,onChange:y,children:[u.jsx("option",{value:"active",children:"Active"}),u.jsx("option",{value:"ending",children:"Ending Soon"})]})]})]}),u.jsxs(J1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"ticketPrice",children:"Ticket Price (Credits)*"}),u.jsx(As,{id:"ticketPrice",name:"ticketPrice",type:"number",min:"1",value:r.ticketPrice,onChange:y,required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"totalTickets",children:"Total Tickets*"}),u.jsx(As,{id:"totalTickets",name:"totalTickets",type:"number",min:"1",value:r.totalTickets,onChange:y,required:!0})]})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"endsAt",children:"End Date*"}),u.jsx(As,{id:"endsAt",name:"endsAt",type:"date",value:r.endsAt,onChange:y,required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"triviaQuestion",children:"Trivia Question*"}),u.jsx(bD,{id:"triviaQuestion",name:"triviaQuestion",value:r.triviaQuestion,onChange:y,placeholder:"Enter a RuneScape related trivia question",required:!0}),u.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",opacity:.7},children:"Trivia questions help classify competitions as skill-based contests"})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"triviaAnswer",children:"Correct Answer*"}),u.jsx(As,{id:"triviaAnswer",name:"triviaAnswer",value:r.triviaAnswer,onChange:y,placeholder:"Enter the correct answer to the trivia question",required:!0})]}),d&&u.jsx(Bse,{children:d}),u.jsxs(zse,{children:[u.jsx(Vse,{type:"button",onClick:e,children:"Cancel"}),u.jsx(Use,{type:"submit",disabled:a,children:a?t?"Updating...":"Creating...":t?"Update Competition":"Create Competition"})]})]})]})}async function Fse(){console.log("Starting database seeding...");try{J.apps.length||J.initializeApp(a7);const t=J.firestore(),e=[{email:"admin@example.com",displayName:"Admin User",credits:1e3,isAdmin:!0,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"user@example.com",displayName:"Regular User",credits:100,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"player1@example.com",displayName:"Lucky Player",credits:250,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"player2@example.com",displayName:"Big Winner",credits:500,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)}],n=["https://oldschool.runescape.wiki/images/Dragon_claws_detail.png","https://oldschool.runescape.wiki/images/Abyssal_whip_detail.png","https://oldschool.runescape.wiki/images/Twisted_bow_detail.png","https://oldschool.runescape.wiki/images/3rd_age_platebody_detail.png","https://oldschool.runescape.wiki/images/Bandos_chestplate_detail.png","https://oldschool.runescape.wiki/images/Dragon_warhammer_detail.png","https://oldschool.runescape.wiki/images/Saradomin_godsword_detail.png","https://oldschool.runescape.wiki/images/Elder_maul_detail.png","https://oldschool.runescape.wiki/images/Ancestral_robe_top_detail.png","https://oldschool.runescape.wiki/images/Scythe_of_vitur_%28uncharged%29_detail.png"],r=[{title:"OSRS Gold Giveaway",description:"Win 10M OSRS gold! This competition is perfect for players looking to boost their wealth with some easy gold.",prize:"10M OSRS Gold",prizeValue:"5 USD",imageUrl:"https://oldschool.runescape.wiki/images/Gold_coin_10000.png",ticketPrice:10,totalTickets:100,ticketsSold:25,difficulty:"easy",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+7*24*60*60*1e3))},{title:"Dragon Warhammer Giveaway",description:"Win a Dragon Warhammer, one of the most sought-after weapons for PvM content!",prize:"Dragon Warhammer",prizeValue:"25 USD",imageUrl:n[5],ticketPrice:25,totalTickets:200,ticketsSold:50,difficulty:"medium",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+14*24*60*60*1e3))},{title:"Twisted Bow Challenge",description:"The ultimate OSRS prize - win a Twisted Bow, the most powerful ranged weapon in the game!",prize:"Twisted Bow",prizeValue:"100 USD",imageUrl:n[2],ticketPrice:50,totalTickets:500,ticketsSold:125,difficulty:"hard",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+21*24*60*60*1e3))},{title:"3rd Age Armor Set",description:"Show off your wealth with this ultra-rare 3rd Age armor set!",prize:"3rd Age Full Armor Set",prizeValue:"75 USD",imageUrl:n[3],ticketPrice:40,totalTickets:300,ticketsSold:89,difficulty:"hard",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+10*24*60*60*1e3))},{title:"Bandos Armor Giveaway",description:"Win the complete Bandos armor set, perfect for melee training and bossing!",prize:"Full Bandos Armor Set",prizeValue:"30 USD",imageUrl:n[4],ticketPrice:20,totalTickets:150,ticketsSold:62,difficulty:"medium",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+5*24*60*60*1e3))}],i=[{title:"Abyssal Whip Giveaway",description:"This competition has ended. The winner received an Abyssal Whip!",prize:"Abyssal Whip",prizeValue:"10 USD",imageUrl:n[1],ticketPrice:15,totalTickets:50,ticketsSold:50,difficulty:"easy",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-14*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-7*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-7*24*60*60*1e3)),winner:{userId:"user@example.com",username:"Regular User",email:"user@example.com"},seed:"abcdef1234567890",blockHash:"block123456789",winningTicket:42},{title:"Dragon Claws Competition",description:"This competition has ended. The winner received Dragon Claws!",prize:"Dragon Claws",prizeValue:"40 USD",imageUrl:n[0],ticketPrice:35,totalTickets:200,ticketsSold:198,difficulty:"hard",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-15*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-15*24*60*60*1e3)),winner:{userId:"player1@example.com",username:"Lucky Player",email:"player1@example.com"},seed:"lucky123456789",blockHash:"block987654321",winningTicket:137},{title:"Saradomin Godsword Raffle",description:"This competition has ended. The winner received a Saradomin Godsword!",prize:"Saradomin Godsword",prizeValue:"20 USD",imageUrl:n[6],ticketPrice:20,totalTickets:100,ticketsSold:100,difficulty:"medium",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-21*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-10*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-10*24*60*60*1e3)),winner:{userId:"player2@example.com",username:"Big Winner",email:"player2@example.com"},seed:"winner987654321",blockHash:"block555666777",winningTicket:73},{title:"Elder Maul Giveaway",description:"This competition has ended. The winner received an Elder Maul!",prize:"Elder Maul",prizeValue:"35 USD",imageUrl:n[7],ticketPrice:30,totalTickets:150,ticketsSold:142,difficulty:"medium",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),winner:{userId:"player1@example.com",username:"Lucky Player",email:"player1@example.com"},seed:"maul123456789",blockHash:"block444555666",winningTicket:89},{title:"Ancestral Robes Competition",description:"This competition has ended. The winner received Ancestral Robes!",prize:"Ancestral Robes Set",prizeValue:"60 USD",imageUrl:n[8],ticketPrice:45,totalTickets:250,ticketsSold:243,difficulty:"hard",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-60*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),winner:{userId:"player2@example.com",username:"Big Winner",email:"player2@example.com"},seed:"robes987654321",blockHash:"block111222333",winningTicket:175}],a=[...r,...i];for(const l of e)await t.collection("users").doc(l.email).set(l),console.log(`Added user: ${l.email}`);for(const l of a)await t.collection("competitions").add(l),console.log(`Added competition: ${l.title}`);for(const l of i){const d=await t.collection("competitions").where("title","==",l.title).get();if(!d.empty){const f=d.docs[0].id;await t.collection("tickets").add({competitionId:f,userId:l.winner.userId,purchasedAt:l.completedAt,ticketNumber:l.winningTicket,isWinner:!0}),console.log(`Added winning ticket for competition: ${l.title}`);const m=e.map(g=>g.email);for(let g=0;g<Math.min(l.ticketsSold-1,10);g++){let y=m[Math.floor(Math.random()*m.length)];for(;y===l.winner.userId;)y=m[Math.floor(Math.random()*m.length)];let w=Math.floor(Math.random()*l.totalTickets)+1;for(;w===l.winningTicket;)w=Math.floor(Math.random()*l.totalTickets)+1;await t.collection("tickets").add({competitionId:f,userId:y,purchasedAt:J.firestore.Timestamp.fromDate(new Date(l.completedAt.toDate().getTime()-Math.random()*7*24*60*60*1e3)),ticketNumber:w,isWinner:!1})}console.log(`Added ${Math.min(l.ticketsSold-1,10)} random tickets for competition: ${l.title}`)}}return console.log("Database seeding completed successfully!"),!0}catch(t){return console.error("Error seeding database:",t),!1}}const qse=b.div`
  padding: 1.5rem;
`,Hse=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,Gse=b.p`
  color: hsl(var(--muted-foreground));
  margin-bottom: 1.5rem;
`,Wse=b.button`
  background-color: #4caf50;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  margin: 10px 0;
  
  &:hover {
    background-color: #45a049;
  }
  
  &:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }
`,Yse=b.div`
  margin-top: 10px;
  padding: 10px;
  border-radius: 4px;
  background-color: ${t=>t.success?"#dff0d8":"#f2dede"};
  color: ${t=>t.success?"#3c763d":"#a94442"};
`;function Kse(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),i=async()=>{e(!0),r(null);try{const a=await Fse();r(a?{success:!0,message:"Database seeded successfully!"}:{success:!1,message:"Failed to seed database. Check console for errors."})}catch(a){console.error("Error in seed operation:",a),r({success:!1,message:`Error: ${a instanceof Error?a.message:"Unknown error"}`})}finally{e(!1)}};return u.jsxs(qse,{children:[u.jsx(Hse,{children:"Database Seeder"}),u.jsx(Gse,{children:"Use this tool to seed the database with sample data for testing. This will add sample users, competitions, and completed competitions."}),u.jsx(Wse,{onClick:i,disabled:t,children:t?"Seeding...":"Seed Database"}),n&&u.jsx(Yse,{success:n.success,children:n.message})]})}function Qse(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Date.now().toString(36)}function Xse(){const t="0123456789abcdef";let e="";for(let n=0;n<64;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}async function Zse(t,e,n){return l9(t,e,n)}function l9(t,e,n){return new Promise((r,i)=>{try{if(n<=0)throw new Error("Total tickets must be greater than 0");const l=new TextEncoder().encode(`${t}-${e}`);crypto.subtle.digest("SHA-256",l).then(d=>{const m=Array.from(new Uint8Array(d)).map(w=>w.toString(16).padStart(2,"0")).join(""),y=parseInt(m.substring(0,8),16)%n+1;r(y)})}catch(a){i(a)}})}async function Jse(){try{const t=J.firestore.Timestamp.now(),e=await ze.collection("competitions").where("status","==","active").where("endsAt","<=",t).get();if(e.empty)return console.log("No competitions to end"),[];const n=e.docs.map(r=>({id:r.id,...r.data()}));return console.log(`Found ${n.length} competitions to end`),n}catch(t){return console.error("Error checking ended competitions:",t),[]}}async function c9(t){try{console.log(`Ending competition ${t}`);const e=await Ki(t);if(!e)return console.error(`Competition ${t} not found`),!1;if(e.status==="complete")return console.log(`Competition ${t} is already complete`),!0;if(e.ticketsSold<=0)return console.log(`No tickets sold for competition ${t}, marking as cancelled`),await cy(t,{status:"cancelled",updatedAt:J.firestore.Timestamp.now()}),!0;const n=await J2(t);if(n.length===0)return console.error(`No tickets found for competition ${t}`),!1;const r=Qse(),i=Xse(),a=await l9(r,i,e.ticketsSold),l=n.find(m=>m.ticketNumber===a);if(!l)return console.error(`Winning ticket #${a} not found for competition ${t}`),!1;const d=await ze.collection("users").doc(l.userId).get();if(!d.exists)return console.error(`Winner user ${l.userId} not found`),!1;const f=d.data();return await ze.collection("tickets").doc(l.id).update({isWinner:!0}),await w7(t,{userId:l.userId,username:(f==null?void 0:f.displayName)||"Unknown",email:(f==null?void 0:f.email)||"Unknown"},r,i,a),await d7(l.userId,t,e.title,e.prize,e.imageUrl),f&&f.email&&await PY(f.email,f.displayName||"User",e.title,e.prize,e.prizeValue,t).catch(m=>console.error("Error sending winner email:",m)),console.log(`Competition ${t} ended. Winner: ${f==null?void 0:f.displayName}, Ticket: ${a}`),!0}catch(e){return console.error(`Error ending competition ${t}:`,e),!1}}async function eoe(){try{const t=J.firestore.Timestamp.now(),e=J.firestore.Timestamp.fromDate(new Date(t.toDate().getTime()+24*60*60*1e3)),n=await ze.collection("competitions").where("status","==","active").where("endsAt","<=",e).where("endsAt",">",t).get();if(n.empty)return;const r=ze.batch();for(const i of n.docs){const a=ze.collection("competitions").doc(i.id),l=i.data();r.update(a,{status:"ending",updatedAt:t});const d=await ze.collection("tickets").where("competitionId","==",i.id).get(),f=new Set;d.docs.forEach(m=>{const g=m.data();f.add(g.userId)});for(const m of f)await u7(m,i.id,l.title,l.imageUrl)}await r.commit(),console.log(`Updated ${n.docs.length} competitions to "ending" status`)}catch(t){console.error("Error updating ending soon competitions:",t)}}async function toe(){try{await eoe();const t=await Jse();for(const e of t)e.id&&await c9(e.id)}catch(t){console.error("Error processing competitions:",t)}}const noe=b.div`
  padding: 1.5rem;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  margin-bottom: 2rem;
  border: 1px solid hsl(var(--border));
`,roe=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,ioe=b.p`
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,soe=b.div`
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
`,Yw=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  
  ${t=>{switch(t.variant){case"primary":return`
          background: hsl(var(--primary));
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;case"success":return`
          background: rgb(22, 163, 74);
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;case"destructive":return`
          background: hsl(var(--destructive));
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;default:return`
          background: transparent;
          color: hsl(var(--foreground));
          border: 1px solid hsl(var(--border));
          &:hover:not(:disabled) {
            background: hsl(var(--accent));
          }
        `}}}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,ooe=b.div`
  padding: 0.75rem;
  border-radius: 0.375rem;
  margin-bottom: 1rem;
  background-color: ${t=>t.success?"rgba(22, 163, 74, 0.1)":"rgba(239, 68, 68, 0.1)"};
  color: ${t=>t.success?"rgb(22, 163, 74)":"rgb(239, 68, 68)"};
  font-size: 0.875rem;
`,aoe=b.div`
  margin-top: 1.5rem;
`,loe=b.div`
  padding: 0.75rem;
  border: 1px solid hsl(var(--border));
  border-radius: 0.375rem;
  margin-bottom: 0.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
`,coe=b.div`
  flex: 1;
`,uoe=b.div`
  font-weight: 500;
  margin-bottom: 0.25rem;
`,doe=b.div`
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  display: inline-block;
  background-color: ${t=>{switch(t.status){case"active":return"rgba(22, 163, 74, 0.2)";case"ending":return"rgba(245, 158, 11, 0.2)";case"complete":return"rgba(37, 99, 235, 0.2)";case"cancelled":return"rgba(239, 68, 68, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.status){case"active":return"rgb(22, 163, 74)";case"ending":return"rgb(245, 158, 11)";case"complete":return"rgb(37, 99, 235)";case"cancelled":return"rgb(239, 68, 68)";default:return"rgb(107, 114, 128)"}}};
`,hoe=b(Yw)`
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
`;function foe(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),[i,a]=k.useState([]),[l,d]=k.useState(!1),f=async()=>{e(!0),r(null);try{await toe(),r({success:!0,message:"Successfully processed competitions. Check console for details."})}catch(y){console.error("Error in competition processor:",y),r({success:!1,message:`Error processing competitions: ${y}`})}finally{e(!1)}},m=async()=>{e(!0);try{const y=await oh();a(y),d(!0)}catch(y){r({success:!1,message:`Error loading competitions: ${y}`})}finally{e(!1)}},g=async y=>{if(confirm("Are you sure you want to end this competition?")){e(!0);try{if(await c9(y)){r({success:!0,message:`Successfully ended competition ${y}`});const x=await oh();a(x)}else r({success:!1,message:`Failed to end competition ${y}`})}catch(w){r({success:!1,message:`Error ending competition: ${w}`})}finally{e(!1)}}};return u.jsxs(noe,{children:[u.jsx(roe,{children:"Competition Processor"}),u.jsx(ioe,{children:"This tool allows you to manually trigger the competition processing system. It will check for competitions that have ended and automatically select winners using the verifiable random drawing system."}),u.jsxs(soe,{children:[u.jsx(Yw,{variant:"primary",onClick:f,disabled:t,children:t?"Processing...":"Process All Competitions"}),u.jsx(Yw,{variant:"outline",onClick:m,disabled:t,children:t?"Loading...":"View Active Competitions"})]}),n&&u.jsx(ooe,{success:n.success,children:n.message}),l&&u.jsxs(aoe,{children:[u.jsx("h3",{style:{marginBottom:"1rem"},children:"Active Competitions"}),i.length===0?u.jsx("p",{children:"No active competitions found."}):i.map(y=>u.jsxs(loe,{children:[u.jsxs(coe,{children:[u.jsx(uoe,{children:y.title}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"hsl(var(--muted-foreground))"},children:["Tickets: ",y.ticketsSold," / ",y.totalTickets]}),u.jsx(doe,{status:y.status,children:y.status})]}),u.jsx(hoe,{variant:"destructive",onClick:()=>g(y.id),disabled:t,children:"End Now"})]},y.id))]})]})}const moe=b.div`
  padding: 1.5rem;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
`,poe=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,goe=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,eb=b.button`
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`,yoe=b.div`
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 1.5rem;
  
  @media (max-width: 960px) {
    grid-template-columns: 1fr;
  }
`,voe=b.div`
  max-height: 700px;
  overflow-y: auto;
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
`,boe=b.div`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  background: ${t=>t.isSelected?"hsl(var(--accent))":"transparent"};
  cursor: pointer;
  
  &:last-child {
    border-bottom: none;
  }
  
  &:hover {
    background: hsl(var(--accent));
  }
`,woe=b.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.5rem;
`,xoe=b.h3`
  font-size: 0.875rem;
  font-weight: 600;
  margin: 0;
`,xD=b.span`
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  background-color: ${t=>{switch(t.status){case"open":return"rgba(22, 163, 74, 0.2)";case"in_progress":return"rgba(245, 158, 11, 0.2)";case"resolved":return"rgba(37, 99, 235, 0.2)";case"closed":return"rgba(107, 114, 128, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.status){case"open":return"rgb(22, 163, 74)";case"in_progress":return"rgb(245, 158, 11)";case"resolved":return"rgb(37, 99, 235)";case"closed":return"rgb(107, 114, 128)";default:return"rgb(107, 114, 128)"}}};
`,tb=b.span`
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  margin-right: 0.5rem;
  background-color: ${t=>{switch(t.type){case"prize_collection":return"rgba(239, 68, 68, 0.2)";case"support":return"rgba(37, 99, 235, 0.2)";case"refund":return"rgba(245, 158, 11, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.type){case"prize_collection":return"rgb(239, 68, 68)";case"support":return"rgb(37, 99, 235)";case"refund":return"rgb(245, 158, 11)";default:return"rgb(107, 114, 128)"}}};
`,Toe=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
`,Soe=b.div`
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  overflow: hidden;
`,Coe=b.div`
  padding: 3rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
`,Eoe=b.div`
  padding: 1rem;
  background: hsl(var(--accent));
  border-bottom: 1px solid hsl(var(--border));
`,koe=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
`,Aoe=b.div`
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
`,Wm=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.75rem;
`,_oe=b.div`
  padding: 1rem;
`,Doe=b.div`
  white-space: pre-wrap;
  background: hsl(var(--background));
  padding: 1rem;
  border-radius: 0.375rem;
  margin-bottom: 1.5rem;
  font-size: 0.875rem;
`,joe=b.div`
  margin-top: 1.5rem;
`,Ioe=b.div`
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: 300px;
  overflow-y: auto;
  padding: 0.5rem;
`,Roe=b.div`
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
`,Moe=b.div`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  background-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.2)":"rgba(107, 114, 128, 0.2)"};
  color: ${t=>t.isAdmin?"rgb(37, 99, 235)":"rgb(107, 114, 128)"};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.75rem;
`,Noe=b.div`
  flex: 1;
  background: hsl(var(--background));
  padding: 0.75rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
`,Loe=b.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
  font-size: 0.75rem;
`,Ooe=b.span`
  font-weight: 600;
`,Poe=b.span`
  color: hsl(var(--muted-foreground));
`,Uoe=b.div`
  white-space: pre-wrap;
`,Voe=b.form`
  margin-top: 1.5rem;
`,zoe=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.75rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.375rem;
  color: hsl(var(--foreground));
  resize: vertical;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 1px hsl(var(--primary));
  }
`,Boe=b.div`
  display: flex;
  gap: 0.5rem;
  justify-content: space-between;
`,$oe=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  transition: all 0.2s;
  cursor: pointer;
  
  ${t=>{switch(t.variant){case"primary":return`
          background: hsl(var(--primary));
          color: white;
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `;case"danger":return`
          background: hsl(var(--destructive));
          color: white;
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `;case"outline":return`
          background: transparent;
          color: hsl(var(--foreground));
          border: 1px solid hsl(var(--border));
          
          &:hover {
            background: hsl(var(--accent));
          }
        `;default:return`
          background: hsl(var(--secondary));
          color: hsl(var(--secondary-foreground));
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `}}}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Foe=b.div`
  display: flex;
  gap: 0.5rem;
`,nb=b.div`
  padding: 3rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
`,qoe=b.div`
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
`,rb=t=>{if(!t)return"N/A";try{return new Date(t.seconds*1e3).toLocaleString()}catch{return"N/A"}},Hoe=()=>{const{currentUser:t}=Gn(),e=Pt(),n=Hn(),[r,i]=k.useState("all"),[a,l]=k.useState([]),[d,f]=k.useState(null),[m,g]=k.useState([]),[y,w]=k.useState(""),[x,T]=k.useState(!0),[C,A]=k.useState(!1),_=M=>new URLSearchParams(n.search).get(M);k.useEffect(()=>{(async()=>{if(t)try{T(!0);const $=await C7();l($);const Q=_("ticketId");if(Q){console.log("Looking for ticket ID from URL:",Q);let ie=$.find(he=>he.id===Q);if(!ie){console.log("Ticket not found in open tickets, attempting to load directly");try{const he=await fy(Q);he&&(ie=he,l(Ie=>Ie.some(ne=>ne.id===he.id)?Ie:[...Ie,he]))}catch(he){console.error("Error loading ticket by ID:",he)}}ie?(console.log("Found ticket from URL param:",ie.subject),await L(ie)):console.log("Ticket ID from URL not found")}}catch($){console.error("Error loading tickets:",$)}finally{T(!1)}})()},[t,n.search]);const L=async M=>{if(f(M),M.id)try{if(M.status==="open"){const Q=(t==null?void 0:t.email)||void 0;await Aw(M.id,{status:"in_progress",assignedTo:Q}),l(ie=>ie.map(he=>he.id===M.id?{...he,status:"in_progress",assignedTo:Q}:he)),f(ie=>ie?{...ie,status:"in_progress",assignedTo:Q}:null)}const $=await Yp(M.id);g($),e(`/admin?tab=support&ticketId=${M.id}`,{replace:!0})}catch($){console.error("Error updating ticket status:",$)}},I=async M=>{if(M.preventDefault(),!(!t||!d||!d.id||!y.trim()))try{if(A(!0),await n5({ticketId:d.id,userId:t.uid,isAdmin:!0,message:y}),w(""),d.id){const $=await Yp(d.id);g($)}}catch($){console.error("Error sending reply:",$)}finally{A(!1)}},q=async()=>{if(!(!d||!d.id)&&confirm("Are you sure you want to mark this ticket as resolved?"))try{await Aw(d.id,{status:"resolved"}),l(M=>M.filter($=>$.id!==d.id)),f(null),e("/admin?tab=support",{replace:!0})}catch(M){console.error("Error resolving ticket:",M)}},D=a.filter(M=>r==="all"?!0:r==="prize"?M.type==="prize_collection":r==="support"?M.type==="support":!0);return u.jsxs(moe,{children:[u.jsx(poe,{children:"Support Tickets"}),u.jsxs(goe,{children:[u.jsx(eb,{active:r==="all",onClick:()=>i("all"),children:"All Tickets"}),u.jsx(eb,{active:r==="prize",onClick:()=>i("prize"),children:"Prize Collection"}),u.jsx(eb,{active:r==="support",onClick:()=>i("support"),children:"Support"})]}),x?u.jsx(nb,{children:"Loading tickets..."}):D.length===0?u.jsx(nb,{children:"No open tickets found."}):u.jsxs(yoe,{children:[u.jsx(voe,{children:D.map(M=>u.jsxs(boe,{isSelected:(d==null?void 0:d.id)===M.id,onClick:()=>L(M),children:[u.jsxs(woe,{children:[u.jsx(xoe,{children:M.subject}),u.jsx(xD,{status:M.status,children:M.status.replace("_"," ")})]}),u.jsxs(Toe,{children:[u.jsxs("div",{children:[u.jsx(tb,{type:M.type,children:M.type.replace("_"," ")}),M.priority==="high"&&u.jsx(tb,{type:"high",children:"High Priority"})]}),u.jsx("div",{children:rb(M.createdAt)})]})]},M.id))}),u.jsx(Soe,{children:d?u.jsxs(u.Fragment,{children:[u.jsxs(Eoe,{children:[u.jsx(koe,{children:d.subject}),u.jsxs(Aoe,{children:[u.jsxs(Wm,{children:[u.jsx("span",{children:"From:"}),u.jsx("strong",{children:d.userEmail})]}),u.jsxs(Wm,{children:[u.jsx("span",{children:"Created:"}),u.jsx("strong",{children:rb(d.createdAt)})]}),u.jsxs(Wm,{children:[u.jsx("span",{children:"Status:"}),u.jsx(xD,{status:d.status,children:d.status.replace("_"," ")})]}),u.jsxs(Wm,{children:[u.jsx("span",{children:"Type:"}),u.jsx(tb,{type:d.type,children:d.type.replace("_"," ")})]})]}),u.jsx(qoe,{children:u.jsx("button",{onClick:q,disabled:d.status==="resolved",style:{padding:"0.5rem 1rem",background:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer",opacity:d.status==="resolved"?.5:1},children:"Mark as Resolved"})})]}),u.jsxs(_oe,{children:[u.jsx("h4",{children:"Description"}),u.jsx(Doe,{children:d.description}),u.jsxs(joe,{children:[u.jsx("h4",{children:"Messages"}),m.length===0?u.jsx(nb,{children:"No messages yet."}):u.jsx(Ioe,{children:m.map(M=>u.jsxs(Roe,{isAdmin:M.isAdmin,children:[u.jsx(Moe,{isAdmin:M.isAdmin,children:M.isAdmin?"A":"U"}),u.jsxs(Noe,{children:[u.jsxs(Loe,{children:[u.jsx(Ooe,{children:M.isAdmin?"Admin":d.userEmail}),u.jsx(Poe,{children:rb(M.createdAt)})]}),u.jsx(Uoe,{children:M.message})]})]},M.id))}),u.jsxs(Voe,{onSubmit:I,children:[u.jsx(zoe,{value:y,onChange:M=>w(M.target.value),placeholder:"Type your reply here...",required:!0}),u.jsx(Boe,{children:u.jsx(Foe,{children:u.jsx($oe,{variant:"primary",type:"submit",disabled:C||!y.trim(),children:C?"Sending...":"Send Reply"})})})]})]})]})]}):u.jsx(Coe,{children:"Select a ticket to view details"})})]})]})},Goe=async()=>{const e=(await ze.collection("competitions").get()).docs.map(a=>({id:a.id,...a.data()}));let n=0;const r={},i={};return e.forEach(a=>{const l=a.ticketsSold*a.ticketPrice;if(n+=l,r[a.id]=l,a.completedAt){const d=new Date(a.completedAt.toDate()).toISOString().split("T")[0];i[d]=(i[d]||0)+l}}),{totalRevenue:n,revenueByCompetition:r,revenueByDay:i}},Woe=async()=>{const e=(await ze.collection("users").get()).docs.map(y=>({id:y.id,...y.data()})),n=new Date,r=new Date(n);r.setDate(r.getDate()-30);const i=new Date(n);i.setDate(i.getDate()-7);const a={};let l=0,d=0;e.forEach(y=>{if(y.createdAt){const w=y.createdAt.toDate(),x=w.toISOString().split("T")[0];a[x]=(a[x]||0)+1,w>=i&&l++,w>=r&&d++}});const f=J.firestore.Timestamp.fromDate(r),m=await ze.collection("tickets").where("purchasedAt",">=",f).get(),g=new Set(m.docs.map(y=>y.data().userId));return{totalUsers:e.length,newUsersLast7Days:l,newUsersLast30Days:d,usersByJoinDate:a,activeUsers:g.size}},Yoe=async()=>{const e=(await ze.collection("competitions").get()).docs.map(f=>({id:f.id,...f.data()})),n=e.filter(f=>f.status==="active"||f.status==="ending"),r=e.filter(f=>f.status==="complete"),i=e.reduce((f,m)=>f+m.ticketsSold,0),a=e.length>0?Math.round(i/e.length):0,l=[...e].sort((f,m)=>m.ticketsSold-f.ticketsSold).slice(0,5).map(f=>({id:f.id,title:f.title,ticketsSold:f.ticketsSold})),d=[...r].filter(f=>f.winner).sort((f,m)=>!f.completedAt||!m.completedAt?0:m.completedAt.toDate().getTime()-f.completedAt.toDate().getTime()).slice(0,5).map(f=>{var m,g;return{id:f.id,title:f.title,winner:((m=f.winner)==null?void 0:m.username)||"Unknown",endDate:((g=f.completedAt)==null?void 0:g.toDate())||new Date}});return{totalCompetitions:e.length,activeCompetitions:n.length,completedCompetitions:r.length,averageTicketsSold:a,mostPopularCompetitions:l,recentlyEndedCompetitions:d}},Koe=async()=>{const e=(await ze.collection("tickets").get()).docs.map(y=>({id:y.id,...y.data()})),n=new Date,r=new Date(n);r.setDate(r.getDate()-30);const i=new Date(n);i.setDate(i.getDate()-7);const a={};let l=0,d=0;const f={};e.forEach(y=>{if(y.purchasedAt){const w=y.purchasedAt.toDate(),x=w.toISOString().split("T")[0];a[x]=(a[x]||0)+1,w>=i&&l++,w>=r&&d++}f[y.userId]=(f[y.userId]||0)+1});const m=Object.keys(f).length,g=m>0?Math.round(e.length/m*100)/100:0;return{totalTicketsSold:e.length,ticketsSoldLast7Days:l,ticketsSoldLast30Days:d,ticketsByDay:a,averageTicketsPerUser:g}},Qoe=async()=>{const t=await ze.collection("users").get(),e=t.docs.length;let n=0;t.forEach(d=>{const f=d.data();n+=f.credits||0});const r=await ze.collection("tickets").get(),i=new Set(r.docs.map(d=>d.data().userId)).size,a=await ze.collection("supportTickets").get(),l=await ze.collection("supportTickets").where("status","in",["open","in_progress"]).get();return{conversionRate:e>0?Math.round(i/e*100):0,averageCreditsPerUser:e>0?Math.round(n/e*100)/100:0,totalSupportTickets:a.docs.length,openSupportTickets:l.docs.length}},Xoe=async()=>{const[t,e,n,r,i]=await Promise.all([Goe(),Woe(),Yoe(),Koe(),Qoe()]);return{revenue:t,users:e,competitions:n,tickets:r,system:i}},u9=6048e5,Zoe=864e5,TD=Symbol.for("constructDateFrom");function Xs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&TD in t?t[TD](e):t instanceof Date?new t.constructor(e):new Date(e)}function Pr(t,e){return Xs(e||t,t)}let Joe={};function wy(){return Joe}function gh(t,e){var d,f,m,g;const n=wy(),r=(e==null?void 0:e.weekStartsOn)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,i=Pr(t,e==null?void 0:e.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function ng(t,e){return gh(t,{...e,weekStartsOn:1})}function d9(t,e){const n=Pr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Xs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=ng(i),l=Xs(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const d=ng(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function SD(t){const e=Pr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function eae(t,...e){const n=Xs.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function CD(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function tae(t,e,n){const[r,i]=eae(n==null?void 0:n.in,t,e),a=CD(r),l=CD(i),d=+a-SD(a),f=+l-SD(l);return Math.round((d-f)/Zoe)}function nae(t,e){const n=d9(t,e),r=Xs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),ng(r)}function rae(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function iae(t){return!(!rae(t)&&typeof t!="number"||isNaN(+Pr(t)))}function sae(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const oae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},aae=(t,e,n)=>{let r;const i=oae[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ib(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},uae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dae={date:ib({formats:lae,defaultWidth:"full"}),time:ib({formats:cae,defaultWidth:"full"}),dateTime:ib({formats:uae,defaultWidth:"full"})},hae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fae=(t,e,n,r)=>hae[t];function td(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):l;i=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[d]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const mae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},yae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wae=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xae={ordinalNumber:wae,era:td({values:mae,defaultWidth:"wide"}),quarter:td({values:pae,defaultWidth:"wide",argumentCallback:t=>t-1}),month:td({values:gae,defaultWidth:"wide"}),day:td({values:yae,defaultWidth:"wide"}),dayPeriod:td({values:vae,defaultWidth:"wide",formattingValues:bae,defaultFormattingWidth:"wide"})};function nd(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],d=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(d)?Sae(d,y=>y.test(l)):Tae(d,y=>y.test(l));let m;m=t.valueCallback?t.valueCallback(f):f,m=n.valueCallback?n.valueCallback(m):m;const g=e.slice(l.length);return{value:m,rest:g}}}function Tae(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Sae(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Cae(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(i.length);return{value:l,rest:d}}}const Eae=/^(\d+)(th|st|nd|rd)?/i,kae=/\d+/i,Aae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_ae={any:[/^b/i,/^(a|c)/i]},Dae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jae={any:[/1/i,/2/i,/3/i,/4/i]},Iae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Lae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Oae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pae={ordinalNumber:Cae({matchPattern:Eae,parsePattern:kae,valueCallback:t=>parseInt(t,10)}),era:nd({matchPatterns:Aae,defaultMatchWidth:"wide",parsePatterns:_ae,defaultParseWidth:"any"}),quarter:nd({matchPatterns:Dae,defaultMatchWidth:"wide",parsePatterns:jae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:nd({matchPatterns:Iae,defaultMatchWidth:"wide",parsePatterns:Rae,defaultParseWidth:"any"}),day:nd({matchPatterns:Mae,defaultMatchWidth:"wide",parsePatterns:Nae,defaultParseWidth:"any"}),dayPeriod:nd({matchPatterns:Lae,defaultMatchWidth:"any",parsePatterns:Oae,defaultParseWidth:"any"})},Uae={code:"en-US",formatDistance:aae,formatLong:dae,formatRelative:fae,localize:xae,match:Pae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vae(t,e){const n=Pr(t,e==null?void 0:e.in);return tae(n,sae(n))+1}function zae(t,e){const n=Pr(t,e==null?void 0:e.in),r=+ng(n)-+nae(n);return Math.round(r/u9)+1}function h9(t,e){var g,y,w,x;const n=Pr(t,e==null?void 0:e.in),r=n.getFullYear(),i=wy(),a=(e==null?void 0:e.firstWeekContainsDate)??((y=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(w=i.locale)==null?void 0:w.options)==null?void 0:x.firstWeekContainsDate)??1,l=Xs((e==null?void 0:e.in)||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const d=gh(l,e),f=Xs((e==null?void 0:e.in)||t,0);f.setFullYear(r,0,a),f.setHours(0,0,0,0);const m=gh(f,e);return+n>=+d?r+1:+n>=+m?r:r-1}function Bae(t,e){var d,f,m,g;const n=wy(),r=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=h9(t,e),a=Xs((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),gh(a,e)}function $ae(t,e){const n=Pr(t,e==null?void 0:e.in),r=+gh(n,e)-+Bae(n,e);return Math.round(r/u9)+1}function Ze(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const _s={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ze(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ze(n+1,2)},d(t,e){return Ze(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ze(t.getHours()%12||12,e.length)},H(t,e){return Ze(t.getHours(),e.length)},m(t,e){return Ze(t.getMinutes(),e.length)},s(t,e){return Ze(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ze(i,e.length)}},Al={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ED={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return _s.y(t,e)},Y:function(t,e,n,r){const i=h9(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return Ze(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ze(a,e.length)},R:function(t,e){const n=d9(t);return Ze(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ze(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ze(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ze(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return _s.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ze(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=$ae(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ze(i,e.length)},I:function(t,e,n){const r=zae(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ze(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):_s.d(t,e)},D:function(t,e,n){const r=Vae(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ze(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ze(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ze(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ze(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Al.noon:r===0?i=Al.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Al.evening:r>=12?i=Al.afternoon:r>=4?i=Al.morning:i=Al.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return _s.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):_s.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ze(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):_s.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):_s.s(t,e)},S:function(t,e){return _s.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return AD(r);case"XXXX":case"XX":return zo(r);case"XXXXX":case"XXX":default:return zo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return AD(r);case"xxxx":case"xx":return zo(r);case"xxxxx":case"xxx":default:return zo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kD(r,":");case"OOOO":default:return"GMT"+zo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kD(r,":");case"zzzz":default:return"GMT"+zo(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ze(r,e.length)},T:function(t,e,n){return Ze(+t,e.length)}};function kD(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Ze(a,2)}function AD(t,e){return t%60===0?(t>0?"-":"+")+Ze(Math.abs(t)/60,2):zo(t,e)}function zo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ze(Math.trunc(r/60),2),a=Ze(r%60,2);return n+i+e+a}const _D=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},f9=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Fae=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return _D(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",_D(r,e)).replace("{{time}}",f9(i,e))},qae={p:f9,P:Fae},Hae=/^D+$/,Gae=/^Y+$/,Wae=["D","DD","YY","YYYY"];function Yae(t){return Hae.test(t)}function Kae(t){return Gae.test(t)}function Qae(t,e,n){const r=Xae(t,e,n);if(console.warn(r),Wae.includes(t))throw new RangeError(r)}function Xae(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Zae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ele=/^'([^]*?)'?$/,tle=/''/g,nle=/[a-zA-Z]/;function rle(t,e,n){var g,y,w,x;const r=wy(),i=r.locale??Uae,a=r.firstWeekContainsDate??((y=(g=r.locale)==null?void 0:g.options)==null?void 0:y.firstWeekContainsDate)??1,l=r.weekStartsOn??((x=(w=r.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,d=Pr(t,n==null?void 0:n.in);if(!iae(d))throw new RangeError("Invalid time value");let f=e.match(Jae).map(T=>{const C=T[0];if(C==="p"||C==="P"){const A=qae[C];return A(T,i.formatLong)}return T}).join("").match(Zae).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const C=T[0];if(C==="'")return{isToken:!1,value:ile(T)};if(ED[C])return{isToken:!0,value:T};if(C.match(nle))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(f=i.localize.preprocessor(d,f));const m={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return f.map(T=>{if(!T.isToken)return T.value;const C=T.value;(Kae(C)||Yae(C))&&Qae(C,e,String(t));const A=ED[C[0]];return A(d,C,i.localize,m)}).join("")}function ile(t){const e=t.match(ele);return e?e[1].replace(tle,"'"):t}const sle=b.div`
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(12, 1fr);
  
  @media (max-width: 1024px) {
    grid-template-columns: repeat(6, 1fr);
  }
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,z5=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`,Ro=b.div`
  padding: 1rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
  display: flex;
  align-items: center;
  justify-content: space-between;
`,Mo=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,No=b.div`
  padding: 1.5rem;
`,Ym=b(z5)`
  grid-column: span 3;
  
  @media (max-width: 1024px) {
    grid-column: span 3;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,DD=b(z5)`
  grid-column: span 6;
  
  @media (max-width: 1024px) {
    grid-column: span 6;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,ole=b(z5)`
  grid-column: span 12;
  
  @media (max-width: 1024px) {
    grid-column: span 6;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,qr=b.div`
  text-align: center;
`,Hr=b.div`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: ${t=>t.isPrimary?"hsl(var(--primary))":"hsl(var(--foreground))"};
`,Gr=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,ale=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));
`,jD=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--destructive));
`,ID=b.div`
  overflow-x: auto;
`,RD=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,MD=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,_l=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,ND=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,LD=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Dl=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,lle=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${t=>`hsl(${t.color} / 0.1)`};
  color: ${t=>`hsl(${t.color})`};
`,OD=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1rem;
`;b.div`
  height: 300px;
  margin-top: 1rem;
  position: relative;
`;const cle=b.div`
  height: 1.5rem;
  width: ${t=>t.width};
  background-color: ${t=>t.color||"hsl(var(--primary))"};
  border-radius: 4px;
  transition: width 0.5s ease;
  position: relative;
  
  &::after {
    content: '${t=>t.width}';
    position: absolute;
    right: 8px;
    top: 2px;
    color: white;
    font-size: 0.75rem;
  }
`;function ule(){const[t,e]=k.useState(null),[n,r]=k.useState(!0),[i,a]=k.useState(null);return k.useEffect(()=>{(async()=>{try{r(!0);const d=await Xoe();e(d),a(null)}catch(d){console.error("Error fetching analytics data:",d),a("Failed to load analytics data. Please try again later.")}finally{r(!1)}})()},[]),n?u.jsx(ale,{children:"Loading analytics data..."}):i?u.jsx(jD,{children:i}):t?u.jsxs(sle,{children:[u.jsxs(Ym,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Revenue"})}),u.jsx(No,{children:u.jsxs(qr,{children:[u.jsxs(Hr,{isPrimary:!0,children:[t.revenue.totalRevenue," credits"]}),u.jsx(Gr,{children:"Total Revenue"})]})})]}),u.jsxs(Ym,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Users"})}),u.jsxs(No,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.users.totalUsers}),u.jsx(Gr,{children:"Total Users"})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.875rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"New (7 days):"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.users.newUsersLast7Days})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[u.jsx("span",{children:"New (30 days):"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.users.newUsersLast30Days})]})]})]})]}),u.jsxs(Ym,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Competitions"})}),u.jsxs(No,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.competitions.totalCompetitions}),u.jsx(Gr,{children:"Total Competitions"})]}),u.jsxs(OD,{style:{marginTop:"1rem"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"hsl(var(--primary))"},children:t.competitions.activeCompetitions}),u.jsx("div",{style:{fontSize:"0.75rem",color:"hsl(var(--muted-foreground))"},children:"Active"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"hsl(var(--primary))"},children:t.competitions.completedCompetitions}),u.jsx("div",{style:{fontSize:"0.75rem",color:"hsl(var(--muted-foreground))"},children:"Completed"})]})]})]})]}),u.jsxs(Ym,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Tickets"})}),u.jsxs(No,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.tickets.totalTicketsSold}),u.jsx(Gr,{children:"Total Tickets Sold"})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.875rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"Last 7 days:"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.tickets.ticketsSoldLast7Days})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[u.jsx("span",{children:"Last 30 days:"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.tickets.ticketsSoldLast30Days})]})]})]})]}),u.jsxs(DD,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Most Popular Competitions"})}),u.jsx(No,{children:u.jsx(ID,{children:u.jsxs(RD,{children:[u.jsx(MD,{children:u.jsxs("tr",{children:[u.jsx(_l,{children:"Title"}),u.jsx(_l,{children:"Tickets Sold"}),u.jsx(_l,{children:"Fill %"})]})}),u.jsx(ND,{children:t.competitions.mostPopularCompetitions.map(l=>u.jsxs(LD,{children:[u.jsx(Dl,{children:l.title}),u.jsx(Dl,{children:l.ticketsSold}),u.jsx(Dl,{children:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:u.jsx(cle,{width:`${Math.min(100,Math.round(Math.random()*100))}%`})})})]},l.id))})]})})})]}),u.jsxs(DD,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"Recent Completed Competitions"})}),u.jsx(No,{children:u.jsx(ID,{children:u.jsxs(RD,{children:[u.jsx(MD,{children:u.jsxs("tr",{children:[u.jsx(_l,{children:"Title"}),u.jsx(_l,{children:"Winner"}),u.jsx(_l,{children:"End Date"})]})}),u.jsx(ND,{children:t.competitions.recentlyEndedCompetitions.map(l=>u.jsxs(LD,{children:[u.jsx(Dl,{children:l.title}),u.jsx(Dl,{children:u.jsx(lle,{color:"var(--primary)",children:l.winner})}),u.jsx(Dl,{children:rle(l.endDate,"MMM dd, yyyy")})]},l.id))})]})})})]}),u.jsxs(ole,{children:[u.jsx(Ro,{children:u.jsx(Mo,{children:"System Statistics"})}),u.jsx(No,{children:u.jsxs(OD,{children:[u.jsxs(qr,{children:[u.jsxs(Hr,{children:[t.system.conversionRate,"%"]}),u.jsx(Gr,{children:"Conversion Rate"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.averageCreditsPerUser}),u.jsx(Gr,{children:"Avg. Credits / User"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.tickets.averageTicketsPerUser}),u.jsx(Gr,{children:"Avg. Tickets / User"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.competitions.averageTicketsSold}),u.jsx(Gr,{children:"Avg. Tickets / Competition"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.totalSupportTickets}),u.jsx(Gr,{children:"Total Support Tickets"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.openSupportTickets}),u.jsx(Gr,{children:"Open Support Tickets"})]})]})})]})]}):u.jsx(jD,{children:"No data available"})}const PD=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 1.5rem;
`,dle=b.div`
  margin-bottom: 2rem;
`,hle=b.h1`
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: hsl(var(--foreground));
`,fle=b.p`
  color: hsl(var(--muted-foreground));
`,mle=b.div`
  display: flex;
  border-bottom: 1px solid hsl(var(--border));
  margin-bottom: 2rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
`,Lo=b.button`
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  font-weight: ${t=>t.active?"600":"500"};
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  background: transparent;
  border: none;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;

  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`;b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }

  p {
    max-width: 500px;
    margin: 0 auto;
  }
`;const ple=b.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
`,B5=b.button`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
`,gle=b(B5)`
  background-color: hsl(var(--primary));
  color: white;

  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
`,Km=b(B5)`
  background-color: hsl(var(--secondary));
  color: hsl(var(--secondary-foreground));

  &:hover {
    background-color: hsl(var(--secondary) / 0.9);
  }
`;b(B5)`
  background-color: hsl(var(--destructive));
  color: white;

  &:hover {
    background-color: hsl(var(--destructive) / 0.9);
  }
`;const yle=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }
`,vle=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }

  p {
    max-width: 500px;
    margin: 0 auto;
  }
`;function jl(){const{currentUser:t,isLoading:e,isAdmin:n}=Gn(),[r,i]=k.useState("competitions"),[a,l]=k.useState(null),d=Pt(),f=Hn(),{id:m}=ex();k.useEffect(()=>{const x=new URLSearchParams(f.search).get("tab");(x==="support"||x==="competitions"||x==="users"||x==="winners"||x==="create"||x==="seeder"||x==="processor"||x==="analytics")&&i(x),f.pathname.includes("/admin/edit-competition/")&&m?(l(m),i("create")):l(null)},[f.search,f.pathname,m]),k.useEffect(()=>{(!t||!n)&&d("/login")},[t,n,d]);const g=()=>{a?d("/admin?tab=competitions"):i("competitions")},y=()=>{d("/admin?tab=competitions")};return e?u.jsx(yle,{children:"Loading..."}):!t||!n?u.jsx(PD,{children:u.jsxs(vle,{children:[u.jsx("h2",{children:"Access Denied"}),u.jsx("p",{children:"You do not have permission to access the admin dashboard."}),u.jsx("button",{onClick:()=>d("/login"),style:{padding:"0.5rem 1rem",background:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",marginTop:"1rem"},children:"Go to Login"})]})}):u.jsxs(PD,{children:[u.jsxs(dle,{children:[u.jsx(hle,{children:"Admin Dashboard"}),u.jsx(fle,{children:"Manage competitions, users, and system settings"})]}),!a&&u.jsxs(u.Fragment,{children:[u.jsxs(ple,{children:[u.jsx(gle,{onClick:()=>i("create"),disabled:r==="create",children:"+ New Competition"}),u.jsx(Km,{onClick:()=>i("processor"),disabled:r==="processor",children:"Process Competitions"}),u.jsx(Km,{onClick:()=>i("analytics"),disabled:r==="analytics",children:"Analytics"}),u.jsx(Km,{onClick:()=>i("support"),disabled:r==="support",children:"Support Tickets"}),u.jsx(Km,{onClick:()=>i("seeder"),disabled:r==="seeder",children:"Database Seeder"})]}),u.jsxs(mle,{children:[u.jsx(Lo,{active:r==="competitions",onClick:()=>i("competitions"),children:"Competitions"}),u.jsx(Lo,{active:r==="users",onClick:()=>i("users"),children:"Users"}),u.jsx(Lo,{active:r==="winners",onClick:()=>i("winners"),children:"Past Winners"}),u.jsx(Lo,{active:r==="analytics",onClick:()=>i("analytics"),children:"Analytics"}),u.jsx(Lo,{active:r==="processor",onClick:()=>i("processor"),children:"Processor"}),u.jsx(Lo,{active:r==="support",onClick:()=>i("support"),children:"Support"}),u.jsx(Lo,{active:r==="seeder",onClick:()=>i("seeder"),children:"Seeder"})]})]}),r==="competitions"&&u.jsx(fse,{}),r==="users"&&u.jsx(Ese,{}),r==="winners"&&u.jsx(Ose,{}),r==="create"&&u.jsx($se,{competitionId:a||void 0,onCancel:g,onSuccess:y}),r==="processor"&&u.jsx(foe,{}),r==="support"&&u.jsx(Hoe,{}),r==="seeder"&&u.jsx(Kse,{}),r==="analytics"&&u.jsx(ule,{})]})}const sb=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
`,ob=b.div`
  text-align: center;
  margin-bottom: 2rem;
`,ab=b.h1`
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-fill-color: transparent;
`,lb=b.p`
  color: hsl(var(--muted-foreground));
  font-size: 1.125rem;
`,UD=b.div`
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,VD=b.div`
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid hsl(var(--border));
`,zD=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
`,BD=b.p`
  color: hsl(var(--muted-foreground));
`,Ds=b.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 1.5rem;
  
  @media (min-width: 640px) {
    flex-direction: row;
    align-items: center;
  }
`,js=b.div`
  font-weight: 500;
  margin-bottom: 0.5rem;
  flex: 0 0 200px;
  
  @media (min-width: 640px) {
    margin-bottom: 0;
  }
`,Is=b.div`
  flex: 1;
  word-break: break-all;
  font-family: monospace;
  background: hsl(var(--muted) / 0.1);
  padding: 0.75rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
`,ble=b.div`
  padding: 1rem;
  border-radius: 0.5rem;
  text-align: center;
  margin-top: 1.5rem;
  background-color: ${t=>t.status==="success"?"rgba(22, 163, 74, 0.1)":t.status==="error"?"rgba(220, 38, 38, 0.1)":"rgba(37, 99, 235, 0.1)"};
  color: ${t=>t.status==="success"?"rgb(22, 163, 74)":t.status==="error"?"rgb(220, 38, 38)":"rgb(37, 99, 235)"};
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: 500;
`,wle=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 18.3333C14.6024 18.3333 18.3334 14.6024 18.3334 10C18.3334 5.39763 14.6024 1.66666 10 1.66666C5.39765 1.66666 1.66669 5.39763 1.66669 10C1.66669 14.6024 5.39765 18.3333 10 18.3333Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7.5 10L9.16667 11.6667L12.5 8.33334",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),xle=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 18.3333C14.6024 18.3333 18.3334 14.6024 18.3334 10C18.3334 5.39763 14.6024 1.66666 10 1.66666C5.39765 1.66666 1.66669 5.39763 1.66669 10C1.66669 14.6024 5.39765 18.3333 10 18.3333Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M12.5 7.5L7.5 12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7.5 7.5L12.5 12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Tle=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"animate-spin",children:[u.jsx("path",{d:"M10 1.66666V4.99999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10 15V18.3333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M4.10834 4.10834L6.46667 6.46667",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.5333 13.5333L15.8917 15.8917",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M1.66669 10H5.00002",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M15 10H18.3333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M4.10834 15.8917L6.46667 13.5333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.5333 6.46667L15.8917 4.10834",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),cb=b(bh)`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: hsl(var(--primary));
  font-weight: 500;
  margin-bottom: 1.5rem;
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`,ub=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Sle=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 1.5rem;
`,db=b.div`
  background: hsla(var(--muted), 0.1);
  padding: 1rem;
  border-radius: 0.5rem;
  text-align: center;
`,hb=b.div`
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
  color: hsl(var(--primary));
`,fb=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,rd=b.div`
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: hsla(var(--muted), 0.05);
  border-radius: 0.5rem;
  border-left: 4px solid hsl(var(--primary));
`,Il=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
`,id=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,mb=b.pre`
  background: hsla(var(--muted), 0.1);
  padding: 1rem;
  border-radius: 0.375rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin-top: 1rem;
`;function Cle(){var y;const{id:t}=ex(),[e,n]=k.useState(null),[r,i]=k.useState(!0),[a,l]=k.useState("pending"),[d,f]=k.useState(null);if(k.useEffect(()=>{(async()=>{if(t)try{i(!0);const x=await Ki(t);if(n(x),x&&x.status==="complete"&&x.seed&&x.blockHash&&x.winningTicket!==void 0){l("loading");const T=await Zse(x.seed,x.blockHash,x.totalTickets);f({expected:x.winningTicket,calculated:T});const C=T===x.winningTicket;l(C?"success":"error")}}catch(x){console.error("Error loading competition:",x),l("error")}finally{i(!1)}})()},[t]),r)return u.jsxs(sb,{children:[u.jsxs(cb,{to:"/winners",children:[u.jsx(ub,{})," Back to Winners"]}),u.jsxs(ob,{children:[u.jsx(ab,{children:"Verifying Competition..."}),u.jsx(lb,{children:"Loading competition details"})]})]});if(!e)return u.jsxs(sb,{children:[u.jsxs(cb,{to:"/winners",children:[u.jsx(ub,{})," Back to Winners"]}),u.jsxs(ob,{children:[u.jsx(ab,{children:"Competition Not Found"}),u.jsx(lb,{children:"The competition you're looking for doesn't exist or has been removed."})]})]});const m=e.ticketsSold/e.totalTickets*100,g=e.ticketsSold>0?1/e.ticketsSold*100:0;return u.jsxs(sb,{children:[u.jsxs(cb,{to:"/winners",children:[u.jsx(ub,{})," Back to Winners"]}),u.jsxs(ob,{children:[u.jsx(ab,{children:"Draw Verification"}),u.jsx(lb,{children:"Verify the fairness of our competition draw"})]}),u.jsxs(UD,{children:[u.jsxs(VD,{children:[u.jsx(zD,{children:e.title}),u.jsx(BD,{children:e.status==="complete"?"This competition has ended and a winner has been selected.":"This competition is still active. Verification will be available after the draw."})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Competition ID:"}),u.jsx(Is,{children:e.id})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Prize:"}),u.jsx(Is,{children:e.prize})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Status:"}),u.jsx(Is,{children:e.status})]}),e.status==="complete"&&u.jsxs(u.Fragment,{children:[u.jsxs(Ds,{children:[u.jsx(js,{children:"Winner:"}),u.jsxs(Is,{children:[((y=e.winner)==null?void 0:y.username)||"Anonymous"," (Ticket #",e.winningTicket,")"]})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Seed:"}),u.jsx(Is,{children:e.seed})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Block Hash:"}),u.jsx(Is,{children:e.blockHash})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Total Tickets:"}),u.jsx(Is,{children:e.totalTickets})]}),u.jsxs(Ds,{children:[u.jsx(js,{children:"Tickets Sold:"}),u.jsx(Is,{children:e.ticketsSold})]}),u.jsxs(Sle,{children:[u.jsxs(db,{children:[u.jsxs(hb,{children:[m.toFixed(2),"%"]}),u.jsx(fb,{children:"Participation Rate"})]}),u.jsxs(db,{children:[u.jsxs(hb,{children:["1 in ",e.ticketsSold]}),u.jsx(fb,{children:"Winning Odds"})]}),u.jsxs(db,{children:[u.jsxs(hb,{children:[g.toFixed(2),"%"]}),u.jsx(fb,{children:"Win Percentage"})]})]}),a!=="pending"&&u.jsxs(ble,{status:a,children:[a==="success"&&u.jsxs(u.Fragment,{children:[u.jsx(wle,{})," Verified: The draw was conducted fairly."]}),a==="error"&&u.jsxs(u.Fragment,{children:[u.jsx(xle,{})," Verification Failed: The calculated result doesn't match."]}),a==="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(Tle,{})," Verifying..."]})]}),d&&u.jsxs("div",{style:{marginTop:"1.5rem"},children:[u.jsx(Il,{children:"Verification Result:"}),u.jsx(mb,{children:`Expected Winning Ticket: #${d.expected}
Calculated Winning Ticket: #${d.calculated}
Result: ${d.expected===d.calculated?"VALID ✓":"INVALID ✗"}`})]})]})]}),u.jsxs(UD,{children:[u.jsxs(VD,{children:[u.jsx(zD,{children:"How Verification Works"}),u.jsx(BD,{children:"Our provably fair draw system ensures complete transparency and fairness."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 1: Pre-committed Seed"}),u.jsx(id,{children:"Before the competition ends, we generate and commit to a random seed. This seed is used as one source of randomness for the draw."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 2: External Randomness"}),u.jsx(id,{children:"We use a blockchain block hash as an external source of randomness that cannot be predicted or manipulated by us or any participant."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 3: Combining Randomness"}),u.jsx(id,{children:"We combine our seed with the blockchain hash to create a deterministic but unpredictable result. This combined value is hashed using SHA-256."}),u.jsx(mb,{children:`Combined Input: ${e.seed}-${e.blockHash}
SHA-256 Hash: [Calculated in your browser]`})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 4: Selecting the Winner"}),u.jsx(id,{children:"The first 8 characters of the resulting hash are converted to a number. We take this number modulo the total number of tickets to get a value between 1 and the total number of tickets."}),u.jsx(mb,{children:`Winning Ticket = hash_number % ${e.totalTickets} + 1`})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 5: Verification"}),u.jsx(id,{children:"You can independently verify the result by running the same calculation using the provided seed and block hash. This page performs this verification automatically in your browser."})]})]})]})}const pb=b.div`
  width: 100%;
  background: hsla(var(--background), 0.5);
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  
  &:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
  }
`,gb=b.div`
  padding: 2rem 2rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,yb=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
`,vb=b.p`
  margin: 0.75rem 0 0;
  font-size: 1rem;
  color: hsl(var(--muted-foreground));
`,bb=b.div`
  padding: 2rem;
`,Rl=b.div`
  margin-bottom: 1.5rem;
`,Ml=b.label`
  display: block;
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: hsl(var(--foreground));
`,$D=b.input`
  width: 100%;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,Kw=b.select`
  width: 100%;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
  
  option {
    padding: 0.5rem;
  }
`,Ele=b(Kw)`
  margin-top: 0.5rem;
`,kle=b.textarea`
  width: 100%;
  min-height: 150px;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  resize: vertical;
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,wb=b.div`
  margin-top: 1.5rem;
  display: flex;
  justify-content: flex-end;
`,Qm=b.button`
  padding: 0.875rem 1.75rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.5rem;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    background: hsl(265, 83%, 45%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
  }
  
  &:active:not(:disabled) {
    transform: translateY(0);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`,Ale=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-top: 0.75rem;
  padding: 0.75rem;
  background-color: hsla(var(--destructive), 0.1);
  border-radius: 0.375rem;
`,_le=b.div`
  padding: 1rem;
  background-color: rgba(22, 163, 74, 0.1);
  color: rgb(22, 163, 74);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
`,FD=b.div`
  padding: 1rem;
  background-color: hsla(var(--muted), 0.2);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
  font-size: 0.875rem;
  border-left: 4px solid hsl(var(--primary));
`,Dle=b.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  
  @media (max-width: 640px) {
    grid-template-columns: 1fr;
  }
`;function jle({onSuccess:t,initialType:e="support",competitionId:n}){const{currentUser:r}=Gn(),i=Pt(),[a,l]=k.useState(e),[d,f]=k.useState(""),[m,g]=k.useState(""),[y,w]=k.useState("medium"),[x,T]=k.useState(n||""),[C,A]=k.useState(""),[_,L]=k.useState([]),[I,q]=k.useState(!1),[D,M]=k.useState(null),[$,Q]=k.useState(!1),[ie,he]=k.useState(null);k.useEffect(()=>{a==="prize_collection"&&r&&(async()=>{try{const ae=(await dy(r.uid)).filter(W=>W.isWinner);if(ae.length===0)return;const H=(await Promise.all(ae.map(W=>Ki(W.competitionId)))).filter(W=>W!==null&&W.winner!==void 0&&W.winner.userId===r.uid);if(L(H),n){T(n);const W=H.find(se=>se.id===n);W&&f(`Prize Collection: ${W.title}`)}else if(H.length>0){const W=H[0];W&&W.id&&(T(W.id),f(`Prize Collection: ${W.title}`))}}catch(ke){console.error("Error loading won competitions:",ke),M("Failed to load your winning competitions. Please try again.")}})()},[a,r,n]);const Ie=async ne=>{if(ne.preventDefault(),!r||!r.email){M("You must be logged in to create a support ticket");return}if(!d.trim()){M("Please enter a subject");return}if(!m.trim()){M("Please enter a description");return}if(a==="prize_collection"&&!x){M("Please select a competition");return}if(a==="prize_collection"&&!C.trim()){M("Please enter your in-game name");return}q(!0),M(null);try{const ke={userId:r.uid,userEmail:r.email,type:a,priority:y,subject:d,description:a==="prize_collection"?`${m}

In-game name: ${C}`:m};a==="prize_collection"&&x&&(ke.competitionId=x);const ae=await S7(ke);he(ae),Q(!0),t?t(ae):(f(""),g(""),w("medium"),A(""))}catch(ke){console.error("Error creating ticket:",ke),M("Failed to create ticket. Please try again.")}finally{q(!1)}};return r?$?u.jsxs(pb,{children:[u.jsxs(gb,{children:[u.jsx(yb,{children:"Ticket Created Successfully"}),u.jsx(vb,{children:"We'll get back to you as soon as possible."})]}),u.jsxs(bb,{children:[u.jsx(_le,{children:"Your ticket has been created successfully. You can view its status in your tickets list."}),ie&&u.jsxs(FD,{children:[u.jsx("strong",{children:"Ticket ID:"})," ",ie]}),u.jsxs(wb,{children:[u.jsx(Qm,{style:{marginRight:"1rem"},onClick:()=>Q(!1),children:"Create Another Ticket"}),ie&&u.jsx(Qm,{onClick:()=>i(`/support?ticketId=${ie}`),children:"View Ticket"})]})]})]}):u.jsxs(pb,{children:[u.jsxs(gb,{children:[u.jsx(yb,{children:a==="prize_collection"?"Prize Collection Request":"Support Ticket"}),u.jsx(vb,{children:a==="prize_collection"?"Fill out this form to arrange collection of your prize.":"Let us know how we can help you."})]}),u.jsxs(bb,{children:[a==="prize_collection"&&_.length===0&&u.jsx(FD,{children:"You don't have any prizes to collect. If you believe this is an error, please create a support ticket instead."}),u.jsxs("form",{onSubmit:Ie,children:[u.jsxs(Dle,{children:[u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"type",children:"Ticket Type"}),u.jsxs(Kw,{id:"type",value:a,onChange:ne=>l(ne.target.value),children:[u.jsx("option",{value:"support",children:"General Support"}),u.jsx("option",{value:"prize_collection",children:"Prize Collection"}),u.jsx("option",{value:"refund",children:"Refund Request"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"priority",children:"Priority"}),u.jsxs(Kw,{id:"priority",value:y,onChange:ne=>w(ne.target.value),children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"})]})]})]}),a==="prize_collection"&&u.jsxs(Rl,{children:[u.jsx(Ml,{children:"Select Prize"}),u.jsxs(Ele,{value:x,onChange:ne=>{const ke=ne.target.value;T(ke);const ae=_.find(Ae=>Ae.id===ke);ae&&f(`Prize Collection: ${ae.title}`)},disabled:_.length===0,children:[u.jsx("option",{value:"",children:"Select a competition"}),_.map(ne=>u.jsxs("option",{value:ne.id,children:[ne.title," - ",ne.prize]},ne.id))]})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"subject",children:"Subject"}),u.jsx($D,{id:"subject",type:"text",value:d,onChange:ne=>f(ne.target.value),placeholder:"Brief summary of your issue",required:!0})]}),a==="prize_collection"&&u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"inGameName",children:"Your In-Game Name"}),u.jsx($D,{id:"inGameName",type:"text",value:C,onChange:ne=>A(ne.target.value),placeholder:"Your RuneScape username",required:!0})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"description",children:"Description"}),u.jsx(kle,{id:"description",value:m,onChange:ne=>g(ne.target.value),placeholder:a==="prize_collection"?"Please let us know your preferred time for prize collection and any other relevant details.":"Please describe your issue in detail.",required:!0})]}),D&&u.jsx(Ale,{children:D}),u.jsx(wb,{children:u.jsx(Qm,{type:"submit",disabled:I||a==="prize_collection"&&_.length===0,children:I?"Submitting...":"Submit Ticket"})})]})]})]}):u.jsxs(pb,{children:[u.jsxs(gb,{children:[u.jsx(yb,{children:"Support Ticket"}),u.jsx(vb,{children:"You need to be logged in to create a support ticket."})]}),u.jsx(bb,{children:u.jsx(wb,{children:u.jsx(Qm,{onClick:()=>i("/login"),children:"Sign In"})})})]})}const xb=b.div`
  width: 100%;
  background: transparent;
  border-radius: 0.75rem;
  overflow: hidden;
`,Tb=b.h2`
  display: none; /* Hide this as we already have a title in the support section */
`,Sb=b.div`
  text-align: center;
  padding: 3rem;
  color: hsl(var(--muted-foreground));
  background: hsla(var(--muted), 0.03);
  border-radius: 0.75rem;
  border: 1px dashed hsl(var(--border));
`,Ile=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: none;
  overflow-y: visible;
  
  @media (min-width: 1024px) {
    max-height: 600px;
    overflow-y: auto;
    padding-right: 1rem;
  }
  
  /* Scrollbar styling */
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: hsla(var(--muted), 0.1);
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: hsla(var(--muted), 0.5);
    border-radius: 3px;
  }
`,Rle=b.div`
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: ${t=>t.isSelected?"hsla(var(--primary), 0.08)":"hsla(var(--background), 0.8)"};
  border: 1px solid ${t=>t.isSelected?"hsla(var(--primary), 0.3)":"hsl(var(--border))"};
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: ${t=>t.isSelected?"0 4px 12px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.05)"};
  
  &:hover {
    background: hsla(var(--primary), 0.05);
    border-color: hsla(var(--primary), 0.2);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  }
`,Mle=b.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.5rem;
`,Nle=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,qD=b.span`
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  background-color: ${t=>{switch(t.status){case"open":return"rgba(22, 163, 74, 0.2)";case"in_progress":return"rgba(245, 158, 11, 0.2)";case"resolved":return"rgba(37, 99, 235, 0.2)";case"closed":return"rgba(107, 114, 128, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.status){case"open":return"rgb(22, 163, 74)";case"in_progress":return"rgb(245, 158, 11)";case"resolved":return"rgb(37, 99, 235)";case"closed":return"rgb(107, 114, 128)";default:return"rgb(107, 114, 128)"}}};
`,HD=b.span`
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  margin-right: 0.5rem;
  background-color: ${t=>{switch(t.type){case"prize_collection":return"rgba(239, 68, 68, 0.2)";case"support":return"rgba(37, 99, 235, 0.2)";case"refund":return"rgba(245, 158, 11, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.type){case"prize_collection":return"rgb(239, 68, 68)";case"support":return"rgb(37, 99, 235)";case"refund":return"rgb(245, 158, 11)";default:return"rgb(107, 114, 128)"}}};
`,Lle=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
  margin-top: 0.5rem;
`,Ole=b.span``,Ple=b.div`
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
`,Ule=b.div`
  margin-top: 0;
  padding: 2rem;
  background: hsla(var(--background), 0.5);
  border: 1px solid hsl(var(--border));
  border-radius: 0.75rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,Vle=b.div`
  margin-bottom: 2rem;
`,sd=b.div`
  display: flex;
  margin-bottom: 0.75rem;
  font-size: 0.9rem;
`,od=b.div`
  width: 120px;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
`,ad=b.div`
  flex: 1;
`,zle=b.div`
  padding: 1.5rem;
  background: hsl(var(--background));
  border-radius: 0.5rem;
  white-space: pre-wrap;
  margin-bottom: 2rem;
  font-size: 0.9rem;
  border: 1px solid hsl(var(--border));
`,Ble=b.div`
  margin-top: 1.5rem;
`,$le=b.h3`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 3rem;
    height: 2px;
    background-color: hsl(var(--primary));
  }
`,Fle=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  flex-direction: ${t=>t.isAdmin?"row":"row-reverse"};
`,qle=b.div`
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  background-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.2)":"rgba(22, 163, 74, 0.2)"};
  color: ${t=>t.isAdmin?"rgb(37, 99, 235)":"rgb(22, 163, 74)"};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  margin-right: ${t=>t.isAdmin?"0.75rem":"0"};
  margin-left: ${t=>t.isAdmin?"0":"0.75rem"};
`,Hle=b.div`
  max-width: 80%;
  background: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"rgba(22, 163, 74, 0.1)"};
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-top-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"rgba(22, 163, 74, 0.1)"};
    border-bottom: 0;
    top: 0.75rem;
    left: ${t=>t.isAdmin?"-8px":"auto"};
    right: ${t=>t.isAdmin?"auto":"-8px"};
    border-left-color: ${t=>t.isAdmin?"transparent":"rgba(22, 163, 74, 0.1)"};
    border-right-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"transparent"};
  }
`,Gle=b.div`
  white-space: pre-wrap;
  font-size: 0.875rem;
`,Wle=b.div`
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
  margin-top: 0.375rem;
  text-align: right;
`,Yle=b.form`
  margin-top: 1.5rem;
`,Kle=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.75rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  resize: vertical;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 1px hsl(var(--primary));
  }
`,Qle=b.button`
  padding: 0.75rem 1rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    opacity: 0.9;
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Xle=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 5rem 1rem;
  color: hsl(var(--muted-foreground));
  text-align: center;
  background: hsla(var(--muted), 0.03);
  border-radius: 0.75rem;
  border: 1px dashed hsl(var(--border));
  
  svg {
    margin-bottom: 1.5rem;
    color: hsla(var(--muted), 0.5);
  }
`,GD=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Zle=b.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 2rem;
  
  @media (min-width: 1024px) {
    grid-template-columns: 2fr 3fr;
  }
`,Jle=b.div`
  @media (max-width: 1024px) {
    display: ${t=>t.hidden?"none":"block"};
  }
`,ece=b.div`
  @media (max-width: 1024px) {
    display: ${t=>t.hidden?"none":"block"};
  }
`,tce=b.button`
  display: none;
  align-items: center;
  gap: 0.5rem;
  background: none;
  border: none;
  padding: 0.75rem;
  color: hsl(var(--primary));
  cursor: pointer;
  margin-bottom: 1rem;
  font-weight: 500;
  
  @media (max-width: 1024px) {
    display: flex;
  }
`,Xm=t=>{if(!t)return"N/A";try{return new Date(t.seconds*1e3).toLocaleString()}catch{return"N/A"}},nce=({onTicketUpdate:t,initialTicketId:e})=>{const{currentUser:n}=Gn(),[r,i]=k.useState([]),[a,l]=k.useState(null),[d,f]=k.useState([]),[m,g]=k.useState(""),[y,w]=k.useState(!0),[x,T]=k.useState(!1),[C,A]=k.useState(!1),[_,L]=k.useState(!0),[I,q]=k.useState(!1),D=Hn(),M=Pt(),$=ne=>new URLSearchParams(D.search).get(ne);k.useEffect(()=>{(async()=>{if(n)try{w(!0);const ke=await t5(n.uid);i(ke);const ae=$("ticketId")||e;if(console.log("Looking for ticket ID:",ae),ae){const Ae=ke.find(H=>H.id===ae);Ae?(console.log("Found ticket:",Ae.subject),l(Ae),Ae.id&&await Q(Ae.id),window.innerWidth<=1024&&(L(!1),q(!0))):console.log("Ticket ID not found in user tickets")}}catch(ke){console.error("Error loading tickets:",ke)}finally{w(!1)}})()},[n,D.search,e]);const Q=async ne=>{try{T(!0);const ke=await Yp(ne);f(ke)}catch(ke){console.error("Error loading messages:",ke)}finally{T(!1)}},ie=ne=>{l(ne),ne.id&&(Q(ne.id),M(`/support?ticketId=${ne.id}`,{replace:!0})),window.innerWidth<=1024&&(L(!1),q(!0))},he=()=>{L(!0),q(!1),M("/support",{replace:!0})},Ie=async ne=>{if(ne.preventDefault(),!(!n||!a||!a.id||!m.trim()))try{A(!0),await n5({ticketId:a.id,userId:n.uid,isAdmin:!1,message:m}),g(""),await Q(a.id),t&&t()}catch(ke){console.error("Error sending reply:",ke)}finally{A(!1)}};return n?y?u.jsxs(xb,{children:[u.jsx(Tb,{children:"Your Support Tickets"}),u.jsx(GD,{children:"Loading your tickets..."})]}):u.jsxs(xb,{children:[u.jsx(Tb,{children:"Your Support Tickets"}),r.length===0?u.jsx(Sb,{children:"You don't have any support tickets yet."}):u.jsxs(Zle,{children:[u.jsx(Jle,{hidden:!_,children:u.jsx(Ile,{children:r.map(ne=>u.jsxs(Rle,{onClick:()=>ie(ne),isSelected:(a==null?void 0:a.id)===ne.id,children:[u.jsxs(Mle,{children:[u.jsx(Nle,{children:ne.subject}),u.jsx(qD,{status:ne.status,children:ne.status==="open"?"Open":ne.status==="in_progress"?"In Progress":ne.status==="resolved"?"Resolved":"Closed"})]}),u.jsx(Ple,{children:u.jsx(HD,{type:ne.type,children:ne.type==="prize_collection"?"Prize Collection":ne.type==="support"?"Support":ne.type==="refund"?"Refund":"Other"})}),u.jsx(Lle,{children:u.jsxs(Ole,{children:["Created: ",Xm(ne.createdAt)]})})]},ne.id))})}),u.jsx(ece,{hidden:!I&&window.innerWidth<=1024,children:a?u.jsxs(Ule,{children:[u.jsxs(tce,{onClick:he,children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to tickets"]}),u.jsxs(Vle,{children:[u.jsxs(sd,{children:[u.jsx(od,{children:"Subject:"}),u.jsx(ad,{children:a.subject})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Status:"}),u.jsx(ad,{children:u.jsx(qD,{status:a.status,children:a.status==="open"?"Open":a.status==="in_progress"?"In Progress":a.status==="resolved"?"Resolved":"Closed"})})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Type:"}),u.jsx(ad,{children:u.jsx(HD,{type:a.type,children:a.type==="prize_collection"?"Prize Collection":a.type==="support"?"Support":a.type==="refund"?"Refund":"Other"})})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Created:"}),u.jsx(ad,{children:Xm(a.createdAt)})]}),a.resolvedAt&&u.jsxs(sd,{children:[u.jsx(od,{children:"Resolved:"}),u.jsx(ad,{children:Xm(a.resolvedAt)})]})]}),u.jsxs("div",{children:[u.jsx("h3",{children:"Description"}),u.jsx(zle,{children:a.description})]}),u.jsxs(Ble,{children:[u.jsx($le,{children:"Messages"}),x&&u.jsx(GD,{children:"Loading messages..."}),!x&&d.length===0&&u.jsx(Sb,{children:"No messages yet."}),!x&&d.map(ne=>{var ke;return u.jsxs(Fle,{isAdmin:ne.isAdmin,children:[u.jsx(qle,{isAdmin:ne.isAdmin,children:ne.isAdmin?"A":((ke=n==null?void 0:n.displayName)==null?void 0:ke[0])||"U"}),u.jsxs(Hle,{isAdmin:ne.isAdmin,children:[u.jsx(Gle,{children:ne.message}),u.jsx(Wle,{children:Xm(ne.createdAt)})]})]},ne.id)}),a.status!=="resolved"&&a.status!=="closed"&&u.jsxs(Yle,{onSubmit:Ie,children:[u.jsx(Kle,{value:m,onChange:ne=>g(ne.target.value),placeholder:"Type your reply here...",required:!0}),u.jsx(Qle,{type:"submit",disabled:C||!m.trim(),children:C?"Sending...":"Send Reply"})]})]})]}):u.jsxs(Xle,{children:[u.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Select a ticket to view details"]})})]})]}):u.jsxs(xb,{children:[u.jsx(Tb,{children:"Your Support Tickets"}),u.jsx(Sb,{children:"Please sign in to view your support tickets."})]})},Cb=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,WD=b.div`
  margin-bottom: 2rem;
  text-align: center;
`,YD=b.h1`
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
`,KD=b.p`
  font-size: 1.1rem;
  color: hsl(var(--muted-foreground));
  max-width: 700px;
  margin: 0 auto;
`,rce=b.div`
  background: hsl(var(--card));
  border-radius: 1rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,ice=b.div`
  display: flex;
  border-bottom: 1px solid hsl(var(--border));
`,QD=b.button`
  padding: 1.5rem 2rem;
  background: ${t=>t.active?"hsl(var(--primary))":"transparent"};
  color: ${t=>t.active?"white":"hsl(var(--foreground))"};
  border: none;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  
  &:hover {
    background: ${t=>t.active?"hsl(var(--primary))":"hsla(var(--muted), 0.1)"};
  }
  
  &:after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: ${t=>t.active?"white":"transparent"};
    transition: all 0.2s;
  }
`,sce=b.div`
  padding: 2rem;
`,oce=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 300px;
  color: hsl(var(--muted-foreground));
  font-size: 1.1rem;
  
  p {
    margin-top: 1rem;
  }
`,ace=b.div`
  text-align: center;
  padding: 3rem 1.5rem;
  border-radius: 1rem;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  margin: 2rem auto;
  max-width: 600px;
`,lce=b.button`
  background: hsl(var(--primary));
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 500;
  margin-top: 1.5rem;
  cursor: pointer;
  transition: opacity 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
`;function cce(){const{currentUser:t,isLoading:e}=Gn(),n=Pt(),r=Hn(),[i,a]=k.useState([]),[l,d]=k.useState(!1),[f,m]=k.useState("new"),y=new URLSearchParams(r.search).get("ticketId");k.useEffect(()=>{t&&w(),y&&m("view")},[t,y]);const w=async()=>{if(t){d(!0);try{const T=await t5(t.uid);a(T)}catch(T){console.error("Error loading tickets:",T)}finally{d(!1)}}},x=T=>{w(),m("view")};return e?u.jsx(Cb,{children:u.jsxs(oce,{children:[u.jsx(ia,{size:50}),u.jsx("p",{children:"Loading..."})]})}):t?u.jsxs(Cb,{children:[u.jsxs(WD,{children:[u.jsx(YD,{children:"Support Center"}),u.jsx(KD,{children:"Get help with your RuneRaffle account, competitions, or prize collections."})]}),u.jsxs(rce,{children:[u.jsxs(ice,{children:[u.jsx(QD,{active:f==="new",onClick:()=>m("new"),children:"Create New Ticket"}),u.jsx(QD,{active:f==="view",onClick:()=>m("view"),children:"Your Tickets"})]}),u.jsxs(sce,{children:[f==="new"&&u.jsx(jle,{onSuccess:x}),f==="view"&&u.jsx(nce,{onTicketUpdate:w,initialTicketId:y||void 0})]})]})]}):u.jsxs(Cb,{children:[u.jsxs(WD,{children:[u.jsx(YD,{children:"Support Center"}),u.jsx(KD,{children:"Get help with your RuneRaffle account, competitions, or prize collections."})]}),u.jsxs(ace,{children:[u.jsx("h2",{children:"Please sign in to access support"}),u.jsx("p",{children:"You need to be logged in to create or view support tickets."}),u.jsx(lce,{onClick:()=>n("/login"),children:"Sign In"})]})]})}const uce=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,dce=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  text-align: center;
`,hce=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 2rem;
  text-align: center;
`,XD=b.div`
  background-color: hsl(var(--muted) / 0.1);
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 2rem;
  font-weight: 500;
`,On=b.section`
  margin-bottom: 2rem;
`,Pn=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: hsl(var(--primary));
`,En=b.div`
  margin-bottom: 1rem;
`,Dr=b.ul`
  padding-left: 1.5rem;
  margin-bottom: 1rem;
`,Be=b.li`
  margin-bottom: 0.5rem;
`;function fce(){const t=new Date().toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return u.jsxs(uce,{children:[u.jsx(dce,{children:"TERMS & CONDITIONS"}),u.jsxs(hce,{children:["Last Updated: ",t]}),u.jsx(En,{children:u.jsx("p",{children:'These Terms & Conditions ("Terms") govern your use of the RuneRaffle website (the "Site") and participation in any competitions, prize draws, or skill-based challenges ("Competitions") hosted on the Site. By accessing or using the Site, or by entering any Competition, you agree to these Terms. If you do not agree, do not use this Site.'})}),u.jsxs(XD,{children:[u.jsx("strong",{children:"Important:"}),' We are not affiliated with or endorsed by Jagex Ltd. ("Jagex") or RuneScape in any way. RuneScape is a trademark of Jagex. The Site is an independent, fan-operated platform.']}),u.jsxs(On,{children:[u.jsx(Pn,{children:"1. Operator Information"}),u.jsxs(En,{children:[u.jsx("p",{children:'Website Operator: RuneRaffle Ltd. ("We," "Us," "Our").'}),u.jsx("p",{children:"Registered Address: 123 Gaming Street, London, UK."}),u.jsx("p",{children:"Contact Email: support@runeraffle.com."}),u.jsx("p",{children:"Please note we are not a gambling operator. Our Competitions are designed as skill-based prize competitions with a free entry route, intended to comply with the Gambling Act 2005 (UK). If you have any queries about these Terms, please contact us at the email above."})]})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"2. Eligibility"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Age Requirement:"})," You must be at least 18 years old to enter Competitions on this Site. By registering or participating, you confirm that you meet this requirement."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Residency:"})," Competitions are primarily open to residents of the United Kingdom. Participants from outside the UK may be subject to additional verification or restrictions, at Our sole discretion."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Exclusions:"})," Employees, agents, affiliates, or family members of RuneRaffle Ltd. may be excluded from entering or winning Competitions, at Our discretion."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"3. Nature of Competitions"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Skill Component:"}),' Our Competitions require participants to answer a question, puzzle, or other skill-based task ("Skill Question") correctly in order to be entered into a prize draw. Only correct entries proceed to the final selection stage.']}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Free Entry Route:"})," A free entry method is available to all participants. You can post a written entry request to our registered address, including your full name, email address, and your answer to the Skill Question. No purchase is necessary to enter via this route. All free entries have an equal chance of winning."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Chance Element:"})," Among all correct entries, a random process (e.g. a draw or random number generator) is used to determine the winner. While random selection is used, the overall Competition is classified as skill-based due to the requirement of answering the Skill Question correctly."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"4. Tickets, Entry & Payments"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Tickets:"})," Where tickets are offered for entry (paid or free), these represent your entries into the Competition once you have correctly answered the Skill Question."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Payment (If Any):"})," Currently, we do not accept real-money payments for entries. We may offer optional paid entry methods in future. In that event, these Terms will be updated and you will be notified."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Real-World Value:"})," Prizes are in-game RuneScape items and are considered to have no real-world monetary value. They cannot be exchanged for cash or any other real currency."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"5. Conduct & Compliance"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Accurate Information:"})," You are responsible for providing true, accurate, and complete information during registration and Competition entry (including your RuneScape username if applicable)."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"One Account:"})," You must not create multiple accounts or attempt to circumvent entry limits."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Cheating or Fraud:"})," Any manipulation, hacking, or fraudulent activity to gain unfair advantage may result in disqualification, account termination, or legal action."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Legal Compliance:"})," You agree to comply with all applicable local, national, and international laws and regulations relating to your participation in the Competitions."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"6. Winners & Prizes"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Selection of Winners:"})," At the close of each Competition, all correct entries will be placed into a random draw. The winner(s) will be selected using a provably fair or random algorithm."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Announcement:"})," Winners will be notified by email and may be announced on the Site (e.g., username/first name) for transparency. You consent to limited publication of your username or first name for promotional purposes."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Prize Delivery:"})," Prizes are RuneScape in-game items. Arrangements for in-game delivery (trade) will be communicated. We are not responsible for any restrictions or conditions imposed by Jagex."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Cash Alternative:"})," Prizes cannot be exchanged for real money or other real-world items."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"7. Disclaimers"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"No Affiliation:"})," We are not endorsed by or associated with Jagex, and Jagex has no responsibility or liability for our Site or Competitions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Guarantee of Uninterrupted Service:"})," While we strive for continuous availability, the Site may be subject to downtime, maintenance, or technical issues. We are not liable for lost entries or technical malfunctions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Compliance with RuneScape Terms:"})," You are responsible for following RuneScape's Terms of Service regarding item trades. We disclaim liability if Jagex imposes restrictions or penalties on your account due to prize acceptance."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Not Gambling:"})," We have designed these Competitions as skill-based, with a free entry route, to ensure compliance with UK law. We do not accept liability if any regulatory body reclassifies our Competitions as gambling."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"8. Limitation of Liability"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Extent of Liability:"})," To the fullest extent permitted by law, We and our affiliates, officers, employees, or agents shall not be liable for any indirect, incidental, special, or consequential damages arising from your use of the Site or participation in Competitions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Prize Fulfilment:"})," We shall make all reasonable efforts to deliver in-game items but shall not be responsible for circumstances outside our control, such as game server downtime or game policy changes affecting trades."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Guarantee of Winnings:"})," Participation does not guarantee winning a prize. All entries are subject to random selection from among eligible participants."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"9. Data Protection & Privacy"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Personal Data:"})," We collect and store your personal data (name, email, RuneScape username, etc.) only as necessary to operate Competitions and maintain user accounts."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Compliance:"})," We process personal data in accordance with UK GDPR and other relevant data protection laws."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Privacy Policy:"})," Please see our Privacy Policy for full details on how we handle and protect your data."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"10. Termination & Disqualification"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Site Termination:"})," We reserve the right to discontinue or suspend the Site or any Competition at any time without prior notice if circumstances necessitate."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Disqualification:"})," We reserve the right to disqualify any participant for breaching these Terms, providing false information, or engaging in fraudulent or illegal activities."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"11. Changes to These Terms"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Updates:"}),' We may update or revise these Terms at any time. When we do, we will post the revised Terms with a new "Last Updated" date.']}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Acceptance of Revisions:"})," Continued use of the Site after updates constitutes acceptance of the revised Terms."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"12. Governing Law & Dispute Resolution"}),u.jsx(En,{children:u.jsxs(Dr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Governing Law:"})," These Terms and any dispute or claim arising out of or in connection with them (including non-contractual disputes or claims) shall be governed by and construed in accordance with the laws of England and Wales."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Jurisdiction:"})," You agree that courts of England and Wales shall have exclusive jurisdiction to settle any disputes related to these Terms, the Site, or any Competitions."]})]})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"13. Severability"}),u.jsx(En,{children:u.jsx("p",{children:"If any provision of these Terms is held to be invalid or unenforceable, such provision shall be struck out and the remaining provisions shall remain in full force and effect."})})]}),u.jsxs(On,{children:[u.jsx(Pn,{children:"14. Contact Us"}),u.jsxs(En,{children:[u.jsx("p",{children:"If you have any questions or complaints about these Terms, please contact us at:"}),u.jsx("p",{children:"Email: support@runeraffle.com"}),u.jsx("p",{children:"Address: 123 Gaming Street, London, UK"})]})]}),u.jsxs(XD,{children:[u.jsx("strong",{children:"Disclaimer:"})," This document is a general example and does not constitute legal advice. For specific guidance, consult a qualified legal professional knowledgeable in UK law."]})]})}const mce=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,pce=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  text-align: center;
`,gce=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 2rem;
  text-align: center;
`,ZD=b.div`
  background-color: hsl(var(--muted) / 0.1);
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 2rem;
  font-weight: 500;
`,Wr=b.section`
  margin-bottom: 2rem;
`,Yr=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: hsl(var(--primary));
`,jr=b.div`
  margin-bottom: 1rem;
`,Nl=b.ul`
  padding-left: 1.5rem;
  margin-bottom: 1rem;
`,st=b.li`
  margin-bottom: 0.5rem;
`;function yce(){const t=new Date().toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return u.jsxs(mce,{children:[u.jsx(pce,{children:"PRIVACY POLICY"}),u.jsxs(gce,{children:["Last Updated: ",t]}),u.jsx(jr,{children:u.jsx("p",{children:'This Privacy Policy explains how RuneRaffle ("we", "us", "our") collects, uses, and protects your personal information when you visit our website or use our services. We are committed to ensuring that your privacy is protected.'})}),u.jsxs(ZD,{children:[u.jsx("strong",{children:"Important:"}),' We are not affiliated with or endorsed by Jagex Ltd. ("Jagex") or RuneScape in any way. RuneScape is a trademark of Jagex. RuneRaffle is an independent, fan-operated platform.']}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"1. Information We Collect"}),u.jsxs(jr,{children:[u.jsx("p",{children:"We may collect the following information:"}),u.jsxs(Nl,{children:[u.jsx(st,{children:"Personal information such as name and email address"}),u.jsx(st,{children:"RuneScape username/in-game identity"}),u.jsx(st,{children:"Account information and preferences"}),u.jsx(st,{children:"IP address and basic device information"}),u.jsx(st,{children:"Website usage data through cookies and similar technologies"})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"2. Why We Collect Your Information"}),u.jsxs(jr,{children:[u.jsx("p",{children:"We collect your information for the following purposes:"}),u.jsxs(Nl,{children:[u.jsx(st,{children:"To provide and maintain our services"}),u.jsx(st,{children:"To verify your identity and manage your account"}),u.jsx(st,{children:"To process competition entries and distribute prizes"}),u.jsx(st,{children:"To communicate with you about competitions, updates, and support"}),u.jsx(st,{children:"To improve our website and user experience"}),u.jsx(st,{children:"To prevent fraud and ensure compliance with our Terms of Service"})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"3. How We Use Your Information"}),u.jsxs(jr,{children:[u.jsx("p",{children:"We use your information in the following ways:"}),u.jsxs(Nl,{children:[u.jsxs(st,{children:[u.jsx("strong",{children:"Account Management:"})," We use your email and personal details to create and maintain your account, verify your identity, and provide customer support."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Competition Administration:"})," We use your information to process your competition entries, notify you of results, and arrange delivery of prizes."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Communications:"})," We may contact you regarding prize notifications, account updates, service announcements, and customer support."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Service Improvement:"})," We analyze usage patterns to improve our website functionality and user experience."]})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"4. How We Store and Protect Your Information"}),u.jsxs(jr,{children:[u.jsx("p",{children:"We are committed to ensuring that your information is secure. We have implemented suitable physical, electronic, and managerial procedures to safeguard and secure the information we collect online."}),u.jsx("p",{children:"Your data is stored securely on Firebase servers (Google Cloud Platform) with industry-standard security measures. We retain your personal information only for as long as necessary to fulfill the purposes outlined in this Privacy Policy."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"5. Cookies and Tracking"}),u.jsxs(jr,{children:[u.jsx("p",{children:"Our website uses cookies to enhance your browsing experience. Cookies are small files stored on your device that help us provide you with a better website by enabling us to monitor which pages you find useful."}),u.jsx("p",{children:"We use cookies for:"}),u.jsxs(Nl,{children:[u.jsx(st,{children:"Authentication and maintaining your login session"}),u.jsx(st,{children:"Understanding how you use our website"}),u.jsx(st,{children:"Remembering your preferences"})]}),u.jsx("p",{children:"You can choose to accept or decline cookies. Most web browsers automatically accept cookies, but you can usually modify your browser settings to decline cookies if you prefer."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"6. Third-Party Services"}),u.jsxs(jr,{children:[u.jsx("p",{children:"We may use third-party services to help operate our business and the website or administer activities on our behalf. These third-party services include:"}),u.jsxs(Nl,{children:[u.jsx(st,{children:"Google Firebase (authentication, hosting, and database)"}),u.jsx(st,{children:"Email service providers for notifications"}),u.jsx(st,{children:"Analytics services to improve our website"})]}),u.jsx("p",{children:"These services may collect or access your information for the purposes of supporting our services. All third-party providers have their own privacy policies governing how they use this information."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"7. Your Rights"}),u.jsxs(jr,{children:[u.jsx("p",{children:"Under data protection laws, you have rights regarding your personal data including:"}),u.jsxs(Nl,{children:[u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Access:"})," You can request copies of your personal data."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Rectification:"})," You can request that we correct inaccurate personal data."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Erasure:"})," You can request that we delete your personal data in certain circumstances."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Restrict Processing:"})," You can request we restrict the processing of your personal data."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Data Portability:"})," You can request the transfer of your personal data to you or a third party."]}),u.jsxs(st,{children:[u.jsx("strong",{children:"Right to Object:"})," You can object to processing of your personal data in certain circumstances."]})]}),u.jsx("p",{children:'To exercise any of these rights, please contact us using the information in the "Contact Us" section below.'})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"8. Children's Privacy"}),u.jsx(jr,{children:u.jsx("p",{children:"Our services are not intended for individuals under 18 years of age. We do not knowingly collect personal information from children under 18. If you are a parent or guardian and believe your child has provided us with personal information, please contact us, and we will delete such information from our systems."})})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"9. Changes to This Privacy Policy"}),u.jsx(jr,{children:u.jsx("p",{children:"We may update this Privacy Policy from time to time by posting a new version on our website. You should check this page occasionally to ensure you are happy with any changes. If we make significant changes to this Privacy Policy, we will notify you through a prominent notice on our website or by email."})})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"10. Contact Us"}),u.jsxs(jr,{children:[u.jsx("p",{children:"If you have any questions about this Privacy Policy or how we handle your personal information, please contact us at:"}),u.jsx("p",{children:"Email: support@runeraffle.com"}),u.jsx("p",{children:"Address: 123 Gaming Street, London, UK"})]})]}),u.jsxs(ZD,{children:[u.jsx("strong",{children:"Disclaimer:"})," This document is a general example and does not constitute legal advice. For specific guidance, consult a qualified legal professional knowledgeable in data protection law."]})]})}const vce=b.div`
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
`,bce=b.main`
  flex: 1;
  width: 100%;
`;function wce(){return u.jsx(aO,{children:u.jsx(zY,{children:u.jsxs(vce,{children:[u.jsx(CQ,{}),u.jsx(bce,{children:u.jsxs(UL,{children:[u.jsx(_t,{path:"/",element:u.jsx(FK,{})}),u.jsx(_t,{path:"/profile",element:u.jsx(pX,{})}),u.jsx(_t,{path:"/referrals",element:u.jsx(FX,{})}),u.jsx(_t,{path:"/competitions",element:u.jsx(bZ,{})}),u.jsx(_t,{path:"/competition/:id",element:u.jsx(cJ,{})}),u.jsx(_t,{path:"/winners",element:u.jsx(PJ,{})}),u.jsx(_t,{path:"/how-it-works",element:u.jsx(zie,{})}),u.jsx(_t,{path:"/verification/:id",element:u.jsx(Cle,{})}),u.jsx(_t,{path:"/login",element:u.jsx(gD,{mode:"login"})}),u.jsx(_t,{path:"/register",element:u.jsx(gD,{mode:"register"})}),u.jsx(_t,{path:"/admin",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/admin/support",element:u.jsx(OL,{to:"/admin?tab=support",replace:!0})}),u.jsx(_t,{path:"/admin/edit-competition/:id",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/admin/competitions",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/admin/users",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/admin/winners",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/admin/analytics",element:u.jsx(jl,{})}),u.jsx(_t,{path:"/support",element:u.jsx(cce,{})}),u.jsx(_t,{path:"/terms",element:u.jsx(fce,{})}),u.jsx(_t,{path:"/privacy",element:u.jsx(yce,{})})]})}),u.jsx($Q,{})]})})})}W8.createRoot(document.getElementById("root")).render(u.jsx(ej.StrictMode,{children:u.jsx(wce,{})}));export{ze as d};
