function D8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Zj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nv={exports:{}},Lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function I8(){if(RE)return Lu;RE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:l,ref:i!==void 0?i:null,props:a}}return Lu.Fragment=e,Lu.jsx=n,Lu.jsxs=n,Lu}var ME;function R8(){return ME||(ME=1,Nv.exports=I8()),Nv.exports}var u=R8(),Lv={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function M8(){if(NE)return De;NE=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function A(R,X,ue){this.props=R,this.context=X,this.refs=C,this.updater=ue||x}A.prototype.isReactComponent={},A.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},A.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function _(){}_.prototype=A.prototype;function L(R,X,ue){this.props=R,this.context=X,this.refs=C,this.updater=ue||x}var I=L.prototype=new _;I.constructor=L,T(I,A.prototype),I.isPureReactComponent=!0;var q=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function $(R,X,ue,le,ve,Fe){return ue=Fe.ref,{$$typeof:t,type:R,key:X,ref:ue!==void 0?ue:null,props:Fe}}function Q(R,X){return $(R.type,X,void 0,void 0,void 0,R.props)}function ie(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function he(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ue){return X[ue]})}var Ie=/\/+/g;function ne(R,X){return typeof R=="object"&&R!==null&&R.key!=null?he(""+R.key):X.toString(36)}function ke(){}function ae(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ke,ke):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function Ae(R,X,ue,le,ve){var Fe=typeof R;(Fe==="undefined"||Fe==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(Fe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case t:case e:Ee=!0;break;case g:return Ee=R._init,Ae(Ee(R._payload),X,ue,le,ve)}}if(Ee)return ve=ve(R),Ee=le===""?"."+ne(R,0):le,q(ve)?(ue="",Ee!=null&&(ue=Ee.replace(Ie,"$&/")+"/"),Ae(ve,X,ue,"",function(Ki){return Ki})):ve!=null&&(ie(ve)&&(ve=Q(ve,ue+(ve.key==null||R&&R.key===ve.key?"":(""+ve.key).replace(Ie,"$&/")+"/")+Ee)),X.push(ve)),1;Ee=0;var Wn=le===""?".":le+":";if(q(R))for(var ut=0;ut<R.length;ut++)le=R[ut],Fe=Wn+ne(le,ut),Ee+=Ae(le,X,ue,Fe,ve);else if(ut=w(R),typeof ut=="function")for(R=ut.call(R),ut=0;!(le=R.next()).done;)le=le.value,Fe=Wn+ne(le,ut++),Ee+=Ae(le,X,ue,Fe,ve);else if(Fe==="object"){if(typeof R.then=="function")return Ae(ae(R),X,ue,le,ve);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function H(R,X,ue){if(R==null)return R;var le=[],ve=0;return Ae(R,le,"","",function(Fe){return X.call(ue,Fe,ve++)}),le}function W(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(ue){(R._status===0||R._status===-1)&&(R._status=1,R._result=ue)},function(ue){(R._status===0||R._status===-1)&&(R._status=2,R._result=ue)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var se=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function Se(){}return De.Children={map:H,forEach:function(R,X,ue){H(R,function(){X.apply(this,arguments)},ue)},count:function(R){var X=0;return H(R,function(){X++}),X},toArray:function(R){return H(R,function(X){return X})||[]},only:function(R){if(!ie(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},De.Component=A,De.Fragment=n,De.Profiler=i,De.PureComponent=L,De.StrictMode=r,De.Suspense=f,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,De.__COMPILER_RUNTIME={__proto__:null,c:function(R){return j.H.useMemoCache(R)}},De.cache=function(R){return function(){return R.apply(null,arguments)}},De.cloneElement=function(R,X,ue){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var le=T({},R.props),ve=R.key,Fe=void 0;if(X!=null)for(Ee in X.ref!==void 0&&(Fe=void 0),X.key!==void 0&&(ve=""+X.key),X)!M.call(X,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&X.ref===void 0||(le[Ee]=X[Ee]);var Ee=arguments.length-2;if(Ee===1)le.children=ue;else if(1<Ee){for(var Wn=Array(Ee),ut=0;ut<Ee;ut++)Wn[ut]=arguments[ut+2];le.children=Wn}return $(R.type,ve,void 0,void 0,Fe,le)},De.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},De.createElement=function(R,X,ue){var le,ve={},Fe=null;if(X!=null)for(le in X.key!==void 0&&(Fe=""+X.key),X)M.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ve[le]=X[le]);var Ee=arguments.length-2;if(Ee===1)ve.children=ue;else if(1<Ee){for(var Wn=Array(Ee),ut=0;ut<Ee;ut++)Wn[ut]=arguments[ut+2];ve.children=Wn}if(R&&R.defaultProps)for(le in Ee=R.defaultProps,Ee)ve[le]===void 0&&(ve[le]=Ee[le]);return $(R,Fe,void 0,void 0,null,ve)},De.createRef=function(){return{current:null}},De.forwardRef=function(R){return{$$typeof:d,render:R}},De.isValidElement=ie,De.lazy=function(R){return{$$typeof:g,_payload:{_status:-1,_result:R},_init:W}},De.memo=function(R,X){return{$$typeof:m,type:R,compare:X===void 0?null:X}},De.startTransition=function(R){var X=j.T,ue={};j.T=ue;try{var le=R(),ve=j.S;ve!==null&&ve(ue,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,se)}catch(Fe){se(Fe)}finally{j.T=X}},De.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},De.use=function(R){return j.H.use(R)},De.useActionState=function(R,X,ue){return j.H.useActionState(R,X,ue)},De.useCallback=function(R,X){return j.H.useCallback(R,X)},De.useContext=function(R){return j.H.useContext(R)},De.useDebugValue=function(){},De.useDeferredValue=function(R,X){return j.H.useDeferredValue(R,X)},De.useEffect=function(R,X,ue){var le=j.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(R,X)},De.useId=function(){return j.H.useId()},De.useImperativeHandle=function(R,X,ue){return j.H.useImperativeHandle(R,X,ue)},De.useInsertionEffect=function(R,X){return j.H.useInsertionEffect(R,X)},De.useLayoutEffect=function(R,X){return j.H.useLayoutEffect(R,X)},De.useMemo=function(R,X){return j.H.useMemo(R,X)},De.useOptimistic=function(R,X){return j.H.useOptimistic(R,X)},De.useReducer=function(R,X,ue){return j.H.useReducer(R,X,ue)},De.useRef=function(R){return j.H.useRef(R)},De.useState=function(R){return j.H.useState(R)},De.useSyncExternalStore=function(R,X,ue){return j.H.useSyncExternalStore(R,X,ue)},De.useTransition=function(){return j.H.useTransition()},De.version="19.1.0",De}var LE;function Ww(){return LE||(LE=1,Lv.exports=M8()),Lv.exports}var k=Ww();const Jj=Zj(k),OE=D8({__proto__:null,default:Jj},[k]);var Ov={exports:{}},Ou={},Pv={exports:{}},Uv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function N8(){return PE||(PE=1,function(t){function e(H,W){var se=H.length;H.push(W);e:for(;0<se;){var Se=se-1>>>1,R=H[Se];if(0<i(R,W))H[Se]=W,H[se]=R,se=Se;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var W=H[0],se=H.pop();if(se!==W){H[0]=se;e:for(var Se=0,R=H.length,X=R>>>1;Se<X;){var ue=2*(Se+1)-1,le=H[ue],ve=ue+1,Fe=H[ve];if(0>i(le,se))ve<R&&0>i(Fe,le)?(H[Se]=Fe,H[ve]=se,Se=ve):(H[Se]=le,H[ue]=se,Se=ue);else if(ve<R&&0>i(Fe,se))H[Se]=Fe,H[ve]=se,Se=ve;else break e}}return W}function i(H,W){var se=H.sortIndex-W.sortIndex;return se!==0?se:H.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var f=[],m=[],g=1,v=null,w=3,x=!1,T=!1,C=!1,A=!1,_=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function q(H){for(var W=n(m);W!==null;){if(W.callback===null)r(m);else if(W.startTime<=H)r(m),W.sortIndex=W.expirationTime,e(f,W);else break;W=n(m)}}function j(H){if(C=!1,q(H),!T)if(n(f)!==null)T=!0,M||(M=!0,ne());else{var W=n(m);W!==null&&Ae(j,W.startTime-H)}}var M=!1,$=-1,Q=5,ie=-1;function he(){return A?!0:!(t.unstable_now()-ie<Q)}function Ie(){if(A=!1,M){var H=t.unstable_now();ie=H;var W=!0;try{e:{T=!1,C&&(C=!1,L($),$=-1),x=!0;var se=w;try{t:{for(q(H),v=n(f);v!==null&&!(v.expirationTime>H&&he());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,w=v.priorityLevel;var R=Se(v.expirationTime<=H);if(H=t.unstable_now(),typeof R=="function"){v.callback=R,q(H),W=!0;break t}v===n(f)&&r(f),q(H)}else r(f);v=n(f)}if(v!==null)W=!0;else{var X=n(m);X!==null&&Ae(j,X.startTime-H),W=!1}}break e}finally{v=null,w=se,x=!1}W=void 0}}finally{W?ne():M=!1}}}var ne;if(typeof I=="function")ne=function(){I(Ie)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ae=ke.port2;ke.port1.onmessage=Ie,ne=function(){ae.postMessage(null)}}else ne=function(){_(Ie,0)};function Ae(H,W){$=_(function(){H(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_next=function(H){switch(w){case 1:case 2:case 3:var W=3;break;default:W=w}var se=w;w=W;try{return H()}finally{w=se}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var se=w;w=H;try{return W()}finally{w=se}},t.unstable_scheduleCallback=function(H,W,se){var Se=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Se+se:Se):se=Se,H){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=se+R,H={id:g++,callback:W,priorityLevel:H,startTime:se,expirationTime:R,sortIndex:-1},se>Se?(H.sortIndex=se,e(m,H),n(f)===null&&H===n(m)&&(C?(L($),$=-1):C=!0,Ae(j,se-Se))):(H.sortIndex=R,e(f,H),T||x||(T=!0,M||(M=!0,ne()))),H},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(H){var W=w;return function(){var se=w;w=W;try{return H.apply(this,arguments)}finally{w=se}}}}(Uv)),Uv}var UE;function L8(){return UE||(UE=1,Pv.exports=N8()),Pv.exports}var Vv={exports:{}},yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function O8(){if(VE)return yn;VE=1;var t=Ww();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,m,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:m,implementation:g}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yn.createPortal=function(f,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(f,m,null,g)},yn.flushSync=function(f){var m=l.T,g=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=m,r.p=g,r.d.f()}},yn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},yn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},yn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var g=m.as,v=d(g,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:x}):g==="script"&&r.d.X(f,{crossOrigin:v,integrity:w,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},yn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=d(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},yn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,v=d(g,m.crossOrigin);r.d.L(f,g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},yn.preloadModule=function(f,m){if(typeof f=="string")if(m){var g=d(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},yn.requestFormReset=function(f){r.d.r(f)},yn.unstable_batchedUpdates=function(f,m){return f(m)},yn.useFormState=function(f,m,g){return l.H.useFormState(f,m,g)},yn.useFormStatus=function(){return l.H.useHostTransitionStatus()},yn.version="19.1.0",yn}var BE;function P8(){if(BE)return Vv.exports;BE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vv.exports=O8(),Vv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function U8(){if(zE)return Ou;zE=1;var t=L8(),e=Ww(),n=P8();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(a(s)!==s)throw Error(r(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var c=s,h=o;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){c=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return d(p),s;if(y===h)return d(p),o;y=y.sibling}throw Error(r(188))}if(c.return!==h.return)c=p,h=y;else{for(var S=!1,E=p.child;E;){if(E===c){S=!0,c=p,h=y;break}if(E===h){S=!0,h=p,c=y;break}E=E.sibling}if(!S){for(E=y.child;E;){if(E===c){S=!0,c=y,h=p;break}if(E===h){S=!0,h=y,c=p;break}E=E.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:o}function m(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=m(s),o!==null)return o;s=s.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),he=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function ne(s){return s===null||typeof s!="object"?null:(s=Ie&&s[Ie]||s["@@iterator"],typeof s=="function"?s:null)}var ke=Symbol.for("react.client.reference");function ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ke?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case M:return"SuspenseList";case ie:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case I:return(s.displayName||"Context")+".Provider";case L:return(s._context.displayName||"Context")+".Consumer";case q:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return o=s.displayName||null,o!==null?o:ae(s.type)||"Memo";case Q:o=s._payload,s=s._init;try{return ae(s(o))}catch{}}return null}var Ae=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Se=[],R=-1;function X(s){return{current:s}}function ue(s){0>R||(s.current=Se[R],Se[R]=null,R--)}function le(s,o){R++,Se[R]=s.current,s.current=o}var ve=X(null),Fe=X(null),Ee=X(null),Wn=X(null);function ut(s,o){switch(le(Ee,o),le(Fe,s),le(ve,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?oE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=oE(o),s=aE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ue(ve),le(ve,s)}function Ki(){ue(ve),ue(Fe),ue(Ee)}function by(s){s.memoizedState!==null&&le(Wn,s);var o=ve.current,c=aE(o,s.type);o!==c&&(le(Fe,s),le(ve,c))}function Xh(s){Fe.current===s&&(ue(ve),ue(Fe)),Wn.current===s&&(ue(Wn),Du._currentValue=se)}var wy=Object.prototype.hasOwnProperty,xy=t.unstable_scheduleCallback,Ty=t.unstable_cancelCallback,lN=t.unstable_shouldYield,cN=t.unstable_requestPaint,Ur=t.unstable_now,uN=t.unstable_getCurrentPriorityLevel,B5=t.unstable_ImmediatePriority,z5=t.unstable_UserBlockingPriority,Zh=t.unstable_NormalPriority,dN=t.unstable_LowPriority,$5=t.unstable_IdlePriority,hN=t.log,fN=t.unstable_setDisableYieldValue,Uc=null,Yn=null;function Qi(s){if(typeof hN=="function"&&fN(s),Yn&&typeof Yn.setStrictMode=="function")try{Yn.setStrictMode(Uc,s)}catch{}}var Kn=Math.clz32?Math.clz32:gN,mN=Math.log,pN=Math.LN2;function gN(s){return s>>>=0,s===0?32:31-(mN(s)/pN|0)|0}var Jh=256,ef=4194304;function ao(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function tf(s,o,c){var h=s.pendingLanes;if(h===0)return 0;var p=0,y=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var E=h&134217727;return E!==0?(h=E&~y,h!==0?p=ao(h):(S&=E,S!==0?p=ao(S):c||(c=E&~s,c!==0&&(p=ao(c))))):(E=h&~y,E!==0?p=ao(E):S!==0?p=ao(S):c||(c=h&~s,c!==0&&(p=ao(c)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:p}function Vc(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function yN(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F5(){var s=Jh;return Jh<<=1,(Jh&4194048)===0&&(Jh=256),s}function q5(){var s=ef;return ef<<=1,(ef&62914560)===0&&(ef=4194304),s}function Sy(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Bc(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function vN(s,o,c,h,p,y){var S=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var E=s.entanglements,D=s.expirationTimes,U=s.hiddenUpdates;for(c=S&~c;0<c;){var G=31-Kn(c),K=1<<G;E[G]=0,D[G]=-1;var V=U[G];if(V!==null)for(U[G]=null,G=0;G<V.length;G++){var z=V[G];z!==null&&(z.lane&=-536870913)}c&=~K}h!==0&&H5(s,h,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(S&~o))}function H5(s,o,c){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-Kn(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|c&4194090}function G5(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var h=31-Kn(c),p=1<<h;p&o|s[h]&o&&(s[h]|=o),c&=~p}}function Cy(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ey(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function W5(){var s=W.p;return s!==0?s:(s=window.event,s===void 0?32:kE(s.type))}function bN(s,o){var c=W.p;try{return W.p=s,o()}finally{W.p=c}}var Xi=Math.random().toString(36).slice(2),pn="__reactFiber$"+Xi,Rn="__reactProps$"+Xi,Na="__reactContainer$"+Xi,ky="__reactEvents$"+Xi,wN="__reactListeners$"+Xi,xN="__reactHandles$"+Xi,Y5="__reactResources$"+Xi,zc="__reactMarker$"+Xi;function Ay(s){delete s[pn],delete s[Rn],delete s[ky],delete s[wN],delete s[xN]}function La(s){var o=s[pn];if(o)return o;for(var c=s.parentNode;c;){if(o=c[Na]||c[pn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=dE(s);s!==null;){if(c=s[pn])return c;s=dE(s)}return o}s=c,c=s.parentNode}return null}function Oa(s){if(s=s[pn]||s[Na]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function $c(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function Pa(s){var o=s[Y5];return o||(o=s[Y5]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ft(s){s[zc]=!0}var K5=new Set,Q5={};function lo(s,o){Ua(s,o),Ua(s+"Capture",o)}function Ua(s,o){for(Q5[s]=o,s=0;s<o.length;s++)K5.add(o[s])}var TN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),X5={},Z5={};function SN(s){return wy.call(Z5,s)?!0:wy.call(X5,s)?!1:TN.test(s)?Z5[s]=!0:(X5[s]=!0,!1)}function nf(s,o,c){if(SN(o))if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+c)}}function rf(s,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+c)}}function pi(s,o,c,h){if(h===null)s.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(o,c,""+h)}}var _y,J5;function Va(s){if(_y===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);_y=o&&o[1]||"",J5=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_y+s+J5}var jy=!1;function Dy(s,o){if(!s||jy)return"";jy=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(z){var V=z}Reflect.construct(s,[],K)}else{try{K.call()}catch(z){V=z}s.call(K.prototype)}}else{try{throw Error()}catch(z){V=z}(K=s())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(z){if(z&&V&&typeof z.stack=="string")return[z.stack,V.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),S=y[0],E=y[1];if(S&&E){var D=S.split(`
`),U=E.split(`
`);for(p=h=0;h<D.length&&!D[h].includes("DetermineComponentFrameRoot");)h++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(h===D.length||p===U.length)for(h=D.length-1,p=U.length-1;1<=h&&0<=p&&D[h]!==U[p];)p--;for(;1<=h&&0<=p;h--,p--)if(D[h]!==U[p]){if(h!==1||p!==1)do if(h--,p--,0>p||D[h]!==U[p]){var G=`
`+D[h].replace(" at new "," at ");return s.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",s.displayName)),G}while(1<=h&&0<=p);break}}}finally{jy=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Va(c):""}function CN(s){switch(s.tag){case 26:case 27:case 5:return Va(s.type);case 16:return Va("Lazy");case 13:return Va("Suspense");case 19:return Va("SuspenseList");case 0:case 15:return Dy(s.type,!1);case 11:return Dy(s.type.render,!1);case 1:return Dy(s.type,!0);case 31:return Va("Activity");default:return""}}function eT(s){try{var o="";do o+=CN(s),s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function lr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tT(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function EN(s){var o=tT(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function sf(s){s._valueTracker||(s._valueTracker=EN(s))}function nT(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return s&&(h=tT(s)?s.checked?"true":"false":s.value),s=h,s!==c?(o.setValue(s),!0):!1}function of(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var kN=/[\n"\\]/g;function cr(s){return s.replace(kN,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Iy(s,o,c,h,p,y,S,E){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),o!=null?S==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+lr(o)):s.value!==""+lr(o)&&(s.value=""+lr(o)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),o!=null?Ry(s,S,lr(o)):c!=null?Ry(s,S,lr(c)):h!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.name=""+lr(E):s.removeAttribute("name")}function rT(s,o,c,h,p,y,S,E){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;c=c!=null?""+lr(c):"",o=o!=null?""+lr(o):c,E||o===s.value||(s.value=o),s.defaultValue=o}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=E?s.checked:!!h,s.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Ry(s,o,c){o==="number"&&of(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ba(s,o,c,h){if(s=s.options,o){o={};for(var p=0;p<c.length;p++)o["$"+c[p]]=!0;for(c=0;c<s.length;c++)p=o.hasOwnProperty("$"+s[c].value),s[c].selected!==p&&(s[c].selected=p),p&&h&&(s[c].defaultSelected=!0)}else{for(c=""+lr(c),o=null,p=0;p<s.length;p++){if(s[p].value===c){s[p].selected=!0,h&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function iT(s,o,c){if(o!=null&&(o=""+lr(o),o!==s.value&&(s.value=o),c==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=c!=null?""+lr(c):""}function sT(s,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(Ae(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=lr(o),s.defaultValue=c,h=s.textContent,h===c&&h!==""&&h!==null&&(s.value=h)}function za(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var AN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oT(s,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,c):typeof c!="number"||c===0||AN.has(o)?o==="float"?s.cssFloat=c:s[o]=(""+c).trim():s[o]=c+"px"}function aT(s,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var p in o)h=o[p],o.hasOwnProperty(p)&&c[p]!==h&&oT(s,p,h)}else for(var y in o)o.hasOwnProperty(y)&&oT(s,y,o[y])}function My(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _N=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function af(s){return jN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ny=null;function Ly(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $a=null,Fa=null;function lT(s){var o=Oa(s);if(o&&(s=o.stateNode)){var c=s[Rn]||null;e:switch(s=o.stateNode,o.type){case"input":if(Iy(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==s&&h.form===s.form){var p=h[Rn]||null;if(!p)throw Error(r(90));Iy(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===s.form&&nT(h)}break e;case"textarea":iT(s,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Ba(s,!!c.multiple,o,!1)}}}var Oy=!1;function cT(s,o,c){if(Oy)return s(o,c);Oy=!0;try{var h=s(o);return h}finally{if(Oy=!1,($a!==null||Fa!==null)&&(Gf(),$a&&(o=$a,s=Fa,Fa=$a=null,lT(o),s)))for(o=0;o<s.length;o++)lT(s[o])}}function Fc(s,o){var c=s.stateNode;if(c===null)return null;var h=c[Rn]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Py=!1;if(gi)try{var qc={};Object.defineProperty(qc,"passive",{get:function(){Py=!0}}),window.addEventListener("test",qc,qc),window.removeEventListener("test",qc,qc)}catch{Py=!1}var Zi=null,Uy=null,lf=null;function uT(){if(lf)return lf;var s,o=Uy,c=o.length,h,p="value"in Zi?Zi.value:Zi.textContent,y=p.length;for(s=0;s<c&&o[s]===p[s];s++);var S=c-s;for(h=1;h<=S&&o[c-h]===p[y-h];h++);return lf=p.slice(s,1<h?1-h:void 0)}function cf(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function uf(){return!0}function dT(){return!1}function Mn(s){function o(c,h,p,y,S){this._reactName=c,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var E in s)s.hasOwnProperty(E)&&(c=s[E],this[E]=c?c(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?uf:dT,this.isPropagationStopped=dT,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=uf)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=uf)},persist:function(){},isPersistent:uf}),o}var co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},df=Mn(co),Hc=g({},co,{view:0,detail:0}),DN=Mn(Hc),Vy,By,Gc,hf=g({},Hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$y,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gc&&(Gc&&s.type==="mousemove"?(Vy=s.screenX-Gc.screenX,By=s.screenY-Gc.screenY):By=Vy=0,Gc=s),Vy)},movementY:function(s){return"movementY"in s?s.movementY:By}}),hT=Mn(hf),IN=g({},hf,{dataTransfer:0}),RN=Mn(IN),MN=g({},Hc,{relatedTarget:0}),zy=Mn(MN),NN=g({},co,{animationName:0,elapsedTime:0,pseudoElement:0}),LN=Mn(NN),ON=g({},co,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),PN=Mn(ON),UN=g({},co,{data:0}),fT=Mn(UN),VN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $N(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=zN[s])?!!o[s]:!1}function $y(){return $N}var FN=g({},Hc,{key:function(s){if(s.key){var o=VN[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=cf(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?BN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$y,charCode:function(s){return s.type==="keypress"?cf(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?cf(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qN=Mn(FN),HN=g({},hf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mT=Mn(HN),GN=g({},Hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$y}),WN=Mn(GN),YN=g({},co,{propertyName:0,elapsedTime:0,pseudoElement:0}),KN=Mn(YN),QN=g({},hf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),XN=Mn(QN),ZN=g({},co,{newState:0,oldState:0}),JN=Mn(ZN),e9=[9,13,27,32],Fy=gi&&"CompositionEvent"in window,Wc=null;gi&&"documentMode"in document&&(Wc=document.documentMode);var t9=gi&&"TextEvent"in window&&!Wc,pT=gi&&(!Fy||Wc&&8<Wc&&11>=Wc),gT=" ",yT=!1;function vT(s,o){switch(s){case"keyup":return e9.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qa=!1;function n9(s,o){switch(s){case"compositionend":return bT(o);case"keypress":return o.which!==32?null:(yT=!0,gT);case"textInput":return s=o.data,s===gT&&yT?null:s;default:return null}}function r9(s,o){if(qa)return s==="compositionend"||!Fy&&vT(s,o)?(s=uT(),lf=Uy=Zi=null,qa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pT&&o.locale!=="ko"?null:o.data;default:return null}}var i9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wT(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!i9[s.type]:o==="textarea"}function xT(s,o,c,h){$a?Fa?Fa.push(h):Fa=[h]:$a=h,o=Zf(o,"onChange"),0<o.length&&(c=new df("onChange","change",null,c,h),s.push({event:c,listeners:o}))}var Yc=null,Kc=null;function s9(s){tE(s,0)}function ff(s){var o=$c(s);if(nT(o))return s}function TT(s,o){if(s==="change")return o}var ST=!1;if(gi){var qy;if(gi){var Hy="oninput"in document;if(!Hy){var CT=document.createElement("div");CT.setAttribute("oninput","return;"),Hy=typeof CT.oninput=="function"}qy=Hy}else qy=!1;ST=qy&&(!document.documentMode||9<document.documentMode)}function ET(){Yc&&(Yc.detachEvent("onpropertychange",kT),Kc=Yc=null)}function kT(s){if(s.propertyName==="value"&&ff(Kc)){var o=[];xT(o,Kc,s,Ly(s)),cT(s9,o)}}function o9(s,o,c){s==="focusin"?(ET(),Yc=o,Kc=c,Yc.attachEvent("onpropertychange",kT)):s==="focusout"&&ET()}function a9(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ff(Kc)}function l9(s,o){if(s==="click")return ff(o)}function c9(s,o){if(s==="input"||s==="change")return ff(o)}function u9(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Qn=typeof Object.is=="function"?Object.is:u9;function Qc(s,o){if(Qn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var p=c[h];if(!wy.call(o,p)||!Qn(s[p],o[p]))return!1}return!0}function AT(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function _T(s,o){var c=AT(s);s=0;for(var h;c;){if(c.nodeType===3){if(h=s+c.textContent.length,s<=o&&h>=o)return{node:c,offset:o-s};s=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=AT(c)}}function jT(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?jT(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function DT(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=of(s.document);o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=of(s.document)}return o}function Gy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var d9=gi&&"documentMode"in document&&11>=document.documentMode,Ha=null,Wy=null,Xc=null,Yy=!1;function IT(s,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Yy||Ha==null||Ha!==of(h)||(h=Ha,"selectionStart"in h&&Gy(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Xc&&Qc(Xc,h)||(Xc=h,h=Zf(Wy,"onSelect"),0<h.length&&(o=new df("onSelect","select",null,o,c),s.push({event:o,listeners:h}),o.target=Ha)))}function uo(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Ga={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Ky={},RT={};gi&&(RT=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function ho(s){if(Ky[s])return Ky[s];if(!Ga[s])return s;var o=Ga[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in RT)return Ky[s]=o[c];return s}var MT=ho("animationend"),NT=ho("animationiteration"),LT=ho("animationstart"),h9=ho("transitionrun"),f9=ho("transitionstart"),m9=ho("transitioncancel"),OT=ho("transitionend"),PT=new Map,Qy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qy.push("scrollEnd");function kr(s,o){PT.set(s,o),lo(o,[s])}var UT=new WeakMap;function ur(s,o){if(typeof s=="object"&&s!==null){var c=UT.get(s);return c!==void 0?c:(o={value:s,source:o,stack:eT(o)},UT.set(s,o),o)}return{value:s,source:o,stack:eT(o)}}var dr=[],Wa=0,Xy=0;function mf(){for(var s=Wa,o=Xy=Wa=0;o<s;){var c=dr[o];dr[o++]=null;var h=dr[o];dr[o++]=null;var p=dr[o];dr[o++]=null;var y=dr[o];if(dr[o++]=null,h!==null&&p!==null){var S=h.pending;S===null?p.next=p:(p.next=S.next,S.next=p),h.pending=p}y!==0&&VT(c,p,y)}}function pf(s,o,c,h){dr[Wa++]=s,dr[Wa++]=o,dr[Wa++]=c,dr[Wa++]=h,Xy|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Zy(s,o,c,h){return pf(s,o,c,h),gf(s)}function Ya(s,o){return pf(s,null,null,o),gf(s)}function VT(s,o,c){s.lanes|=c;var h=s.alternate;h!==null&&(h.lanes|=c);for(var p=!1,y=s.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&o!==null&&(p=31-Kn(c),s=y.hiddenUpdates,h=s[p],h===null?s[p]=[o]:h.push(o),o.lane=c|536870912),y):null}function gf(s){if(50<Tu)throw Tu=0,iv=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ka={};function p9(s,o,c,h){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(s,o,c,h){return new p9(s,o,c,h)}function Jy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yi(s,o){var c=s.alternate;return c===null?(c=Xn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function BT(s,o){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,o=c.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function yf(s,o,c,h,p,y){var S=0;if(h=s,typeof s=="function")Jy(s)&&(S=1);else if(typeof s=="string")S=y8(s,c,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case ie:return s=Xn(31,c,o,p),s.elementType=ie,s.lanes=y,s;case T:return fo(c.children,p,y,o);case C:S=8,p|=24;break;case A:return s=Xn(12,c,o,p|2),s.elementType=A,s.lanes=y,s;case j:return s=Xn(13,c,o,p),s.elementType=j,s.lanes=y,s;case M:return s=Xn(19,c,o,p),s.elementType=M,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case _:case I:S=10;break e;case L:S=9;break e;case q:S=11;break e;case $:S=14;break e;case Q:S=16,h=null;break e}S=29,c=Error(r(130,s===null?"null":typeof s,"")),h=null}return o=Xn(S,c,o,p),o.elementType=s,o.type=h,o.lanes=y,o}function fo(s,o,c,h){return s=Xn(7,s,h,o),s.lanes=c,s}function e0(s,o,c){return s=Xn(6,s,null,o),s.lanes=c,s}function t0(s,o,c){return o=Xn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Qa=[],Xa=0,vf=null,bf=0,hr=[],fr=0,mo=null,vi=1,bi="";function po(s,o){Qa[Xa++]=bf,Qa[Xa++]=vf,vf=s,bf=o}function zT(s,o,c){hr[fr++]=vi,hr[fr++]=bi,hr[fr++]=mo,mo=s;var h=vi;s=bi;var p=32-Kn(h)-1;h&=~(1<<p),c+=1;var y=32-Kn(o)+p;if(30<y){var S=p-p%5;y=(h&(1<<S)-1).toString(32),h>>=S,p-=S,vi=1<<32-Kn(o)+p|c<<p|h,bi=y+s}else vi=1<<y|c<<p|h,bi=s}function n0(s){s.return!==null&&(po(s,1),zT(s,1,0))}function r0(s){for(;s===vf;)vf=Qa[--Xa],Qa[Xa]=null,bf=Qa[--Xa],Qa[Xa]=null;for(;s===mo;)mo=hr[--fr],hr[fr]=null,bi=hr[--fr],hr[fr]=null,vi=hr[--fr],hr[fr]=null}var Cn=null,bt=null,He=!1,go=null,Vr=!1,i0=Error(r(519));function yo(s){var o=Error(r(418,""));throw eu(ur(o,s)),i0}function $T(s){var o=s.stateNode,c=s.type,h=s.memoizedProps;switch(o[pn]=s,o[Rn]=h,c){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(c=0;c<Cu.length;c++)Le(Cu[c],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),rT(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),sf(o);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),sT(o,h.value,h.defaultValue,h.children),sf(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||sE(o.textContent,c)?(h.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),h.onScroll!=null&&Le("scroll",o),h.onScrollEnd!=null&&Le("scrollend",o),h.onClick!=null&&(o.onclick=Jf),o=!0):o=!1,o||yo(s)}function FT(s){for(Cn=s.return;Cn;)switch(Cn.tag){case 5:case 13:Vr=!1;return;case 27:case 3:Vr=!0;return;default:Cn=Cn.return}}function Zc(s){if(s!==Cn)return!1;if(!He)return FT(s),He=!0,!1;var o=s.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||wv(s.type,s.memoizedProps)),c=!c),c&&bt&&yo(s),FT(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(o===0){bt=_r(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;s=s.nextSibling}bt=null}}else o===27?(o=bt,ms(s.type)?(s=Cv,Cv=null,bt=s):bt=o):bt=Cn?_r(s.stateNode.nextSibling):null;return!0}function Jc(){bt=Cn=null,He=!1}function qT(){var s=go;return s!==null&&(On===null?On=s:On.push.apply(On,s),go=null),s}function eu(s){go===null?go=[s]:go.push(s)}var s0=X(null),vo=null,wi=null;function Ji(s,o,c){le(s0,o._currentValue),o._currentValue=c}function xi(s){s._currentValue=s0.current,ue(s0)}function o0(s,o,c){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===c)break;s=s.return}}function a0(s,o,c,h){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var S=p.child;y=y.firstContext;e:for(;y!==null;){var E=y;y=p;for(var D=0;D<o.length;D++)if(E.context===o[D]){y.lanes|=c,E=y.alternate,E!==null&&(E.lanes|=c),o0(y.return,c,s),h||(S=null);break e}y=E.next}}else if(p.tag===18){if(S=p.return,S===null)throw Error(r(341));S.lanes|=c,y=S.alternate,y!==null&&(y.lanes|=c),o0(S,c,s),S=null}else S=p.child;if(S!==null)S.return=p;else for(S=p;S!==null;){if(S===s){S=null;break}if(p=S.sibling,p!==null){p.return=S.return,S=p;break}S=S.return}p=S}}function tu(s,o,c,h){s=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var S=p.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var E=p.type;Qn(p.pendingProps.value,S.value)||(s!==null?s.push(E):s=[E])}}else if(p===Wn.current){if(S=p.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Du):s=[Du])}p=p.return}s!==null&&a0(o,s,c,h),o.flags|=262144}function wf(s){for(s=s.firstContext;s!==null;){if(!Qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function bo(s){vo=s,wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return HT(vo,s)}function xf(s,o){return vo===null&&bo(s),HT(s,o)}function HT(s,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},wi===null){if(s===null)throw Error(r(308));wi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else wi=wi.next=o;return c}var g9=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(c,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(c){return c()})}},y9=t.unstable_scheduleCallback,v9=t.unstable_NormalPriority,Ut={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function l0(){return{controller:new g9,data:new Map,refCount:0}}function nu(s){s.refCount--,s.refCount===0&&y9(v9,function(){s.controller.abort()})}var ru=null,c0=0,Za=0,Ja=null;function b9(s,o){if(ru===null){var c=ru=[];c0=0,Za=dv(),Ja={status:"pending",value:void 0,then:function(h){c.push(h)}}}return c0++,o.then(GT,GT),o}function GT(){if(--c0===0&&ru!==null){Ja!==null&&(Ja.status="fulfilled");var s=ru;ru=null,Za=0,Ja=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function w9(s,o){var c=[],h={status:"pending",value:null,reason:null,then:function(p){c.push(p)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var p=0;p<c.length;p++)(0,c[p])(o)},function(p){for(h.status="rejected",h.reason=p,p=0;p<c.length;p++)(0,c[p])(void 0)}),h}var WT=H.S;H.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&b9(s,o),WT!==null&&WT(s,o)};var wo=X(null);function u0(){var s=wo.current;return s!==null?s:ot.pooledCache}function Tf(s,o){o===null?le(wo,wo.current):le(wo,o.pool)}function YT(){var s=u0();return s===null?null:{parent:Ut._currentValue,pool:s}}var iu=Error(r(460)),KT=Error(r(474)),Sf=Error(r(542)),d0={then:function(){}};function QT(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Cf(){}function XT(s,o,c){switch(c=s[c],c===void 0?s.push(o):c!==o&&(o.then(Cf,Cf),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,JT(s),s;default:if(typeof o.status=="string")o.then(Cf,Cf);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=h}},function(h){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,JT(s),s}throw su=o,iu}}var su=null;function ZT(){if(su===null)throw Error(r(459));var s=su;return su=null,s}function JT(s){if(s===iu||s===Sf)throw Error(r(483))}var es=!1;function h0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ts(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ns(s,o,c){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Ke&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,o=gf(s),VT(s,null,c),o}return pf(s,h,o,c),gf(s)}function ou(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,G5(s,c)}}function m0(s,o){var c=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?p=y=S:y=y.next=S,c=c.next}while(c!==null);y===null?p=y=o:y=y.next=o}else p=y=o;c={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}var p0=!1;function au(){if(p0){var s=Ja;if(s!==null)throw s}}function lu(s,o,c,h){p0=!1;var p=s.updateQueue;es=!1;var y=p.firstBaseUpdate,S=p.lastBaseUpdate,E=p.shared.pending;if(E!==null){p.shared.pending=null;var D=E,U=D.next;D.next=null,S===null?y=U:S.next=U,S=D;var G=s.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==S&&(E===null?G.firstBaseUpdate=U:E.next=U,G.lastBaseUpdate=D))}if(y!==null){var K=p.baseState;S=0,G=U=D=null,E=y;do{var V=E.lane&-536870913,z=V!==E.lane;if(z?(Pe&V)===V:(h&V)===V){V!==0&&V===Za&&(p0=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Te=s,be=E;V=o;var tt=c;switch(be.tag){case 1:if(Te=be.payload,typeof Te=="function"){K=Te.call(tt,K,V);break e}K=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=be.payload,V=typeof Te=="function"?Te.call(tt,K,V):Te,V==null)break e;K=g({},K,V);break e;case 2:es=!0}}V=E.callback,V!==null&&(s.flags|=64,z&&(s.flags|=8192),z=p.callbacks,z===null?p.callbacks=[V]:z.push(V))}else z={lane:V,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(U=G=z,D=K):G=G.next=z,S|=V;if(E=E.next,E===null){if(E=p.shared.pending,E===null)break;z=E,E=z.next,z.next=null,p.lastBaseUpdate=z,p.shared.pending=null}}while(!0);G===null&&(D=K),p.baseState=D,p.firstBaseUpdate=U,p.lastBaseUpdate=G,y===null&&(p.shared.lanes=0),us|=S,s.lanes=S,s.memoizedState=K}}function eS(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function tS(s,o){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)eS(c[s],o)}var el=X(null),Ef=X(0);function nS(s,o){s=_i,le(Ef,s),le(el,o),_i=s|o.baseLanes}function g0(){le(Ef,_i),le(el,el.current)}function y0(){_i=Ef.current,ue(el),ue(Ef)}var rs=0,Re=null,Je=null,Mt=null,kf=!1,tl=!1,xo=!1,Af=0,cu=0,nl=null,x9=0;function kt(){throw Error(r(321))}function v0(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Qn(s[c],o[c]))return!1;return!0}function b0(s,o,c,h,p,y){return rs=y,Re=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,H.H=s===null||s.memoizedState===null?VS:BS,xo=!1,y=c(h,p),xo=!1,tl&&(y=iS(o,c,h,p)),rS(s),y}function rS(s){H.H=Mf;var o=Je!==null&&Je.next!==null;if(rs=0,Mt=Je=Re=null,kf=!1,cu=0,nl=null,o)throw Error(r(300));s===null||qt||(s=s.dependencies,s!==null&&wf(s)&&(qt=!0))}function iS(s,o,c,h){Re=s;var p=0;do{if(tl&&(nl=null),cu=0,tl=!1,25<=p)throw Error(r(301));if(p+=1,Mt=Je=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=_9,y=o(c,h)}while(tl);return y}function T9(){var s=H.H,o=s.useState()[0];return o=typeof o.then=="function"?uu(o):o,s=s.useState()[0],(Je!==null?Je.memoizedState:null)!==s&&(Re.flags|=1024),o}function w0(){var s=Af!==0;return Af=0,s}function x0(s,o,c){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~c}function T0(s){if(kf){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}kf=!1}rs=0,Mt=Je=Re=null,tl=!1,cu=Af=0,nl=null}function Nn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Re.memoizedState=Mt=s:Mt=Mt.next=s,Mt}function Nt(){if(Je===null){var s=Re.alternate;s=s!==null?s.memoizedState:null}else s=Je.next;var o=Mt===null?Re.memoizedState:Mt.next;if(o!==null)Mt=o,Je=s;else{if(s===null)throw Re.alternate===null?Error(r(467)):Error(r(310));Je=s,s={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Mt===null?Re.memoizedState=Mt=s:Mt=Mt.next=s}return Mt}function S0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(s){var o=cu;return cu+=1,nl===null&&(nl=[]),s=XT(nl,s,o),o=Re,(Mt===null?o.memoizedState:Mt.next)===null&&(o=o.alternate,H.H=o===null||o.memoizedState===null?VS:BS),s}function _f(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return uu(s);if(s.$$typeof===I)return gn(s)}throw Error(r(438,String(s)))}function C0(s){var o=null,c=Re.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Re.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=S0(),Re.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(s),h=0;h<s;h++)c[h]=he;return o.index++,c}function Ti(s,o){return typeof o=="function"?o(s):o}function jf(s){var o=Nt();return E0(o,Je,s)}function E0(s,o,c){var h=s.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var p=s.baseQueue,y=h.pending;if(y!==null){if(p!==null){var S=p.next;p.next=y.next,y.next=S}o.baseQueue=p=y,h.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{o=p.next;var E=S=null,D=null,U=o,G=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Pe&K)===K:(rs&K)===K){var V=U.revertLane;if(V===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Za&&(G=!0);else if((rs&V)===V){U=U.next,V===Za&&(G=!0);continue}else K={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(E=D=K,S=y):D=D.next=K,Re.lanes|=V,us|=V;K=U.action,xo&&c(y,K),y=U.hasEagerState?U.eagerState:c(y,K)}else V={lane:K,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(E=D=V,S=y):D=D.next=V,Re.lanes|=K,us|=K;U=U.next}while(U!==null&&U!==o);if(D===null?S=y:D.next=E,!Qn(y,s.memoizedState)&&(qt=!0,G&&(c=Ja,c!==null)))throw c;s.memoizedState=y,s.baseState=S,s.baseQueue=D,h.lastRenderedState=y}return p===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function k0(s){var o=Nt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var h=c.dispatch,p=c.pending,y=o.memoizedState;if(p!==null){c.pending=null;var S=p=p.next;do y=s(y,S.action),S=S.next;while(S!==p);Qn(y,o.memoizedState)||(qt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,h]}function sS(s,o,c){var h=Re,p=Nt(),y=He;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=o();var S=!Qn((Je||p).memoizedState,c);S&&(p.memoizedState=c,qt=!0),p=p.queue;var E=lS.bind(null,h,p,s);if(du(2048,8,E,[s]),p.getSnapshot!==o||S||Mt!==null&&Mt.memoizedState.tag&1){if(h.flags|=2048,rl(9,Df(),aS.bind(null,h,p,c,o),null),ot===null)throw Error(r(349));y||(rs&124)!==0||oS(h,o,c)}return c}function oS(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=Re.updateQueue,o===null?(o=S0(),Re.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function aS(s,o,c,h){o.value=c,o.getSnapshot=h,cS(o)&&uS(s)}function lS(s,o,c){return c(function(){cS(o)&&uS(s)})}function cS(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Qn(s,c)}catch{return!0}}function uS(s){var o=Ya(s,2);o!==null&&nr(o,s,2)}function A0(s){var o=Nn();if(typeof s=="function"){var c=s;if(s=c(),xo){Qi(!0);try{c()}finally{Qi(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:s},o}function dS(s,o,c,h){return s.baseState=c,E0(s,Je,typeof h=="function"?h:Ti)}function S9(s,o,c,h,p){if(Rf(s))throw Error(r(485));if(s=o.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};H.T!==null?c(!0):y.isTransition=!1,h(y),c=o.pending,c===null?(y.next=o.pending=y,hS(o,y)):(y.next=c.next,o.pending=c.next=y)}}function hS(s,o){var c=o.action,h=o.payload,p=s.state;if(o.isTransition){var y=H.T,S={};H.T=S;try{var E=c(p,h),D=H.S;D!==null&&D(S,E),fS(s,o,E)}catch(U){_0(s,o,U)}finally{H.T=y}}else try{y=c(p,h),fS(s,o,y)}catch(U){_0(s,o,U)}}function fS(s,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){mS(s,o,h)},function(h){return _0(s,o,h)}):mS(s,o,c)}function mS(s,o,c){o.status="fulfilled",o.value=c,pS(o),s.state=c,o=s.pending,o!==null&&(c=o.next,c===o?s.pending=null:(c=c.next,o.next=c,hS(s,c)))}function _0(s,o,c){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,pS(o),o=o.next;while(o!==h)}s.action=null}function pS(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function gS(s,o){return o}function yS(s,o){if(He){var c=ot.formState;if(c!==null){e:{var h=Re;if(He){if(bt){t:{for(var p=bt,y=Vr;p.nodeType!==8;){if(!y){p=null;break t}if(p=_r(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){bt=_r(p.nextSibling),h=p.data==="F!";break e}}yo(h)}h=!1}h&&(o=c[0])}}return c=Nn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gS,lastRenderedState:o},c.queue=h,c=OS.bind(null,Re,h),h.dispatch=c,h=A0(!1),y=M0.bind(null,Re,!1,h.queue),h=Nn(),p={state:o,dispatch:null,action:s,pending:null},h.queue=p,c=S9.bind(null,Re,p,y,c),p.dispatch=c,h.memoizedState=s,[o,c,!1]}function vS(s){var o=Nt();return bS(o,Je,s)}function bS(s,o,c){if(o=E0(s,o,gS)[0],s=jf(Ti)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=uu(o)}catch(S){throw S===iu?Sf:S}else h=o;o=Nt();var p=o.queue,y=p.dispatch;return c!==o.memoizedState&&(Re.flags|=2048,rl(9,Df(),C9.bind(null,p,c),null)),[h,y,s]}function C9(s,o){s.action=o}function wS(s){var o=Nt(),c=Je;if(c!==null)return bS(o,c,s);Nt(),o=o.memoizedState,c=Nt();var h=c.queue.dispatch;return c.memoizedState=s,[o,h,!1]}function rl(s,o,c,h){return s={tag:s,create:c,deps:h,inst:o,next:null},o=Re.updateQueue,o===null&&(o=S0(),Re.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=s.next=s:(h=c.next,c.next=s,s.next=h,o.lastEffect=s),s}function Df(){return{destroy:void 0,resource:void 0}}function xS(){return Nt().memoizedState}function If(s,o,c,h){var p=Nn();h=h===void 0?null:h,Re.flags|=s,p.memoizedState=rl(1|o,Df(),c,h)}function du(s,o,c,h){var p=Nt();h=h===void 0?null:h;var y=p.memoizedState.inst;Je!==null&&h!==null&&v0(h,Je.memoizedState.deps)?p.memoizedState=rl(o,y,c,h):(Re.flags|=s,p.memoizedState=rl(1|o,y,c,h))}function TS(s,o){If(8390656,8,s,o)}function SS(s,o){du(2048,8,s,o)}function CS(s,o){return du(4,2,s,o)}function ES(s,o){return du(4,4,s,o)}function kS(s,o){if(typeof o=="function"){s=s();var c=o(s);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function AS(s,o,c){c=c!=null?c.concat([s]):null,du(4,4,kS.bind(null,o,s),c)}function j0(){}function _S(s,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&v0(o,h[1])?h[0]:(c.memoizedState=[s,o],s)}function jS(s,o){var c=Nt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&v0(o,h[1]))return h[0];if(h=s(),xo){Qi(!0);try{s()}finally{Qi(!1)}}return c.memoizedState=[h,o],h}function D0(s,o,c){return c===void 0||(rs&1073741824)!==0?s.memoizedState=o:(s.memoizedState=c,s=RC(),Re.lanes|=s,us|=s,c)}function DS(s,o,c,h){return Qn(c,o)?c:el.current!==null?(s=D0(s,c,h),Qn(s,o)||(qt=!0),s):(rs&42)===0?(qt=!0,s.memoizedState=c):(s=RC(),Re.lanes|=s,us|=s,o)}function IS(s,o,c,h,p){var y=W.p;W.p=y!==0&&8>y?y:8;var S=H.T,E={};H.T=E,M0(s,!1,o,c);try{var D=p(),U=H.S;if(U!==null&&U(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var G=w9(D,h);hu(s,o,G,tr(s))}else hu(s,o,h,tr(s))}catch(K){hu(s,o,{then:function(){},status:"rejected",reason:K},tr())}finally{W.p=y,H.T=S}}function E9(){}function I0(s,o,c,h){if(s.tag!==5)throw Error(r(476));var p=RS(s).queue;IS(s,p,o,se,c===null?E9:function(){return MS(s),c(h)})}function RS(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:se},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:c},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function MS(s){var o=RS(s).next.queue;hu(s,o,{},tr())}function R0(){return gn(Du)}function NS(){return Nt().memoizedState}function LS(){return Nt().memoizedState}function k9(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var c=tr();s=ts(c);var h=ns(o,s,c);h!==null&&(nr(h,o,c),ou(h,o,c)),o={cache:l0()},s.payload=o;return}o=o.return}}function A9(s,o,c){var h=tr();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Rf(s)?PS(o,c):(c=Zy(s,o,c,h),c!==null&&(nr(c,s,h),US(c,o,h)))}function OS(s,o,c){var h=tr();hu(s,o,c,h)}function hu(s,o,c,h){var p={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Rf(s))PS(o,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,E=y(S,c);if(p.hasEagerState=!0,p.eagerState=E,Qn(E,S))return pf(s,o,p,0),ot===null&&mf(),!1}catch{}finally{}if(c=Zy(s,o,p,h),c!==null)return nr(c,s,h),US(c,o,h),!0}return!1}function M0(s,o,c,h){if(h={lane:2,revertLane:dv(),action:h,hasEagerState:!1,eagerState:null,next:null},Rf(s)){if(o)throw Error(r(479))}else o=Zy(s,c,h,2),o!==null&&nr(o,s,2)}function Rf(s){var o=s.alternate;return s===Re||o!==null&&o===Re}function PS(s,o){tl=kf=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function US(s,o,c){if((c&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,c|=h,o.lanes=c,G5(s,c)}}var Mf={readContext:gn,use:_f,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt},VS={readContext:gn,use:_f,useCallback:function(s,o){return Nn().memoizedState=[s,o===void 0?null:o],s},useContext:gn,useEffect:TS,useImperativeHandle:function(s,o,c){c=c!=null?c.concat([s]):null,If(4194308,4,kS.bind(null,o,s),c)},useLayoutEffect:function(s,o){return If(4194308,4,s,o)},useInsertionEffect:function(s,o){If(4,2,s,o)},useMemo:function(s,o){var c=Nn();o=o===void 0?null:o;var h=s();if(xo){Qi(!0);try{s()}finally{Qi(!1)}}return c.memoizedState=[h,o],h},useReducer:function(s,o,c){var h=Nn();if(c!==void 0){var p=c(o);if(xo){Qi(!0);try{c(o)}finally{Qi(!1)}}}else p=o;return h.memoizedState=h.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},h.queue=s,s=s.dispatch=A9.bind(null,Re,s),[h.memoizedState,s]},useRef:function(s){var o=Nn();return s={current:s},o.memoizedState=s},useState:function(s){s=A0(s);var o=s.queue,c=OS.bind(null,Re,o);return o.dispatch=c,[s.memoizedState,c]},useDebugValue:j0,useDeferredValue:function(s,o){var c=Nn();return D0(c,s,o)},useTransition:function(){var s=A0(!1);return s=IS.bind(null,Re,s.queue,!0,!1),Nn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,c){var h=Re,p=Nn();if(He){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),ot===null)throw Error(r(349));(Pe&124)!==0||oS(h,o,c)}p.memoizedState=c;var y={value:c,getSnapshot:o};return p.queue=y,TS(lS.bind(null,h,y,s),[s]),h.flags|=2048,rl(9,Df(),aS.bind(null,h,y,c,o),null),c},useId:function(){var s=Nn(),o=ot.identifierPrefix;if(He){var c=bi,h=vi;c=(h&~(1<<32-Kn(h)-1)).toString(32)+c,o=""+o+"R"+c,c=Af++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=x9++,o=""+o+"r"+c.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:R0,useFormState:yS,useActionState:yS,useOptimistic:function(s){var o=Nn();o.memoizedState=o.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=M0.bind(null,Re,!0,c),c.dispatch=o,[s,o]},useMemoCache:C0,useCacheRefresh:function(){return Nn().memoizedState=k9.bind(null,Re)}},BS={readContext:gn,use:_f,useCallback:_S,useContext:gn,useEffect:SS,useImperativeHandle:AS,useInsertionEffect:CS,useLayoutEffect:ES,useMemo:jS,useReducer:jf,useRef:xS,useState:function(){return jf(Ti)},useDebugValue:j0,useDeferredValue:function(s,o){var c=Nt();return DS(c,Je.memoizedState,s,o)},useTransition:function(){var s=jf(Ti)[0],o=Nt().memoizedState;return[typeof s=="boolean"?s:uu(s),o]},useSyncExternalStore:sS,useId:NS,useHostTransitionStatus:R0,useFormState:vS,useActionState:vS,useOptimistic:function(s,o){var c=Nt();return dS(c,Je,s,o)},useMemoCache:C0,useCacheRefresh:LS},_9={readContext:gn,use:_f,useCallback:_S,useContext:gn,useEffect:SS,useImperativeHandle:AS,useInsertionEffect:CS,useLayoutEffect:ES,useMemo:jS,useReducer:k0,useRef:xS,useState:function(){return k0(Ti)},useDebugValue:j0,useDeferredValue:function(s,o){var c=Nt();return Je===null?D0(c,s,o):DS(c,Je.memoizedState,s,o)},useTransition:function(){var s=k0(Ti)[0],o=Nt().memoizedState;return[typeof s=="boolean"?s:uu(s),o]},useSyncExternalStore:sS,useId:NS,useHostTransitionStatus:R0,useFormState:wS,useActionState:wS,useOptimistic:function(s,o){var c=Nt();return Je!==null?dS(c,Je,s,o):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:C0,useCacheRefresh:LS},il=null,fu=0;function Nf(s){var o=fu;return fu+=1,il===null&&(il=[]),XT(il,s,o)}function mu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Lf(s,o){throw o.$$typeof===v?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function zS(s){var o=s._init;return o(s._payload)}function $S(s){function o(O,N){if(s){var P=O.deletions;P===null?(O.deletions=[N],O.flags|=16):P.push(N)}}function c(O,N){if(!s)return null;for(;N!==null;)o(O,N),N=N.sibling;return null}function h(O){for(var N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function p(O,N){return O=yi(O,N),O.index=0,O.sibling=null,O}function y(O,N,P){return O.index=P,s?(P=O.alternate,P!==null?(P=P.index,P<N?(O.flags|=67108866,N):P):(O.flags|=67108866,N)):(O.flags|=1048576,N)}function S(O){return s&&O.alternate===null&&(O.flags|=67108866),O}function E(O,N,P,Y){return N===null||N.tag!==6?(N=e0(P,O.mode,Y),N.return=O,N):(N=p(N,P),N.return=O,N)}function D(O,N,P,Y){var de=P.type;return de===T?G(O,N,P.props.children,Y,P.key):N!==null&&(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&zS(de)===N.type)?(N=p(N,P.props),mu(N,P),N.return=O,N):(N=yf(P.type,P.key,P.props,null,O.mode,Y),mu(N,P),N.return=O,N)}function U(O,N,P,Y){return N===null||N.tag!==4||N.stateNode.containerInfo!==P.containerInfo||N.stateNode.implementation!==P.implementation?(N=t0(P,O.mode,Y),N.return=O,N):(N=p(N,P.children||[]),N.return=O,N)}function G(O,N,P,Y,de){return N===null||N.tag!==7?(N=fo(P,O.mode,Y,de),N.return=O,N):(N=p(N,P),N.return=O,N)}function K(O,N,P){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=e0(""+N,O.mode,P),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case w:return P=yf(N.type,N.key,N.props,null,O.mode,P),mu(P,N),P.return=O,P;case x:return N=t0(N,O.mode,P),N.return=O,N;case Q:var Y=N._init;return N=Y(N._payload),K(O,N,P)}if(Ae(N)||ne(N))return N=fo(N,O.mode,P,null),N.return=O,N;if(typeof N.then=="function")return K(O,Nf(N),P);if(N.$$typeof===I)return K(O,xf(O,N),P);Lf(O,N)}return null}function V(O,N,P,Y){var de=N!==null?N.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return de!==null?null:E(O,N,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return P.key===de?D(O,N,P,Y):null;case x:return P.key===de?U(O,N,P,Y):null;case Q:return de=P._init,P=de(P._payload),V(O,N,P,Y)}if(Ae(P)||ne(P))return de!==null?null:G(O,N,P,Y,null);if(typeof P.then=="function")return V(O,N,Nf(P),Y);if(P.$$typeof===I)return V(O,N,xf(O,P),Y);Lf(O,P)}return null}function z(O,N,P,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return O=O.get(P)||null,E(N,O,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return O=O.get(Y.key===null?P:Y.key)||null,D(N,O,Y,de);case x:return O=O.get(Y.key===null?P:Y.key)||null,U(N,O,Y,de);case Q:var Me=Y._init;return Y=Me(Y._payload),z(O,N,P,Y,de)}if(Ae(Y)||ne(Y))return O=O.get(P)||null,G(N,O,Y,de,null);if(typeof Y.then=="function")return z(O,N,P,Nf(Y),de);if(Y.$$typeof===I)return z(O,N,P,xf(N,Y),de);Lf(N,Y)}return null}function Te(O,N,P,Y){for(var de=null,Me=null,pe=N,we=N=0,Gt=null;pe!==null&&we<P.length;we++){pe.index>we?(Gt=pe,pe=null):Gt=pe.sibling;var qe=V(O,pe,P[we],Y);if(qe===null){pe===null&&(pe=Gt);break}s&&pe&&qe.alternate===null&&o(O,pe),N=y(qe,N,we),Me===null?de=qe:Me.sibling=qe,Me=qe,pe=Gt}if(we===P.length)return c(O,pe),He&&po(O,we),de;if(pe===null){for(;we<P.length;we++)pe=K(O,P[we],Y),pe!==null&&(N=y(pe,N,we),Me===null?de=pe:Me.sibling=pe,Me=pe);return He&&po(O,we),de}for(pe=h(pe);we<P.length;we++)Gt=z(pe,O,we,P[we],Y),Gt!==null&&(s&&Gt.alternate!==null&&pe.delete(Gt.key===null?we:Gt.key),N=y(Gt,N,we),Me===null?de=Gt:Me.sibling=Gt,Me=Gt);return s&&pe.forEach(function(bs){return o(O,bs)}),He&&po(O,we),de}function be(O,N,P,Y){if(P==null)throw Error(r(151));for(var de=null,Me=null,pe=N,we=N=0,Gt=null,qe=P.next();pe!==null&&!qe.done;we++,qe=P.next()){pe.index>we?(Gt=pe,pe=null):Gt=pe.sibling;var bs=V(O,pe,qe.value,Y);if(bs===null){pe===null&&(pe=Gt);break}s&&pe&&bs.alternate===null&&o(O,pe),N=y(bs,N,we),Me===null?de=bs:Me.sibling=bs,Me=bs,pe=Gt}if(qe.done)return c(O,pe),He&&po(O,we),de;if(pe===null){for(;!qe.done;we++,qe=P.next())qe=K(O,qe.value,Y),qe!==null&&(N=y(qe,N,we),Me===null?de=qe:Me.sibling=qe,Me=qe);return He&&po(O,we),de}for(pe=h(pe);!qe.done;we++,qe=P.next())qe=z(pe,O,we,qe.value,Y),qe!==null&&(s&&qe.alternate!==null&&pe.delete(qe.key===null?we:qe.key),N=y(qe,N,we),Me===null?de=qe:Me.sibling=qe,Me=qe);return s&&pe.forEach(function(j8){return o(O,j8)}),He&&po(O,we),de}function tt(O,N,P,Y){if(typeof P=="object"&&P!==null&&P.type===T&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case w:e:{for(var de=P.key;N!==null;){if(N.key===de){if(de=P.type,de===T){if(N.tag===7){c(O,N.sibling),Y=p(N,P.props.children),Y.return=O,O=Y;break e}}else if(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Q&&zS(de)===N.type){c(O,N.sibling),Y=p(N,P.props),mu(Y,P),Y.return=O,O=Y;break e}c(O,N);break}else o(O,N);N=N.sibling}P.type===T?(Y=fo(P.props.children,O.mode,Y,P.key),Y.return=O,O=Y):(Y=yf(P.type,P.key,P.props,null,O.mode,Y),mu(Y,P),Y.return=O,O=Y)}return S(O);case x:e:{for(de=P.key;N!==null;){if(N.key===de)if(N.tag===4&&N.stateNode.containerInfo===P.containerInfo&&N.stateNode.implementation===P.implementation){c(O,N.sibling),Y=p(N,P.children||[]),Y.return=O,O=Y;break e}else{c(O,N);break}else o(O,N);N=N.sibling}Y=t0(P,O.mode,Y),Y.return=O,O=Y}return S(O);case Q:return de=P._init,P=de(P._payload),tt(O,N,P,Y)}if(Ae(P))return Te(O,N,P,Y);if(ne(P)){if(de=ne(P),typeof de!="function")throw Error(r(150));return P=de.call(P),be(O,N,P,Y)}if(typeof P.then=="function")return tt(O,N,Nf(P),Y);if(P.$$typeof===I)return tt(O,N,xf(O,P),Y);Lf(O,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,N!==null&&N.tag===6?(c(O,N.sibling),Y=p(N,P),Y.return=O,O=Y):(c(O,N),Y=e0(P,O.mode,Y),Y.return=O,O=Y),S(O)):c(O,N)}return function(O,N,P,Y){try{fu=0;var de=tt(O,N,P,Y);return il=null,de}catch(pe){if(pe===iu||pe===Sf)throw pe;var Me=Xn(29,pe,null,O.mode);return Me.lanes=Y,Me.return=O,Me}finally{}}}var sl=$S(!0),FS=$S(!1),mr=X(null),Br=null;function is(s){var o=s.alternate;le(Vt,Vt.current&1),le(mr,s),Br===null&&(o===null||el.current!==null||o.memoizedState!==null)&&(Br=s)}function qS(s){if(s.tag===22){if(le(Vt,Vt.current),le(mr,s),Br===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Br=s)}}else ss()}function ss(){le(Vt,Vt.current),le(mr,mr.current)}function Si(s){ue(mr),Br===s&&(Br=null),ue(Vt)}var Vt=X(0);function Of(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||Sv(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function N0(s,o,c,h){o=s.memoizedState,c=c(h,o),c=c==null?o:g({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var L0={enqueueSetState:function(s,o,c){s=s._reactInternals;var h=tr(),p=ts(h);p.payload=o,c!=null&&(p.callback=c),o=ns(s,p,h),o!==null&&(nr(o,s,h),ou(o,s,h))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var h=tr(),p=ts(h);p.tag=1,p.payload=o,c!=null&&(p.callback=c),o=ns(s,p,h),o!==null&&(nr(o,s,h),ou(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=tr(),h=ts(c);h.tag=2,o!=null&&(h.callback=o),o=ns(s,h,c),o!==null&&(nr(o,s,c),ou(o,s,c))}};function HS(s,o,c,h,p,y,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,S):o.prototype&&o.prototype.isPureReactComponent?!Qc(c,h)||!Qc(p,y):!0}function GS(s,o,c,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==s&&L0.enqueueReplaceState(o,o.state,null)}function To(s,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(s=s.defaultProps){c===o&&(c=g({},c));for(var p in s)c[p]===void 0&&(c[p]=s[p])}return c}var Pf=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function WS(s){Pf(s)}function YS(s){console.error(s)}function KS(s){Pf(s)}function Uf(s,o){try{var c=s.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function QS(s,o,c){try{var h=s.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function O0(s,o,c){return c=ts(c),c.tag=3,c.payload={element:null},c.callback=function(){Uf(s,o)},c}function XS(s){return s=ts(s),s.tag=3,s}function ZS(s,o,c,h){var p=c.type.getDerivedStateFromError;if(typeof p=="function"){var y=h.value;s.payload=function(){return p(y)},s.callback=function(){QS(o,c,h)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){QS(o,c,h),typeof p!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var E=h.stack;this.componentDidCatch(h.value,{componentStack:E!==null?E:""})})}function j9(s,o,c,h,p){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&tu(o,c,p,!0),c=mr.current,c!==null){switch(c.tag){case 13:return Br===null?ov():c.alternate===null&&wt===0&&(wt=3),c.flags&=-257,c.flags|=65536,c.lanes=p,h===d0?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),lv(s,h,p)),!1;case 22:return c.flags|=65536,h===d0?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),lv(s,h,p)),!1}throw Error(r(435,c.tag))}return lv(s,h,p),ov(),!1}if(He)return o=mr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,h!==i0&&(s=Error(r(422),{cause:h}),eu(ur(s,c)))):(h!==i0&&(o=Error(r(423),{cause:h}),eu(ur(o,c))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,h=ur(h,c),p=O0(s.stateNode,h,p),m0(s,p),wt!==4&&(wt=2)),!1;var y=Error(r(520),{cause:h});if(y=ur(y,c),xu===null?xu=[y]:xu.push(y),wt!==4&&(wt=2),o===null)return!0;h=ur(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,s=p&-p,c.lanes|=s,s=O0(c.stateNode,h,s),m0(c,s),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ds===null||!ds.has(y))))return c.flags|=65536,p&=-p,c.lanes|=p,p=XS(p),ZS(p,s,c,h),m0(c,p),!1}c=c.return}while(c!==null);return!1}var JS=Error(r(461)),qt=!1;function nn(s,o,c,h){o.child=s===null?FS(o,null,c,h):sl(o,s.child,c,h)}function eC(s,o,c,h,p){c=c.render;var y=o.ref;if("ref"in h){var S={};for(var E in h)E!=="ref"&&(S[E]=h[E])}else S=h;return bo(o),h=b0(s,o,c,S,y,p),E=w0(),s!==null&&!qt?(x0(s,o,p),Ci(s,o,p)):(He&&E&&n0(o),o.flags|=1,nn(s,o,h,p),o.child)}function tC(s,o,c,h,p){if(s===null){var y=c.type;return typeof y=="function"&&!Jy(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,nC(s,o,y,h,p)):(s=yf(c.type,null,h,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!q0(s,p)){var S=y.memoizedProps;if(c=c.compare,c=c!==null?c:Qc,c(S,h)&&s.ref===o.ref)return Ci(s,o,p)}return o.flags|=1,s=yi(y,h),s.ref=o.ref,s.return=o,o.child=s}function nC(s,o,c,h,p){if(s!==null){var y=s.memoizedProps;if(Qc(y,h)&&s.ref===o.ref)if(qt=!1,o.pendingProps=h=y,q0(s,p))(s.flags&131072)!==0&&(qt=!0);else return o.lanes=s.lanes,Ci(s,o,p)}return P0(s,o,c,h,p)}function rC(s,o,c){var h=o.pendingProps,p=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|c:c,s!==null){for(p=o.child=s.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return iC(s,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Tf(o,y!==null?y.cachePool:null),y!==null?nS(o,y):g0(),qS(o);else return o.lanes=o.childLanes=536870912,iC(s,o,y!==null?y.baseLanes|c:c,c)}else y!==null?(Tf(o,y.cachePool),nS(o,y),ss(),o.memoizedState=null):(s!==null&&Tf(o,null),g0(),ss());return nn(s,o,p,c),o.child}function iC(s,o,c,h){var p=u0();return p=p===null?null:{parent:Ut._currentValue,pool:p},o.memoizedState={baseLanes:c,cachePool:p},s!==null&&Tf(o,null),g0(),qS(o),s!==null&&tu(s,o,h,!0),null}function Vf(s,o){var c=o.ref;if(c===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(o.flags|=4194816)}}function P0(s,o,c,h,p){return bo(o),c=b0(s,o,c,h,void 0,p),h=w0(),s!==null&&!qt?(x0(s,o,p),Ci(s,o,p)):(He&&h&&n0(o),o.flags|=1,nn(s,o,c,p),o.child)}function sC(s,o,c,h,p,y){return bo(o),o.updateQueue=null,c=iS(o,h,c,p),rS(s),h=w0(),s!==null&&!qt?(x0(s,o,y),Ci(s,o,y)):(He&&h&&n0(o),o.flags|=1,nn(s,o,c,y),o.child)}function oC(s,o,c,h,p){if(bo(o),o.stateNode===null){var y=Ka,S=c.contextType;typeof S=="object"&&S!==null&&(y=gn(S)),y=new c(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=L0,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},h0(o),S=c.contextType,y.context=typeof S=="object"&&S!==null?gn(S):Ka,y.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(N0(o,c,S,h),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&L0.enqueueReplaceState(y,y.state,null),lu(o,h,y,p),au(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){y=o.stateNode;var E=o.memoizedProps,D=To(c,E);y.props=D;var U=y.context,G=c.contextType;S=Ka,typeof G=="object"&&G!==null&&(S=gn(G));var K=c.getDerivedStateFromProps;G=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E||U!==S)&&GS(o,y,h,S),es=!1;var V=o.memoizedState;y.state=V,lu(o,h,y,p),au(),U=o.memoizedState,E||V!==U||es?(typeof K=="function"&&(N0(o,c,K,h),U=o.memoizedState),(D=es||HS(o,c,D,h,V,U,S))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=U),y.props=h,y.state=U,y.context=S,h=D):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,f0(s,o),S=o.memoizedProps,G=To(c,S),y.props=G,K=o.pendingProps,V=y.context,U=c.contextType,D=Ka,typeof U=="object"&&U!==null&&(D=gn(U)),E=c.getDerivedStateFromProps,(U=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==K||V!==D)&&GS(o,y,h,D),es=!1,V=o.memoizedState,y.state=V,lu(o,h,y,p),au();var z=o.memoizedState;S!==K||V!==z||es||s!==null&&s.dependencies!==null&&wf(s.dependencies)?(typeof E=="function"&&(N0(o,c,E,h),z=o.memoizedState),(G=es||HS(o,c,G,h,V,z,D)||s!==null&&s.dependencies!==null&&wf(s.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,z,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,z,D)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=z),y.props=h,y.state=z,y.context=D,h=G):(typeof y.componentDidUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&V===s.memoizedState||(o.flags|=1024),h=!1)}return y=h,Vf(s,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,s!==null&&h?(o.child=sl(o,s.child,null,p),o.child=sl(o,null,c,p)):nn(s,o,c,p),o.memoizedState=y.state,s=o.child):s=Ci(s,o,p),s}function aC(s,o,c,h){return Jc(),o.flags|=256,nn(s,o,c,h),o.child}var U0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function V0(s){return{baseLanes:s,cachePool:YT()}}function B0(s,o,c){return s=s!==null?s.childLanes&~c:0,o&&(s|=pr),s}function lC(s,o,c){var h=o.pendingProps,p=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=s!==null&&s.memoizedState===null?!1:(Vt.current&2)!==0),S&&(p=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,s===null){if(He){if(p?is(o):ss(),He){var E=bt,D;if(D=E){e:{for(D=E,E=Vr;D.nodeType!==8;){if(!E){E=null;break e}if(D=_r(D.nextSibling),D===null){E=null;break e}}E=D}E!==null?(o.memoizedState={dehydrated:E,treeContext:mo!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},D=Xn(18,null,null,0),D.stateNode=E,D.return=o,o.child=D,Cn=o,bt=null,D=!0):D=!1}D||yo(o)}if(E=o.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Sv(E)?o.lanes=32:o.lanes=536870912,null;Si(o)}return E=h.children,h=h.fallback,p?(ss(),p=o.mode,E=Bf({mode:"hidden",children:E},p),h=fo(h,p,c,null),E.return=o,h.return=o,E.sibling=h,o.child=E,p=o.child,p.memoizedState=V0(c),p.childLanes=B0(s,S,c),o.memoizedState=U0,h):(is(o),z0(o,E))}if(D=s.memoizedState,D!==null&&(E=D.dehydrated,E!==null)){if(y)o.flags&256?(is(o),o.flags&=-257,o=$0(s,o,c)):o.memoizedState!==null?(ss(),o.child=s.child,o.flags|=128,o=null):(ss(),p=h.fallback,E=o.mode,h=Bf({mode:"visible",children:h.children},E),p=fo(p,E,c,null),p.flags|=2,h.return=o,p.return=o,h.sibling=p,o.child=h,sl(o,s.child,null,c),h=o.child,h.memoizedState=V0(c),h.childLanes=B0(s,S,c),o.memoizedState=U0,o=p);else if(is(o),Sv(E)){if(S=E.nextSibling&&E.nextSibling.dataset,S)var U=S.dgst;S=U,h=Error(r(419)),h.stack="",h.digest=S,eu({value:h,source:null,stack:null}),o=$0(s,o,c)}else if(qt||tu(s,o,c,!1),S=(c&s.childLanes)!==0,qt||S){if(S=ot,S!==null&&(h=c&-c,h=(h&42)!==0?1:Cy(h),h=(h&(S.suspendedLanes|c))!==0?0:h,h!==0&&h!==D.retryLane))throw D.retryLane=h,Ya(s,h),nr(S,s,h),JS;E.data==="$?"||ov(),o=$0(s,o,c)}else E.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=D.treeContext,bt=_r(E.nextSibling),Cn=o,He=!0,go=null,Vr=!1,s!==null&&(hr[fr++]=vi,hr[fr++]=bi,hr[fr++]=mo,vi=s.id,bi=s.overflow,mo=o),o=z0(o,h.children),o.flags|=4096);return o}return p?(ss(),p=h.fallback,E=o.mode,D=s.child,U=D.sibling,h=yi(D,{mode:"hidden",children:h.children}),h.subtreeFlags=D.subtreeFlags&65011712,U!==null?p=yi(U,p):(p=fo(p,E,c,null),p.flags|=2),p.return=o,h.return=o,h.sibling=p,o.child=h,h=p,p=o.child,E=s.child.memoizedState,E===null?E=V0(c):(D=E.cachePool,D!==null?(U=Ut._currentValue,D=D.parent!==U?{parent:U,pool:U}:D):D=YT(),E={baseLanes:E.baseLanes|c,cachePool:D}),p.memoizedState=E,p.childLanes=B0(s,S,c),o.memoizedState=U0,h):(is(o),c=s.child,s=c.sibling,c=yi(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,s!==null&&(S=o.deletions,S===null?(o.deletions=[s],o.flags|=16):S.push(s)),o.child=c,o.memoizedState=null,c)}function z0(s,o){return o=Bf({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Bf(s,o){return s=Xn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function $0(s,o,c){return sl(o,s.child,null,c),s=z0(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function cC(s,o,c){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),o0(s.return,o,c)}function F0(s,o,c,h,p){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=p)}function uC(s,o,c){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(nn(s,o,h.children,c),h=Vt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&cC(s,c,o);else if(s.tag===19)cC(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(le(Vt,h),p){case"forwards":for(c=o.child,p=null;c!==null;)s=c.alternate,s!==null&&Of(s)===null&&(p=c),c=c.sibling;c=p,c===null?(p=o.child,o.child=null):(p=c.sibling,c.sibling=null),F0(o,!1,p,c,y);break;case"backwards":for(c=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&Of(s)===null){o.child=p;break}s=p.sibling,p.sibling=c,c=p,p=s}F0(o,!0,c,null,y);break;case"together":F0(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ci(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),us|=o.lanes,(c&o.childLanes)===0)if(s!==null){if(tu(s,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,c=yi(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=yi(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function q0(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&wf(s)))}function D9(s,o,c){switch(o.tag){case 3:ut(o,o.stateNode.containerInfo),Ji(o,Ut,s.memoizedState.cache),Jc();break;case 27:case 5:by(o);break;case 4:ut(o,o.stateNode.containerInfo);break;case 10:Ji(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(is(o),o.flags|=128,null):(c&o.child.childLanes)!==0?lC(s,o,c):(is(o),s=Ci(s,o,c),s!==null?s.sibling:null);is(o);break;case 19:var p=(s.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(tu(s,o,c,!1),h=(c&o.childLanes)!==0),p){if(h)return uC(s,o,c);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),le(Vt,Vt.current),h)break;return null;case 22:case 23:return o.lanes=0,rC(s,o,c);case 24:Ji(o,Ut,s.memoizedState.cache)}return Ci(s,o,c)}function dC(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps)qt=!0;else{if(!q0(s,c)&&(o.flags&128)===0)return qt=!1,D9(s,o,c);qt=(s.flags&131072)!==0}else qt=!1,He&&(o.flags&1048576)!==0&&zT(o,bf,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,p=h._init;if(h=p(h._payload),o.type=h,typeof h=="function")Jy(h)?(s=To(h,s),o.tag=1,o=oC(null,o,h,s,c)):(o.tag=0,o=P0(null,o,h,s,c));else{if(h!=null){if(p=h.$$typeof,p===q){o.tag=11,o=eC(null,o,h,s,c);break e}else if(p===$){o.tag=14,o=tC(null,o,h,s,c);break e}}throw o=ae(h)||h,Error(r(306,o,""))}}return o;case 0:return P0(s,o,o.type,o.pendingProps,c);case 1:return h=o.type,p=To(h,o.pendingProps),oC(s,o,h,p,c);case 3:e:{if(ut(o,o.stateNode.containerInfo),s===null)throw Error(r(387));h=o.pendingProps;var y=o.memoizedState;p=y.element,f0(s,o),lu(o,h,null,c);var S=o.memoizedState;if(h=S.cache,Ji(o,Ut,h),h!==y.cache&&a0(o,[Ut],c,!0),au(),h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=aC(s,o,h,c);break e}else if(h!==p){p=ur(Error(r(424)),o),eu(p),o=aC(s,o,h,c);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=_r(s.firstChild),Cn=o,He=!0,go=null,Vr=!0,c=FS(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Jc(),h===p){o=Ci(s,o,c);break e}nn(s,o,h,c)}o=o.child}return o;case 26:return Vf(s,o),s===null?(c=pE(o.type,null,o.pendingProps,null))?o.memoizedState=c:He||(c=o.type,s=o.pendingProps,h=em(Ee.current).createElement(c),h[pn]=o,h[Rn]=s,sn(h,c,s),Ft(h),o.stateNode=h):o.memoizedState=pE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return by(o),s===null&&He&&(h=o.stateNode=hE(o.type,o.pendingProps,Ee.current),Cn=o,Vr=!0,p=bt,ms(o.type)?(Cv=p,bt=_r(h.firstChild)):bt=p),nn(s,o,o.pendingProps.children,c),Vf(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&He&&((p=h=bt)&&(h=i8(h,o.type,o.pendingProps,Vr),h!==null?(o.stateNode=h,Cn=o,bt=_r(h.firstChild),Vr=!1,p=!0):p=!1),p||yo(o)),by(o),p=o.type,y=o.pendingProps,S=s!==null?s.memoizedProps:null,h=y.children,wv(p,y)?h=null:S!==null&&wv(p,S)&&(o.flags|=32),o.memoizedState!==null&&(p=b0(s,o,T9,null,null,c),Du._currentValue=p),Vf(s,o),nn(s,o,h,c),o.child;case 6:return s===null&&He&&((s=c=bt)&&(c=s8(c,o.pendingProps,Vr),c!==null?(o.stateNode=c,Cn=o,bt=null,s=!0):s=!1),s||yo(o)),null;case 13:return lC(s,o,c);case 4:return ut(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=sl(o,null,h,c):nn(s,o,h,c),o.child;case 11:return eC(s,o,o.type,o.pendingProps,c);case 7:return nn(s,o,o.pendingProps,c),o.child;case 8:return nn(s,o,o.pendingProps.children,c),o.child;case 12:return nn(s,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,Ji(o,o.type,h.value),nn(s,o,h.children,c),o.child;case 9:return p=o.type._context,h=o.pendingProps.children,bo(o),p=gn(p),h=h(p),o.flags|=1,nn(s,o,h,c),o.child;case 14:return tC(s,o,o.type,o.pendingProps,c);case 15:return nC(s,o,o.type,o.pendingProps,c);case 19:return uC(s,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},s===null?(c=Bf(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=yi(s.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return rC(s,o,c);case 24:return bo(o),h=gn(Ut),s===null?(p=u0(),p===null&&(p=ot,y=l0(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=c),p=y),o.memoizedState={parent:h,cache:p},h0(o),Ji(o,Ut,p)):((s.lanes&c)!==0&&(f0(s,o),lu(o,null,null,c),au()),p=s.memoizedState,y=o.memoizedState,p.parent!==h?(p={parent:h,cache:h},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Ji(o,Ut,h)):(h=y.cache,Ji(o,Ut,h),h!==p.cache&&a0(o,[Ut],c,!0))),nn(s,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ei(s){s.flags|=4}function hC(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!wE(o)){if(o=mr.current,o!==null&&((Pe&4194048)===Pe?Br!==null:(Pe&62914560)!==Pe&&(Pe&536870912)===0||o!==Br))throw su=d0,KT;s.flags|=8192}}function zf(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?q5():536870912,s.lanes|=o,cl|=o)}function pu(s,o){if(!He)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function gt(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,h=0;if(o)for(var p=s.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)c|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=h,s.childLanes=c,o}function I9(s,o,c){var h=o.pendingProps;switch(r0(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(o),null;case 1:return gt(o),null;case 3:return c=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),xi(Ut),Ki(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Zc(o)?Ei(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,qT())),gt(o),null;case 26:return c=o.memoizedState,s===null?(Ei(o),c!==null?(gt(o),hC(o,c)):(gt(o),o.flags&=-16777217)):c?c!==s.memoizedState?(Ei(o),gt(o),hC(o,c)):(gt(o),o.flags&=-16777217):(s.memoizedProps!==h&&Ei(o),gt(o),o.flags&=-16777217),null;case 27:Xh(o),c=Ee.current;var p=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Ei(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return gt(o),null}s=ve.current,Zc(o)?$T(o):(s=hE(p,h,c),o.stateNode=s,Ei(o))}return gt(o),null;case 5:if(Xh(o),c=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Ei(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return gt(o),null}if(s=ve.current,Zc(o))$T(o);else{switch(p=em(Ee.current),s){case 1:s=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=p.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?p.createElement(c,{is:h.is}):p.createElement(c)}}s[pn]=o,s[Rn]=h;e:for(p=o.child;p!==null;){if(p.tag===5||p.tag===6)s.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===o)break e;for(;p.sibling===null;){if(p.return===null||p.return===o)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}o.stateNode=s;e:switch(sn(s,c,h),c){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ei(o)}}return gt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&Ei(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(s=Ee.current,Zc(o)){if(s=o.stateNode,c=o.memoizedProps,h=null,p=Cn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}s[pn]=o,s=!!(s.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||sE(s.nodeValue,c)),s||yo(o)}else s=em(s).createTextNode(h),s[pn]=o,o.stateNode=s}return gt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Zc(o),h!==null&&h.dehydrated!==null){if(s===null){if(!p)throw Error(r(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[pn]=o}else Jc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;gt(o),p=!1}else p=qT(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(Si(o),o):(Si(o),null)}if(Si(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,s=s!==null&&s.memoizedState!==null,c){h=o.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==p&&(h.flags|=2048)}return c!==s&&c&&(o.child.flags|=8192),zf(o,o.updateQueue),gt(o),null;case 4:return Ki(),s===null&&pv(o.stateNode.containerInfo),gt(o),null;case 10:return xi(o.type),gt(o),null;case 19:if(ue(Vt),p=o.memoizedState,p===null)return gt(o),null;if(h=(o.flags&128)!==0,y=p.rendering,y===null)if(h)pu(p,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(y=Of(s),y!==null){for(o.flags|=128,pu(p,!1),s=y.updateQueue,o.updateQueue=s,zf(o,s),o.subtreeFlags=0,s=c,c=o.child;c!==null;)BT(c,s),c=c.sibling;return le(Vt,Vt.current&1|2),o.child}s=s.sibling}p.tail!==null&&Ur()>qf&&(o.flags|=128,h=!0,pu(p,!1),o.lanes=4194304)}else{if(!h)if(s=Of(y),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,zf(o,s),pu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!He)return gt(o),null}else 2*Ur()-p.renderingStartTime>qf&&c!==536870912&&(o.flags|=128,h=!0,pu(p,!1),o.lanes=4194304);p.isBackwards?(y.sibling=o.child,o.child=y):(s=p.last,s!==null?s.sibling=y:o.child=y,p.last=y)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=Ur(),o.sibling=null,s=Vt.current,le(Vt,h?s&1|2:s&1),o):(gt(o),null);case 22:case 23:return Si(o),y0(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(gt(o),o.subtreeFlags&6&&(o.flags|=8192)):gt(o),c=o.updateQueue,c!==null&&zf(o,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),s!==null&&ue(wo),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),xi(Ut),gt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function R9(s,o){switch(r0(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return xi(Ut),Ki(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Xh(o),null;case 13:if(Si(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Jc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ue(Vt),null;case 4:return Ki(),null;case 10:return xi(o.type),null;case 22:case 23:return Si(o),y0(),s!==null&&ue(wo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return xi(Ut),null;case 25:return null;default:return null}}function fC(s,o){switch(r0(o),o.tag){case 3:xi(Ut),Ki();break;case 26:case 27:case 5:Xh(o);break;case 4:Ki();break;case 13:Si(o);break;case 19:ue(Vt);break;case 10:xi(o.type);break;case 22:case 23:Si(o),y0(),s!==null&&ue(wo);break;case 24:xi(Ut)}}function gu(s,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&s)===s){h=void 0;var y=c.create,S=c.inst;h=y(),S.destroy=h}c=c.next}while(c!==p)}}catch(E){rt(o,o.return,E)}}function os(s,o,c){try{var h=o.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var y=p.next;h=y;do{if((h.tag&s)===s){var S=h.inst,E=S.destroy;if(E!==void 0){S.destroy=void 0,p=o;var D=c,U=E;try{U()}catch(G){rt(p,D,G)}}}h=h.next}while(h!==y)}}catch(G){rt(o,o.return,G)}}function mC(s){var o=s.updateQueue;if(o!==null){var c=s.stateNode;try{tS(o,c)}catch(h){rt(s,s.return,h)}}}function pC(s,o,c){c.props=To(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(h){rt(s,o,h)}}function yu(s,o){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof c=="function"?s.refCleanup=c(h):c.current=h}}catch(p){rt(s,o,p)}}function zr(s,o){var c=s.ref,h=s.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(p){rt(s,o,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(p){rt(s,o,p)}else c.current=null}function gC(s){var o=s.type,c=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(p){rt(s,s.return,p)}}function H0(s,o,c){try{var h=s.stateNode;J9(h,s.type,c,o),h[Rn]=o}catch(p){rt(s,s.return,p)}}function yC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ms(s.type)||s.tag===4}function G0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||yC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ms(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function W0(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(s),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Jf));else if(h!==4&&(h===27&&ms(s.type)&&(c=s.stateNode,o=null),s=s.child,s!==null))for(W0(s,o,c),s=s.sibling;s!==null;)W0(s,o,c),s=s.sibling}function $f(s,o,c){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(h!==4&&(h===27&&ms(s.type)&&(c=s.stateNode),s=s.child,s!==null))for($f(s,o,c),s=s.sibling;s!==null;)$f(s,o,c),s=s.sibling}function vC(s){var o=s.stateNode,c=s.memoizedProps;try{for(var h=s.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);sn(o,h,c),o[pn]=s,o[Rn]=c}catch(y){rt(s,s.return,y)}}var ki=!1,At=!1,Y0=!1,bC=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function M9(s,o){if(s=s.containerInfo,vv=om,s=DT(s),Gy(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var S=0,E=-1,D=-1,U=0,G=0,K=s,V=null;t:for(;;){for(var z;K!==c||p!==0&&K.nodeType!==3||(E=S+p),K!==y||h!==0&&K.nodeType!==3||(D=S+h),K.nodeType===3&&(S+=K.nodeValue.length),(z=K.firstChild)!==null;)V=K,K=z;for(;;){if(K===s)break t;if(V===c&&++U===p&&(E=S),V===y&&++G===h&&(D=S),(z=K.nextSibling)!==null)break;K=V,V=K.parentNode}K=z}c=E===-1||D===-1?null:{start:E,end:D}}else c=null}c=c||{start:0,end:0}}else c=null;for(bv={focusedElem:s,selectionRange:c},om=!1,Ht=o;Ht!==null;)if(o=Ht,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Ht=s;else for(;Ht!==null;){switch(o=Ht,y=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,c=o,p=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var Te=To(c.type,p,c.elementType===c.type);s=h.getSnapshotBeforeUpdate(Te,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(be){rt(c,c.return,be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,c=s.nodeType,c===9)Tv(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,Ht=s;break}Ht=o.return}}function wC(s,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:as(s,c),h&4&&gu(5,c);break;case 1:if(as(s,c),h&4)if(s=c.stateNode,o===null)try{s.componentDidMount()}catch(S){rt(c,c.return,S)}else{var p=To(c.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(p,o,s.__reactInternalSnapshotBeforeUpdate)}catch(S){rt(c,c.return,S)}}h&64&&mC(c),h&512&&yu(c,c.return);break;case 3:if(as(s,c),h&64&&(s=c.updateQueue,s!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{tS(s,o)}catch(S){rt(c,c.return,S)}}break;case 27:o===null&&h&4&&vC(c);case 26:case 5:as(s,c),o===null&&h&4&&gC(c),h&512&&yu(c,c.return);break;case 12:as(s,c);break;case 13:as(s,c),h&4&&SC(s,c),h&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=$9.bind(null,c),o8(s,c))));break;case 22:if(h=c.memoizedState!==null||ki,!h){o=o!==null&&o.memoizedState!==null||At,p=ki;var y=At;ki=h,(At=o)&&!y?ls(s,c,(c.subtreeFlags&8772)!==0):as(s,c),ki=p,At=y}break;case 30:break;default:as(s,c)}}function xC(s){var o=s.alternate;o!==null&&(s.alternate=null,xC(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ay(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dt=null,Ln=!1;function Ai(s,o,c){for(c=c.child;c!==null;)TC(s,o,c),c=c.sibling}function TC(s,o,c){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Uc,c)}catch{}switch(c.tag){case 26:At||zr(c,o),Ai(s,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:At||zr(c,o);var h=dt,p=Ln;ms(c.type)&&(dt=c.stateNode,Ln=!1),Ai(s,o,c),ku(c.stateNode),dt=h,Ln=p;break;case 5:At||zr(c,o);case 6:if(h=dt,p=Ln,dt=null,Ai(s,o,c),dt=h,Ln=p,dt!==null)if(Ln)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(c.stateNode)}catch(y){rt(c,o,y)}else try{dt.removeChild(c.stateNode)}catch(y){rt(c,o,y)}break;case 18:dt!==null&&(Ln?(s=dt,uE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Nu(s)):uE(dt,c.stateNode));break;case 4:h=dt,p=Ln,dt=c.stateNode.containerInfo,Ln=!0,Ai(s,o,c),dt=h,Ln=p;break;case 0:case 11:case 14:case 15:At||os(2,c,o),At||os(4,c,o),Ai(s,o,c);break;case 1:At||(zr(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&pC(c,o,h)),Ai(s,o,c);break;case 21:Ai(s,o,c);break;case 22:At=(h=At)||c.memoizedState!==null,Ai(s,o,c),At=h;break;default:Ai(s,o,c)}}function SC(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Nu(s)}catch(c){rt(o,o.return,c)}}function N9(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new bC),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new bC),o;default:throw Error(r(435,s.tag))}}function K0(s,o){var c=N9(s);o.forEach(function(h){var p=F9.bind(null,s,h);c.has(h)||(c.add(h),h.then(p,p))})}function Zn(s,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var p=c[h],y=s,S=o,E=S;e:for(;E!==null;){switch(E.tag){case 27:if(ms(E.type)){dt=E.stateNode,Ln=!1;break e}break;case 5:dt=E.stateNode,Ln=!1;break e;case 3:case 4:dt=E.stateNode.containerInfo,Ln=!0;break e}E=E.return}if(dt===null)throw Error(r(160));TC(y,S,p),dt=null,Ln=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)CC(o,s),o=o.sibling}var Ar=null;function CC(s,o){var c=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zn(o,s),Jn(s),h&4&&(os(3,s,s.return),gu(3,s),os(5,s,s.return));break;case 1:Zn(o,s),Jn(s),h&512&&(At||c===null||zr(c,c.return)),h&64&&ki&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var p=Ar;if(Zn(o,s),Jn(s),h&512&&(At||c===null||zr(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=s.memoizedState,c===null)if(h===null)if(s.stateNode===null){e:{h=s.type,c=s.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":y=p.getElementsByTagName("title")[0],(!y||y[zc]||y[pn]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(h),p.head.insertBefore(y,p.querySelector("head > title"))),sn(y,h,c),y[pn]=s,Ft(y),h=y;break e;case"link":var S=vE("link","href",p).get(h+(c.href||""));if(S){for(var E=0;E<S.length;E++)if(y=S[E],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(E,1);break t}}y=p.createElement(h),sn(y,h,c),p.head.appendChild(y);break;case"meta":if(S=vE("meta","content",p).get(h+(c.content||""))){for(E=0;E<S.length;E++)if(y=S[E],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(E,1);break t}}y=p.createElement(h),sn(y,h,c),p.head.appendChild(y);break;default:throw Error(r(468,h))}y[pn]=s,Ft(y),h=y}s.stateNode=h}else bE(p,s.type,s.stateNode);else s.stateNode=yE(p,h,s.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?bE(p,s.type,s.stateNode):yE(p,h,s.memoizedProps)):h===null&&s.stateNode!==null&&H0(s,s.memoizedProps,c.memoizedProps)}break;case 27:Zn(o,s),Jn(s),h&512&&(At||c===null||zr(c,c.return)),c!==null&&h&4&&H0(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Zn(o,s),Jn(s),h&512&&(At||c===null||zr(c,c.return)),s.flags&32){p=s.stateNode;try{za(p,"")}catch(z){rt(s,s.return,z)}}h&4&&s.stateNode!=null&&(p=s.memoizedProps,H0(s,p,c!==null?c.memoizedProps:p)),h&1024&&(Y0=!0);break;case 6:if(Zn(o,s),Jn(s),h&4){if(s.stateNode===null)throw Error(r(162));h=s.memoizedProps,c=s.stateNode;try{c.nodeValue=h}catch(z){rt(s,s.return,z)}}break;case 3:if(rm=null,p=Ar,Ar=tm(o.containerInfo),Zn(o,s),Ar=p,Jn(s),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Nu(o.containerInfo)}catch(z){rt(s,s.return,z)}Y0&&(Y0=!1,EC(s));break;case 4:h=Ar,Ar=tm(s.stateNode.containerInfo),Zn(o,s),Jn(s),Ar=h;break;case 12:Zn(o,s),Jn(s);break;case 13:Zn(o,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(tv=Ur()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,K0(s,h)));break;case 22:p=s.memoizedState!==null;var D=c!==null&&c.memoizedState!==null,U=ki,G=At;if(ki=U||p,At=G||D,Zn(o,s),At=G,ki=U,Jn(s),h&8192)e:for(o=s.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(c===null||D||ki||At||So(s)),c=null,o=s;;){if(o.tag===5||o.tag===26){if(c===null){D=c=o;try{if(y=D.stateNode,p)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{E=D.stateNode;var K=D.memoizedProps.style,V=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(z){rt(D,D.return,z)}}}else if(o.tag===6){if(c===null){D=o;try{D.stateNode.nodeValue=p?"":D.memoizedProps}catch(z){rt(D,D.return,z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,K0(s,c))));break;case 19:Zn(o,s),Jn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,K0(s,h)));break;case 30:break;case 21:break;default:Zn(o,s),Jn(s)}}function Jn(s){var o=s.flags;if(o&2){try{for(var c,h=s.return;h!==null;){if(yC(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var p=c.stateNode,y=G0(s);$f(s,y,p);break;case 5:var S=c.stateNode;c.flags&32&&(za(S,""),c.flags&=-33);var E=G0(s);$f(s,E,S);break;case 3:case 4:var D=c.stateNode.containerInfo,U=G0(s);W0(s,U,D);break;default:throw Error(r(161))}}catch(G){rt(s,s.return,G)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function EC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;EC(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function as(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)wC(s,o.alternate,o),o=o.sibling}function So(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:os(4,o,o.return),So(o);break;case 1:zr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&pC(o,o.return,c),So(o);break;case 27:ku(o.stateNode);case 26:case 5:zr(o,o.return),So(o);break;case 22:o.memoizedState===null&&So(o);break;case 30:So(o);break;default:So(o)}s=s.sibling}}function ls(s,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,p=s,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:ls(p,y,c),gu(4,y);break;case 1:if(ls(p,y,c),h=y,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){rt(h,h.return,U)}if(h=y,p=h.updateQueue,p!==null){var E=h.stateNode;try{var D=p.shared.hiddenCallbacks;if(D!==null)for(p.shared.hiddenCallbacks=null,p=0;p<D.length;p++)eS(D[p],E)}catch(U){rt(h,h.return,U)}}c&&S&64&&mC(y),yu(y,y.return);break;case 27:vC(y);case 26:case 5:ls(p,y,c),c&&h===null&&S&4&&gC(y),yu(y,y.return);break;case 12:ls(p,y,c);break;case 13:ls(p,y,c),c&&S&4&&SC(p,y);break;case 22:y.memoizedState===null&&ls(p,y,c),yu(y,y.return);break;case 30:break;default:ls(p,y,c)}o=o.sibling}}function Q0(s,o){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&nu(c))}function X0(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&nu(s))}function $r(s,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kC(s,o,c,h),o=o.sibling}function kC(s,o,c,h){var p=o.flags;switch(o.tag){case 0:case 11:case 15:$r(s,o,c,h),p&2048&&gu(9,o);break;case 1:$r(s,o,c,h);break;case 3:$r(s,o,c,h),p&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&nu(s)));break;case 12:if(p&2048){$r(s,o,c,h),s=o.stateNode;try{var y=o.memoizedProps,S=y.id,E=y.onPostCommit;typeof E=="function"&&E(S,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){rt(o,o.return,D)}}else $r(s,o,c,h);break;case 13:$r(s,o,c,h);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?$r(s,o,c,h):vu(s,o):y._visibility&2?$r(s,o,c,h):(y._visibility|=2,ol(s,o,c,h,(o.subtreeFlags&10256)!==0)),p&2048&&Q0(S,o);break;case 24:$r(s,o,c,h),p&2048&&X0(o.alternate,o);break;default:$r(s,o,c,h)}}function ol(s,o,c,h,p){for(p=p&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=s,S=o,E=c,D=h,U=S.flags;switch(S.tag){case 0:case 11:case 15:ol(y,S,E,D,p),gu(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?ol(y,S,E,D,p):vu(y,S):(G._visibility|=2,ol(y,S,E,D,p)),p&&U&2048&&Q0(S.alternate,S);break;case 24:ol(y,S,E,D,p),p&&U&2048&&X0(S.alternate,S);break;default:ol(y,S,E,D,p)}o=o.sibling}}function vu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=s,h=o,p=h.flags;switch(h.tag){case 22:vu(c,h),p&2048&&Q0(h.alternate,h);break;case 24:vu(c,h),p&2048&&X0(h.alternate,h);break;default:vu(c,h)}o=o.sibling}}var bu=8192;function al(s){if(s.subtreeFlags&bu)for(s=s.child;s!==null;)AC(s),s=s.sibling}function AC(s){switch(s.tag){case 26:al(s),s.flags&bu&&s.memoizedState!==null&&b8(Ar,s.memoizedState,s.memoizedProps);break;case 5:al(s);break;case 3:case 4:var o=Ar;Ar=tm(s.stateNode.containerInfo),al(s),Ar=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=bu,bu=16777216,al(s),bu=o):al(s));break;default:al(s)}}function _C(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function wu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ht=h,DC(h,s)}_C(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)jC(s),s=s.sibling}function jC(s){switch(s.tag){case 0:case 11:case 15:wu(s),s.flags&2048&&os(9,s,s.return);break;case 3:wu(s);break;case 12:wu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Ff(s)):wu(s);break;default:wu(s)}}function Ff(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ht=h,DC(h,s)}_C(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:os(8,o,o.return),Ff(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ff(o));break;default:Ff(o)}s=s.sibling}}function DC(s,o){for(;Ht!==null;){var c=Ht;switch(c.tag){case 0:case 11:case 15:os(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:nu(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Ht=h;else e:for(c=s;Ht!==null;){h=Ht;var p=h.sibling,y=h.return;if(xC(h),h===c){Ht=null;break e}if(p!==null){p.return=y,Ht=p;break e}Ht=y}}}var L9={getCacheForType:function(s){var o=gn(Ut),c=o.data.get(s);return c===void 0&&(c=s(),o.data.set(s,c)),c}},O9=typeof WeakMap=="function"?WeakMap:Map,Ke=0,ot=null,Ne=null,Pe=0,Qe=0,er=null,cs=!1,ll=!1,Z0=!1,_i=0,wt=0,us=0,Co=0,J0=0,pr=0,cl=0,xu=null,On=null,ev=!1,tv=0,qf=1/0,Hf=null,ds=null,rn=0,hs=null,ul=null,dl=0,nv=0,rv=null,IC=null,Tu=0,iv=null;function tr(){if((Ke&2)!==0&&Pe!==0)return Pe&-Pe;if(H.T!==null){var s=Za;return s!==0?s:dv()}return W5()}function RC(){pr===0&&(pr=(Pe&536870912)===0||He?F5():536870912);var s=mr.current;return s!==null&&(s.flags|=32),pr}function nr(s,o,c){(s===ot&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)&&(hl(s,0),fs(s,Pe,pr,!1)),Bc(s,c),((Ke&2)===0||s!==ot)&&(s===ot&&((Ke&2)===0&&(Co|=c),wt===4&&fs(s,Pe,pr,!1)),Fr(s))}function MC(s,o,c){if((Ke&6)!==0)throw Error(r(327));var h=!c&&(o&124)===0&&(o&s.expiredLanes)===0||Vc(s,o),p=h?V9(s,o):av(s,o,!0),y=h;do{if(p===0){ll&&!h&&fs(s,o,0,!1);break}else{if(c=s.current.alternate,y&&!P9(c)){p=av(s,o,!1),y=!1;continue}if(p===2){if(y=o,s.errorRecoveryDisabledLanes&y)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var E=s;p=xu;var D=E.current.memoizedState.isDehydrated;if(D&&(hl(E,S).flags|=256),S=av(E,S,!1),S!==2){if(Z0&&!D){E.errorRecoveryDisabledLanes|=y,Co|=y,p=4;break e}y=On,On=p,y!==null&&(On===null?On=y:On.push.apply(On,y))}p=S}if(y=!1,p!==2)continue}}if(p===1){hl(s,0),fs(s,o,0,!0);break}e:{switch(h=s,y=p,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:fs(h,o,pr,!cs);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(p=tv+300-Ur(),10<p)){if(fs(h,o,pr,!cs),tf(h,0,!0)!==0)break e;h.timeoutHandle=lE(NC.bind(null,h,c,On,Hf,ev,o,pr,Co,cl,cs,y,2,-0,0),p);break e}NC(h,c,On,Hf,ev,o,pr,Co,cl,cs,y,0,-0,0)}}break}while(!0);Fr(s)}function NC(s,o,c,h,p,y,S,E,D,U,G,K,V,z){if(s.timeoutHandle=-1,K=o.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ju={stylesheets:null,count:0,unsuspend:v8},AC(o),K=w8(),K!==null)){s.cancelPendingCommit=K(zC.bind(null,s,o,y,c,h,p,S,E,D,G,1,V,z)),fs(s,y,S,!U);return}zC(s,o,y,c,h,p,S,E,D)}function P9(s){for(var o=s;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var p=c[h],y=p.getSnapshot;p=p.value;try{if(!Qn(y(),p))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(s,o,c,h){o&=~J0,o&=~Co,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var p=o;0<p;){var y=31-Kn(p),S=1<<y;h[y]=-1,p&=~S}c!==0&&H5(s,c,o)}function Gf(){return(Ke&6)===0?(Su(0),!1):!0}function sv(){if(Ne!==null){if(Qe===0)var s=Ne.return;else s=Ne,wi=vo=null,T0(s),il=null,fu=0,s=Ne;for(;s!==null;)fC(s.alternate,s),s=s.return;Ne=null}}function hl(s,o){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,t8(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),sv(),ot=s,Ne=c=yi(s.current,null),Pe=o,Qe=0,er=null,cs=!1,ll=Vc(s,o),Z0=!1,cl=pr=J0=Co=us=wt=0,On=xu=null,ev=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var p=31-Kn(h),y=1<<p;o|=s[p],h&=~y}return _i=o,mf(),c}function LC(s,o){Re=null,H.H=Mf,o===iu||o===Sf?(o=ZT(),Qe=3):o===KT?(o=ZT(),Qe=4):Qe=o===JS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,er=o,Ne===null&&(wt=1,Uf(s,ur(o,s.current)))}function OC(){var s=H.H;return H.H=Mf,s===null?Mf:s}function PC(){var s=H.A;return H.A=L9,s}function ov(){wt=4,cs||(Pe&4194048)!==Pe&&mr.current!==null||(ll=!0),(us&134217727)===0&&(Co&134217727)===0||ot===null||fs(ot,Pe,pr,!1)}function av(s,o,c){var h=Ke;Ke|=2;var p=OC(),y=PC();(ot!==s||Pe!==o)&&(Hf=null,hl(s,o)),o=!1;var S=wt;e:do try{if(Qe!==0&&Ne!==null){var E=Ne,D=er;switch(Qe){case 8:sv(),S=6;break e;case 3:case 2:case 9:case 6:mr.current===null&&(o=!0);var U=Qe;if(Qe=0,er=null,fl(s,E,D,U),c&&ll){S=0;break e}break;default:U=Qe,Qe=0,er=null,fl(s,E,D,U)}}U9(),S=wt;break}catch(G){LC(s,G)}while(!0);return o&&s.shellSuspendCounter++,wi=vo=null,Ke=h,H.H=p,H.A=y,Ne===null&&(ot=null,Pe=0,mf()),S}function U9(){for(;Ne!==null;)UC(Ne)}function V9(s,o){var c=Ke;Ke|=2;var h=OC(),p=PC();ot!==s||Pe!==o?(Hf=null,qf=Ur()+500,hl(s,o)):ll=Vc(s,o);e:do try{if(Qe!==0&&Ne!==null){o=Ne;var y=er;t:switch(Qe){case 1:Qe=0,er=null,fl(s,o,y,1);break;case 2:case 9:if(QT(y)){Qe=0,er=null,VC(o);break}o=function(){Qe!==2&&Qe!==9||ot!==s||(Qe=7),Fr(s)},y.then(o,o);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:QT(y)?(Qe=0,er=null,VC(o)):(Qe=0,er=null,fl(s,o,y,7));break;case 5:var S=null;switch(Ne.tag){case 26:S=Ne.memoizedState;case 5:case 27:var E=Ne;if(!S||wE(S)){Qe=0,er=null;var D=E.sibling;if(D!==null)Ne=D;else{var U=E.return;U!==null?(Ne=U,Wf(U)):Ne=null}break t}}Qe=0,er=null,fl(s,o,y,5);break;case 6:Qe=0,er=null,fl(s,o,y,6);break;case 8:sv(),wt=6;break e;default:throw Error(r(462))}}B9();break}catch(G){LC(s,G)}while(!0);return wi=vo=null,H.H=h,H.A=p,Ke=c,Ne!==null?0:(ot=null,Pe=0,mf(),wt)}function B9(){for(;Ne!==null&&!lN();)UC(Ne)}function UC(s){var o=dC(s.alternate,s,_i);s.memoizedProps=s.pendingProps,o===null?Wf(s):Ne=o}function VC(s){var o=s,c=o.alternate;switch(o.tag){case 15:case 0:o=sC(c,o,o.pendingProps,o.type,void 0,Pe);break;case 11:o=sC(c,o,o.pendingProps,o.type.render,o.ref,Pe);break;case 5:T0(o);default:fC(c,o),o=Ne=BT(o,_i),o=dC(c,o,_i)}s.memoizedProps=s.pendingProps,o===null?Wf(s):Ne=o}function fl(s,o,c,h){wi=vo=null,T0(o),il=null,fu=0;var p=o.return;try{if(j9(s,p,o,c,Pe)){wt=1,Uf(s,ur(c,s.current)),Ne=null;return}}catch(y){if(p!==null)throw Ne=p,y;wt=1,Uf(s,ur(c,s.current)),Ne=null;return}o.flags&32768?(He||h===1?s=!0:ll||(Pe&536870912)!==0?s=!1:(cs=s=!0,(h===2||h===9||h===3||h===6)&&(h=mr.current,h!==null&&h.tag===13&&(h.flags|=16384))),BC(o,s)):Wf(o)}function Wf(s){var o=s;do{if((o.flags&32768)!==0){BC(o,cs);return}s=o.return;var c=I9(o.alternate,o,_i);if(c!==null){Ne=c;return}if(o=o.sibling,o!==null){Ne=o;return}Ne=o=s}while(o!==null);wt===0&&(wt=5)}function BC(s,o){do{var c=R9(s.alternate,s);if(c!==null){c.flags&=32767,Ne=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(s=s.sibling,s!==null)){Ne=s;return}Ne=s=c}while(s!==null);wt=6,Ne=null}function zC(s,o,c,h,p,y,S,E,D){s.cancelPendingCommit=null;do Yf();while(rn!==0);if((Ke&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=Xy,vN(s,c,y,S,E,D),s===ot&&(Ne=ot=null,Pe=0),ul=o,hs=s,dl=c,nv=y,rv=p,IC=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,q9(Zh,function(){return GC(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,p=W.p,W.p=2,S=Ke,Ke|=4;try{M9(s,o,c)}finally{Ke=S,W.p=p,H.T=h}}rn=1,$C(),FC(),qC()}}function $C(){if(rn===1){rn=0;var s=hs,o=ul,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var h=W.p;W.p=2;var p=Ke;Ke|=4;try{CC(o,s);var y=bv,S=DT(s.containerInfo),E=y.focusedElem,D=y.selectionRange;if(S!==E&&E&&E.ownerDocument&&jT(E.ownerDocument.documentElement,E)){if(D!==null&&Gy(E)){var U=D.start,G=D.end;if(G===void 0&&(G=U),"selectionStart"in E)E.selectionStart=U,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,V=K&&K.defaultView||window;if(V.getSelection){var z=V.getSelection(),Te=E.textContent.length,be=Math.min(D.start,Te),tt=D.end===void 0?be:Math.min(D.end,Te);!z.extend&&be>tt&&(S=tt,tt=be,be=S);var O=_T(E,be),N=_T(E,tt);if(O&&N&&(z.rangeCount!==1||z.anchorNode!==O.node||z.anchorOffset!==O.offset||z.focusNode!==N.node||z.focusOffset!==N.offset)){var P=K.createRange();P.setStart(O.node,O.offset),z.removeAllRanges(),be>tt?(z.addRange(P),z.extend(N.node,N.offset)):(P.setEnd(N.node,N.offset),z.addRange(P))}}}}for(K=[],z=E;z=z.parentNode;)z.nodeType===1&&K.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var Y=K[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}om=!!vv,bv=vv=null}finally{Ke=p,W.p=h,H.T=c}}s.current=o,rn=2}}function FC(){if(rn===2){rn=0;var s=hs,o=ul,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var h=W.p;W.p=2;var p=Ke;Ke|=4;try{wC(s,o.alternate,o)}finally{Ke=p,W.p=h,H.T=c}}rn=3}}function qC(){if(rn===4||rn===3){rn=0,cN();var s=hs,o=ul,c=dl,h=IC;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?rn=5:(rn=0,ul=hs=null,HC(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(ds=null),Ey(c),o=o.stateNode,Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Uc,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=H.T,p=W.p,W.p=2,H.T=null;try{for(var y=s.onRecoverableError,S=0;S<h.length;S++){var E=h[S];y(E.value,{componentStack:E.stack})}}finally{H.T=o,W.p=p}}(dl&3)!==0&&Yf(),Fr(s),p=s.pendingLanes,(c&4194090)!==0&&(p&42)!==0?s===iv?Tu++:(Tu=0,iv=s):Tu=0,Su(0)}}function HC(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,nu(o)))}function Yf(s){return $C(),FC(),qC(),GC()}function GC(){if(rn!==5)return!1;var s=hs,o=nv;nv=0;var c=Ey(dl),h=H.T,p=W.p;try{W.p=32>c?32:c,H.T=null,c=rv,rv=null;var y=hs,S=dl;if(rn=0,ul=hs=null,dl=0,(Ke&6)!==0)throw Error(r(331));var E=Ke;if(Ke|=4,jC(y.current),kC(y,y.current,S,c),Ke=E,Su(0,!1),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Uc,y)}catch{}return!0}finally{W.p=p,H.T=h,HC(s,o)}}function WC(s,o,c){o=ur(c,o),o=O0(s.stateNode,o,2),s=ns(s,o,2),s!==null&&(Bc(s,2),Fr(s))}function rt(s,o,c){if(s.tag===3)WC(s,s,c);else for(;o!==null;){if(o.tag===3){WC(o,s,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ds===null||!ds.has(h))){s=ur(c,s),c=XS(2),h=ns(o,c,2),h!==null&&(ZS(c,h,o,s),Bc(h,2),Fr(h));break}}o=o.return}}function lv(s,o,c){var h=s.pingCache;if(h===null){h=s.pingCache=new O9;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(c)||(Z0=!0,p.add(c),s=z9.bind(null,s,o,c),o.then(s,s))}function z9(s,o,c){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,ot===s&&(Pe&c)===c&&(wt===4||wt===3&&(Pe&62914560)===Pe&&300>Ur()-tv?(Ke&2)===0&&hl(s,0):J0|=c,cl===Pe&&(cl=0)),Fr(s)}function YC(s,o){o===0&&(o=q5()),s=Ya(s,o),s!==null&&(Bc(s,o),Fr(s))}function $9(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),YC(s,c)}function F9(s,o){var c=0;switch(s.tag){case 13:var h=s.stateNode,p=s.memoizedState;p!==null&&(c=p.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),YC(s,c)}function q9(s,o){return xy(s,o)}var Kf=null,ml=null,cv=!1,Qf=!1,uv=!1,Eo=0;function Fr(s){s!==ml&&s.next===null&&(ml===null?Kf=ml=s:ml=ml.next=s),Qf=!0,cv||(cv=!0,G9())}function Su(s,o){if(!uv&&Qf){uv=!0;do for(var c=!1,h=Kf;h!==null;){if(s!==0){var p=h.pendingLanes;if(p===0)var y=0;else{var S=h.suspendedLanes,E=h.pingedLanes;y=(1<<31-Kn(42|s)+1)-1,y&=p&~(S&~E),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,ZC(h,y))}else y=Pe,y=tf(h,h===ot?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||Vc(h,y)||(c=!0,ZC(h,y));h=h.next}while(c);uv=!1}}function H9(){KC()}function KC(){Qf=cv=!1;var s=0;Eo!==0&&(e8()&&(s=Eo),Eo=0);for(var o=Ur(),c=null,h=Kf;h!==null;){var p=h.next,y=QC(h,o);y===0?(h.next=null,c===null?Kf=p:c.next=p,p===null&&(ml=c)):(c=h,(s!==0||(y&3)!==0)&&(Qf=!0)),h=p}Su(s)}function QC(s,o){for(var c=s.suspendedLanes,h=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var S=31-Kn(y),E=1<<S,D=p[S];D===-1?((E&c)===0||(E&h)!==0)&&(p[S]=yN(E,o)):D<=o&&(s.expiredLanes|=E),y&=~E}if(o=ot,c=Pe,c=tf(s,s===o?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,c===0||s===o&&(Qe===2||Qe===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ty(h),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Vc(s,c)){if(o=c&-c,o===s.callbackPriority)return o;switch(h!==null&&Ty(h),Ey(c)){case 2:case 8:c=z5;break;case 32:c=Zh;break;case 268435456:c=$5;break;default:c=Zh}return h=XC.bind(null,s),c=xy(c,h),s.callbackPriority=o,s.callbackNode=c,o}return h!==null&&h!==null&&Ty(h),s.callbackPriority=2,s.callbackNode=null,2}function XC(s,o){if(rn!==0&&rn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Yf()&&s.callbackNode!==c)return null;var h=Pe;return h=tf(s,s===ot?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(MC(s,h,o),QC(s,Ur()),s.callbackNode!=null&&s.callbackNode===c?XC.bind(null,s):null)}function ZC(s,o){if(Yf())return null;MC(s,o,!0)}function G9(){n8(function(){(Ke&6)!==0?xy(B5,H9):KC()})}function dv(){return Eo===0&&(Eo=F5()),Eo}function JC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:af(""+s)}function eE(s,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,s.id&&c.setAttribute("form",s.id),o.parentNode.insertBefore(c,o),s=new FormData(s),c.parentNode.removeChild(c),s}function W9(s,o,c,h,p){if(o==="submit"&&c&&c.stateNode===p){var y=JC((p[Rn]||null).action),S=h.submitter;S&&(o=(o=S[Rn]||null)?JC(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var E=new df("action","action",null,h,p);s.push({event:E,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Eo!==0){var D=S?eE(p,S):new FormData(p);I0(c,{pending:!0,data:D,method:p.method,action:y},null,D)}}else typeof y=="function"&&(E.preventDefault(),D=S?eE(p,S):new FormData(p),I0(c,{pending:!0,data:D,method:p.method,action:y},y,D))},currentTarget:p}]})}}for(var hv=0;hv<Qy.length;hv++){var fv=Qy[hv],Y9=fv.toLowerCase(),K9=fv[0].toUpperCase()+fv.slice(1);kr(Y9,"on"+K9)}kr(MT,"onAnimationEnd"),kr(NT,"onAnimationIteration"),kr(LT,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(h9,"onTransitionRun"),kr(f9,"onTransitionStart"),kr(m9,"onTransitionCancel"),kr(OT,"onTransitionEnd"),Ua("onMouseEnter",["mouseout","mouseover"]),Ua("onMouseLeave",["mouseout","mouseover"]),Ua("onPointerEnter",["pointerout","pointerover"]),Ua("onPointerLeave",["pointerout","pointerover"]),lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lo("onBeforeInput",["compositionend","keypress","textInput","paste"]),lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cu));function tE(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var h=s[c],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var S=h.length-1;0<=S;S--){var E=h[S],D=E.instance,U=E.currentTarget;if(E=E.listener,D!==y&&p.isPropagationStopped())break e;y=E,p.currentTarget=U;try{y(p)}catch(G){Pf(G)}p.currentTarget=null,y=D}else for(S=0;S<h.length;S++){if(E=h[S],D=E.instance,U=E.currentTarget,E=E.listener,D!==y&&p.isPropagationStopped())break e;y=E,p.currentTarget=U;try{y(p)}catch(G){Pf(G)}p.currentTarget=null,y=D}}}}function Le(s,o){var c=o[ky];c===void 0&&(c=o[ky]=new Set);var h=s+"__bubble";c.has(h)||(nE(o,s,2,!1),c.add(h))}function mv(s,o,c){var h=0;o&&(h|=4),nE(c,s,h,o)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function pv(s){if(!s[Xf]){s[Xf]=!0,K5.forEach(function(c){c!=="selectionchange"&&(Q9.has(c)||mv(c,!1,s),mv(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Xf]||(o[Xf]=!0,mv("selectionchange",!1,o))}}function nE(s,o,c,h){switch(kE(o)){case 2:var p=S8;break;case 8:p=C8;break;default:p=jv}c=p.bind(null,o,c,s),p=void 0,!Py||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?s.addEventListener(o,c,{capture:!0,passive:p}):s.addEventListener(o,c,!0):p!==void 0?s.addEventListener(o,c,{passive:p}):s.addEventListener(o,c,!1)}function gv(s,o,c,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var E=h.stateNode.containerInfo;if(E===p)break;if(S===4)for(S=h.return;S!==null;){var D=S.tag;if((D===3||D===4)&&S.stateNode.containerInfo===p)return;S=S.return}for(;E!==null;){if(S=La(E),S===null)return;if(D=S.tag,D===5||D===6||D===26||D===27){h=y=S;continue e}E=E.parentNode}}h=h.return}cT(function(){var U=y,G=Ly(c),K=[];e:{var V=PT.get(s);if(V!==void 0){var z=df,Te=s;switch(s){case"keypress":if(cf(c)===0)break e;case"keydown":case"keyup":z=qN;break;case"focusin":Te="focus",z=zy;break;case"focusout":Te="blur",z=zy;break;case"beforeblur":case"afterblur":z=zy;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=hT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=RN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=WN;break;case MT:case NT:case LT:z=LN;break;case OT:z=KN;break;case"scroll":case"scrollend":z=DN;break;case"wheel":z=XN;break;case"copy":case"cut":case"paste":z=PN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=mT;break;case"toggle":case"beforetoggle":z=JN}var be=(o&4)!==0,tt=!be&&(s==="scroll"||s==="scrollend"),O=be?V!==null?V+"Capture":null:V;be=[];for(var N=U,P;N!==null;){var Y=N;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||O===null||(Y=Fc(N,O),Y!=null&&be.push(Eu(N,Y,P))),tt)break;N=N.return}0<be.length&&(V=new z(V,Te,null,c,G),K.push({event:V,listeners:be}))}}if((o&7)===0){e:{if(V=s==="mouseover"||s==="pointerover",z=s==="mouseout"||s==="pointerout",V&&c!==Ny&&(Te=c.relatedTarget||c.fromElement)&&(La(Te)||Te[Na]))break e;if((z||V)&&(V=G.window===G?G:(V=G.ownerDocument)?V.defaultView||V.parentWindow:window,z?(Te=c.relatedTarget||c.toElement,z=U,Te=Te?La(Te):null,Te!==null&&(tt=a(Te),be=Te.tag,Te!==tt||be!==5&&be!==27&&be!==6)&&(Te=null)):(z=null,Te=U),z!==Te)){if(be=hT,Y="onMouseLeave",O="onMouseEnter",N="mouse",(s==="pointerout"||s==="pointerover")&&(be=mT,Y="onPointerLeave",O="onPointerEnter",N="pointer"),tt=z==null?V:$c(z),P=Te==null?V:$c(Te),V=new be(Y,N+"leave",z,c,G),V.target=tt,V.relatedTarget=P,Y=null,La(G)===U&&(be=new be(O,N+"enter",Te,c,G),be.target=P,be.relatedTarget=tt,Y=be),tt=Y,z&&Te)t:{for(be=z,O=Te,N=0,P=be;P;P=pl(P))N++;for(P=0,Y=O;Y;Y=pl(Y))P++;for(;0<N-P;)be=pl(be),N--;for(;0<P-N;)O=pl(O),P--;for(;N--;){if(be===O||O!==null&&be===O.alternate)break t;be=pl(be),O=pl(O)}be=null}else be=null;z!==null&&rE(K,V,z,be,!1),Te!==null&&tt!==null&&rE(K,tt,Te,be,!0)}}e:{if(V=U?$c(U):window,z=V.nodeName&&V.nodeName.toLowerCase(),z==="select"||z==="input"&&V.type==="file")var de=TT;else if(wT(V))if(ST)de=c9;else{de=a9;var Me=o9}else z=V.nodeName,!z||z.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?U&&My(U.elementType)&&(de=TT):de=l9;if(de&&(de=de(s,U))){xT(K,de,c,G);break e}Me&&Me(s,V,U),s==="focusout"&&U&&V.type==="number"&&U.memoizedProps.value!=null&&Ry(V,"number",V.value)}switch(Me=U?$c(U):window,s){case"focusin":(wT(Me)||Me.contentEditable==="true")&&(Ha=Me,Wy=U,Xc=null);break;case"focusout":Xc=Wy=Ha=null;break;case"mousedown":Yy=!0;break;case"contextmenu":case"mouseup":case"dragend":Yy=!1,IT(K,c,G);break;case"selectionchange":if(d9)break;case"keydown":case"keyup":IT(K,c,G)}var pe;if(Fy)e:{switch(s){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else qa?vT(s,c)&&(we="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(we="onCompositionStart");we&&(pT&&c.locale!=="ko"&&(qa||we!=="onCompositionStart"?we==="onCompositionEnd"&&qa&&(pe=uT()):(Zi=G,Uy="value"in Zi?Zi.value:Zi.textContent,qa=!0)),Me=Zf(U,we),0<Me.length&&(we=new fT(we,s,null,c,G),K.push({event:we,listeners:Me}),pe?we.data=pe:(pe=bT(c),pe!==null&&(we.data=pe)))),(pe=t9?n9(s,c):r9(s,c))&&(we=Zf(U,"onBeforeInput"),0<we.length&&(Me=new fT("onBeforeInput","beforeinput",null,c,G),K.push({event:Me,listeners:we}),Me.data=pe)),W9(K,s,U,c,G)}tE(K,o)})}function Eu(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Zf(s,o){for(var c=o+"Capture",h=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Fc(s,c),p!=null&&h.unshift(Eu(s,p,y)),p=Fc(s,o),p!=null&&h.push(Eu(s,p,y))),s.tag===3)return h;s=s.return}return[]}function pl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rE(s,o,c,h,p){for(var y=o._reactName,S=[];c!==null&&c!==h;){var E=c,D=E.alternate,U=E.stateNode;if(E=E.tag,D!==null&&D===h)break;E!==5&&E!==26&&E!==27||U===null||(D=U,p?(U=Fc(c,y),U!=null&&S.unshift(Eu(c,U,D))):p||(U=Fc(c,y),U!=null&&S.push(Eu(c,U,D)))),c=c.return}S.length!==0&&s.push({event:o,listeners:S})}var X9=/\r\n?/g,Z9=/\u0000|\uFFFD/g;function iE(s){return(typeof s=="string"?s:""+s).replace(X9,`
`).replace(Z9,"")}function sE(s,o){return o=iE(o),iE(s)===o}function Jf(){}function et(s,o,c,h,p,y){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||za(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&za(s,""+h);break;case"className":rf(s,"class",h);break;case"tabIndex":rf(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":rf(s,c,h);break;case"style":aT(s,h,y);break;case"data":if(o!=="object"){rf(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){s.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=af(""+h),s.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&et(s,o,"name",p.name,p,null),et(s,o,"formEncType",p.formEncType,p,null),et(s,o,"formMethod",p.formMethod,p,null),et(s,o,"formTarget",p.formTarget,p,null)):(et(s,o,"encType",p.encType,p,null),et(s,o,"method",p.method,p,null),et(s,o,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(c);break}h=af(""+h),s.setAttribute(c,h);break;case"onClick":h!=null&&(s.onclick=Jf);break;case"onScroll":h!=null&&Le("scroll",s);break;case"onScrollEnd":h!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}c=af(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""+h):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":h===!0?s.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(c,h):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(c,h):s.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(c):s.setAttribute(c,h);break;case"popover":Le("beforetoggle",s),Le("toggle",s),nf(s,"popover",h);break;case"xlinkActuate":pi(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":pi(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":pi(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":pi(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":pi(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":pi(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":pi(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":pi(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":pi(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":nf(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=_N.get(c)||c,nf(s,c,h))}}function yv(s,o,c,h,p,y){switch(c){case"style":aT(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(p.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof h=="string"?za(s,h):(typeof h=="number"||typeof h=="bigint")&&za(s,""+h);break;case"onScroll":h!=null&&Le("scroll",s);break;case"onScrollEnd":h!=null&&Le("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Jf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Q5.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(p=c.endsWith("Capture"),o=c.slice(2,p?c.length-7:void 0),y=s[Rn]||null,y=y!=null?y[c]:null,typeof y=="function"&&s.removeEventListener(o,y,p),typeof h=="function")){typeof y!="function"&&y!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(o,h,p);break e}c in s?s[c]=h:h===!0?s.setAttribute(c,""):nf(s,c,h)}}}function sn(s,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var h=!1,p=!1,y;for(y in c)if(c.hasOwnProperty(y)){var S=c[y];if(S!=null)switch(y){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:et(s,o,y,S,c,null)}}p&&et(s,o,"srcSet",c.srcSet,c,null),h&&et(s,o,"src",c.src,c,null);return;case"input":Le("invalid",s);var E=y=S=p=null,D=null,U=null;for(h in c)if(c.hasOwnProperty(h)){var G=c[h];if(G!=null)switch(h){case"name":p=G;break;case"type":S=G;break;case"checked":D=G;break;case"defaultChecked":U=G;break;case"value":y=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,o));break;default:et(s,o,h,G,c,null)}}rT(s,y,E,D,U,S,p,!1),sf(s);return;case"select":Le("invalid",s),h=S=y=null;for(p in c)if(c.hasOwnProperty(p)&&(E=c[p],E!=null))switch(p){case"value":y=E;break;case"defaultValue":S=E;break;case"multiple":h=E;default:et(s,o,p,E,c,null)}o=y,c=S,s.multiple=!!h,o!=null?Ba(s,!!h,o,!1):c!=null&&Ba(s,!!h,c,!0);return;case"textarea":Le("invalid",s),y=p=h=null;for(S in c)if(c.hasOwnProperty(S)&&(E=c[S],E!=null))switch(S){case"value":h=E;break;case"defaultValue":p=E;break;case"children":y=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:et(s,o,S,E,c,null)}sT(s,h,p,y),sf(s);return;case"option":for(D in c)if(c.hasOwnProperty(D)&&(h=c[D],h!=null))switch(D){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:et(s,o,D,h,c,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(h=0;h<Cu.length;h++)Le(Cu[h],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in c)if(c.hasOwnProperty(U)&&(h=c[U],h!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:et(s,o,U,h,c,null)}return;default:if(My(o)){for(G in c)c.hasOwnProperty(G)&&(h=c[G],h!==void 0&&yv(s,o,G,h,c,void 0));return}}for(E in c)c.hasOwnProperty(E)&&(h=c[E],h!=null&&et(s,o,E,h,c,null))}function J9(s,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,S=null,E=null,D=null,U=null,G=null;for(z in c){var K=c[z];if(c.hasOwnProperty(z)&&K!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":D=K;default:h.hasOwnProperty(z)||et(s,o,z,null,h,K)}}for(var V in h){var z=h[V];if(K=c[V],h.hasOwnProperty(V)&&(z!=null||K!=null))switch(V){case"type":y=z;break;case"name":p=z;break;case"checked":U=z;break;case"defaultChecked":G=z;break;case"value":S=z;break;case"defaultValue":E=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,o));break;default:z!==K&&et(s,o,V,z,h,K)}}Iy(s,S,E,D,U,G,y,p);return;case"select":z=S=E=V=null;for(y in c)if(D=c[y],c.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":z=D;default:h.hasOwnProperty(y)||et(s,o,y,null,h,D)}for(p in h)if(y=h[p],D=c[p],h.hasOwnProperty(p)&&(y!=null||D!=null))switch(p){case"value":V=y;break;case"defaultValue":E=y;break;case"multiple":S=y;default:y!==D&&et(s,o,p,y,h,D)}o=E,c=S,h=z,V!=null?Ba(s,!!c,V,!1):!!h!=!!c&&(o!=null?Ba(s,!!c,o,!0):Ba(s,!!c,c?[]:"",!1));return;case"textarea":z=V=null;for(E in c)if(p=c[E],c.hasOwnProperty(E)&&p!=null&&!h.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:et(s,o,E,null,h,p)}for(S in h)if(p=h[S],y=c[S],h.hasOwnProperty(S)&&(p!=null||y!=null))switch(S){case"value":V=p;break;case"defaultValue":z=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==y&&et(s,o,S,p,h,y)}iT(s,V,z);return;case"option":for(var Te in c)if(V=c[Te],c.hasOwnProperty(Te)&&V!=null&&!h.hasOwnProperty(Te))switch(Te){case"selected":s.selected=!1;break;default:et(s,o,Te,null,h,V)}for(D in h)if(V=h[D],z=c[D],h.hasOwnProperty(D)&&V!==z&&(V!=null||z!=null))switch(D){case"selected":s.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:et(s,o,D,V,h,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in c)V=c[be],c.hasOwnProperty(be)&&V!=null&&!h.hasOwnProperty(be)&&et(s,o,be,null,h,V);for(U in h)if(V=h[U],z=c[U],h.hasOwnProperty(U)&&V!==z&&(V!=null||z!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:et(s,o,U,V,h,z)}return;default:if(My(o)){for(var tt in c)V=c[tt],c.hasOwnProperty(tt)&&V!==void 0&&!h.hasOwnProperty(tt)&&yv(s,o,tt,void 0,h,V);for(G in h)V=h[G],z=c[G],!h.hasOwnProperty(G)||V===z||V===void 0&&z===void 0||yv(s,o,G,V,h,z);return}}for(var O in c)V=c[O],c.hasOwnProperty(O)&&V!=null&&!h.hasOwnProperty(O)&&et(s,o,O,null,h,V);for(K in h)V=h[K],z=c[K],!h.hasOwnProperty(K)||V===z||V==null&&z==null||et(s,o,K,V,h,z)}var vv=null,bv=null;function em(s){return s.nodeType===9?s:s.ownerDocument}function oE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function wv(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xv=null;function e8(){var s=window.event;return s&&s.type==="popstate"?s===xv?!1:(xv=s,!0):(xv=null,!1)}var lE=typeof setTimeout=="function"?setTimeout:void 0,t8=typeof clearTimeout=="function"?clearTimeout:void 0,cE=typeof Promise=="function"?Promise:void 0,n8=typeof queueMicrotask=="function"?queueMicrotask:typeof cE<"u"?function(s){return cE.resolve(null).then(s).catch(r8)}:lE;function r8(s){setTimeout(function(){throw s})}function ms(s){return s==="head"}function uE(s,o){var c=o,h=0,p=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<h&&8>h){c=h;var S=s.ownerDocument;if(c&1&&ku(S.documentElement),c&2&&ku(S.body),c&4)for(c=S.head,ku(c),S=c.firstChild;S;){var E=S.nextSibling,D=S.nodeName;S[zc]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=E}}if(p===0){s.removeChild(y),Nu(o);return}p--}else c==="$"||c==="$?"||c==="$!"?p++:h=c.charCodeAt(0)-48;else h=0;c=y}while(c);Nu(o)}function Tv(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Tv(c),Ay(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function i8(s,o,c,h){for(;s.nodeType===1;){var p=c;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[zc])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=_r(s.nextSibling),s===null)break}return null}function s8(s,o,c){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=_r(s.nextSibling),s===null))return null;return s}function Sv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function o8(s,o){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function _r(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var Cv=null;function dE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}function hE(s,o,c){switch(o=em(c),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function ku(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ay(s)}var gr=new Map,fE=new Set;function tm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ji=W.d;W.d={f:a8,r:l8,D:c8,C:u8,L:d8,m:h8,X:m8,S:f8,M:p8};function a8(){var s=ji.f(),o=Gf();return s||o}function l8(s){var o=Oa(s);o!==null&&o.tag===5&&o.type==="form"?MS(o):ji.r(s)}var gl=typeof document>"u"?null:document;function mE(s,o,c){var h=gl;if(h&&typeof o=="string"&&o){var p=cr(o);p='link[rel="'+s+'"][href="'+p+'"]',typeof c=="string"&&(p+='[crossorigin="'+c+'"]'),fE.has(p)||(fE.add(p),s={rel:s,crossOrigin:c,href:o},h.querySelector(p)===null&&(o=h.createElement("link"),sn(o,"link",s),Ft(o),h.head.appendChild(o)))}}function c8(s){ji.D(s),mE("dns-prefetch",s,null)}function u8(s,o){ji.C(s,o),mE("preconnect",s,o)}function d8(s,o,c){ji.L(s,o,c);var h=gl;if(h&&s&&o){var p='link[rel="preload"][as="'+cr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(p+='[imagesrcset="'+cr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(p+='[imagesizes="'+cr(c.imageSizes)+'"]')):p+='[href="'+cr(s)+'"]';var y=p;switch(o){case"style":y=yl(s);break;case"script":y=vl(s)}gr.has(y)||(s=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:s,as:o},c),gr.set(y,s),h.querySelector(p)!==null||o==="style"&&h.querySelector(Au(y))||o==="script"&&h.querySelector(_u(y))||(o=h.createElement("link"),sn(o,"link",s),Ft(o),h.head.appendChild(o)))}}function h8(s,o){ji.m(s,o);var c=gl;if(c&&s){var h=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+cr(h)+'"][href="'+cr(s)+'"]',y=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=vl(s)}if(!gr.has(y)&&(s=g({rel:"modulepreload",href:s},o),gr.set(y,s),c.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(_u(y)))return}h=c.createElement("link"),sn(h,"link",s),Ft(h),c.head.appendChild(h)}}}function f8(s,o,c){ji.S(s,o,c);var h=gl;if(h&&s){var p=Pa(h).hoistableStyles,y=yl(s);o=o||"default";var S=p.get(y);if(!S){var E={loading:0,preload:null};if(S=h.querySelector(Au(y)))E.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":o},c),(c=gr.get(y))&&Ev(s,c);var D=S=h.createElement("link");Ft(D),sn(D,"link",s),D._p=new Promise(function(U,G){D.onload=U,D.onerror=G}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,nm(S,o,h)}S={type:"stylesheet",instance:S,count:1,state:E},p.set(y,S)}}}function m8(s,o){ji.X(s,o);var c=gl;if(c&&s){var h=Pa(c).hoistableScripts,p=vl(s),y=h.get(p);y||(y=c.querySelector(_u(p)),y||(s=g({src:s,async:!0},o),(o=gr.get(p))&&kv(s,o),y=c.createElement("script"),Ft(y),sn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function p8(s,o){ji.M(s,o);var c=gl;if(c&&s){var h=Pa(c).hoistableScripts,p=vl(s),y=h.get(p);y||(y=c.querySelector(_u(p)),y||(s=g({src:s,async:!0,type:"module"},o),(o=gr.get(p))&&kv(s,o),y=c.createElement("script"),Ft(y),sn(y,"link",s),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function pE(s,o,c,h){var p=(p=Ee.current)?tm(p):null;if(!p)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=yl(c.href),c=Pa(p).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=yl(c.href);var y=Pa(p).hoistableStyles,S=y.get(s);if(S||(p=p.ownerDocument||p,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,S),(y=p.querySelector(Au(s)))&&!y._p&&(S.instance=y,S.state.loading=5),gr.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gr.set(s,c),y||g8(p,s,c,S.state))),o&&h===null)throw Error(r(528,""));return S}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=vl(c),c=Pa(p).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function yl(s){return'href="'+cr(s)+'"'}function Au(s){return'link[rel="stylesheet"]['+s+"]"}function gE(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function g8(s,o,c,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),sn(o,"link",c),Ft(o),s.head.appendChild(o))}function vl(s){return'[src="'+cr(s)+'"]'}function _u(s){return"script[async]"+s}function yE(s,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+cr(c.href)+'"]');if(h)return o.instance=h,Ft(h),h;var p=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Ft(h),sn(h,"style",p),nm(h,c.precedence,s),o.instance=h;case"stylesheet":p=yl(c.href);var y=s.querySelector(Au(p));if(y)return o.state.loading|=4,o.instance=y,Ft(y),y;h=gE(c),(p=gr.get(p))&&Ev(h,p),y=(s.ownerDocument||s).createElement("link"),Ft(y);var S=y;return S._p=new Promise(function(E,D){S.onload=E,S.onerror=D}),sn(y,"link",h),o.state.loading|=4,nm(y,c.precedence,s),o.instance=y;case"script":return y=vl(c.src),(p=s.querySelector(_u(y)))?(o.instance=p,Ft(p),p):(h=c,(p=gr.get(y))&&(h=g({},c),kv(h,p)),s=s.ownerDocument||s,p=s.createElement("script"),Ft(p),sn(p,"link",h),s.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,nm(h,c.precedence,s));return o.instance}function nm(s,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,y=p,S=0;S<h.length;S++){var E=h[S];if(E.dataset.precedence===o)y=E;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(s,o.firstChild))}function Ev(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function kv(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var rm=null;function vE(s,o,c){if(rm===null){var h=new Map,p=rm=new Map;p.set(c,h)}else p=rm,h=p.get(c),h||(h=new Map,p.set(c,h));if(h.has(s))return h;for(h.set(s,null),c=c.getElementsByTagName(s),p=0;p<c.length;p++){var y=c[p];if(!(y[zc]||y[pn]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=s+S;var E=h.get(S);E?E.push(y):h.set(S,[y])}}return h}function bE(s,o,c){s=s.ownerDocument||s,s.head.insertBefore(c,o==="title"?s.querySelector("head > title"):null)}function y8(s,o,c){if(c===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function wE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var ju=null;function v8(){}function b8(s,o,c){if(ju===null)throw Error(r(475));var h=ju;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=yl(c.href),y=s.querySelector(Au(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=im.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=y,Ft(y);return}y=s.ownerDocument||s,c=gE(c),(p=gr.get(p))&&Ev(c,p),y=y.createElement("link"),Ft(y);var S=y;S._p=new Promise(function(E,D){S.onload=E,S.onerror=D}),sn(y,"link",c),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=im.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function w8(){if(ju===null)throw Error(r(475));var s=ju;return s.stylesheets&&s.count===0&&Av(s,s.stylesheets),0<s.count?function(o){var c=setTimeout(function(){if(s.stylesheets&&Av(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c)}}:null}function im(){if(this.count--,this.count===0){if(this.stylesheets)Av(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var sm=null;function Av(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,sm=new Map,o.forEach(x8,s),sm=null,im.call(s))}function x8(s,o){if(!(o.state.loading&4)){var c=sm.get(s);if(c)var h=c.get(null);else{c=new Map,sm.set(s,c);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var S=p[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),h=S)}h&&c.set(null,h)}p=o.instance,S=p.getAttribute("data-precedence"),y=c.get(S)||h,y===h&&c.set(null,p),c.set(S,p),this.count++,h=im.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),o.state.loading|=4}}var Du={$$typeof:I,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function T8(s,o,c,h,p,y,S,E){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sy(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sy(0),this.hiddenUpdates=Sy(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function xE(s,o,c,h,p,y,S,E,D,U,G,K){return s=new T8(s,o,c,S,E,D,U,K),o=1,y===!0&&(o|=24),y=Xn(3,null,null,o),s.current=y,y.stateNode=s,o=l0(),o.refCount++,s.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:o},h0(y),s}function TE(s){return s?(s=Ka,s):Ka}function SE(s,o,c,h,p,y){p=TE(p),h.context===null?h.context=p:h.pendingContext=p,h=ts(o),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=ns(s,h,o),c!==null&&(nr(c,s,o),ou(c,s,o))}function CE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function _v(s,o){CE(s,o),(s=s.alternate)&&CE(s,o)}function EE(s){if(s.tag===13){var o=Ya(s,67108864);o!==null&&nr(o,s,67108864),_v(s,67108864)}}var om=!0;function S8(s,o,c,h){var p=H.T;H.T=null;var y=W.p;try{W.p=2,jv(s,o,c,h)}finally{W.p=y,H.T=p}}function C8(s,o,c,h){var p=H.T;H.T=null;var y=W.p;try{W.p=8,jv(s,o,c,h)}finally{W.p=y,H.T=p}}function jv(s,o,c,h){if(om){var p=Dv(h);if(p===null)gv(s,o,h,am,c),AE(s,h);else if(k8(p,s,o,c,h))h.stopPropagation();else if(AE(s,h),o&4&&-1<E8.indexOf(s)){for(;p!==null;){var y=Oa(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=ao(y.pendingLanes);if(S!==0){var E=y;for(E.pendingLanes|=2,E.entangledLanes|=2;S;){var D=1<<31-Kn(S);E.entanglements[1]|=D,S&=~D}Fr(y),(Ke&6)===0&&(qf=Ur()+500,Su(0))}}break;case 13:E=Ya(y,2),E!==null&&nr(E,y,2),Gf(),_v(y,2)}if(y=Dv(h),y===null&&gv(s,o,h,am,c),y===p)break;p=y}p!==null&&h.stopPropagation()}else gv(s,o,h,null,c)}}function Dv(s){return s=Ly(s),Iv(s)}var am=null;function Iv(s){if(am=null,s=La(s),s!==null){var o=a(s);if(o===null)s=null;else{var c=o.tag;if(c===13){if(s=l(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return am=s,null}function kE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(uN()){case B5:return 2;case z5:return 8;case Zh:case dN:return 32;case $5:return 268435456;default:return 32}default:return 32}}var Rv=!1,ps=null,gs=null,ys=null,Iu=new Map,Ru=new Map,vs=[],E8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AE(s,o){switch(s){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Iu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(o.pointerId)}}function Mu(s,o,c,h,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Oa(o),o!==null&&EE(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function k8(s,o,c,h,p){switch(o){case"focusin":return ps=Mu(ps,s,o,c,h,p),!0;case"dragenter":return gs=Mu(gs,s,o,c,h,p),!0;case"mouseover":return ys=Mu(ys,s,o,c,h,p),!0;case"pointerover":var y=p.pointerId;return Iu.set(y,Mu(Iu.get(y)||null,s,o,c,h,p)),!0;case"gotpointercapture":return y=p.pointerId,Ru.set(y,Mu(Ru.get(y)||null,s,o,c,h,p)),!0}return!1}function _E(s){var o=La(s.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){s.blockedOn=o,bN(s.priority,function(){if(c.tag===13){var h=tr();h=Cy(h);var p=Ya(c,h);p!==null&&nr(p,c,h),_v(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function lm(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=Dv(s.nativeEvent);if(c===null){c=s.nativeEvent;var h=new c.constructor(c.type,c);Ny=h,c.target.dispatchEvent(h),Ny=null}else return o=Oa(c),o!==null&&EE(o),s.blockedOn=c,!1;o.shift()}return!0}function jE(s,o,c){lm(s)&&c.delete(o)}function A8(){Rv=!1,ps!==null&&lm(ps)&&(ps=null),gs!==null&&lm(gs)&&(gs=null),ys!==null&&lm(ys)&&(ys=null),Iu.forEach(jE),Ru.forEach(jE)}function cm(s,o){s.blockedOn===o&&(s.blockedOn=null,Rv||(Rv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,A8)))}var um=null;function DE(s){um!==s&&(um=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){um===s&&(um=null);for(var o=0;o<s.length;o+=3){var c=s[o],h=s[o+1],p=s[o+2];if(typeof h!="function"){if(Iv(h||c)===null)continue;break}var y=Oa(c);y!==null&&(s.splice(o,3),o-=3,I0(y,{pending:!0,data:p,method:c.method,action:h},h,p))}}))}function Nu(s){function o(D){return cm(D,s)}ps!==null&&cm(ps,s),gs!==null&&cm(gs,s),ys!==null&&cm(ys,s),Iu.forEach(o),Ru.forEach(o);for(var c=0;c<vs.length;c++){var h=vs[c];h.blockedOn===s&&(h.blockedOn=null)}for(;0<vs.length&&(c=vs[0],c.blockedOn===null);)_E(c),c.blockedOn===null&&vs.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var p=c[h],y=c[h+1],S=p[Rn]||null;if(typeof y=="function")S||DE(c);else if(S){var E=null;if(y&&y.hasAttribute("formAction")){if(p=y,S=y[Rn]||null)E=S.formAction;else if(Iv(p)!==null)continue}else E=S.action;typeof E=="function"?c[h+1]=E:(c.splice(h,3),h-=3),DE(c)}}}function Mv(s){this._internalRoot=s}dm.prototype.render=Mv.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=tr();SE(c,h,s,o,null,null)},dm.prototype.unmount=Mv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;SE(s.current,2,null,s,null,null),Gf(),o[Na]=null}};function dm(s){this._internalRoot=s}dm.prototype.unstable_scheduleHydration=function(s){if(s){var o=W5();s={blockedOn:null,target:s,priority:o};for(var c=0;c<vs.length&&o!==0&&o<vs[c].priority;c++);vs.splice(c,0,s),c===0&&_E(s)}};var IE=e.version;if(IE!=="19.1.0")throw Error(r(527,IE,"19.1.0"));W.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(o),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var _8={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hm.isDisabled&&hm.supportsFiber)try{Uc=hm.inject(_8),Yn=hm}catch{}}return Ou.createRoot=function(s,o){if(!i(s))throw Error(r(299));var c=!1,h="",p=WS,y=YS,S=KS,E=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(E=o.unstable_transitionCallbacks)),o=xE(s,1,!1,null,null,c,h,p,y,S,E,null),s[Na]=o.current,pv(s),new Mv(o)},Ou.hydrateRoot=function(s,o,c){if(!i(s))throw Error(r(299));var h=!1,p="",y=WS,S=YS,E=KS,D=null,U=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(E=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(D=c.unstable_transitionCallbacks),c.formState!==void 0&&(U=c.formState)),o=xE(s,1,!0,o,c??null,h,p,y,S,E,D,U),o.context=TE(null),c=o.current,h=tr(),h=Cy(h),p=ts(h),p.callback=null,ns(c,p,h),c=h,o.current.lanes=c,Bc(o,c),Fr(o),s[Na]=o.current,pv(s),new dm(o)},Ou.version="19.1.0",Ou}var $E;function V8(){if($E)return Ov.exports;$E=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ov.exports=U8(),Ov.exports}var B8=V8();const z8=Zj(B8);var Pu={},FE;function $8(){if(FE)return Pu;FE=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.parse=l,Pu.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function l(w,x){const T=new a,C=w.length;if(C<2)return T;const A=(x==null?void 0:x.decode)||g;let _=0;do{const L=w.indexOf("=",_);if(L===-1)break;const I=w.indexOf(";",_),q=I===-1?C:I;if(L>q){_=w.lastIndexOf(";",L-1)+1;continue}const j=d(w,_,L),M=f(w,L,j),$=w.slice(j,M);if(T[$]===void 0){let Q=d(w,L+1,q),ie=f(w,q,Q);const he=A(w.slice(Q,ie));T[$]=he}_=q+1}while(_<C);return T}function d(w,x,T){do{const C=w.charCodeAt(x);if(C!==32&&C!==9)return x}while(++x<T);return T}function f(w,x,T){for(;x>T;){const C=w.charCodeAt(--x);if(C!==32&&C!==9)return x+1}return T}function m(w,x,T){const C=(T==null?void 0:T.encode)||encodeURIComponent;if(!t.test(w))throw new TypeError(`argument name is invalid: ${w}`);const A=C(x);if(!e.test(A))throw new TypeError(`argument val is invalid: ${x}`);let _=w+"="+A;if(!T)return _;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);_+="; Max-Age="+T.maxAge}if(T.domain){if(!n.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);_+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);_+="; Path="+T.path}if(T.expires){if(!v(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);_+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(_+="; HttpOnly"),T.secure&&(_+="; Secure"),T.partitioned&&(_+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return _}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return i.call(w)==="[object Date]"}return Pu}$8();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qE="popstate";function F8(t={}){function e(r,i){let{pathname:a,search:l,hash:d}=r.location;return Sb("",{pathname:a,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Dd(i)}return H8(e,n,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q8(){return Math.random().toString(36).substring(2,10)}function HE(t,e){return{usr:t.state,key:t.key,idx:e}}function Sb(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yc(e):e,state:n,key:e&&e.key||r||q8()}}function Dd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function yc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function H8(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",f=null,m=g();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function g(){return(l.state||{idx:null}).idx}function v(){d="POP";let A=g(),_=A==null?null:A-m;m=A,f&&f({action:d,location:C.location,delta:_})}function w(A,_){d="PUSH";let L=Sb(C.location,A,_);m=g()+1;let I=HE(L,m),q=C.createHref(L);try{l.pushState(I,"",q)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(q)}a&&f&&f({action:d,location:C.location,delta:1})}function x(A,_){d="REPLACE";let L=Sb(C.location,A,_);m=g();let I=HE(L,m),q=C.createHref(L);l.replaceState(I,"",q),a&&f&&f({action:d,location:C.location,delta:0})}function T(A){let _=i.location.origin!=="null"?i.location.origin:i.location.href,L=typeof A=="string"?A:Dd(A);return L=L.replace(/ $/,"%20"),mt(_,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,_)}let C={get action(){return d},get location(){return t(i,l)},listen(A){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(qE,v),f=A,()=>{i.removeEventListener(qE,v),f=null}},createHref(A){return e(i,A)},createURL:T,encodeLocation(A){let _=T(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:w,replace:x,go(A){return l.go(A)}};return C}function eD(t,e,n="/"){return G8(t,e,n,!1)}function G8(t,e,n,r){let i=typeof e=="string"?yc(e):e,a=Pi(i.pathname||"/",n);if(a==null)return null;let l=tD(t);W8(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=iL(a);d=nL(l[f],m,r)}return d}function tD(t,e=[],n=[],r=""){let i=(a,l,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(mt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let m=Mi([r,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),tD(a.children,e,g,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:eL(m,a.index),routesMeta:g})};return t.forEach((a,l)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))i(a,l);else for(let f of nD(a.path))i(a,l,f)}),e}function nD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=nD(r.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&d.push(...l),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function W8(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:tL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Y8=/^:[\w-]+$/,K8=3,Q8=2,X8=1,Z8=10,J8=-2,GE=t=>t==="*";function eL(t,e){let n=t.split("/"),r=n.length;return n.some(GE)&&(r+=J8),e&&(r+=Q8),n.filter(i=>!GE(i)).reduce((i,a)=>i+(Y8.test(a)?K8:a===""?X8:Z8),r)}function tL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function nL(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",v=pp({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),w=f.route;if(!v&&m&&n&&!r[r.length-1].route.index&&(v=pp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:Mi([a,v.pathname]),pathnameBase:lL(Mi([a,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(a=Mi([a,v.pathnameBase]))}return l}function pp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=rL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:g,isOptional:v},w)=>{if(g==="*"){let T=d[w]||"";l=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const x=d[w];return v&&!x?m[g]=void 0:m[g]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:t}}function rL(t,e=!1,n=!0){Mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function iL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function sL(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?yc(t):t;return{pathname:n?n.startsWith("/")?n:oL(n,e):e,search:cL(r),hash:uL(i)}}function oL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bv(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yw(t){let e=aL(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Kw(t,e,n,r=!1){let i;typeof t=="string"?i=yc(t):(i={...t},mt(!i.pathname||!i.pathname.includes("?"),Bv("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),Bv("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),Bv("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;i.pathname=w.join("/")}d=v>=0?e[v]:"/"}let f=sL(i,d),m=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var Mi=t=>t.join("/").replace(/\/\/+/g,"/"),lL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),cL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,uL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var rD=["POST","PUT","PATCH","DELETE"];new Set(rD);var hL=["GET",...rD];new Set(hL);var vc=k.createContext(null);vc.displayName="DataRouter";var tg=k.createContext(null);tg.displayName="DataRouterState";var iD=k.createContext({isTransitioning:!1});iD.displayName="ViewTransition";var fL=k.createContext(new Map);fL.displayName="Fetchers";var mL=k.createContext(null);mL.displayName="Await";var Lr=k.createContext(null);Lr.displayName="Navigation";var gh=k.createContext(null);gh.displayName="Location";var Or=k.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var Qw=k.createContext(null);Qw.displayName="RouteError";function pL(t,{relative:e}={}){mt(bc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(Lr),{hash:i,pathname:a,search:l}=yh(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:Mi([n,a])),r.createHref({pathname:d,search:l,hash:i})}function bc(){return k.useContext(gh)!=null}function Gn(){return mt(bc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(gh).location}var sD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oD(t){k.useContext(Lr).static||k.useLayoutEffect(t)}function Pt(){let{isDataRoute:t}=k.useContext(Or);return t?_L():gL()}function gL(){mt(bc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(vc),{basename:e,navigator:n}=k.useContext(Lr),{matches:r}=k.useContext(Or),{pathname:i}=Gn(),a=JSON.stringify(Yw(r)),l=k.useRef(!1);return oD(()=>{l.current=!0}),k.useCallback((f,m={})=>{if(Mr(l.current,sD),!l.current)return;if(typeof f=="number"){n.go(f);return}let g=Kw(f,JSON.parse(a),i,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Mi([e,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[e,n,a,i,t])}k.createContext(null);function Xw(){let{matches:t}=k.useContext(Or),e=t[t.length-1];return e?e.params:{}}function yh(t,{relative:e}={}){let{matches:n}=k.useContext(Or),{pathname:r}=Gn(),i=JSON.stringify(Yw(n));return k.useMemo(()=>Kw(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function yL(t,e){return aD(t,e)}function aD(t,e,n,r){var L;mt(bc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=k.useContext(Lr),{matches:l}=k.useContext(Or),d=l[l.length-1],f=d?d.params:{},m=d?d.pathname:"/",g=d?d.pathnameBase:"/",v=d&&d.route;{let I=v&&v.path||"";lD(m,!v||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let w=Gn(),x;if(e){let I=typeof e=="string"?yc(e):e;mt(g==="/"||((L=I.pathname)==null?void 0:L.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),x=I}else x=w;let T=x.pathname||"/",C=T;if(g!=="/"){let I=g.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=!a&&n&&n.matches&&n.matches.length>0?n.matches:eD(t,{pathname:C});Mr(v||A!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Mr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=TL(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},f,I.params),pathname:Mi([g,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:Mi([g,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),l,n,r);return e&&_?k.createElement(gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function vL(){let t=AL(),e=dL(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,l)}var bL=k.createElement(vL,null),wL=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?k.createElement(Or.Provider,{value:this.props.routeContext},k.createElement(Qw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xL({routeContext:t,match:e,children:n}){let r=k.useContext(vc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Or.Provider,{value:t},n)}function TL(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let f=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);mt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,f+1))}let l=!1,d=-1;if(n)for(let f=0;f<i.length;f++){let m=i[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,w=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((f,m,g)=>{let v,w=!1,x=null,T=null;n&&(v=a&&m.route.id?a[m.route.id]:void 0,x=m.route.errorElement||bL,l&&(d<0&&g===0?(lD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):d===g&&(w=!0,T=m.route.hydrateFallbackElement||null)));let C=e.concat(i.slice(0,g+1)),A=()=>{let _;return v?_=x:w?_=T:m.route.Component?_=k.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=f,k.createElement(xL,{match:m,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:_})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?k.createElement(wL,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}function Zw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SL(t){let e=k.useContext(vc);return mt(e,Zw(t)),e}function CL(t){let e=k.useContext(tg);return mt(e,Zw(t)),e}function EL(t){let e=k.useContext(Or);return mt(e,Zw(t)),e}function Jw(t){let e=EL(t),n=e.matches[e.matches.length-1];return mt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kL(){return Jw("useRouteId")}function AL(){var r;let t=k.useContext(Qw),e=CL("useRouteError"),n=Jw("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function _L(){let{router:t}=SL("useNavigate"),e=Jw("useNavigate"),n=k.useRef(!1);return oD(()=>{n.current=!0}),k.useCallback(async(i,a={})=>{Mr(n.current,sD),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var WE={};function lD(t,e,n){!e&&!WE[t]&&(WE[t]=!0,Mr(!1,n))}k.memo(jL);function jL({routes:t,future:e,state:n}){return aD(t,void 0,n,e)}function DL({to:t,replace:e,state:n,relative:r}){mt(bc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(Lr);Mr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Or),{pathname:l}=Gn(),d=Pt(),f=Kw(t,Yw(a),l,r==="path"),m=JSON.stringify(f);return k.useEffect(()=>{d(JSON.parse(m),{replace:e,state:n,relative:r})},[d,m,r,e,n]),null}function _t(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IL({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){mt(!bc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof n=="string"&&(n=yc(n));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:w="default"}=n,x=k.useMemo(()=>{let T=Pi(f,l);return T==null?null:{location:{pathname:T,search:m,hash:g,state:v,key:w},navigationType:r}},[l,f,m,g,v,w,r]);return Mr(x!=null,`<Router basename="${l}"> is not able to match the URL "${f}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:k.createElement(Lr.Provider,{value:d},k.createElement(gh.Provider,{children:e,value:x}))}function RL({children:t,location:e}){return yL(Cb(t),e)}function Cb(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let a=[...e,i];if(r.type===k.Fragment){n.push.apply(n,Cb(r.props.children,a));return}mt(r.type===_t,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Cb(r.props.children,a)),n.push(l)}),n}var Qm="get",Xm="application/x-www-form-urlencoded";function ng(t){return t!=null&&typeof t.tagName=="string"}function ML(t){return ng(t)&&t.tagName.toLowerCase()==="button"}function NL(t){return ng(t)&&t.tagName.toLowerCase()==="form"}function LL(t){return ng(t)&&t.tagName.toLowerCase()==="input"}function OL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function PL(t,e){return t.button===0&&(!e||e==="_self")&&!OL(t)}var fm=null;function UL(){if(fm===null)try{new FormData(document.createElement("form"),0),fm=!1}catch{fm=!0}return fm}var VL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zv(t){return t!=null&&!VL.has(t)?(Mr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xm}"`),null):t}function BL(t,e){let n,r,i,a,l;if(NL(t)){let d=t.getAttribute("action");r=d?Pi(d,e):null,n=t.getAttribute("method")||Qm,i=zv(t.getAttribute("enctype"))||Xm,a=new FormData(t)}else if(ML(t)||LL(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(r=f?Pi(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||Qm,i=zv(t.getAttribute("formenctype"))||zv(d.getAttribute("enctype"))||Xm,a=new FormData(d,t),!UL()){let{name:m,type:g,value:v}=t;if(g==="image"){let w=m?`${m}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else m&&a.append(m,v)}}else{if(ng(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qm,r=null,i=Xm,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}function ex(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function zL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $L(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function FL(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await zL(a,n);return l.links?l.links():[]}return[]}));return WL(r.flat(1).filter($L).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function YE(t,e,n,r,i,a){let l=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,d=(f,m)=>{var g;return n[m].pathname!==f.pathname||((g=n[m].route.path)==null?void 0:g.endsWith("*"))&&n[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var v;let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function qL(t,e,{includeHydrateFallback:n}={}){return HL(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function HL(t){return[...new Set(t)]}function GL(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function WL(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(GL(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function YL(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Pi(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function cD(){let t=k.useContext(vc);return ex(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function KL(){let t=k.useContext(tg);return ex(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tx=k.createContext(void 0);tx.displayName="FrameworkContext";function uD(){let t=k.useContext(tx);return ex(t,"You must render this element inside a <HydratedRouter> element"),t}function QL(t,e){let n=k.useContext(tx),[r,i]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,w=k.useRef(null);k.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let C=_=>{_.forEach(L=>{l(L.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[t]),k.useEffect(()=>{if(r){let C=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(C)}}},[r]);let x=()=>{i(!0)},T=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,w,{}]:[a,w,{onFocus:Uu(d,x),onBlur:Uu(f,T),onMouseEnter:Uu(m,x),onMouseLeave:Uu(g,T),onTouchStart:Uu(v,x)}]:[!1,w,{}]}function Uu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function XL({page:t,...e}){let{router:n}=cD(),r=k.useMemo(()=>eD(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(JL,{page:t,matches:r,...e}):null}function ZL(t){let{manifest:e,routeModules:n}=uD(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return FL(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function JL({page:t,matches:e,...n}){let r=Gn(),{manifest:i,routeModules:a}=uD(),{basename:l}=cD(),{loaderData:d,matches:f}=KL(),m=k.useMemo(()=>YE(t,e,f,i,r,"data"),[t,e,f,i,r]),g=k.useMemo(()=>YE(t,e,f,i,r,"assets"),[t,e,f,i,r]),v=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,C=!1;if(e.forEach(_=>{var I;let L=i.routes[_.route.id];!L||!L.hasLoader||(!m.some(q=>q.route.id===_.route.id)&&_.route.id in d&&((I=a[_.route.id])!=null&&I.shouldRevalidate)||L.hasClientLoader?C=!0:T.add(_.route.id))}),T.size===0)return[];let A=YL(t,l);return C&&T.size>0&&A.searchParams.set("_routes",e.filter(_=>T.has(_.route.id)).map(_=>_.route.id).join(",")),[A.pathname+A.search]},[l,d,r,i,m,e,t,a]),w=k.useMemo(()=>qL(g,i),[g,i]),x=ZL(g);return k.createElement(k.Fragment,null,v.map(T=>k.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),w.map(T=>k.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),x.map(({key:T,link:C})=>k.createElement("link",{key:T,...C})))}function eO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dD&&(window.__reactRouterVersion="7.4.1")}catch{}function tO({basename:t,children:e,window:n}){let r=k.useRef();r.current==null&&(r.current=F8({window:n,v5Compat:!0}));let i=r.current,[a,l]=k.useState({action:i.action,location:i.location}),d=k.useCallback(f=>{k.startTransition(()=>l(f))},[l]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.createElement(IL,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var hD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vh=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:f,to:m,preventScrollReset:g,viewTransition:v,...w},x){let{basename:T}=k.useContext(Lr),C=typeof m=="string"&&hD.test(m),A,_=!1;if(typeof m=="string"&&C&&(A=m,dD))try{let ie=new URL(window.location.href),he=m.startsWith("//")?new URL(ie.protocol+m):new URL(m),Ie=Pi(he.pathname,T);he.origin===ie.origin&&Ie!=null?m=Ie+he.search+he.hash:_=!0}catch{Mr(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=pL(m,{relative:i}),[I,q,j]=QL(r,w),M=sO(m,{replace:l,state:d,target:f,preventScrollReset:g,relative:i,viewTransition:v});function $(ie){e&&e(ie),ie.defaultPrevented||M(ie)}let Q=k.createElement("a",{...w,...j,href:A||L,onClick:_||a?e:$,ref:eO(x,q),target:f,"data-discover":!C&&n==="render"?"true":void 0});return I&&!C?k.createElement(k.Fragment,null,Q,k.createElement(XL,{page:L})):Q});vh.displayName="Link";var nO=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:f,...m},g){let v=yh(l,{relative:m.relative}),w=Gn(),x=k.useContext(tg),{navigator:T,basename:C}=k.useContext(Lr),A=x!=null&&uO(v)&&d===!0,_=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,L=w.pathname,I=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(L=L.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&C&&(I=Pi(I,C)||I);const q=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let j=L===_||!i&&L.startsWith(_)&&L.charAt(q)==="/",M=I!=null&&(I===_||!i&&I.startsWith(_)&&I.charAt(_.length)==="/"),$={isActive:j,isPending:M,isTransitioning:A},Q=j?e:void 0,ie;typeof r=="function"?ie=r($):ie=[r,j?"active":null,M?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let he=typeof a=="function"?a($):a;return k.createElement(vh,{...m,"aria-current":Q,className:ie,ref:g,style:he,to:l,viewTransition:d},typeof f=="function"?f($):f)});nO.displayName="NavLink";var rO=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=Qm,action:d,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:v,...w},x)=>{let T=lO(),C=cO(d,{relative:m}),A=l.toLowerCase()==="get"?"get":"post",_=typeof d=="string"&&hD.test(d),L=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let q=I.nativeEvent.submitter,j=(q==null?void 0:q.getAttribute("formmethod"))||l;T(q||I.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:i,state:a,relative:m,preventScrollReset:g,viewTransition:v})};return k.createElement("form",{ref:x,method:A,action:C,onSubmit:r?f:L,...w,"data-discover":!_&&t==="render"?"true":void 0})});rO.displayName="Form";function iO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fD(t){let e=k.useContext(vc);return mt(e,iO(t)),e}function sO(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=Pt(),f=Gn(),m=yh(t,{relative:a});return k.useCallback(g=>{if(PL(g,e)){g.preventDefault();let v=n!==void 0?n:Dd(f)===Dd(m);d(t,{replace:v,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[f,d,m,n,r,e,t,i,a,l])}var oO=0,aO=()=>`__${String(++oO)}__`;function lO(){let{router:t}=fD("useSubmit"),{basename:e}=k.useContext(Lr),n=kL();return k.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:f,body:m}=BL(r,e);if(i.navigate===!1){let g=i.fetcherKey||aO();await t.fetch(g,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:f,body:m,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function cO(t,{relative:e}={}){let{basename:n}=k.useContext(Lr),r=k.useContext(Or);mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...yh(t||".",{relative:e})},l=Gn();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(v=>v).forEach(v=>d.append("index",v));let g=d.toString();a.search=g?`?${g}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Mi([n,a.pathname])),Dd(a)}function uO(t,e={}){let n=k.useContext(iD);mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fD("useViewTransitionState"),i=yh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Pi(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Pi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pp(i.pathname,l)!=null||pp(i.pathname,a)!=null}new TextEncoder;function Eb(){return Eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eb.apply(null,arguments)}function dO(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function hO(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var fO=function(){function t(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(hO(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=dO(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),bn="-ms-",gp="-moz-",Ge="-webkit-",mD="comm",nx="rule",rx="decl",mO="@import",pD="@keyframes",pO="@layer",gO=Math.abs,rg=String.fromCharCode,yO=Object.assign;function vO(t,e){return ln(t,0)^45?(((e<<2^ln(t,0))<<2^ln(t,1))<<2^ln(t,2))<<2^ln(t,3):0}function gD(t){return t.trim()}function bO(t,e){return(t=e.exec(t))?t[0]:t}function We(t,e,n){return t.replace(e,n)}function kb(t,e){return t.indexOf(e)}function ln(t,e){return t.charCodeAt(e)|0}function Id(t,e,n){return t.slice(e,n)}function Kr(t){return t.length}function ix(t){return t.length}function mm(t,e){return e.push(t),t}function wO(t,e){return t.map(e).join("")}var ig=1,Zl=1,yD=0,qn=0,Ot=0,wc="";function sg(t,e,n,r,i,a,l){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:ig,column:Zl,length:l,return:""}}function Vu(t,e){return yO(sg("",null,null,"",null,null,0),t,{length:-t.length},e)}function xO(){return Ot}function TO(){return Ot=qn>0?ln(wc,--qn):0,Zl--,Ot===10&&(Zl=1,ig--),Ot}function sr(){return Ot=qn<yD?ln(wc,qn++):0,Zl++,Ot===10&&(Zl=1,ig++),Ot}function si(){return ln(wc,qn)}function Zm(){return qn}function bh(t,e){return Id(wc,t,e)}function Rd(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vD(t){return ig=Zl=1,yD=Kr(wc=t),qn=0,[]}function bD(t){return wc="",t}function Jm(t){return gD(bh(qn-1,Ab(t===91?t+2:t===40?t+1:t)))}function SO(t){for(;(Ot=si())&&Ot<33;)sr();return Rd(t)>2||Rd(Ot)>3?"":" "}function CO(t,e){for(;--e&&sr()&&!(Ot<48||Ot>102||Ot>57&&Ot<65||Ot>70&&Ot<97););return bh(t,Zm()+(e<6&&si()==32&&sr()==32))}function Ab(t){for(;sr();)switch(Ot){case t:return qn;case 34:case 39:t!==34&&t!==39&&Ab(Ot);break;case 40:t===41&&Ab(t);break;case 92:sr();break}return qn}function EO(t,e){for(;sr()&&t+Ot!==57;)if(t+Ot===84&&si()===47)break;return"/*"+bh(e,qn-1)+"*"+rg(t===47?t:sr())}function kO(t){for(;!Rd(si());)sr();return bh(t,qn)}function AO(t){return bD(ep("",null,null,null,[""],t=vD(t),0,[0],t))}function ep(t,e,n,r,i,a,l,d,f){for(var m=0,g=0,v=l,w=0,x=0,T=0,C=1,A=1,_=1,L=0,I="",q=i,j=a,M=r,$=I;A;)switch(T=L,L=sr()){case 40:if(T!=108&&ln($,v-1)==58){kb($+=We(Jm(L),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:$+=Jm(L);break;case 9:case 10:case 13:case 32:$+=SO(T);break;case 92:$+=CO(Zm()-1,7);continue;case 47:switch(si()){case 42:case 47:mm(_O(EO(sr(),Zm()),e,n),f);break;default:$+="/"}break;case 123*C:d[m++]=Kr($)*_;case 125*C:case 59:case 0:switch(L){case 0:case 125:A=0;case 59+g:_==-1&&($=We($,/\f/g,"")),x>0&&Kr($)-v&&mm(x>32?QE($+";",r,n,v-1):QE(We($," ","")+";",r,n,v-2),f);break;case 59:$+=";";default:if(mm(M=KE($,e,n,m,g,i,d,I,q=[],j=[],v),a),L===123)if(g===0)ep($,e,M,M,q,a,v,d,j);else switch(w===99&&ln($,3)===110?100:w){case 100:case 108:case 109:case 115:ep(t,M,M,r&&mm(KE(t,M,M,0,0,i,d,I,i,q=[],v),j),i,j,v,d,r?q:j);break;default:ep($,M,M,M,[""],j,0,d,j)}}m=g=x=0,C=_=1,I=$="",v=l;break;case 58:v=1+Kr($),x=T;default:if(C<1){if(L==123)--C;else if(L==125&&C++==0&&TO()==125)continue}switch($+=rg(L),L*C){case 38:_=g>0?1:($+="\f",-1);break;case 44:d[m++]=(Kr($)-1)*_,_=1;break;case 64:si()===45&&($+=Jm(sr())),w=si(),g=v=Kr(I=$+=kO(Zm())),L++;break;case 45:T===45&&Kr($)==2&&(C=0)}}return a}function KE(t,e,n,r,i,a,l,d,f,m,g){for(var v=i-1,w=i===0?a:[""],x=ix(w),T=0,C=0,A=0;T<r;++T)for(var _=0,L=Id(t,v+1,v=gO(C=l[T])),I=t;_<x;++_)(I=gD(C>0?w[_]+" "+L:We(L,/&\f/g,w[_])))&&(f[A++]=I);return sg(t,e,n,i===0?nx:d,f,m,g)}function _O(t,e,n){return sg(t,e,n,mD,rg(xO()),Id(t,2,-2),0)}function QE(t,e,n,r){return sg(t,e,n,rx,Id(t,0,r),Id(t,r+1,-1),r)}function Hl(t,e){for(var n="",r=ix(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function jO(t,e,n,r){switch(t.type){case pO:if(t.children.length)break;case mO:case rx:return t.return=t.return||t.value;case mD:return"";case pD:return t.return=t.value+"{"+Hl(t.children,r)+"}";case nx:t.value=t.props.join(",")}return Kr(n=Hl(t.children,r))?t.return=t.value+"{"+n+"}":""}function DO(t){var e=ix(t);return function(n,r,i,a){for(var l="",d=0;d<e;d++)l+=t[d](n,r,i,a)||"";return l}}function IO(t){return function(e){e.root||(e=e.return)&&t(e)}}function wD(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var RO=function(e,n,r){for(var i=0,a=0;i=a,a=si(),i===38&&a===12&&(n[r]=1),!Rd(a);)sr();return bh(e,qn)},MO=function(e,n){var r=-1,i=44;do switch(Rd(i)){case 0:i===38&&si()===12&&(n[r]=1),e[r]+=RO(qn-1,n,r);break;case 2:e[r]+=Jm(i);break;case 4:if(i===44){e[++r]=si()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=rg(i)}while(i=sr());return e},NO=function(e,n){return bD(MO(vD(e),n))},XE=new WeakMap,LO=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!XE.get(r))&&!i){XE.set(e,!0);for(var a=[],l=NO(n,a),d=r.props,f=0,m=0;f<l.length;f++)for(var g=0;g<d.length;g++,m++)e.props[m]=a[f]?l[f].replace(/&\f/g,d[g]):d[g]+" "+l[f]}}},OO=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function xD(t,e){switch(vO(t,e)){case 5103:return Ge+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ge+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ge+t+gp+t+bn+t+t;case 6828:case 4268:return Ge+t+bn+t+t;case 6165:return Ge+t+bn+"flex-"+t+t;case 5187:return Ge+t+We(t,/(\w+).+(:[^]+)/,Ge+"box-$1$2"+bn+"flex-$1$2")+t;case 5443:return Ge+t+bn+"flex-item-"+We(t,/flex-|-self/,"")+t;case 4675:return Ge+t+bn+"flex-line-pack"+We(t,/align-content|flex-|-self/,"")+t;case 5548:return Ge+t+bn+We(t,"shrink","negative")+t;case 5292:return Ge+t+bn+We(t,"basis","preferred-size")+t;case 6060:return Ge+"box-"+We(t,"-grow","")+Ge+t+bn+We(t,"grow","positive")+t;case 4554:return Ge+We(t,/([^-])(transform)/g,"$1"+Ge+"$2")+t;case 6187:return We(We(We(t,/(zoom-|grab)/,Ge+"$1"),/(image-set)/,Ge+"$1"),t,"")+t;case 5495:case 3959:return We(t,/(image-set\([^]*)/,Ge+"$1$`$1");case 4968:return We(We(t,/(.+:)(flex-)?(.*)/,Ge+"box-pack:$3"+bn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ge+t+t;case 4095:case 3583:case 4068:case 2532:return We(t,/(.+)-inline(.+)/,Ge+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Kr(t)-1-e>6)switch(ln(t,e+1)){case 109:if(ln(t,e+4)!==45)break;case 102:return We(t,/(.+:)(.+)-([^]+)/,"$1"+Ge+"$2-$3$1"+gp+(ln(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~kb(t,"stretch")?xD(We(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ln(t,e+1)!==115)break;case 6444:switch(ln(t,Kr(t)-3-(~kb(t,"!important")&&10))){case 107:return We(t,":",":"+Ge)+t;case 101:return We(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ge+(ln(t,14)===45?"inline-":"")+"box$3$1"+Ge+"$2$3$1"+bn+"$2box$3")+t}break;case 5936:switch(ln(t,e+11)){case 114:return Ge+t+bn+We(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ge+t+bn+We(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ge+t+bn+We(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ge+t+bn+t+t}return t}var PO=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case rx:e.return=xD(e.value,e.length);break;case pD:return Hl([Vu(e,{value:We(e.value,"@","@"+Ge)})],i);case nx:if(e.length)return wO(e.props,function(a){switch(bO(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Hl([Vu(e,{props:[We(a,/:(read-\w+)/,":"+gp+"$1")]})],i);case"::placeholder":return Hl([Vu(e,{props:[We(a,/:(plac\w+)/,":"+Ge+"input-$1")]}),Vu(e,{props:[We(a,/:(plac\w+)/,":"+gp+"$1")]}),Vu(e,{props:[We(a,/:(plac\w+)/,bn+"input-$1")]})],i)}return""})}},UO=[PO],VO=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(C){var A=C.getAttribute("data-emotion");A.indexOf(" ")!==-1&&(document.head.appendChild(C),C.setAttribute("data-s",""))})}var i=e.stylisPlugins||UO,a={},l,d=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(C){for(var A=C.getAttribute("data-emotion").split(" "),_=1;_<A.length;_++)a[A[_]]=!0;d.push(C)});var f,m=[LO,OO];{var g,v=[jO,IO(function(C){g.insert(C)})],w=DO(m.concat(i,v)),x=function(A){return Hl(AO(A),w)};f=function(A,_,L,I){g=L,x(A?A+"{"+_.styles+"}":_.styles),I&&(T.inserted[_.name]=!0)}}var T={key:n,sheet:new fO({key:n,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:f};return T.sheet.hydrate(d),T},$v={exports:{}},Ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function BO(){if(ZE)return Ye;ZE=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,d=t?Symbol.for("react.context"):60110,f=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,g=t?Symbol.for("react.forward_ref"):60112,v=t?Symbol.for("react.suspense"):60113,w=t?Symbol.for("react.suspense_list"):60120,x=t?Symbol.for("react.memo"):60115,T=t?Symbol.for("react.lazy"):60116,C=t?Symbol.for("react.block"):60121,A=t?Symbol.for("react.fundamental"):60117,_=t?Symbol.for("react.responder"):60118,L=t?Symbol.for("react.scope"):60119;function I(j){if(typeof j=="object"&&j!==null){var M=j.$$typeof;switch(M){case e:switch(j=j.type,j){case f:case m:case r:case a:case i:case v:return j;default:switch(j=j&&j.$$typeof,j){case d:case g:case T:case x:case l:return j;default:return M}}case n:return M}}}function q(j){return I(j)===m}return Ye.AsyncMode=f,Ye.ConcurrentMode=m,Ye.ContextConsumer=d,Ye.ContextProvider=l,Ye.Element=e,Ye.ForwardRef=g,Ye.Fragment=r,Ye.Lazy=T,Ye.Memo=x,Ye.Portal=n,Ye.Profiler=a,Ye.StrictMode=i,Ye.Suspense=v,Ye.isAsyncMode=function(j){return q(j)||I(j)===f},Ye.isConcurrentMode=q,Ye.isContextConsumer=function(j){return I(j)===d},Ye.isContextProvider=function(j){return I(j)===l},Ye.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Ye.isForwardRef=function(j){return I(j)===g},Ye.isFragment=function(j){return I(j)===r},Ye.isLazy=function(j){return I(j)===T},Ye.isMemo=function(j){return I(j)===x},Ye.isPortal=function(j){return I(j)===n},Ye.isProfiler=function(j){return I(j)===a},Ye.isStrictMode=function(j){return I(j)===i},Ye.isSuspense=function(j){return I(j)===v},Ye.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===m||j===a||j===i||j===v||j===w||typeof j=="object"&&j!==null&&(j.$$typeof===T||j.$$typeof===x||j.$$typeof===l||j.$$typeof===d||j.$$typeof===g||j.$$typeof===A||j.$$typeof===_||j.$$typeof===L||j.$$typeof===C)},Ye.typeOf=I,Ye}var JE;function zO(){return JE||(JE=1,$v.exports=BO()),$v.exports}var Fv,ek;function $O(){if(ek)return Fv;ek=1;var t=zO(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=r,a[t.Memo]=i;function l(T){return t.isMemo(T)?i:a[T.$$typeof]||e}var d=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function x(T,C,A){if(typeof C!="string"){if(w){var _=v(C);_&&_!==w&&x(T,_,A)}var L=f(C);m&&(L=L.concat(m(C)));for(var I=l(T),q=l(C),j=0;j<L.length;++j){var M=L[j];if(!n[M]&&!(A&&A[M])&&!(q&&q[M])&&!(I&&I[M])){var $=g(C,M);try{d(T,M,$)}catch{}}}}return T}return Fv=x,Fv}$O();var FO=!0;function TD(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var sx=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||FO===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},SD=function(e,n,r){sx(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+i:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function qO(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var HO={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},GO=/[A-Z]|^ms/g,WO=/_EMO_([^_]+?)_([^]*?)_EMO_/g,CD=function(e){return e.charCodeAt(1)===45},tk=function(e){return e!=null&&typeof e!="boolean"},qv=wD(function(t){return CD(t)?t:t.replace(GO,"-$&").toLowerCase()}),nk=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(WO,function(r,i,a){return Qr={name:i,styles:a,next:Qr},i})}return HO[e]!==1&&!CD(e)&&typeof n=="number"&&n!==0?n+"px":n};function Md(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Qr={name:i.name,styles:i.styles,next:Qr},i.name;var a=n;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)Qr={name:l.name,styles:l.styles,next:Qr},l=l.next;var d=a.styles+";";return d}return YO(t,e,n)}case"function":{if(t!==void 0){var f=Qr,m=n(t);return Qr=f,Md(t,e,m)}break}}var g=n;if(e==null)return g;var v=e[g];return v!==void 0?v:g}function YO(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Md(t,e,n[i])+";";else for(var a in n){var l=n[a];if(typeof l!="object"){var d=l;e!=null&&e[d]!==void 0?r+=a+"{"+e[d]+"}":tk(d)&&(r+=qv(a)+":"+nk(a,d)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(e==null||e[l[0]]===void 0))for(var f=0;f<l.length;f++)tk(l[f])&&(r+=qv(a)+":"+nk(a,l[f])+";");else{var m=Md(t,e,l);switch(a){case"animation":case"animationName":{r+=qv(a)+":"+m+";";break}default:r+=a+"{"+m+"}"}}}return r}var rk=/label:\s*([^\s;{]+)\s*(;|$)/g,Qr;function ox(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";Qr=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,i+=Md(n,e,a);else{var l=a;i+=l[0]}for(var d=1;d<t.length;d++)if(i+=Md(n,e,t[d]),r){var f=a;i+=f[d]}rk.lastIndex=0;for(var m="",g;(g=rk.exec(i))!==null;)m+="-"+g[1];var v=qO(i)+m;return{name:v,styles:i,next:Qr}}var KO=function(e){return e()},QO=OE.useInsertionEffect?OE.useInsertionEffect:!1,ED=QO||KO,kD=k.createContext(typeof HTMLElement<"u"?VO({key:"css"}):null);kD.Provider;var AD=function(e){return k.forwardRef(function(n,r){var i=k.useContext(kD);return e(n,i,r)})},_D=k.createContext({}),ax={}.hasOwnProperty,_b="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",XO=function(e,n){var r={};for(var i in n)ax.call(n,i)&&(r[i]=n[i]);return r[_b]=e,r},ZO=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return sx(n,r,i),ED(function(){return SD(n,r,i)}),null},JO=AD(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[_b],a=[r],l="";typeof t.className=="string"?l=TD(e.registered,a,t.className):t.className!=null&&(l=t.className+" ");var d=ox(a,void 0,k.useContext(_D));l+=e.key+"-"+d.name;var f={};for(var m in t)ax.call(t,m)&&m!=="css"&&m!==_b&&(f[m]=t[m]);return f.className=l,n&&(f.ref=n),k.createElement(k.Fragment,null,k.createElement(ZO,{cache:e,serialized:d,isStringTag:typeof i=="string"}),k.createElement(i,f))}),eP=JO,ik=function(e,n){var r=arguments;if(n==null||!ax.call(n,"css"))return k.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=eP,a[1]=XO(e,n);for(var l=2;l<i;l++)a[l]=r[l];return k.createElement.apply(null,a)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(ik||(ik={}));function tP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ox(e)}function mi(){var t=tP.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var nP=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,rP=wD(function(t){return nP.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),iP=rP,sP=function(e){return e!=="theme"},sk=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?iP:sP},ok=function(e,n,r){var i;if(n){var a=n.shouldForwardProp;i=e.__emotion_forwardProp&&a?function(l){return e.__emotion_forwardProp(l)&&a(l)}:a}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},oP=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return sx(n,r,i),ED(function(){return SD(n,r,i)}),null},aP=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,a,l;n!==void 0&&(a=n.label,l=n.target);var d=ok(e,n,r),f=d||sk(i),m=!f("as");return function(){var g=arguments,v=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&v.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)v.push.apply(v,g);else{var w=g[0];v.push(w[0]);for(var x=g.length,T=1;T<x;T++)v.push(g[T],w[T])}var C=AD(function(A,_,L){var I=m&&A.as||i,q="",j=[],M=A;if(A.theme==null){M={};for(var $ in A)M[$]=A[$];M.theme=k.useContext(_D)}typeof A.className=="string"?q=TD(_.registered,j,A.className):A.className!=null&&(q=A.className+" ");var Q=ox(v.concat(j),_.registered,M);q+=_.key+"-"+Q.name,l!==void 0&&(q+=" "+l);var ie=m&&d===void 0?sk(I):f,he={};for(var Ie in A)m&&Ie==="as"||ie(Ie)&&(he[Ie]=A[Ie]);return he.className=q,L&&(he.ref=L),k.createElement(k.Fragment,null,k.createElement(oP,{cache:_,serialized:Q,isStringTag:typeof I=="string"}),k.createElement(I,he))});return C.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",C.defaultProps=e.defaultProps,C.__emotion_real=C,C.__emotion_base=i,C.__emotion_styles=v,C.__emotion_forwardProp=d,Object.defineProperty(C,"toString",{value:function(){return"."+l}}),C.withComponent=function(A,_){var L=t(A,Eb({},n,_,{shouldForwardProp:ok(C,_,!0)}));return L.apply(void 0,v)},C}},lP=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],b=aP.bind(null);lP.forEach(function(t){b[t]=b(t)});const cP="modulepreload",uP=function(t){return"/"+t},ak={},oa=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(f=>{if(f=uP(f),f in ak)return;ak[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":cP,m||(v.as="script"),v.crossOrigin="",v.href=f,d&&v.setAttribute("nonce",d),document.head.appendChild(v),m)return new Promise((w,x)=>{v.addEventListener("load",w),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};var lk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],d=t[n++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},DD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,d=l?t[i+1]:0,f=i+2<t.length,m=f?t[i+2]:0,g=a>>2,v=(a&3)<<4|d>>4;let w=(d&15)<<2|m>>6,x=m&63;f||(x=64,l||(w=64)),r.push(n[g],n[v],n[w],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],d=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||d==null||m==null||v==null)throw new hP;const w=a<<2|d>>4;if(r.push(w),m!==64){const x=d<<4&240|m>>2;if(r.push(x),v!==64){const T=m<<6&192|v;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fP=function(t){const e=jD(t);return DD.encodeByteArray(e,!0)},yp=function(t){return fP(t).replace(/\./g,"")},ID=function(t){try{return DD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!mP(n)||(t[n]=vp(t[n],e[n]));return t}function mP(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=()=>pP().__FIREBASE_DEFAULTS__,yP=()=>{if(typeof process>"u"||typeof lk>"u")return;const t=lk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ID(t[1]);return e&&JSON.parse(e)},lx=()=>{try{return gP()||yP()||vP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bP=()=>{var t;return(t=lx())===null||t===void 0?void 0:t.config},wP=t=>{var e;return(e=lx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yp(JSON.stringify(n)),yp(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function cx(){var t;const e=(t=lx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CP(){return typeof self=="object"&&self.self===self}function RD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ux(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MD(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EP(){return!cx()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nd(){try{return typeof indexedDB=="object"}catch{return!1}}function kP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="FirebaseError";class Kt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AP,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sa.prototype.create)}}class Sa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?_P(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Kt(i,d,r)}}function _P(t,e){return t.replace(jP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function DP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jb(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(uk(a)&&uk(l)){if(!jb(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ul(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function ld(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ND(t,e){const n=new IP(t,e);return n.subscribe.bind(n)}class IP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Hv),i.error===void 0&&(i.error=Hv),i.complete===void 0&&(i.complete=Hv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class Cr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LP(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NP(t){return t===Oo?void 0:t}function LP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=[];var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const LD={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},PP=ze.INFO,UP={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},VP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=PP,this._logHandler=VP,this._userLogHandler=null,dx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}function BP(t){dx.forEach(e=>{e.setLogLevel(t)})}function zP(t,e){for(const n of dx){let r=null;e&&e.level&&(r=LD[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,a,...l)=>{const d=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(r??i.logLevel)&&t({level:ze[a].toLowerCase(),message:d,args:l,type:i.name})}}}const $P=(t,e)=>e.some(n=>t instanceof n);let dk,hk;function FP(){return dk||(dk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qP(){return hk||(hk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OD=new WeakMap,Db=new WeakMap,PD=new WeakMap,Gv=new WeakMap,hx=new WeakMap;function HP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Ps(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&OD.set(n,t)}).catch(()=>{}),hx.set(e,t),e}function GP(t){if(Db.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Db.set(t,e)}let Ib={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Db.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WP(t){Ib=t(Ib)}function YP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wv(this),e,...n);return PD.set(r,e.sort?e.sort():[e]),Ps(r)}:qP().includes(t)?function(...e){return t.apply(Wv(this),e),Ps(OD.get(this))}:function(...e){return Ps(t.apply(Wv(this),e))}}function KP(t){return typeof t=="function"?YP(t):(t instanceof IDBTransaction&&GP(t),$P(t,FP())?new Proxy(t,Ib):t)}function Ps(t){if(t instanceof IDBRequest)return HP(t);if(Gv.has(t))return Gv.get(t);const e=KP(t);return e!==t&&(Gv.set(t,e),hx.set(e,t)),e}const Wv=t=>hx.get(t);function QP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),d=Ps(l);return r&&l.addEventListener("upgradeneeded",f=>{r(Ps(l.result),f.oldVersion,f.newVersion,Ps(l.transaction))}),n&&l.addEventListener("blocked",()=>n()),d.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",()=>i())}).catch(()=>{}),d}const XP=["get","getKey","getAll","getAllKeys","count"],ZP=["put","add","delete","clear"],Yv=new Map;function fk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yv.get(e))return Yv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||XP.includes(n)))return;const a=async function(l,...d){const f=this.transaction(l,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),i&&f.done]))[0]};return Yv.set(e,a),a}WP(t=>({...t,get:(e,n,r)=>fk(e,n)||t.get(e,n,r),has:(e,n)=>!!fk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rb="@firebase/app",mk="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new og("@firebase/app"),tU="@firebase/app-compat",nU="@firebase/analytics-compat",rU="@firebase/analytics",iU="@firebase/app-check-compat",sU="@firebase/app-check",oU="@firebase/auth",aU="@firebase/auth-compat",lU="@firebase/database",cU="@firebase/database-compat",uU="@firebase/functions",dU="@firebase/functions-compat",hU="@firebase/installations",fU="@firebase/installations-compat",mU="@firebase/messaging",pU="@firebase/messaging-compat",gU="@firebase/performance",yU="@firebase/performance-compat",vU="@firebase/remote-config",bU="@firebase/remote-config-compat",wU="@firebase/storage",xU="@firebase/storage-compat",TU="@firebase/firestore",SU="@firebase/firestore-compat",CU="firebase",EU="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]",kU={[Rb]:"fire-core",[tU]:"fire-core-compat",[rU]:"fire-analytics",[nU]:"fire-analytics-compat",[sU]:"fire-app-check",[iU]:"fire-app-check-compat",[oU]:"fire-auth",[aU]:"fire-auth-compat",[lU]:"fire-rtdb",[cU]:"fire-rtdb-compat",[uU]:"fire-fn",[dU]:"fire-fn-compat",[hU]:"fire-iid",[fU]:"fire-iid-compat",[mU]:"fire-fcm",[pU]:"fire-fcm-compat",[gU]:"fire-perf",[yU]:"fire-perf-compat",[vU]:"fire-rc",[bU]:"fire-rc-compat",[wU]:"fire-gcs",[xU]:"fire-gcs-compat",[TU]:"fire-fst",[SU]:"fire-fst-compat","fire-js":"fire-js",[CU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=new Map,Ld=new Map;function bp(t,e){try{t.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function UD(t,e){t.container.addOrOverwriteComponent(e)}function Ui(t){const e=t.name;if(Ld.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;Ld.set(e,t);for(const n of Bs.values())bp(n,t);return!0}function VD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function AU(t,e,n=Vs){VD(t,e).clearInstance(n)}function _U(){Ld.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ni=new Sa("app","Firebase",jU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DU=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=EU;function fx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ni.create("bad-app-name",{appName:String(i)});if(n||(n=bP()),!n)throw Ni.create("no-options");const a=Bs.get(i);if(a){if(jb(n,a.options)&&jb(r,a.config))return a;throw Ni.create("duplicate-app",{appName:i})}const l=new OP(i);for(const f of Ld.values())l.addComponent(f);const d=new DU(n,r,l);return Bs.set(i,d),d}function IU(t=Vs){const e=Bs.get(t);if(!e&&t===Vs)return fx();if(!e)throw Ni.create("no-app",{appName:t});return e}function RU(){return Array.from(Bs.values())}async function BD(t){const e=t.name;Bs.has(e)&&(Bs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Tr(t,e,n){var r;let i=(r=kU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const d=[`Unable to register library "${i}" with version "${e}":`];a&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(d.join(" "));return}Ui(new Cr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function zD(t,e){if(t!==null&&typeof t!="function")throw Ni.create("invalid-log-argument");zP(t,e)}function $D(t){BP(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="firebase-heartbeat-database",NU=1,Od="firebase-heartbeat-store";let Kv=null;function FD(){return Kv||(Kv=QP(MU,NU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Od)}}}).catch(t=>{throw Ni.create("idb-open",{originalErrorMessage:t.message})})),Kv}async function LU(t){try{return(await FD()).transaction(Od).objectStore(Od).get(qD(t))}catch(e){if(e instanceof Kt)aa.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});aa.warn(n.message)}}}async function pk(t,e){try{const r=(await FD()).transaction(Od,"readwrite");return await r.objectStore(Od).put(e,qD(t)),r.done}catch(n){if(n instanceof Kt)aa.warn(n.message);else{const r=Ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});aa.warn(r.message)}}}function qD(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=1024,PU=30*24*60*60*1e3;class UU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gk();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=PU}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gk(),{heartbeatsToSend:n,unsentEntries:r}=VU(this._heartbeatsCache.heartbeats),i=yp(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function gk(){return new Date().toISOString().substring(0,10)}function VU(t,e=OU){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),yk(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nd()?kP().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await LU(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yk(t){return yp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){Ui(new Cr("platform-logger",e=>new JP(e),"PRIVATE")),Ui(new Cr("heartbeat",e=>new UU(e),"PRIVATE")),Tr(Rb,mk,t),Tr(Rb,mk,"esm2017"),Tr("fire-js","")}zU("");const $U=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Kt,SDK_VERSION:Ca,_DEFAULT_ENTRY_NAME:Vs,_addComponent:bp,_addOrOverwriteComponent:UD,_apps:Bs,_clearComponents:_U,_components:Ld,_getProvider:VD,_registerComponent:Ui,_removeServiceInstance:AU,deleteApp:BD,getApp:IU,getApps:RU,initializeApp:fx,onLog:zD,registerVersion:Tr,setLogLevel:$D},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,n){this._delegate=e,this.firebase=n,bp(e,new Cr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),BD(this._delegate)))}_getService(e,n=Vs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){bp(this._delegate,e)}_addOrOverwriteComponent(e){UD(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},vk=new Sa("app-compat","Firebase",qU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){const e={},n={__esModule:!0,initializeApp:a,app:i,registerVersion:Tr,setLogLevel:$D,onLog:zD,apps:null,SDK_VERSION:Ca,INTERNAL:{registerComponent:d,removeApp:r,useAsService:f,modularAPIs:$U}};n.default=n,Object.defineProperty(n,"apps",{get:l});function r(m){delete e[m]}function i(m){if(m=m||Vs,!ck(e,m))throw vk.create("no-app",{appName:m});return e[m]}i.App=t;function a(m,g={}){const v=fx(m,g);if(ck(e,v.name))return e[v.name];const w=new t(v,n);return e[v.name]=w,w}function l(){return Object.keys(e).map(m=>e[m])}function d(m){const g=m.name,v=g.replace("-compat","");if(Ui(m)&&m.type==="PUBLIC"){const w=(x=i())=>{if(typeof x[v]!="function")throw vk.create("invalid-app-argument",{appName:g});return x[v]()};m.serviceProps!==void 0&&vp(w,m.serviceProps),n[v]=w,t.prototype[v]=function(...x){return this._getService.bind(this,g).apply(this,m.multipleInstances?x:[])}}return m.type==="PUBLIC"?n[v]:null}function f(m,g){return g==="serverAuth"?null:g}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(){const t=HU(FU);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:HD,extendNamespace:e,createSubscribe:ND,ErrorFactory:Sa,deepExtend:vp});function e(n){vp(t,n)}return t}const GU=HD();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new og("@firebase/app-compat"),WU="@firebase/app-compat",YU="0.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(t){Tr(WU,YU,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(CP()&&self.firebase!==void 0){bk.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&bk.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const J=GU;KU();var QU="firebase",XU="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */J.registerVersion(QU,XU,"app-compat");var ZU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe,mx=mx||{},Ce=ZU||self;function wp(){}function ag(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function lg(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function JU(t,e,n){return t.call.apply(t.bind,arguments)}function eV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Tn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Tn=JU:Tn=eV,Tn.apply(null,arguments)}function pm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function Zs(){this.s=this.s,this.o=this.o}var tV=0;Zs.prototype.s=!1;Zs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),tV!=0)};Zs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const GD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function px(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function wk(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ag(r)){const i=t.length||0,a=r.length||0;t.length=i+a;for(let l=0;l<a;l++)t[i+l]=r[l]}else t.push(r)}}function Sn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Sn.prototype.h=function(){this.defaultPrevented=!0};var nV=function(){if(!Ce.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ce.addEventListener("test",wp,e),Ce.removeEventListener("test",wp,e)}catch{}return t}();function xp(t){return/^[\s\xa0]*$/.test(t)}var xk=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Qv(t,e){return t<e?-1:t>e?1:0}function cg(){var t=Ce.navigator;return t&&(t=t.userAgent)?t:""}function Xr(t){return cg().indexOf(t)!=-1}function gx(t){return gx[" "](t),t}gx[" "]=wp;function rV(t){var e=oV;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var iV=Xr("Opera"),Jl=Xr("Trident")||Xr("MSIE"),WD=Xr("Edge"),Mb=WD||Jl,YD=Xr("Gecko")&&!(cg().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),sV=cg().toLowerCase().indexOf("webkit")!=-1&&!Xr("Edge");function KD(){var t=Ce.document;return t?t.documentMode:void 0}var Tp;e:{var Xv="",Zv=function(){var t=cg();if(YD)return/rv:([^\);]+)(\)|;)/.exec(t);if(WD)return/Edge\/([\d\.]+)/.exec(t);if(Jl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sV)return/WebKit\/(\S+)/.exec(t);if(iV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Zv&&(Xv=Zv?Zv[1]:""),Jl){var Jv=KD();if(Jv!=null&&Jv>parseFloat(Xv)){Tp=String(Jv);break e}}Tp=Xv}var oV={};function aV(){return rV(function(){let t=0;const e=xk(String(Tp)).split("."),n=xk("9").split("."),r=Math.max(e.length,n.length);for(let l=0;t==0&&l<r;l++){var i=e[l]||"",a=n[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],i[0].length==0&&a[0].length==0)break;t=Qv(i[1].length==0?0:parseInt(i[1],10),a[1].length==0?0:parseInt(a[1],10))||Qv(i[2].length==0,a[2].length==0)||Qv(i[2],a[2]),i=i[3],a=a[3]}while(t==0)}return 0<=t})}var Nb;if(Ce.document&&Jl){var Tk=KD();Nb=Tk||parseInt(Tp,10)||void 0}else Nb=void 0;var lV=Nb;function Pd(t,e){if(Sn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(YD){e:{try{gx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:cV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pd.X.h.call(this)}}mn(Pd,Sn);var cV={2:"touch",3:"pen",4:"mouse"};Pd.prototype.h=function(){Pd.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ug="closure_listenable_"+(1e6*Math.random()|0),uV=0;function dV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++uV,this.ba=this.ea=!1}function dg(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function yx(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function QD(t){const e={};for(const n in t)e[n]=t[n];return e}const Sk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XD(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let a=0;a<Sk.length;a++)n=Sk[a],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hg(t){this.src=t,this.g={},this.h=0}hg.prototype.add=function(t,e,n,r,i){var a=t.toString();t=this.g[a],t||(t=this.g[a]=[],this.h++);var l=Ob(t,e,r,i);return-1<l?(e=t[l],n||(e.ea=!1)):(e=new dV(e,this.src,a,!!r,i),e.ea=n,t.push(e)),e};function Lb(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=GD(r,e),a;(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(dg(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ob(t,e,n,r){for(var i=0;i<t.length;++i){var a=t[i];if(!a.ba&&a.listener==e&&a.capture==!!n&&a.ha==r)return i}return-1}var vx="closure_lm_"+(1e6*Math.random()|0),e1={};function ZD(t,e,n,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)ZD(t,e[a],n,r,i);return null}return n=tI(n),t&&t[ug]?t.N(e,n,lg(r)?!!r.capture:!1,i):hV(t,e,n,!1,r,i)}function hV(t,e,n,r,i,a){if(!e)throw Error("Invalid event type");var l=lg(i)?!!i.capture:!!i,d=wx(t);if(d||(t[vx]=d=new hg(t)),n=d.add(e,n,r,l,a),n.proxy)return n;if(r=fV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nV||(i=l),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(eI(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function fV(){function t(n){return e.call(t.src,t.listener,n)}const e=mV;return t}function JD(t,e,n,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)JD(t,e[a],n,r,i);else r=lg(r)?!!r.capture:!!r,n=tI(n),t&&t[ug]?(t=t.i,e=String(e).toString(),e in t.g&&(a=t.g[e],n=Ob(a,n,r,i),-1<n&&(dg(a[n]),Array.prototype.splice.call(a,n,1),a.length==0&&(delete t.g[e],t.h--)))):t&&(t=wx(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ob(e,n,r,i)),(n=-1<t?e[t]:null)&&bx(n))}function bx(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[ug])Lb(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(eI(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wx(e))?(Lb(n,t),n.h==0&&(n.src=null,e[vx]=null)):dg(t)}}}function eI(t){return t in e1?e1[t]:e1[t]="on"+t}function mV(t,e){if(t.ba)t=!0;else{e=new Pd(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&bx(t),t=n.call(r,e)}return t}function wx(t){return t=t[vx],t instanceof hg?t:null}var t1="__closure_events_fn_"+(1e9*Math.random()>>>0);function tI(t){return typeof t=="function"?t:(t[t1]||(t[t1]=function(e){return t.handleEvent(e)}),t[t1])}function Xt(){Zs.call(this),this.i=new hg(this),this.P=this,this.I=null}mn(Xt,Zs);Xt.prototype[ug]=!0;Xt.prototype.removeEventListener=function(t,e,n,r){JD(this,t,e,n,r)};function un(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Sn(e,t);else if(e instanceof Sn)e.target=e.target||t;else{var i=e;e=new Sn(r,t),XD(e,i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var l=e.g=n[a];i=gm(l,r,!0,e)&&i}if(l=e.g=t,i=gm(l,r,!0,e)&&i,i=gm(l,r,!1,e)&&i,n)for(a=0;a<n.length;a++)l=e.g=n[a],i=gm(l,r,!1,e)&&i}Xt.prototype.M=function(){if(Xt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)dg(n[r]);delete t.g[e],t.h--}}this.I=null};Xt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Xt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function gm(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==n){var d=l.listener,f=l.ha||l.src;l.ea&&Lb(t.i,l),i=d.call(f,r)!==!1&&i}}return i&&!r.defaultPrevented}var xx=Ce.JSON.stringify;function pV(){var t=iI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class gV{constructor(){this.h=this.g=null}add(e,n){const r=nI.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var nI=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new yV,t=>t.reset());class yV{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function vV(t){Ce.setTimeout(()=>{throw t},0)}function rI(t,e){Pb||bV(),Ub||(Pb(),Ub=!0),iI.add(t,e)}var Pb;function bV(){var t=Ce.Promise.resolve(void 0);Pb=function(){t.then(wV)}}var Ub=!1,iI=new gV;function wV(){for(var t;t=pV();){try{t.h.call(t.g)}catch(n){vV(n)}var e=nI;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ub=!1}function fg(t,e){Xt.call(this),this.h=t||1,this.g=e||Ce,this.j=Tn(this.lb,this),this.l=Date.now()}mn(fg,Xt);fe=fg.prototype;fe.ca=!1;fe.R=null;fe.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),un(this,"tick"),this.ca&&(Tx(this),this.start()))}};fe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Tx(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}fe.M=function(){fg.X.M.call(this),Tx(this),delete this.g};function Sx(t,e,n){if(typeof t=="function")n&&(t=Tn(t,n));else if(t&&typeof t.handleEvent=="function")t=Tn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ce.setTimeout(t,e||0)}function sI(t){t.g=Sx(()=>{t.g=null,t.i&&(t.i=!1,sI(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class xV extends Zs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sI(this)}M(){super.M(),this.g&&(Ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ud(t){Zs.call(this),this.h=t,this.g={}}mn(Ud,Zs);var Ck=[];function oI(t,e,n,r){Array.isArray(n)||(n&&(Ck[0]=n.toString()),n=Ck);for(var i=0;i<n.length;i++){var a=ZD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}}function aI(t){yx(t.g,function(e,n){this.g.hasOwnProperty(n)&&bx(e)},t),t.g={}}Ud.prototype.M=function(){Ud.X.M.call(this),aI(this)};Ud.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function mg(){this.g=!0}mg.prototype.Aa=function(){this.g=!1};function TV(t,e,n,r,i,a){t.info(function(){if(t.g)if(a)for(var l="",d=a.split("&"),f=0;f<d.length;f++){var m=d[f].split("=");if(1<m.length){var g=m[0];m=m[1];var v=g.split("_");l=2<=v.length&&v[1]=="type"?l+(g+"="+m+"&"):l+(g+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+l})}function SV(t,e,n,r,i,a,l){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+a+" "+l})}function Vl(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+EV(t,n)+(r?" "+r:"")})}function CV(t,e){t.info(function(){return"TIMEOUT: "+e})}mg.prototype.info=function(){};function EV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if(a!="noop"&&a!="stop"&&a!="close")for(var l=1;l<i.length;l++)i[l]=""}}}}return xx(n)}catch{return e}}var Ea={},Ek=null;function pg(){return Ek=Ek||new Xt}Ea.Pa="serverreachability";function lI(t){Sn.call(this,Ea.Pa,t)}mn(lI,Sn);function Vd(t){const e=pg();un(e,new lI(e))}Ea.STAT_EVENT="statevent";function cI(t,e){Sn.call(this,Ea.STAT_EVENT,t),this.stat=e}mn(cI,Sn);function _n(t){const e=pg();un(e,new cI(e,t))}Ea.Qa="timingevent";function uI(t,e){Sn.call(this,Ea.Qa,t),this.size=e}mn(uI,Sn);function wh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ce.setTimeout(function(){t()},e)}var gg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},dI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Cx(){}Cx.prototype.h=null;function kk(t){return t.h||(t.h=t.i())}function hI(){}var xh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ex(){Sn.call(this,"d")}mn(Ex,Sn);function kx(){Sn.call(this,"c")}mn(kx,Sn);var Vb;function yg(){}mn(yg,Cx);yg.prototype.g=function(){return new XMLHttpRequest};yg.prototype.i=function(){return{}};Vb=new yg;function Th(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Ud(this),this.O=kV,t=Mb?125:void 0,this.T=new fg(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new fI}function fI(){this.i=null,this.g="",this.h=!1}var kV=45e3,Bb={},Sp={};fe=Th.prototype;fe.setTimeout=function(t){this.O=t};function zb(t,e,n){t.K=1,t.v=bg(Vi(e)),t.s=n,t.P=!0,mI(t,null)}function mI(t,e){t.F=Date.now(),Sh(t),t.A=Vi(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),TI(n.i,"t",r),t.C=0,n=t.l.H,t.h=new fI,t.g=FI(t.l,n?e:null,!t.s),0<t.N&&(t.L=new xV(Tn(t.La,t,t.g),t.N)),oI(t.S,t.g,"readystatechange",t.ib),e=t.H?QD(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Vd(),TV(t.j,t.u,t.A,t.m,t.U,t.s)}fe.ib=function(t){t=t.target;const e=this.L;e&&Di(t)==3?e.l():this.La(t)};fe.La=function(t){try{if(t==this.g)e:{const g=Di(this.g);var e=this.g.Ea();const v=this.g.aa();if(!(3>g)&&(g!=3||Mb||this.g&&(this.h.h||this.g.fa()||Dk(this.g)))){this.I||g!=4||e==7||(e==8||0>=v?Vd(3):Vd(2)),vg(this);var n=this.g.aa();this.Y=n;t:if(pI(this)){var r=Dk(this.g);t="";var i=r.length,a=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Go(this),gd(this);var l="";break t}this.h.i=new Ce.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=n==200,SV(this.j,this.u,this.A,this.m,this.U,g,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xp(d)){var m=d;break t}}m=null}if(n=m)Vl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$b(this,n);else{this.i=!1,this.o=3,_n(12),Go(this),gd(this);break e}}this.P?(gI(this,g,l),Mb&&this.i&&g==3&&(oI(this.S,this.T,"tick",this.hb),this.T.start())):(Vl(this.j,this.m,l,null),$b(this,l)),g==4&&Go(this),this.i&&!this.I&&(g==4?VI(this.l,this):(this.i=!1,Sh(this)))}else n==400&&0<l.indexOf("Unknown SID")?(this.o=3,_n(12)):(this.o=0,_n(13)),Go(this),gd(this)}}}catch{}finally{}};function pI(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function gI(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=AV(t,n),i==Sp){e==4&&(t.o=4,_n(14),r=!1),Vl(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Bb){t.o=4,_n(15),Vl(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vl(t.j,t.m,i,null),$b(t,i);pI(t)&&i!=Sp&&i!=Bb&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,_n(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mx(e),e.K=!0,_n(11))):(Vl(t.j,t.m,n,"[Invalid Chunked Response]"),Go(t),gd(t))}fe.hb=function(){if(this.g){var t=Di(this.g),e=this.g.fa();this.C<e.length&&(vg(this),gI(this,t,e),this.i&&t!=4&&Sh(this))}};function AV(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Sp:(n=Number(e.substring(n,r)),isNaN(n)?Bb:(r+=1,r+n>e.length?Sp:(e=e.substr(r,n),t.C=r+n,e)))}fe.cancel=function(){this.I=!0,Go(this)};function Sh(t){t.V=Date.now()+t.O,yI(t,t.O)}function yI(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=wh(Tn(t.gb,t),e)}function vg(t){t.B&&(Ce.clearTimeout(t.B),t.B=null)}fe.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(CV(this.j,this.A),this.K!=2&&(Vd(),_n(17)),Go(this),this.o=2,gd(this)):yI(this,this.V-t)};function gd(t){t.l.G==0||t.I||VI(t.l,t)}function Go(t){vg(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Tx(t.T),aI(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function $b(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Fb(n.h,t))){if(!t.J&&Fb(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)kp(n),Tg(n);else break e;Rx(n),_n(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=wh(Tn(n.cb,n),6e3));if(1>=EI(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Wo(n,11)}else if((t.J||n.g==t)&&kp(n),!xp(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(n.T=m[0],m=m[1],n.G==2)if(m[0]=="c"){n.I=m[1],n.ka=m[2];const g=m[3];g!=null&&(n.ma=g,n.j.info("VER="+n.ma));const v=m[4];v!=null&&(n.Ca=v,n.j.info("SVER="+n.Ca));const w=m[5];w!=null&&typeof w=="number"&&0<w&&(r=1.5*w,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const x=t.g;if(x){const T=x.g?x.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var a=r.h;a.g||T.indexOf("spdy")==-1&&T.indexOf("quic")==-1&&T.indexOf("h2")==-1||(a.j=a.l,a.g=new Set,a.h&&(Ax(a,a.h),a.h=null))}if(r.D){const C=x.g?x.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(r.za=C,ht(r.F,r.D,C))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var l=t;if(r.sa=$I(r,r.H?r.ka:null,r.V),l.J){kI(r.h,l);var d=l,f=r.J;f&&d.setTimeout(f),d.B&&(vg(d),Sh(d)),r.g=l}else PI(r);0<n.i.length&&Sg(n)}else m[0]!="stop"&&m[0]!="close"||Wo(n,7);else n.G==3&&(m[0]=="stop"||m[0]=="close"?m[0]=="stop"?Wo(n,7):Ix(n):m[0]!="noop"&&n.l&&n.l.wa(m),n.A=0)}}Vd(4)}catch{}}function _V(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ag(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function jV(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ag(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function vI(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ag(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=jV(t),r=_V(t),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],n&&n[a],t)}var bI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jo(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Jo){this.h=e!==void 0?e:t.h,Cp(this,t.j),this.s=t.s,this.g=t.g,Ep(this,t.m),this.l=t.l,e=t.i;var n=new Bd;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ak(this,n),this.o=t.o}else t&&(n=String(t).match(bI))?(this.h=!!e,Cp(this,n[1]||"",!0),this.s=cd(n[2]||""),this.g=cd(n[3]||"",!0),Ep(this,n[4]),this.l=cd(n[5]||"",!0),Ak(this,n[6]||"",!0),this.o=cd(n[7]||"")):(this.h=!!e,this.i=new Bd(null,this.h))}Jo.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ud(e,_k,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ud(e,_k,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ud(n,n.charAt(0)=="/"?MV:RV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ud(n,LV)),t.join("")};function Vi(t){return new Jo(t)}function Cp(t,e,n){t.j=n?cd(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ep(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ak(t,e,n){e instanceof Bd?(t.i=e,OV(t.i,t.h)):(n||(e=ud(e,NV)),t.i=new Bd(e,t.h))}function ht(t,e,n){t.i.set(e,n)}function bg(t){return ht(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ud(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,IV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function IV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var _k=/[#\/\?@]/g,RV=/[#\?:]/g,MV=/[#\?]/g,NV=/[#\?@]/g,LV=/#/g;function Bd(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Js(t){t.g||(t.g=new Map,t.h=0,t.i&&DV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}fe=Bd.prototype;fe.add=function(t,e){Js(this),this.i=null,t=Tc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function wI(t,e){Js(t),e=Tc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function xI(t,e){return Js(t),e=Tc(t,e),t.g.has(e)}fe.forEach=function(t,e){Js(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};fe.oa=function(){Js(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let a=0;a<i.length;a++)n.push(e[r])}return n};fe.W=function(t){Js(this);let e=[];if(typeof t=="string")xI(this,t)&&(e=e.concat(this.g.get(Tc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};fe.set=function(t,e){return Js(this),this.i=null,t=Tc(this,t),xI(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};fe.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function TI(t,e,n){wI(t,e),0<n.length&&(t.i=null,t.g.set(Tc(t,e),px(n)),t.h+=n.length)}fe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;l[r]!==""&&(i+="="+encodeURIComponent(String(l[r]))),t.push(i)}}return this.i=t.join("&")};function Tc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function OV(t,e){e&&!t.j&&(Js(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(wI(this,r),TI(this,i,n))},t)),t.j=e}var PV=class{constructor(e,n){this.h=e,this.g=n}};function SI(t){this.l=t||UV,Ce.PerformanceNavigationTiming?(t=Ce.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ce.g&&Ce.g.Ga&&Ce.g.Ga()&&Ce.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var UV=10;function CI(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function EI(t){return t.h?1:t.g?t.g.size:0}function Fb(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ax(t,e){t.g?t.g.add(e):t.h=e}function kI(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}SI.prototype.cancel=function(){if(this.i=AI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function AI(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return px(t.i)}function _x(){}_x.prototype.stringify=function(t){return Ce.JSON.stringify(t,void 0)};_x.prototype.parse=function(t){return Ce.JSON.parse(t,void 0)};function VV(){this.g=new _x}function BV(t,e,n){const r=n||"";try{vI(t,function(i,a){let l=i;lg(i)&&(l=xx(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function zV(t,e){const n=new mg;if(Ce.Image){const r=new Image;r.onload=pm(ym,n,r,"TestLoadImage: loaded",!0,e),r.onerror=pm(ym,n,r,"TestLoadImage: error",!1,e),r.onabort=pm(ym,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=pm(ym,n,r,"TestLoadImage: timeout",!1,e),Ce.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ym(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ch(t){this.l=t.ac||null,this.j=t.jb||!1}mn(Ch,Cx);Ch.prototype.g=function(){return new wg(this.l,this.j)};Ch.prototype.i=function(t){return function(){return t}}({});function wg(t,e){Xt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=jx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mn(wg,Xt);var jx=0;fe=wg.prototype;fe.open=function(t,e){if(this.readyState!=jx)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,zd(this)};fe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Ce).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};fe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Eh(this)),this.readyState=jx};fe.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,zd(this)),this.g&&(this.readyState=3,zd(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ce.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_I(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function _I(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}fe.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Eh(this):zd(this),this.readyState==3&&_I(this)}};fe.Va=function(t){this.g&&(this.response=this.responseText=t,Eh(this))};fe.Ua=function(t){this.g&&(this.response=t,Eh(this))};fe.ga=function(){this.g&&Eh(this)};function Eh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,zd(t)}fe.setRequestHeader=function(t,e){this.v.append(t,e)};fe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};fe.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function zd(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(wg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var $V=Ce.JSON.parse;function St(t){Xt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jI,this.K=this.L=!1}mn(St,Xt);var jI="",FV=/^https?$/i,qV=["POST","PUT"];fe=St.prototype;fe.Ka=function(t){this.L=t};fe.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Vb.g(),this.C=this.u?kk(this.u):kk(Vb),this.g.onreadystatechange=Tn(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(a){jk(this,a);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const a of r.keys())n.set(a,r.get(a));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(a=>a.toLowerCase()=="content-type"),i=Ce.FormData&&t instanceof Ce.FormData,!(0<=GD(qV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of n)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RI(this),0<this.B&&((this.K=HV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Tn(this.qa,this)):this.A=Sx(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(a){jk(this,a)}};function HV(t){return Jl&&aV()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}fe.qa=function(){typeof mx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,un(this,"timeout"),this.abort(8))};function jk(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,DI(t),xg(t)}function DI(t){t.D||(t.D=!0,un(t,"complete"),un(t,"error"))}fe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,un(this,"complete"),un(this,"abort"),xg(this))};fe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xg(this,!0)),St.X.M.call(this)};fe.Ha=function(){this.s||(this.F||this.v||this.l?II(this):this.fb())};fe.fb=function(){II(this)};function II(t){if(t.h&&typeof mx<"u"&&(!t.C[1]||Di(t)!=4||t.aa()!=2)){if(t.v&&Di(t)==4)Sx(t.Ha,0,t);else if(un(t,"readystatechange"),Di(t)==4){t.h=!1;try{const d=t.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=d===0){var i=String(t.H).match(bI)[1]||null;if(!i&&Ce.self&&Ce.self.location){var a=Ce.self.location.protocol;i=a.substr(0,a.length-1)}r=!FV.test(i?i.toLowerCase():"")}n=r}if(n)un(t,"complete"),un(t,"success");else{t.m=6;try{var l=2<Di(t)?t.g.statusText:""}catch{l=""}t.j=l+" ["+t.aa()+"]",DI(t)}}finally{xg(t)}}}}function xg(t,e){if(t.g){RI(t);const n=t.g,r=t.C[0]?wp:null;t.g=null,t.C=null,e||un(t,"ready");try{n.onreadystatechange=r}catch{}}}function RI(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Ce.clearTimeout(t.A),t.A=null)}function Di(t){return t.g?t.g.readyState:0}fe.aa=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}};fe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};fe.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$V(e)}};function Dk(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case jI:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}fe.Ea=function(){return this.m};fe.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MI(t){let e="";return yx(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Dx(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=MI(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ht(t,e,n))}function Bu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function NI(t){this.Ca=0,this.i=[],this.j=new mg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Bu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Bu("baseRetryDelayMs",5e3,t),this.bb=Bu("retryDelaySeedMs",1e4,t),this.$a=Bu("forwardChannelMaxRetries",2,t),this.ta=Bu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new SI(t&&t.concurrentRequestLimit),this.Fa=new VV,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}fe=NI.prototype;fe.ma=8;fe.G=1;function Ix(t){if(LI(t),t.G==3){var e=t.U++,n=Vi(t.F);ht(n,"SID",t.I),ht(n,"RID",e),ht(n,"TYPE","terminate"),kh(t,n),e=new Th(t,t.j,e,void 0),e.K=2,e.v=bg(Vi(n)),n=!1,Ce.navigator&&Ce.navigator.sendBeacon&&(n=Ce.navigator.sendBeacon(e.v.toString(),"")),!n&&Ce.Image&&(new Image().src=e.v,n=!0),n||(e.g=FI(e.l,null),e.g.da(e.v)),e.F=Date.now(),Sh(e)}zI(t)}function Tg(t){t.g&&(Mx(t),t.g.cancel(),t.g=null)}function LI(t){Tg(t),t.u&&(Ce.clearTimeout(t.u),t.u=null),kp(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&Ce.clearTimeout(t.m),t.m=null)}function Sg(t){CI(t.h)||t.m||(t.m=!0,rI(t.Ja,t),t.C=0)}function GV(t,e){return EI(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=wh(Tn(t.Ja,t,e),BI(t,t.C)),t.C++,!0)}fe.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Th(this,this.j,t,void 0);let a=this.s;if(this.S&&(a?(a=QD(a),XD(a,this.S)):a=this.S),this.o!==null||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=OI(this,i,e),n=Vi(this.F),ht(n,"RID",t),ht(n,"CVER",22),this.D&&ht(n,"X-HTTP-Session-Id",this.D),kh(this,n),a&&(this.N?e="headers="+encodeURIComponent(String(MI(a)))+"&"+e:this.o&&Dx(n,this.o,a)),Ax(this.h,i),this.Ya&&ht(n,"TYPE","init"),this.O?(ht(n,"$req",e),ht(n,"SID","null"),i.Z=!0,zb(i,n,null)):zb(i,n,e),this.G=2}}else this.G==3&&(t?Ik(this,t):this.i.length==0||CI(this.h)||Ik(this))};function Ik(t,e){var n;e?n=e.m:n=t.U++;const r=Vi(t.F);ht(r,"SID",t.I),ht(r,"RID",n),ht(r,"AID",t.T),kh(t,r),t.o&&t.s&&Dx(r,t.o,t.s),n=new Th(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=OI(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Ax(t.h,n),zb(n,r,e)}function kh(t,e){t.ia&&yx(t.ia,function(n,r){ht(e,r,n)}),t.l&&vI({},function(n,r){ht(e,r,n)})}function OI(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Tn(t.l.Ra,t.l,t):null;e:{var i=t.i;let a=-1;for(;;){const l=["count="+n];a==-1?0<n?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let f=0;f<n;f++){let m=i[f].h;const g=i[f].g;if(m-=a,0>m)a=Math.max(0,i[f].h-100),d=!1;else try{BV(g,l,"req"+m+"_")}catch{r&&r(g)}}if(d){r=l.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function PI(t){t.g||t.u||(t.Z=1,rI(t.Ia,t),t.A=0)}function Rx(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=wh(Tn(t.Ia,t),BI(t,t.A)),t.A++,!0)}fe.Ia=function(){if(this.u=null,UI(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=wh(Tn(this.eb,this),t)}};fe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,_n(10),Tg(this),UI(this))};function Mx(t){t.B!=null&&(Ce.clearTimeout(t.B),t.B=null)}function UI(t){t.g=new Th(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=Vi(t.sa);ht(e,"RID","rpc"),ht(e,"SID",t.I),ht(e,"CI",t.L?"0":"1"),ht(e,"AID",t.T),ht(e,"TYPE","xmlhttp"),kh(t,e),t.o&&t.s&&Dx(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=bg(Vi(e)),n.s=null,n.P=!0,mI(n,t)}fe.cb=function(){this.v!=null&&(this.v=null,Tg(this),Rx(this),_n(19))};function kp(t){t.v!=null&&(Ce.clearTimeout(t.v),t.v=null)}function VI(t,e){var n=null;if(t.g==e){kp(t),Mx(t),t.g=null;var r=2}else if(Fb(t.h,e))n=e.D,kI(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=pg(),un(r,new uI(r,n)),Sg(t)}else PI(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&GV(t,e)||r==2&&Rx(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Wo(t,5);break;case 4:Wo(t,10);break;case 3:Wo(t,6);break;default:Wo(t,2)}}}function BI(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Wo(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Tn(t.kb,t);n||(n=new Jo("//www.google.com/images/cleardot.gif"),Ce.location&&Ce.location.protocol=="http"||Cp(n,"https"),bg(n)),zV(n.toString(),r)}else _n(2);t.G=0,t.l&&t.l.va(e),zI(t),LI(t)}fe.kb=function(t){t?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function zI(t){if(t.G=0,t.la=[],t.l){const e=AI(t.h);(e.length!=0||t.i.length!=0)&&(wk(t.la,e),wk(t.la,t.i),t.h.i.length=0,px(t.i),t.i.length=0),t.l.ua()}}function $I(t,e,n){var r=n instanceof Jo?Vi(n):new Jo(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Ep(r,r.m);else{var i=Ce.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Jo(null,void 0);r&&Cp(a,r),e&&(a.g=e),i&&Ep(a,i),n&&(a.l=n),r=a}return n=t.D,e=t.za,n&&e&&ht(r,n,e),ht(r,"VER",t.ma),kh(t,r),r}function FI(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new St(new Ch({jb:!0})):new St(t.ra),e.Ka(t.H),e}function qI(){}fe=qI.prototype;fe.xa=function(){};fe.wa=function(){};fe.va=function(){};fe.ua=function(){};fe.Ra=function(){};function Ap(){if(Jl&&!(10<=Number(lV)))throw Error("Environmental error: no available transport.")}Ap.prototype.g=function(t,e){return new or(t,e)};function or(t,e){Xt.call(this),this.g=new NI(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!xp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xp(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sc(this)}mn(or,Xt);or.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;_n(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=$I(t,null,t.V),Sg(t)};or.prototype.close=function(){Ix(this.g)};or.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=xx(t),t=n);e.i.push(new PV(e.ab++,t)),e.G==3&&Sg(e)};or.prototype.M=function(){this.g.l=null,delete this.j,Ix(this.g),delete this.g,or.X.M.call(this)};function HI(t){Ex.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mn(HI,Ex);function GI(){kx.call(this),this.status=1}mn(GI,kx);function Sc(t){this.g=t}mn(Sc,qI);Sc.prototype.xa=function(){un(this.g,"a")};Sc.prototype.wa=function(t){un(this.g,new HI(t))};Sc.prototype.va=function(t){un(this.g,new GI)};Sc.prototype.ua=function(){un(this.g,"b")};Ap.prototype.createWebChannel=Ap.prototype.g;or.prototype.send=or.prototype.u;or.prototype.open=or.prototype.m;or.prototype.close=or.prototype.close;gg.NO_ERROR=0;gg.TIMEOUT=8;gg.HTTP_ERROR=6;dI.COMPLETE="complete";hI.EventType=xh;xh.OPEN="a";xh.CLOSE="b";xh.ERROR="c";xh.MESSAGE="d";Xt.prototype.listen=Xt.prototype.N;St.prototype.listenOnce=St.prototype.O;St.prototype.getLastError=St.prototype.Oa;St.prototype.getLastErrorCode=St.prototype.Ea;St.prototype.getStatus=St.prototype.aa;St.prototype.getResponseJson=St.prototype.Sa;St.prototype.getResponseText=St.prototype.fa;St.prototype.send=St.prototype.da;St.prototype.setWithCredentials=St.prototype.Ka;var WV=function(){return new Ap},YV=function(){return pg()},n1=gg,KV=dI,QV=Ea,Rk={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},XV=Ch,vm=hI,ZV=St,JV={};const Mk="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new og("@firebase/firestore");function qb(){return zs.logLevel}function eB(t){zs.setLogLevel(t)}function ee(t,...e){if(zs.logLevel<=ze.DEBUG){const n=e.map(Nx);zs.debug(`Firestore (${Cc}): ${t}`,...n)}}function Dt(t,...e){if(zs.logLevel<=ze.ERROR){const n=e.map(Nx);zs.error(`Firestore (${Cc}): ${t}`,...n)}}function ec(t,...e){if(zs.logLevel<=ze.WARN){const n=e.map(Nx);zs.warn(`Firestore (${Cc}): ${t}`,...n)}}function Nx(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${Cc}) INTERNAL ASSERTION FAILED: `+t;throw Dt(e),new Error(e)}function me(t,e){t||ce()}function tB(t,e){t||ce()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class rB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iB{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new Qt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Qt,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},d=f=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(f=>d(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qt)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new WI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Yt(e)}}class sB{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(me(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class oB{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new sB(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aB{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lB{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=a=>{a.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,ee("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.A=n.token,new aB(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function tc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function KI(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new pt(0,0))}static max(){return new ge(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $d.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $d?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),l=n.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends $d{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ve(n)}static emptyPath(){return new Ve([])}}const uB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends $d{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return uB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ve.fromString(e))}static fromName(e){return new re(Ve.fromString(e).popFirst(5))}static empty(){return new re(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function Hb(t){return t.fields.find(e=>e.kind===2)}function Po(t){return t.fields.filter(e=>e.kind!==2)}QI.UNKNOWN_ID=-1;class dB{constructor(e,n){this.fieldPath=e,this.kind=n}}class _p{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new _p(0,ar.min())}}function XI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ar(i,re.empty(),e)}function ZI(t){return new ar(t.readTime,t.key,-1)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(ge.min(),re.empty(),-1)}static max(){return new ar(ge.max(),re.empty(),-1)}}function Lx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==JI)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&n()},f=>r(f))}),l=!0,a===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;n(e[m]).next(g=>{l[m]=g,++d,d===a&&r(l)},g=>i(g))}})}static doWhile(e,n){return new B((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new Qt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new yd(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Ox(r.target.error);this.P.reject(new yd(e,i))}}static open(e,n,r,i){try{return new Cg(n,e.transaction(i,r))}catch(a){throw new yd(n,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new fB(n)}}class Rr{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Rr.D(vt())===12.2&&Dt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),zo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Nd())return!1;if(Rr.N())return!0;const e=vt(),n=Rr.D(e),r=0<n&&n<10,i=Rr.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&((e=JV)===null||e===void 0?void 0:e.$)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;n(l)},i.onblocked=()=>{r(new yd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new Z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new Z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new yd(e,l))},i.onupgradeneeded=a=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.S.F(l,i.transaction,a.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.O(e);const d=Cg.open(this.db,e,a?"readonly":"readwrite",r),f=i(d).next(m=>(d.V(),m)).catch(m=>(d.abort(m),B.reject(m))).toPromise();return f.catch(()=>{}),await d.v,f}catch(d){const f=d,m=f.name!=="FirebaseError"&&l<3;if(ee("SimpleDb","Transaction failed with error:",f.message,"Retrying:",m),this.close(),!m)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}class hB{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return zo(this.q.delete())}}class yd extends Z{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function to(t){return t.name==="IndexedDbTransactionError"}class fB{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ee("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zo(r)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),zo(this.store.add(e))}get(e){return zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),ee("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),zo(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),zo(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),a=[];return this.H(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new B((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new B((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,n){ee("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,l,d)=>d.delete())}X(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}tt(e){const n=this.cursor({});return new B((r,i)=>{n.onerror=a=>{const l=Ox(a.target.error);i(l)},n.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}H(e,n){const r=[];return new B((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const f=new hB(d),m=n(d.primaryKey,d.value,f);if(m instanceof B){const g=m.catch(v=>(f.done(),B.reject(v)));r.push(g)}f.isDone?i():f.G===null?d.continue():d.continue(f.G)}}).next(()=>B.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zo(t){return new B((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Ox(r.target.error);n(i)}})}let Nk=!1;function Ox(t){const e=Rr.D(vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nk||(Nk=!0,setTimeout(()=>{throw r},0)),r}}return t}class mB{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){ee("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ee("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){to(n)?ee("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await eo(n)}await this.nt(6e4)})}}class pB{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let i=n,a=!0;return B.doWhile(()=>a===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(l!==null&&!r.has(l))return ee("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>n-i)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(d=>(ee("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,n,d))).next(()=>l.size)}))}ot(e,n){let r=e;return n.changes.forEach((i,a)=>{const l=ZI(a);Lx(l,r)>0&&(r=l)}),new ar(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}zn.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e,n,r,i,a,l,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class $s{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new $s("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof $s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return t==null}function Fd(t){return t===0&&1/t==-1/0}function n4(t){return typeof t=="number"&&Number.isInteger(t)&&!Fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vB(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new yB("Invalid base64 string: "+i):i}}(e);return new zt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zt.EMPTY_BYTE_STRING=new zt("");const bB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(me(!!t),typeof t=="string"){let e=0;const n=bB.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function la(t){return typeof t=="string"?zt.fromBase64String(t):zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function r4(t){const e=t.mapValue.fields.__previous_value__;return Px(e)?r4(e):e}function qd(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tp={nullValue:"NULL_VALUE"};function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Px(t)?4:i4(t)?9007199254740991:10:ce()}function hi(t,e){if(t===e)return!0;const n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qd(t).isEqual(qd(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Fs(r.timestampValue),l=Fs(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return la(r.bytesValue).isEqual(la(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Tt(r.doubleValue),l=Tt(i.doubleValue);return a===l?Fd(a)===Fd(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return tc(t.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Lk(a)!==Lk(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(l[d]===void 0||!hi(a[d],l[d])))return!1;return!0}(t,e);default:return ce()}}function Hd(t,e){return(t.values||[]).find(n=>hi(n,e))!==void 0}function qs(t,e){if(t===e)return 0;const n=ca(t),r=ca(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Tt(i.integerValue||i.doubleValue),d=Tt(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(t,e);case 3:return Ok(t.timestampValue,e.timestampValue);case 4:return Ok(qd(t),qd(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(i,a){const l=la(i),d=la(a);return l.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let f=0;f<l.length&&f<d.length;f++){const m=_e(l[f],d[f]);if(m!==0)return m}return _e(l.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=_e(Tt(i.latitude),Tt(a.latitude));return l!==0?l:_e(Tt(i.longitude),Tt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let f=0;f<l.length&&f<d.length;++f){const m=qs(l[f],d[f]);if(m)return m}return _e(l.length,d.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ls.mapValue&&a===Ls.mapValue)return 0;if(i===Ls.mapValue)return 1;if(a===Ls.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),f=a.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let g=0;g<d.length&&g<m.length;++g){const v=_e(d[g],m[g]);if(v!==0)return v;const w=qs(l[d[g]],f[m[g]]);if(w!==0)return w}return _e(d.length,m.length)}(t.mapValue,e.mapValue);default:throw ce()}}function Ok(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Fs(t),r=Fs(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function nc(t){return Gb(t)}function Gb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Fs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?la(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,re.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Gb(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Gb(r.fields[d])}`;return a+"}"}(t.mapValue):ce();var e,n}function ua(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wb(t){return!!t&&"integerValue"in t}function Gd(t){return!!t&&"arrayValue"in t}function Pk(t){return!!t&&"nullValue"in t}function Uk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function np(t){return!!t&&"mapValue"in t}function vd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function i4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function wB(t){return"nullValue"in t?tp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ua($s.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ce()}function xB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ua($s.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ls:ce()}function Vk(t,e){const n=qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Bk(t,e){const n=qs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.position=e,this.inclusive=n}}function zk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=re.comparator(re.fromName(l.referenceValue),n.key):r=qs(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function $k(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{}class Oe extends s4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TB(e,n,r):n==="array-contains"?new EB(e,r):n==="in"?new d4(e,r):n==="not-in"?new kB(e,r):n==="array-contains-any"?new AB(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SB(e,r):new CB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ze extends s4{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new Ze(e,n)}matches(e){return rc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function rc(t){return t.op==="and"}function Yb(t){return t.op==="or"}function Ux(t){return o4(t)&&rc(t)}function o4(t){for(const e of t.filters)if(e instanceof Ze)return!1;return!0}function Kb(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(Ux(t))return t.filters.map(e=>Kb(e)).join(",");{const e=t.filters.map(n=>Kb(n)).join(",");return`${t.op}(${e})`}}function a4(t,e){return t instanceof Oe?function(n,r){return r instanceof Oe&&n.op===r.op&&n.field.isEqual(r.field)&&hi(n.value,r.value)}(t,e):t instanceof Ze?function(n,r){return r instanceof Ze&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,a,l)=>i&&a4(a,r.filters[l]),!0):!1}(t,e):void ce()}function l4(t,e){const n=t.filters.concat(e);return Ze.create(n,t.op)}function c4(t){return t instanceof Oe?function(e){return`${e.field.canonicalString()} ${e.op} ${nc(e.value)}`}(t):t instanceof Ze?function(e){return e.op.toString()+" {"+e.getFilters().map(c4).join(" ,")+"}"}(t):"Filter"}class TB extends Oe{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class SB extends Oe{constructor(e,n){super(e,"in",n),this.keys=u4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CB extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=u4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function u4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class EB extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gd(n)&&Hd(n.arrayValue,this.value)}}class d4 extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hd(this.value.arrayValue,n)}}class kB extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Hd(this.value.arrayValue,n)}}class AB extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n="asc"){this.field=e,this.dir=n}}function _B(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.comparator=e,this.root=n||an.EMPTY}insert(e,n){return new Ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,an.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,an.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bm(this.root,e,this.comparator,!1)}getReverseIterator(){return new bm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bm(this.root,e,this.comparator,!0)}}class bm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class an{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??an.RED,this.left=i??an.EMPTY,this.right=a??an.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new an(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return an.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return an.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,an.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,an.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}an.EMPTY=null,an.RED=!0,an.BLACK=!1;an.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(t,e,n,r,i){return this}insert(t,e,n){return new an(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fk(this.data.getIterator())}getIteratorFrom(e){return new Fk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class Fk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new $n([])}unionWith(e){let n=new nt(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!np(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vd(n)}setAll(e){let n=It.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!n.isImmediateParentOf(d)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=d.popLast()}l?r[d.lastSegment()]=vd(l):i.push(d.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());np(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];np(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ka(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new cn(vd(this.value))}}function h4(t){const e=[];return ka(t.fields,(n,r)=>{const i=new It([n]);if(np(r)){const a=h4(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n,r,i,a,l,d){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new lt(e,0,ge.min(),ge.min(),ge.min(),cn.empty(),0)}static newFoundDocument(e,n,r,i){return new lt(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new lt(e,2,n,ge.min(),ge.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new lt(e,3,n,ge.min(),ge.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this._t=null}}function Qb(t,e=null,n=[],r=[],i=null,a=null,l=null){return new jB(t,e,n,r,i,a,l)}function da(t){const e=oe(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e._t=n}return e._t}function _h(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_B(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!a4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$k(t.startAt,e.startAt)&&$k(t.endAt,e.endAt)}function jp(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Dp(t,e){return t.filters.filter(n=>n instanceof Oe&&n.field.isEqual(e))}function qk(t,e,n){let r=tp,i=!0;for(const a of Dp(t,e)){let l=tp,d=!0;switch(a.op){case"<":case"<=":l=wB(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=tp}Vk({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];Vk({value:r,inclusive:i},{value:l,inclusive:n.inclusive})<0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}function Hk(t,e,n){let r=Ls,i=!0;for(const a of Dp(t,e)){let l=Ls,d=!0;switch(a.op){case">=":case">":l=xB(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=Ls}Bk({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const l=n.position[a];Bk({value:r,inclusive:i},{value:l,inclusive:n.inclusive})>0&&(r=l,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n=null,r=[],i=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.wt=null,this.gt=null,this.startAt,this.endAt}}function f4(t,e,n,r,i,a,l,d){return new Fi(t,e,n,r,i,a,l,d)}function Ec(t){return new Fi(t)}function Gk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vx(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Eg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Bx(t){return t.collectionGroup!==null}function ea(t){const e=oe(t);if(e.wt===null){e.wt=[];const n=Eg(e),r=Vx(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new Gl(n)),e.wt.push(new Gl(It.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Gl(It.keyField(),a))}}}return e.wt}function Hn(t){const e=oe(t);if(!e.gt)if(e.limitType==="F")e.gt=Qb(e.path,e.collectionGroup,ea(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const a of ea(e)){const l=a.dir==="desc"?"asc":"desc";n.push(new Gl(a.field,l))}const r=e.endAt?new Hs(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Hs(e.startAt.position,e.startAt.inclusive):null;e.gt=Qb(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function Xb(t,e){e.getFirstInequalityField(),Eg(t);const n=t.filters.concat([e]);return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ip(t,e,n){return new Fi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jh(t,e){return _h(Hn(t),Hn(e))&&t.limitType===e.limitType}function m4(t){return`${da(Hn(t))}|lt:${t.limitType}`}function Zb(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>c4(r)).join(", ")}]`),Ah(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),`Target(${n})`}(Hn(t))}; limitType=${t.limitType})`}function Dh(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):re.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ea(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,a,l){const d=zk(i,a,l);return i.inclusive?d<=0:d<0}(n.startAt,ea(n),r)||n.endAt&&!function(i,a,l){const d=zk(i,a,l);return i.inclusive?d>=0:d>0}(n.endAt,ea(n),r))}(t,e)}function p4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g4(t){return(e,n)=>{let r=!1;for(const i of ea(t)){const a=DB(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function DB(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,a,l){const d=a.data.field(i),f=l.data.field(i);return d!==null&&f!==null?qs(d,f):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function v4(t){return{integerValue:""+t}}function b4(t,e){return n4(e)?v4(e):y4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(){this._=void 0}}function IB(t,e,n){return t instanceof ic?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ha?x4(t,e):t instanceof fa?T4(t,e):function(r,i){const a=w4(r,i),l=Wk(a)+Wk(r.It);return Wb(a)&&Wb(r.It)?v4(l):y4(r.Tt,l)}(t,e)}function RB(t,e,n){return t instanceof ha?x4(t,e):t instanceof fa?T4(t,e):n}function w4(t,e){return t instanceof sc?Wb(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class ic extends kg{}class ha extends kg{constructor(e){super(),this.elements=e}}function x4(t,e){const n=S4(e);for(const r of t.elements)n.some(i=>hi(i,r))||n.push(r);return{arrayValue:{values:n}}}class fa extends kg{constructor(e){super(),this.elements=e}}function T4(t,e){let n=S4(e);for(const r of t.elements)n=n.filter(i=>!hi(i,r));return{arrayValue:{values:n}}}class sc extends kg{constructor(e,n){super(),this.Tt=e,this.It=n}}function Wk(t){return Tt(t.integerValue||t.doubleValue)}function S4(t){return Gd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.field=e,this.transform=n}}function MB(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof ha&&r instanceof ha||n instanceof fa&&r instanceof fa?tc(n.elements,r.elements,hi):n instanceof sc&&r instanceof sc?hi(n.It,r.It):n instanceof ic&&r instanceof ic}(t.transform,e.transform)}class NB{constructor(e,n){this.version=e,this.transformResults=n}}class ft{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ft}static exists(e){return new ft(void 0,e)}static updateTime(e){return new ft(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ag{}function C4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ac(t.key,ft.none()):new kc(t.key,t.data,ft.none());{const n=t.data,r=cn.empty();let i=new nt(It.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new qi(t.key,r,new $n(i.toArray()),ft.none())}}function LB(t,e,n){t instanceof kc?function(r,i,a){const l=r.value.clone(),d=Kk(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(r,i,a){if(!rp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Kk(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(E4(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(t,e,n):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function bd(t,e,n,r){return t instanceof kc?function(i,a,l,d){if(!rp(i.precondition,a))return l;const f=i.value.clone(),m=Qk(i.fieldTransforms,d,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(i,a,l,d){if(!rp(i.precondition,a))return l;const f=Qk(i.fieldTransforms,d,a),m=a.data;return m.setAll(E4(i)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return rp(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function OB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=w4(r.transform,i||null);a!=null&&(n===null&&(n=cn.empty()),n.set(r.field,a))}return n||null}function Yk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&tc(n,r,(i,a)=>MB(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kc extends Ag{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qi extends Ag{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function E4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kk(t,e,n){const r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,RB(l,d,n[i]))}return r}function Qk(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,IB(a,l,e))}return r}class Ac extends Ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zx extends Ag{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Ue;function k4(t){switch(t){default:return ce();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function A4(t){if(t===void 0)return Dt("GRPC error has no .code"),F.UNKNOWN;switch(t){case Lt.OK:return F.OK;case Lt.CANCELLED:return F.CANCELLED;case Lt.UNKNOWN:return F.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return F.INTERNAL;case Lt.UNAVAILABLE:return F.UNAVAILABLE;case Lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Lt.NOT_FOUND:return F.NOT_FOUND;case Lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Lt.ABORTED:return F.ABORTED;case Lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Lt.DATA_LOSS:return F.DATA_LOSS;default:return ce()}}(Ue=Lt||(Lt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return t4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=new Ct(re.comparator);function Fn(){return UB}const _4=new Ct(re.comparator);function dd(...t){let e=_4;for(const n of t)e=e.insert(n.key,n);return e}function j4(t){let e=_4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ni(){return wd()}function D4(){return wd()}function wd(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const VB=new Ct(re.comparator),BB=new nt(re.comparator);function je(...t){let e=BB;for(const n of t)e=e.add(n);return e}const zB=new nt(_e);function _g(){return zB}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rh(ge.min(),i,_g(),Fn(),je())}}class Mh{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mh(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class I4{constructor(e,n){this.targetId=e,this.Rt=n}}class R4{constructor(e,n,r=zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xk{constructor(){this.Pt=0,this.vt=Jk(),this.bt=zt.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return this.Pt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=je(),n=je(),r=je();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new Mh(this.bt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=Jk()}$t(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class $B{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Fn(),this.Kt=Zk(),this.Gt=new nt(_e)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const a=i.target;if(jp(a))if(r===0){const l=new re(a.path);this.zt(n,l,lt.newNoDocument(l,ge.min()))}else me(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((a,l)=>{const d=this.Xt(l);if(d){if(a.current&&jp(d.target)){const f=new re(d.target.path);this.Ut.get(f)!==null||this.ne(l,f)||this.zt(l,f,lt.newNoDocument(f,e))}a.Ct&&(n.set(l,a.Nt()),a.kt())}});let r=je();this.Kt.forEach((a,l)=>{let d=!0;l.forEachWhile(f=>{const m=this.Xt(f);return!m||m.purpose===2||(d=!1,!1)}),d&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new Rh(e,n,this.Gt,this.Ut,r);return this.Ut=Fn(),this.Kt=Zk(),this.Gt=new nt(_e),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).$t(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.$t(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let n=this.qt.get(e);return n||(n=new Xk,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new nt(_e),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Xk),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Zk(){return new Ct(re.comparator)}function Jk(){return new Ct(re.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB={asc:"ASCENDING",desc:"DESCENDING"},qB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HB={and:"AND",or:"OR"};class GB{constructor(e,n){this.databaseId=e,this.yt=n}}function oc(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M4(t,e){return t.yt?e.toBase64():e.toUint8Array()}function WB(t,e){return oc(t,e.toTimestamp())}function Rt(t){return me(!!t),ge.fromTimestamp(function(e){const n=Fs(e);return new pt(n.seconds,n.nanos)}(t))}function $x(t,e){return function(n){return new Ve(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function N4(t){const e=Ve.fromString(t);return me(F4(e)),e}function Wd(t,e){return $x(t.databaseId,e.path)}function oi(t,e){const n=N4(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(O4(n))}function Jb(t,e){return $x(t.databaseId,e)}function L4(t){const e=N4(t);return e.length===4?Ve.emptyPath():O4(e)}function Yd(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O4(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eA(t,e,n){return{name:Wd(t,e),fields:n.value.mapValue.fields}}function P4(t,e,n){const r=oi(t,e.name),i=Rt(e.updateTime),a=e.createTime?Rt(e.createTime):ge.min(),l=new cn({mapValue:{fields:e.fields}}),d=lt.newFoundDocument(r,i,a,l);return n&&d.setHasCommittedMutations(),n?d.setHasCommittedMutations():d}function YB(t,e){return"found"in e?function(n,r){me(!!r.found),r.found.name,r.found.updateTime;const i=oi(n,r.found.name),a=Rt(r.found.updateTime),l=r.found.createTime?Rt(r.found.createTime):ge.min(),d=new cn({mapValue:{fields:r.found.fields}});return lt.newFoundDocument(i,a,l,d)}(t,e):"missing"in e?function(n,r){me(!!r.missing),me(!!r.readTime);const i=oi(n,r.missing),a=Rt(r.readTime);return lt.newNoDocument(i,a)}(t,e):ce()}function KB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(f,m){return f.yt?(me(m===void 0||typeof m=="string"),zt.fromBase64String(m||"")):(me(m===void 0||m instanceof Uint8Array),zt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(f){const m=f.code===void 0?F.UNKNOWN:A4(f.code);return new Z(m,f.message||"")}(l);n=new R4(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=oi(t,r.document.name),a=Rt(r.document.updateTime),l=r.document.createTime?Rt(r.document.createTime):ge.min(),d=new cn({mapValue:{fields:r.document.fields}}),f=lt.newFoundDocument(i,a,l,d),m=r.targetIds||[],g=r.removedTargetIds||[];n=new ip(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=oi(t,r.document),a=r.readTime?Rt(r.readTime):ge.min(),l=lt.newNoDocument(i,a),d=r.removedTargetIds||[];n=new ip([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=oi(t,r.document),a=r.removedTargetIds||[];n=new ip([],a,i,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,a=new PB(i),l=r.targetId;n=new I4(l,a)}}return n}function Kd(t,e){let n;if(e instanceof kc)n={update:eA(t,e.key,e.value)};else if(e instanceof Ac)n={delete:Wd(t,e.key)};else if(e instanceof qi)n={update:eA(t,e.key,e.data),updateMask:tz(e.fieldMask)};else{if(!(e instanceof zx))return ce();n={verify:Wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ic)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ha)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:a.field.canonicalString(),increment:l.It};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:WB(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce()}(t,e.precondition)),n}function ew(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?ft.updateTime(Rt(i.updateTime)):i.exists!==void 0?ft.exists(i.exists):ft.none()}(e.currentDocument):ft.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;if("setToServerValue"in l)me(l.setToServerValue==="REQUEST_TIME"),d=new ic;else if("appendMissingElements"in l){const m=l.appendMissingElements.values||[];d=new ha(m)}else if("removeAllFromArray"in l){const m=l.removeAllFromArray.values||[];d=new fa(m)}else"increment"in l?d=new sc(a,l.increment):ce();const f=It.fromServerFormat(l.fieldPath);return new Ih(f,d)}(t,i)):[];if(e.update){e.update.name;const i=oi(t,e.update.name),a=new cn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=function(d){const f=d.fieldPaths||[];return new $n(f.map(m=>It.fromServerFormat(m)))}(e.updateMask);return new qi(i,a,l,n,r)}return new kc(i,a,n,r)}if(e.delete){const i=oi(t,e.delete);return new Ac(i,n)}if(e.verify){const i=oi(t,e.verify);return new zx(i,n)}return ce()}function QB(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,i){let a=r.updateTime?Rt(r.updateTime):Rt(i);return a.isEqual(ge.min())&&(a=Rt(i)),new NB(a,r.transformResults||[])}(n,e))):[]}function U4(t,e){return{documents:[Jb(t,e.path)]}}function V4(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Jb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Jb(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(f.length!==0)return $4(Ze.create(f,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(m=>function(g){return{field:Ll(g.field),direction:ZB(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=function(f,m){return f.yt||Ah(m)?m:{value:m}}(t,e.limit);var d;return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),n}function B4(t){let e=L4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){me(r===1);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(g){const v=z4(g);return v instanceof Ze&&Ux(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(g=>function(v){return new Gl(Ol(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g)));let d=null;n.limit&&(d=function(g){let v;return v=typeof g=="object"?g.value:g,Ah(v)?null:v}(n.limit));let f=null;n.startAt&&(f=function(g){const v=!!g.before,w=g.values||[];return new Hs(w,v)}(n.startAt));let m=null;return n.endAt&&(m=function(g){const v=!g.before,w=g.values||[];return new Hs(w,v)}(n.endAt)),f4(e,i,l,a,d,"F",f,m)}function XB(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ce()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function z4(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ol(e.unaryFilter.field);return Oe.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ol(e.unaryFilter.field);return Oe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ol(e.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ol(e.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(e){return Oe.create(Ol(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ze.create(e.compositeFilter.filters.map(n=>z4(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return ce()}}(e.compositeFilter.op))}(t):ce()}function ZB(t){return FB[t]}function JB(t){return qB[t]}function ez(t){return HB[t]}function Ll(t){return{fieldPath:t.canonicalString()}}function Ol(t){return It.fromServerFormat(t.fieldPath)}function $4(t){return t instanceof Oe?function(e){if(e.op==="=="){if(Uk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NAN"}};if(Pk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Uk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NAN"}};if(Pk(e.value))return{unaryFilter:{field:Ll(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(e.field),op:JB(e.op),value:e.value}}}(t):t instanceof Ze?function(e){const n=e.getFilters().map(r=>$4(r));return n.length===1?n[0]:{compositeFilter:{op:ez(e.op),filters:n}}}(t):ce()}function tz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=tA(e)),e=nz(t.get(n),e);return tA(e)}function nz(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function tA(t){return t+""}function ri(t){const e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Ve.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const l=t.indexOf("",a);switch((l<0||l>n)&&ce(),t.charAt(l+1)){case"":const d=t.substring(a,l);let f;i.length===0?f=d:(i+=d,f=i,i=""),r.push(f);break;case"":i+=t.substring(a,l),i+="\0";break;case"":i+=t.substring(a,l+1);break;default:ce()}a=l+2}return new Ve(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){return[t,Dn(e)]}function q4(t,e,n){return[t,Dn(e),n]}const rz={},iz=["prefixPath","collectionGroup","readTime","documentId"],sz=["prefixPath","collectionGroup","documentId"],oz=["collectionGroup","readTime","prefixPath","documentId"],az=["canonicalId","targetId"],lz=["targetId","path"],cz=["path","targetId"],uz=["collectionId","parent"],dz=["indexId","uid"],hz=["uid","sequenceNumber"],fz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mz=["indexId","uid","orderedDocumentKey"],pz=["userId","collectionPath","documentId"],gz=["userId","collectionPath","largestBatchId"],yz=["userId","collectionGroup","largestBatchId"],H4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vz=[...H4,"documentOverlays"],G4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],W4=G4,bz=[...W4,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends e4{constructor(e,n){super(),this.re=e,this.currentSequenceNumber=n}}function Jt(t,e){const n=oe(t);return Rr.M(n.re,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&LB(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D4();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=n.has(i.key)?null:d;const f=C4(l,d);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(n,r)=>Yk(n,r))&&tc(this.baseMutations,e.baseMutations,(n,r)=>Yk(n,r))}}class qx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=VB;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new qx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,n,r,i,a=ge.min(),l=ge.min(),d=zt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.oe=e}}function wz(t,e){let n;if(e.document)n=P4(t.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=re.fromSegments(e.noDocument.path),i=pa(e.noDocument.readTime);n=lt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ce();{const r=re.fromSegments(e.unknownDocument.path),i=pa(e.unknownDocument.version);n=lt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new pt(r[0],r[1]);return ge.fromTimestamp(i)}(e.readTime)),n}function rA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Rp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,a){return{name:Wd(i,a.key),fields:a.data.value.mapValue.fields,updateTime:oc(i,a.version.toTimestamp()),createTime:oc(i,a.createTime.toTimestamp())}}(t.oe,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ma(e.version)};else{if(!e.isUnknownDocument())return ce();r.unknownDocument={path:n.path.toArray(),version:ma(e.version)}}return r}function Rp(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ma(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pa(t){const e=new pt(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function $o(t,e){const n=(e.baseMutations||[]).map(a=>ew(t.oe,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const d=e.mutations[a+1];l.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map(a=>ew(t.oe,a)),i=pt.fromMillis(e.localWriteTimeMs);return new Fx(e.batchId,i,n,r)}function hd(t){const e=pa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?pa(t.lastLimboFreeSnapshotVersion):ge.min();let r;var i;return t.query.documents!==void 0?(me((i=t.query).documents.length===1),r=Hn(Ec(L4(i.documents[0])))):r=function(a){return Hn(B4(a))}(t.query),new Us(r,t.targetId,0,t.lastListenSequenceNumber,e,n,zt.fromBase64String(t.resumeToken))}function K4(t,e){const n=ma(e.snapshotVersion),r=ma(e.lastLimboFreeSnapshotVersion);let i;i=jp(e.target)?U4(t.oe,e.target):V4(t.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:da(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Gx(t){const e=B4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ip(e,e.limit,"L"):e}function r1(t,e){return new Hx(e.largestBatchId,ew(t.oe,e.overlayMutation))}function iA(t,e){const n=e.path.lastSegment();return[t,Dn(e.path.popLast()),n]}function sA(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ma(r.readTime),documentKey:Dn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{getBundleMetadata(e,n){return oA(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pa(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return oA(e).put({bundleId:(r=n).id,createTime:ma(Rt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return aA(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:Gx(i.bundledQuery),readTime:pa(i.readTime)};var i})}saveNamedQuery(e,n){return aA(e).put(function(r){return{name:r.name,readTime:ma(Rt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function oA(t){return Jt(t,"bundles")}function aA(t){return Jt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){this.Tt=e,this.userId=n}static ue(e,n){const r=n.uid||"";return new jg(e,r)}getOverlay(e,n){return zu(e).get(iA(this.userId,n)).next(r=>r?r1(this.Tt,r):null)}getOverlays(e,n){const r=ni();return B.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((a,l)=>{const d=new Hx(n,l);i.push(this.ce(e,d))}),B.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(l=>i.add(Dn(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(zu(e).Y("collectionPathOverlayIndex",d))}),B.waitFor(a)}getOverlaysForCollection(e,n,r){const i=ni(),a=Dn(n),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return zu(e).W("collectionPathOverlayIndex",l).next(d=>{for(const f of d){const m=r1(this.Tt,f);i.set(m.getKey(),m)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const a=ni();let l;const d=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return zu(e).X({index:"collectionGroupOverlayIndex",range:d},(f,m,g)=>{const v=r1(this.Tt,m);a.size()<i||v.largestBatchId===l?(a.set(v.getKey(),v),l=v.largestBatchId):g.done()}).next(()=>a)}ce(e,n){return zu(e).put(function(r,i,a){const[l,d,f]=iA(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Kd(r.oe,a.mutation)}}(this.Tt,this.userId,n))}}function zu(t){return Jt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Tt(e.integerValue));else if("doubleValue"in e){const r=Tt(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Fd(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),typeof r=="string"?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(la(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?i4(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):ce()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),re.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}Fo.Ee=new Fo;function Tz(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function lA(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const a=Tz(255&n[i]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}class Sz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Re(r.value),r=n.next();this.Pe()}ve(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Ve()}Se(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=n.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=n.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const n=this.xe(e),r=lA(n);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}ke(e){const n=this.xe(e),r=lA(n);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Re(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(n)}be(e){const n=255&e;n===0?(this.Fe(0),this.Fe(255)):n===255?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Cz{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class Ez{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class $u{constructor(){this.Le=new Sz,this.qe=new Cz(this.Le),this.Ue=new Ez(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return e===0?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qo(this.indexId,this.documentKey,this.arrayValue,r)}}function ws(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=cA(t.arrayValue,e.arrayValue),n!==0?n:(n=cA(t.directionalValue,e.directionalValue),n!==0?n:re.comparator(t.documentKey,e.documentKey)))}function cA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const n of e.filters){const r=n;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){me(e.collectionGroup===this.collectionId);const n=Hb(e);if(n!==void 0&&!this.He(n))return!1;const r=Po(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(this.ze!==void 0){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Qe.length||!this.Ye(this.Qe[a++],l))return!1}return!0}He(e){for(const n of this.je)if(this.Je(n,e))return!0;return!1}Je(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}Ye(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){var e,n;if(me(t instanceof Oe||t instanceof Ze),t instanceof Oe){if(t instanceof d4){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(a=>Oe.create(t.field,"==",a)))||[];return Ze.create(i,"or")}return t}const r=t.filters.map(i=>Q4(i));return Ze.create(r,t.op)}function Az(t){if(t.getFilters().length===0)return[];const e=iw(Q4(t));return me(X4(e)),nw(e)||rw(e)?[e]:e.getFilters()}function nw(t){return t instanceof Oe}function rw(t){return t instanceof Ze&&Ux(t)}function X4(t){return nw(t)||rw(t)||function(e){if(e instanceof Ze&&Yb(e)){for(const n of e.getFilters())if(!nw(n)&&!rw(n))return!1;return!0}return!1}(t)}function iw(t){if(me(t instanceof Oe||t instanceof Ze),t instanceof Oe)return t;if(t.filters.length===1)return iw(t.filters[0]);const e=t.filters.map(r=>iw(r));let n=Ze.create(e,t.op);return n=Mp(n),X4(n)?n:(me(n instanceof Ze),me(rc(n)),me(n.filters.length>1),n.filters.reduce((r,i)=>Wx(r,i)))}function Wx(t,e){let n;return me(t instanceof Oe||t instanceof Ze),me(e instanceof Oe||e instanceof Ze),n=t instanceof Oe?e instanceof Oe?function(r,i){return Ze.create([r,i],"and")}(t,e):uA(t,e):e instanceof Oe?uA(e,t):function(r,i){if(me(r.filters.length>0&&i.filters.length>0),rc(r)&&rc(i))return l4(r,i.getFilters());const a=Yb(r)?r:i,l=Yb(r)?i:r,d=a.filters.map(f=>Wx(f,l));return Ze.create(d,"or")}(t,e),Mp(n)}function uA(t,e){if(rc(e))return l4(e,t.getFilters());{const n=e.filters.map(r=>Wx(t,r));return Ze.create(n,"or")}}function Mp(t){if(me(t instanceof Oe||t instanceof Ze),t instanceof Oe)return t;const e=t.getFilters();if(e.length===1)return Mp(e[0]);if(o4(t))return t;const n=e.map(i=>Mp(i)),r=[];return n.forEach(i=>{i instanceof Oe?r.push(i):i instanceof Ze&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ze.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.Ze=new Yx}addToCollectionParentIndex(e,n){return this.Ze.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(ar.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class Yx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(Ve.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new Uint8Array(0);class jz{constructor(e,n){this.user=e,this.databaseId=n,this.Xe=new Yx,this.tn=new no(r=>da(r),(r,i)=>_h(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Xe.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.Xe.add(n)});const a={collectionId:r,parent:Dn(i)};return dA(e).put(a)}return B.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[KI(n),""],!1,!0);return dA(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==n)break;r.push(ri(l.parent))}return r})}addFieldIndex(e,n){const r=xm(e),i=function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])}}(n);delete i.indexId;const a=r.add(i);if(n.indexState){const l=qu(e);return a.next(d=>{l.put(sA(d,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return a.next()}deleteFieldIndex(e,n){const r=xm(e),i=qu(e),a=Fu(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Fu(e);let i=!0;const a=new Map;return B.forEach(this.en(n),l=>this.nn(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=je();const d=[];return B.forEach(a,(f,m)=>{var g;ee("IndexedDbIndexManager",`Using index ${g=f,`id=${g.indexId}|cg=${g.collectionGroup}|f=${g.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`} to execute ${da(n)}`);const v=function(I,q){const j=Hb(q);if(j===void 0)return null;for(const M of Dp(I,j.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(m,f),w=function(I,q){const j=new Map;for(const M of Po(q))for(const $ of Dp(I,M.fieldPath))switch($.op){case"==":case"in":j.set(M.fieldPath.canonicalString(),$.value);break;case"not-in":case"!=":return j.set(M.fieldPath.canonicalString(),$.value),Array.from(j.values())}return null}(m,f),x=function(I,q){const j=[];let M=!0;for(const $ of Po(q)){const Q=$.kind===0?qk(I,$.fieldPath,I.startAt):Hk(I,$.fieldPath,I.startAt);j.push(Q.value),M&&(M=Q.inclusive)}return new Hs(j,M)}(m,f),T=function(I,q){const j=[];let M=!0;for(const $ of Po(q)){const Q=$.kind===0?Hk(I,$.fieldPath,I.endAt):qk(I,$.fieldPath,I.endAt);j.push(Q.value),M&&(M=Q.inclusive)}return new Hs(j,M)}(m,f),C=this.sn(f,m,x),A=this.sn(f,m,T),_=this.rn(f,m,w),L=this.on(f.indexId,v,C,x.inclusive,A,T.inclusive,_);return B.forEach(L,I=>r.J(I,n.limit).next(q=>{q.forEach(j=>{const M=re.fromSegments(j.documentKey);l.has(M)||(l=l.add(M),d.push(M))})}))}).next(()=>d)}return B.resolve(null)})}en(e){let n=this.tn.get(e);return n||(e.filters.length===0?n=[e]:n=Az(Ze.create(e.filters,"and")).map(r=>Qb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,n),n)}on(e,n,r,i,a,l,d){const f=(n!=null?n.length:1)*Math.max(r.length,a.length),m=f/(n!=null?n.length:1),g=[];for(let v=0;v<f;++v){const w=n?this.un(n[v/m]):wm,x=this.cn(e,w,r[v%m],i),T=this.an(e,w,a[v%m],l),C=d.map(A=>this.cn(e,w,A,!0));g.push(...this.createRange(x,T,C))}return g}cn(e,n,r,i){const a=new qo(e,re.empty(),n,r);return i?a:a.Ge()}an(e,n,r,i){const a=new qo(e,re.empty(),n,r);return i?a.Ge():a}nn(e,n){const r=new kz(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.We(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,n){let r=2;const i=this.en(n);return B.forEach(i,a=>this.nn(e,a).next(l=>{l?r!==0&&l.fields.length<function(d){let f=new nt(It.comparator),m=!1;for(const g of d.filters)for(const v of g.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?m=!0:f=f.add(v.field));for(const g of d.orderBy)g.field.isKeyField()||(f=f.add(g.field));return f.size+(m?1:0)}(a)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&i.length>1&&r===2?1:r)}hn(e,n){const r=new $u;for(const i of Po(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const l=r.Ke(i.kind);Fo.Ee.ae(a,l)}return r.Be()}un(e){const n=new $u;return Fo.Ee.ae(e,n.Ke(0)),n.Be()}ln(e,n){const r=new $u;return Fo.Ee.ae(ua(this.databaseId,n),r.Ke(function(i){const a=Po(i);return a.length===0?0:a[a.length-1].kind}(e))),r.Be()}rn(e,n,r){if(r===null)return[];let i=[];i.push(new $u);let a=0;for(const l of Po(e)){const d=r[a++];for(const f of i)if(this.fn(n,l.fieldPath)&&Gd(d))i=this.dn(i,l,d);else{const m=f.Ke(l.kind);Fo.Ee.ae(d,m)}}return this._n(i)}sn(e,n,r){return this.rn(e,n,r.position)}_n(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Be();return n}dn(e,n,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const f=new $u;f.seed(d.Be()),Fo.Ee.ae(l,f.Ke(n.kind)),a.push(f)}return a}fn(e,n){return!!e.filters.find(r=>r instanceof Oe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xm(e),i=qu(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(a=>{const l=[];return B.forEach(a,d=>i.get([d.indexId,this.uid]).next(f=>{l.push(function(m,g){const v=g?new _p(g.sequenceNumber,new ar(pa(g.readTime),new re(ri(g.documentKey)),g.largestBatchId)):_p.empty(),w=m.fields.map(([x,T])=>new dB(It.fromServerFormat(x),T));return new QI(m.indexId,m.collectionGroup,w,v)}(d,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:_e(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=xm(e),a=qu(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(d=>B.forEach(d,f=>a.put(sA(f.indexId,this.user,l,r)))))}updateIndexEntries(e,n){const r=new Map;return B.forEach(n,(i,a)=>{const l=r.get(i.collectionGroup);return(l?B.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),B.forEach(d,f=>this.mn(e,i,f).next(m=>{const g=this.gn(a,f);return m.isEqual(g)?B.resolve():this.yn(e,a,f,m,g)}))))})}pn(e,n,r,i){return Fu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,n.key),documentKey:n.key.path.toArray()})}In(e,n,r,i){return Fu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,n.key),n.key.path.toArray()])}mn(e,n,r){const i=Fu(e);let a=new nt(ws);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,n)])},(l,d)=>{a=a.add(new qo(r.indexId,n,d.arrayValue,d.directionalValue))}).next(()=>a)}gn(e,n){let r=new nt(ws);const i=this.hn(n,e);if(i==null)return r;const a=Hb(n);if(a!=null){const l=e.data.field(a.fieldPath);if(Gd(l))for(const d of l.arrayValue.values||[])r=r.add(new qo(n.indexId,e.key,this.un(d),i))}else r=r.add(new qo(n.indexId,e.key,wm,i));return r}yn(e,n,r,i,a){ee("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const l=[];return function(d,f,m,g,v){const w=d.getIterator(),x=f.getIterator();let T=bl(w),C=bl(x);for(;T||C;){let A=!1,_=!1;if(T&&C){const L=m(T,C);L<0?_=!0:L>0&&(A=!0)}else T!=null?_=!0:A=!0;A?(g(C),C=bl(x)):_?(v(T),T=bl(w)):(T=bl(w),C=bl(x))}}(i,a,ws,d=>{l.push(this.pn(e,n,r,d))},d=>{l.push(this.In(e,n,r,d))}),B.waitFor(l)}wn(e){let n=1;return qu(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((l,d)=>ws(l,d)).filter((l,d,f)=>!d||ws(l,f[d-1])!==0);const i=[];i.push(e);for(const l of r){const d=ws(l,e),f=ws(l,n);if(d===0)i[0]=e.Ge();else if(d>0&&f<0)i.push(l),i.push(l.Ge());else if(f>0)break}i.push(n);const a=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];const d=[i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,wm,[]],f=[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,wm,[]];a.push(IDBKeyRange.bound(d,f))}return a}Tn(e,n){return ws(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(hA)}getMinOffset(e,n){return B.mapArray(this.en(n),r=>this.nn(e,r).next(i=>i||ce())).next(hA)}}function dA(t){return Jt(t,"collectionParents")}function Fu(t){return Jt(t,"indexEntries")}function xm(t){return Jt(t,"indexConfiguration")}function qu(t){return Jt(t,"indexState")}function hA(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Lx(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ar(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),a=[],l=IDBKeyRange.only(n.batchId);let d=0;const f=r.X({range:l},(g,v,w)=>(d++,w.delete()));a.push(f.next(()=>{me(d===1)}));const m=[];for(const g of n.mutations){const v=q4(e,g.key.path,n.batchId);a.push(i.delete(v)),m.push(g.key)}return B.waitFor(a).next(()=>m)}function Np(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ce();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class Dg{constructor(e,n,r,i){this.userId=e,this.Tt=n,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,n,r,i){me(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Dg(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{n=!1,l.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const a=Pl(e),l=xs(e);return l.add({}).next(d=>{me(typeof d=="number");const f=new Fx(d,n,r,i),m=function(w,x,T){const C=T.baseMutations.map(_=>Kd(w.oe,_)),A=T.mutations.map(_=>Kd(w.oe,_));return{userId:x,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:C,mutations:A}}(this.Tt,this.userId,f),g=[];let v=new nt((w,x)=>_e(w.canonicalString(),x.canonicalString()));for(const w of i){const x=q4(this.userId,w.key.path,d);v=v.add(w.key.path.popLast()),g.push(l.put(m)),g.push(a.put(x,rz))}return v.forEach(w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.En[d]=f.keys()}),B.waitFor(g).next(()=>f)})}lookupMutationBatch(e,n){return xs(e).get(n).next(r=>r?(me(r.userId===this.userId),$o(this.Tt,r)):null)}An(e,n){return this.En[n]?B.resolve(this.En[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.En[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return xs(e).X({index:"userMutationsIndex",range:i},(l,d,f)=>{d.userId===this.userId&&(me(d.batchId>=r),a=$o(this.Tt,d)),f.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return xs(e).X({index:"userMutationsIndex",range:n,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xs(e).W("userMutationsIndex",n).next(r=>r.map(i=>$o(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=sp(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Pl(e).X({range:i},(l,d,f)=>{const[m,g,v]=l,w=ri(g);if(m===this.userId&&n.path.isEqual(w))return xs(e).get(v).next(x=>{if(!x)throw ce();me(x.userId===this.userId),a.push($o(this.Tt,x))});f.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(_e);const i=[];return n.forEach(a=>{const l=sp(this.userId,a.path),d=IDBKeyRange.lowerBound(l),f=Pl(e).X({range:d},(m,g,v)=>{const[w,x,T]=m,C=ri(x);w===this.userId&&a.path.isEqual(C)?r=r.add(T):v.done()});i.push(f)}),B.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=sp(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new nt(_e);return Pl(e).X({range:l},(f,m,g)=>{const[v,w,x]=f,T=ri(w);v===this.userId&&r.isPrefixOf(T)?T.length===i&&(d=d.add(x)):g.done()}).next(()=>this.Rn(e,d))}Rn(e,n){const r=[],i=[];return n.forEach(a=>{i.push(xs(e).get(a).next(l=>{if(l===null)throw ce();me(l.userId===this.userId),r.push($o(this.Tt,l))}))}),B.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Z4(e.re,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Pn(n.batchId)}),B.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Pl(e).X({range:r},(a,l,d)=>{if(a[0]===this.userId){const f=ri(a[1]);i.push(f)}else d.done()}).next(()=>{me(i.length===0)})})}containsKey(e,n){return J4(e,this.userId,n)}vn(e){return e6(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function J4(t,e,n){const r=sp(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return Pl(t).X({range:a,Z:!0},(d,f,m)=>{const[g,v,w]=d;g===e&&v===i&&(l=!0),m.done()}).next(()=>l)}function xs(t){return Jt(t,"mutations")}function Pl(t){return Jt(t,"documentMutations")}function e6(t){return Jt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new ga(0)}static Sn(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,n){this.referenceDelegate=e,this.Tt=n}allocateTargetId(e){return this.Dn(e).next(n=>{const r=new ga(n.highestTargetId);return n.highestTargetId=r.next(),this.Cn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(n=>ge.fromTimestamp(new pt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Cn(e,i)))}addTargetData(e,n){return this.xn(e,n).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(n,r),this.Cn(e,r))))}updateTargetData(e,n){return this.xn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>wl(e).delete(n.targetId)).next(()=>this.Dn(e)).next(r=>(me(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,n,r){let i=0;const a=[];return wl(e).X((l,d)=>{const f=hd(d);f.sequenceNumber<=n&&r.get(f.targetId)===null&&(i++,a.push(this.removeTargetData(e,f)))}).next(()=>B.waitFor(a)).next(()=>i)}forEachTarget(e,n){return wl(e).X((r,i)=>{const a=hd(i);n(a)})}Dn(e){return mA(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}Cn(e,n){return mA(e).put("targetGlobalKey",n)}xn(e,n){return wl(e).put(K4(this.Tt,n))}Nn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=da(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return wl(e).X({range:i,index:"queryTargetsIndex"},(l,d,f)=>{const m=hd(d);_h(n,m.target)&&(a=m,f.done())}).next(()=>a)}addMatchingKeys(e,n,r){const i=[],a=Ms(e);return n.forEach(l=>{const d=Dn(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),B.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ms(e);return B.forEach(n,a=>{const l=Dn(a.path);return B.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,n){const r=Ms(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ms(e);let a=je();return i.X({range:r,Z:!0},(l,d,f)=>{const m=ri(l[1]),g=new re(m);a=a.add(g)}).next(()=>a)}containsKey(e,n){const r=Dn(n.path),i=IDBKeyRange.bound([r],[KI(r)],!1,!0);let a=0;return Ms(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,d],f,m)=>{l!==0&&(a++,m.done())}).next(()=>a>0)}ie(e,n){return wl(e).get(n).next(r=>r?hd(r):null)}}function wl(t){return Jt(t,"targets")}function mA(t){return Jt(t,"targetGlobal")}function Ms(t){return Jt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA([t,e],[n,r]){const i=_e(t,n);return i===0?_e(e,r):i}class Iz{constructor(e){this.kn=e,this.buffer=new nt(pA),this.$n=0}Mn(){return++this.$n}On(e){const n=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Rz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Fn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return this.Fn!==null}Bn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Fn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Bn(3e5)})}}class Mz{constructor(e,n){this.Ln=e,this.params=n}calculateTargetCount(e,n){return this.Ln.qn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(zn.at);const r=new Iz(n);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Ln.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Ln.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(fA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.Kn(e,n))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,n){let r,i,a,l,d,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,l=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,d=Date.now(),this.removeTargets(e,r,n))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(m=Date.now(),qb()<=ze.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:v})))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e,n){this.db=e,this.garbageCollector=function(r,i){return new Mz(r,i)}(this,n)}qn(e){const n=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Gn(e){let n=0;return this.Un(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Un(e,n){return this.Qn(e,(r,i)=>n(i))}addReference(e,n,r){return Tm(e,r)}removeReference(e,n,r){return Tm(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Tm(e,n)}jn(e,n){return function(r,i){let a=!1;return e6(r).tt(l=>J4(r,l,i).next(d=>(d&&(a=!0),B.resolve(!d)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(l,d)=>{if(d<=n){const f=this.jn(e,l).next(m=>{if(!m)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,ge.min()),Ms(e).delete([0,Dn(l.path)])))});i.push(f)}}).next(()=>B.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Tm(e,n)}Qn(e,n){const r=Ms(e);let i,a=zn.at;return r.X({index:"documentTargetsIndex"},([l,d],{path:f,sequenceNumber:m})=>{l===0?(a!==zn.at&&n(new re(ri(i)),a),a=m,i=f):a=zn.at}).next(()=>{a!==zn.at&&n(new re(ri(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tm(t,e){return Ms(t).put(function(n,r){return{targetId:0,path:Dn(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ko(e).put(r)}removeEntry(e,n,r){return ko(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Rp(a),l[l.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.zn(e,r)))}getEntry(e,n){let r=lt.newInvalidDocument(n);return ko(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hu(n))},(i,a)=>{r=this.Wn(n,a)}).next(()=>r)}Hn(e,n){let r={size:0,document:lt.newInvalidDocument(n)};return ko(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Hu(n))},(i,a)=>{r={document:this.Wn(n,a),size:Np(a)}}).next(()=>r)}getEntries(e,n){let r=Fn();return this.Jn(e,n,(i,a)=>{const l=this.Wn(i,a);r=r.insert(i,l)}).next(()=>r)}Yn(e,n){let r=Fn(),i=new Ct(re.comparator);return this.Jn(e,n,(a,l)=>{const d=this.Wn(a,l);r=r.insert(a,d),i=i.insert(a,Np(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,n,r){if(n.isEmpty())return B.resolve();let i=new nt(vA);n.forEach(f=>i=i.add(f));const a=IDBKeyRange.bound(Hu(i.first()),Hu(i.last())),l=i.getIterator();let d=l.getNext();return ko(e).X({index:"documentKeyIndex",range:a},(f,m,g)=>{const v=re.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&vA(d,v)<0;)r(d,null),d=l.getNext();d&&d.isEqual(v)&&(r(d,m),d=l.hasNext()?l.getNext():null),d?g.j(Hu(d)):g.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,n,r,i){const a=n.path,l=[a.popLast().toArray(),a.lastSegment(),Rp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ko(e).W(IDBKeyRange.bound(l,d,!0)).next(f=>{let m=Fn();for(const g of f){const v=this.Wn(re.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);v.isFoundDocument()&&(Dh(n,v)||i.has(v.key))&&(m=m.insert(v.key,v))}return m})}getAllFromCollectionGroup(e,n,r,i){let a=Fn();const l=yA(n,r),d=yA(n,ar.max());return ko(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(f,m,g)=>{const v=this.Wn(re.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);a=a.insert(v.key,v),a.size===i&&g.done()}).next(()=>a)}newChangeBuffer(e){return new Oz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return gA(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}zn(e,n){return gA(e).put("remoteDocumentGlobalKey",n)}Wn(e,n){if(n){const r=wz(this.Tt,n);if(!(r.isNoDocument()&&r.version.isEqual(ge.min())))return r}return lt.newInvalidDocument(e)}}function n6(t){return new Lz(t)}class Oz extends t6{constructor(e,n){super(),this.Xn=e,this.trackRemovals=n,this.ts=new no(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new nt((a,l)=>_e(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.ts.get(a);if(n.push(this.Xn.removeEntry(e,a,d.readTime)),l.isValidDocument()){const f=rA(this.Xn.Tt,l);i=i.add(a.path.popLast());const m=Np(f);r+=m-d.size,n.push(this.Xn.addEntry(e,a,f))}else if(r-=d.size,this.trackRemovals){const f=rA(this.Xn.Tt,l.convertToNoDocument(ge.min()));n.push(this.Xn.addEntry(e,a,f))}}),i.forEach(a=>{n.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),n.push(this.Xn.updateMetadata(e,r)),B.waitFor(n)}getFromCache(e,n){return this.Xn.Hn(e,n).next(r=>(this.ts.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Xn.Yn(e,n).next(({documents:r,Zn:i})=>(i.forEach((a,l)=>{this.ts.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function gA(t){return Jt(t,"remoteDocumentGlobal")}function ko(t){return Jt(t,"remoteDocumentsV14")}function Hu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yA(t,e){const n=e.documentKey.path.toArray();return[t,Rp(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vA(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=_e(n[a],r[a]),i)return i;return i=_e(n.length,r.length),i||(i=_e(n[n.length-2],r[r.length-2]),i||_e(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bd(r.mutation,i,$n.empty(),pt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=ni();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=dd();return a.forEach((d,f)=>{l=l.insert(d,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{n.set(l,d)})})}computeViews(e,n,r,i){let a=Fn();const l=wd(),d=wd();return n.forEach((f,m)=>{const g=r.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof qi)?a=a.insert(m.key,m):g!==void 0?(l.set(m.key,g.mutation.getFieldMask()),bd(g.mutation,m,g.mutation.getFieldMask(),pt.now())):l.set(m.key,$n.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((m,g)=>l.set(m,g)),n.forEach((m,g)=>{var v;return d.set(m,new Pz(g,(v=l.get(m))!==null&&v!==void 0?v:null))}),d))}recalculateAndSaveOverlays(e,n){const r=wd();let i=new Ct((l,d)=>l-d),a=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const d of l)d.keys().forEach(f=>{const m=n.get(f);if(m===null)return;let g=r.get(f)||$n.empty();g=d.applyToLocalView(m,g),r.set(f,g);const v=(i.get(d.batchId)||je()).add(f);i=i.insert(d.batchId,v)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,g=f.value,v=D4();g.forEach(w=>{if(!a.has(w)){const x=C4(n.get(w),r.get(w));x!==null&&v.set(w,x),a=a.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,v))}return B.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return re.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):B.resolve(ni());let d=-1,f=a;return l.next(m=>B.forEach(m,(g,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),a.get(g)?B.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{f=f.insert(g,w)}))).next(()=>this.populateOverlays(e,m,a)).next(()=>this.computeViews(e,f,m,je())).next(g=>({batchId:d,changes:j4(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=dd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let a=dd();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,d=>{const f=function(m,g){return new Fi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r).next(m=>{m.forEach((g,v)=>{a=a.insert(g,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(a=>{i.forEach((d,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,lt.newInvalidDocument(m)))});let l=dd();return a.forEach((d,f)=>{const m=i.get(d);m!==void 0&&bd(m.mutation,f,$n.empty(),pt.now()),Dh(n,f)&&(l=l.insert(d,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return B.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Rt(r.createTime)}),B.resolve()}getNamedQuery(e,n){return B.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:Gx(r.bundledQuery),readTime:Rt(r.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(){this.overlays=new Ct(re.comparator),this.ss=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ni();return B.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ce(e,n,a)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=ni(),a=n.length+1,l=new re(n.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new Ct((m,g)=>m-g);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let g=a.get(m.largestBatchId);g===null&&(g=ni(),a=a.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const d=ni(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,g)=>d.set(m,g)),!(d.size()>=i)););return B.resolve(d)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Hx(n,r));let a=this.ss.get(n);a===void 0&&(a=je(),this.ss.set(n,a)),this.ss.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.rs=new nt(Wt.os),this.us=new nt(Wt.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new Wt(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new Wt(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new re(new Ve([])),r=new Wt(n,e),i=new Wt(n,e+1),a=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),a.push(l.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new re(new Ve([])),r=new Wt(n,e),i=new Wt(n,e+1);let a=je();return this.us.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Wt(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return re.comparator(e.key,n.key)||_e(e.gs,n.gs)}static cs(e,n){return _e(e.gs,n.gs)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new nt(Wt.os)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Fx(a,n,r,i);this.mutationQueue.push(l);for(const d of i)this.ps=this.ps.add(new Wt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return B.resolve(l)}lookupMutationBatch(e,n){return B.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),a=i<0?0:i;return B.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Wt(n,0),i=new Wt(n,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],l=>{const d=this.Is(l.gs);a.push(d)}),B.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(_e);return n.forEach(i=>{const a=new Wt(i,0),l=new Wt(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,l],d=>{r=r.add(d.gs)})}),B.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;re.isDocumentKey(a)||(a=a.child(""));const l=new Wt(new re(a),0);let d=new nt(_e);return this.ps.forEachWhile(f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.gs)),!0)},l),B.resolve(this.Es(d))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return B.forEach(n.mutations,i=>{const a=new Wt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,n){const r=new Wt(n,0),i=this.ps.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.Rs=e,this.docs=new Ct(re.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():lt.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():lt.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Fn();const l=n.path,d=new re(l.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||Lx(ZI(g),r)<=0||(i.has(g.key)||Dh(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return B.resolve(a)}getAllFromCollectionGroup(e,n,r,i){ce()}Ps(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $z(this)}getSize(e){return B.resolve(this.size)}}class $z extends t6{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.persistence=e,this.vs=new no(n=>da(n),_h),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.bs=0,this.Vs=new Kx,this.targetCount=0,this.Ss=ga.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),B.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new ga(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.xn(n),B.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.vs.forEach((l,d)=>{d.sequenceNumber<=n&&r.get(d.targetId)===null&&(this.vs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),B.waitFor(a).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),B.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new zn(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new Fz(this),this.indexManager=new _z,this.remoteDocumentCache=function(r){return new zz(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new Y4(n),this.$s=new Uz(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new Bz(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new qz(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,n){return B.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class qz extends e4{constructor(e){super(),this.currentSequenceNumber=e}}class Ig{constructor(e){this.persistence=e,this.Bs=new Kx,this.Ls=null}static qs(e){return new Ig(e)}get Us(){if(this.Ls)return this.Ls;throw ce()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),B.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Us,r=>{const i=re.fromPath(r);return this.Ks(e,i).next(a=>{a||n.removeEntry(i,ge.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return B.or([()=>B.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Fs(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.Tt=e}F(e,n,r,i){const a=new Cg("createOrUpgrade",n);r<1&&i>=1&&(function(d){d.createObjectStore("owner")}(e),function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nA,{unique:!0}),d.createObjectStore("documentMutations")}(e),bA(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=B.resolve();return r<3&&i>=3&&(r!==0&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),bA(e)),l=l.next(()=>function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(a))),r<4&&i>=4&&(r!==0&&(l=l.next(()=>function(d,f){return f.store("mutations").W().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nA,{unique:!0});const g=f.store("mutations"),v=m.map(w=>g.put(w));return B.waitFor(v)})}(e,a))),l=l.next(()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(l=l.next(()=>this.js(a))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:pz});f.createIndex("collectionPathOverlayIndex",gz,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",yz,{unique:!1})})(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:iz});f.createIndex("documentKeyIndex",sz),f.createIndex("collectionGroupIndex",oz)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:dz}).createIndex("sequenceNumberIndex",hz,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:fz}).createIndex("documentKeyIndex",mz,{unique:!1})}(e))),l}Qs(e){let n=0;return e.store("remoteDocuments").X((r,i)=>{n+=Np(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>B.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>B.forEach(d,f=>{me(f.userId===a.userId);const m=$o(this.Tt,f);return Z4(e,a.userId,m).next(()=>{})}))}))}js(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,d)=>{const f=new Ve(l),m=function(g){return[0,Dn(g)]}(f);a.push(n.get(m).next(g=>g?B.resolve():(v=>n.put({targetId:0,path:Dn(v),sequenceNumber:i.highestListenSequenceNumber}))(f)))}).next(()=>B.waitFor(a))})}zs(e,n){e.createObjectStore("collectionParents",{keyPath:uz});const r=n.store("collectionParents"),i=new Yx,a=l=>{if(i.add(l)){const d=l.lastSegment(),f=l.popLast();return r.put({collectionId:d,parent:Dn(f)})}};return n.store("remoteDocuments").X({Z:!0},(l,d)=>{const f=new Ve(l);return a(f.popLast())}).next(()=>n.store("documentMutations").X({Z:!0},([l,d,f],m)=>{const g=ri(d);return a(g.popLast())}))}Ws(e){const n=e.store("targets");return n.X((r,i)=>{const a=hd(i),l=K4(this.Tt,a);return n.put(l)})}Hs(e,n){const r=n.store("remoteDocuments"),i=[];return r.X((a,l)=>{const d=n.store("remoteDocumentsV14"),f=(m=l,m.document?new re(Ve.fromString(m.document.name).popFirst(5)):m.noDocument?re.fromSegments(m.noDocument.path):m.unknownDocument?re.fromSegments(m.unknownDocument.path):ce()).path.toArray();var m;/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/const g={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(g))}).next(()=>B.waitFor(i))}Js(e,n){const r=n.store("mutations"),i=n6(this.Tt),a=new i6(Ig.qs,this.Tt.oe);return r.W().next(l=>{const d=new Map;return l.forEach(f=>{var m;let g=(m=d.get(f.userId))!==null&&m!==void 0?m:je();$o(this.Tt,f).keys().forEach(v=>g=g.add(v)),d.set(f.userId,g)}),B.forEach(d,(f,m)=>{const g=new Yt(m),v=jg.ue(this.Tt,g),w=a.getIndexManager(g),x=Dg.ue(g,this.Tt,w,a.referenceDelegate);return new r6(i,x,v,w).recalculateAndSaveOverlaysForDocumentKeys(new tw(n,zn.at),f).next()})})}}function bA(t){t.createObjectStore("targetDocuments",{keyPath:lz}).createIndex("documentTargetsIndex",cz,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",az,{unique:!0}),t.createObjectStore("targetGlobal")}const i1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qx{constructor(e,n,r,i,a,l,d,f,m,g,v=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ys=a,this.window=l,this.document=d,this.Zs=m,this.Xs=g,this.ti=v,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=w=>Promise.resolve(),!Qx.C())throw new Z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nz(this,i),this.oi=n+"main",this.Tt=new Y4(f),this.ui=new Rr(this.oi,this.ti,new Hz(this.Tt)),this.Ns=new Dz(this.referenceDelegate,this.Tt),this.remoteDocumentCache=n6(this.Tt),this.$s=new xz,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,g===!1&&Dt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,i1);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new zn(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){return this.ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget(async()=>{this.started&&await this.ai()}))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(n=>{n||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(n=>this.isPrimary&&!n?this.mi(e).next(()=>!1):!!n&&this.gi(e).next(()=>!0))).catch(e=>{if(to(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Gu(e).get("owner").next(n=>B.resolve(this.yi(n)))}pi(e){return Sm(e).delete(this.clientId)}async Ii(){if(this.isPrimary&&!this.Ti(this.ii,18e5)){this.ii=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Jt(n,"clientMetadata");return r.W().next(i=>{const a=this.Ei(i,18e5),l=i.filter(d=>a.indexOf(d)===-1);return B.forEach(l,d=>r.delete(d.clientId)).next(()=>l)})}).catch(()=>[]);if(this.ci)for(const n of e)this.ci.removeItem(this.Ai(n.clientId))}}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?B.resolve(!0):Gu(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)){if(this.yi(n)&&this.networkEnabled)return!0;if(!this.yi(n)){if(!n.allowTabSynchronization)throw new Z(F.FAILED_PRECONDITION,i1);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sm(e).W().next(r=>this.Ei(r,5e3).find(i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(a||l&&d)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&ee("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.xs=!1,this.Pi(),this.si&&(this.si.cancel(),this.si=null),this.vi(),this.bi(),await this.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new tw(e,zn.at);return this.mi(n).next(()=>this.pi(n))}),this.ui.close(),this.Vi()}Ei(e,n){return e.filter(r=>this.Ti(r.updateTimeMs,n)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Sm(e).W().next(n=>this.Ei(n,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,n){return Dg.ue(e,this.Tt,n,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jz(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return jg.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,n,r){ee("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(l=this.ti)===15?bz:l===14?W4:l===13?G4:l===12?vz:l===11?H4:void ce();var l;let d;return this.ui.runTransaction(e,i,a,f=>(d=new tw(f,this.Cs?this.Cs.next():zn.at),n==="readwrite-primary"?this._i(d).next(m=>!!m||this.wi(d)).next(m=>{if(!m)throw Dt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Z(F.FAILED_PRECONDITION,JI);return r(d)}).next(m=>this.gi(d).next(()=>m)):this.Di(d).next(()=>r(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Di(e){return Gu(e).get("owner").next(n=>{if(n!==null&&this.Ti(n.leaseTimestampMs,5e3)&&!this.Ri(n.ownerId)&&!this.yi(n)&&!(this.Xs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Z(F.FAILED_PRECONDITION,i1)})}gi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gu(e).put("owner",n)}static C(){return Rr.C()}mi(e){const n=Gu(e);return n.get("owner").next(r=>this.yi(r)?(ee("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ti(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Dt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}hi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground=this.document.visibilityState==="visible")}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ei=()=>{this.Pi();const n=/(?:Version|Mobile)\/1[456]/;EP()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var n;try{const r=((n=this.ci)===null||n===void 0?void 0:n.getItem(this.Ai(e)))!==null;return ee("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Dt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Dt("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gu(t){return Jt(t,"owner")}function Sm(t){return Jt(t,"clientMetadata")}function Xx(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=je(),i=je();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Zx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(a=>a||this.Oi(e,n,i,r)).next(a=>a||this.Fi(e,n))}Mi(e,n){if(Gk(n))return B.resolve(null);let r=Hn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ip(n,null,"F"),r=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=je(...a);return this.$i.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(f=>{const m=this.Bi(n,d);return this.Li(n,m,l,f.readTime)?this.Mi(e,Ip(n,null,"F")):this.qi(e,m,n,f)}))})))}Oi(e,n,r,i){return Gk(n)||i.isEqual(ge.min())?this.Fi(e,n):this.$i.getDocuments(e,r).next(a=>{const l=this.Bi(n,a);return this.Li(n,l,r,i)?this.Fi(e,n):(qb()<=ze.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zb(n)),this.qi(e,l,n,XI(i,-1)))})}Bi(e,n){let r=new nt(g4(e));return n.forEach((i,a)=>{Dh(e,a)&&(r=r.add(a))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,n){return qb()<=ze.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Zb(n)),this.$i.getDocumentsMatchingQuery(e,n,ar.min())}qi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new Ct(_e),this.Gi=new no(a=>da(a),_h),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r6(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function o6(t,e,n,r){return new Gz(t,e,n,r)}async function a6(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let f=je();for(const m of i){l.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of a){d.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(m=>({Wi:m,removedBatchIds:l,addedBatchIds:d}))})})}function Wz(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.ji.newChangeBuffer({trackRemovals:!0});return function(l,d,f,m){const g=f.batch,v=g.keys();let w=B.resolve();return v.forEach(x=>{w=w.next(()=>m.getEntry(d,x)).next(T=>{const C=f.docVersions.get(x);me(C!==null),T.version.compareTo(C)<0&&(g.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),m.addEntry(T)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(d,g))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=je();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(d=d.add(l.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function l6(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function Yz(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const d=[];e.targetChanges.forEach((g,v)=>{const w=i.get(v);if(!w)return;d.push(n.Ns.removeMatchingKeys(a,g.removedDocuments,v).next(()=>n.Ns.addMatchingKeys(a,g.addedDocuments,v)));let x=w.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.has(v)?x=x.withResumeToken(zt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):g.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(g.resumeToken,r)),i=i.insert(v,x),function(T,C,A){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(w,x,g)&&d.push(n.Ns.updateTargetData(a,x))});let f=Fn(),m=je();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),d.push(c6(a,l,e.documentUpdates).next(g=>{f=g.Hi,m=g.Ji})),!r.isEqual(ge.min())){const g=n.Ns.getLastRemoteSnapshotVersion(a).next(v=>n.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(g)}return B.waitFor(d).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,m)).next(()=>f)}).then(a=>(n.Ki=i,a))}function c6(t,e,n){let r=je(),i=je();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=Fn();return n.forEach((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(ge.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):ee("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),{Hi:l,Ji:i}})}function Kz(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ac(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(a=>a?(i=a,B.resolve(i)):n.Ns.allocateTargetId(r).next(l=>(i=new Us(e,l,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function lc(t,e,n){const r=oe(t),i=r.Ki.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!to(l))throw l;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Lp(t,e,n){const r=oe(t);let i=ge.min(),a=je();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,f,m){const g=oe(d),v=g.Gi.get(m);return v!==void 0?B.resolve(g.Ki.get(v)):g.Ns.getTargetData(f,m)}(r,l,Hn(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,d.targetId).next(f=>{a=f})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,n?i:ge.min(),n?a:je())).next(d=>(h6(r,p4(e),d),{documents:d,Yi:a})))}function u6(t,e){const n=oe(t),r=oe(n.Ns),i=n.Ki.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(l=>l?l.target:null))}function d6(t,e){const n=oe(t),r=n.Qi.get(e)||ge.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ji.getAllFromCollectionGroup(i,e,XI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(h6(n,e,i),i))}function h6(t,e,n){let r=t.Qi.get(e)||ge.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Qi.set(e,r)}async function Qz(t,e,n,r){const i=oe(t);let a=je(),l=Fn();for(const m of n){const g=e.Zi(m.metadata.name);m.document&&(a=a.add(g));const v=e.Xi(m);v.setReadTime(e.tr(m.metadata.readTime)),l=l.insert(g,v)}const d=i.ji.newChangeBuffer({trackRemovals:!0}),f=await ac(i,function(m){return Hn(Ec(Ve.fromString(`__bundle__/docs/${m}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",m=>c6(m,d,l).next(g=>(d.apply(m),g)).next(g=>i.Ns.removeMatchingKeysForTargetId(m,f.targetId).next(()=>i.Ns.addMatchingKeys(m,a,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(m,g.Hi,g.Ji)).next(()=>g.Hi)))}async function Xz(t,e,n=je()){const r=await ac(t,Hn(Gx(e.bundledQuery))),i=oe(t);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Rt(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.$s.saveNamedQuery(a,e);const d=r.withResumeToken(zt.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(d.targetId,d),i.Ns.updateTargetData(a,d).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,n,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}function wA(t,e){return`firestore_clients_${t}_${e}`}function xA(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function s1(t,e){return`firestore_targets_${t}_${e}`}class Op{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static er(e,n,r){const i=JSON.parse(r);let a,l=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new Z(i.error.code,i.error.message))),l?new Op(e,n,i.state,a):(Dt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static er(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Z(r.error.code,r.error.message))),a?new xd(e,r.state,i):(Dt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pp{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static er(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=_g();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=n4(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Pp(e,a):(Dt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Jx{constructor(e,n){this.clientId=e,this.onlineState=n}static er(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Jx(n.clientId,n.onlineState):(Dt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class sw{constructor(){this.activeTargetIds=_g()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o1{constructor(e,n,r,i,a){this.window=e,this.Ys=n,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ct(_e),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=wA(this.persistenceKey,this.rr),this.dr=function(d){return`firestore_sequence_number_${d}`}(this.persistenceKey),this.ar=this.ar.insert(this.rr,new sw),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=function(d){return`firestore_online_state_${d}`}(this.persistenceKey),this.yr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Si();for(const r of e){if(r===this.rr)continue;const i=this.getItem(wA(this.persistenceKey,r));if(i){const a=Pp.er(r,i);a&&(this.ar=this.ar.insert(a.clientId,a))}}this.pr();const n=this.storage.getItem(this.gr);if(n){const r=this.Ir(n);r&&this.Tr(r)}for(const r of this.hr)this.cr(r);this.hr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,n,r){this.Ar(e,n,r),this.Rr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(s1(this.persistenceKey,e));if(r){const i=xd.er(e,r);i&&(n=i.state)}}return this.Pr.sr(e),this.pr(),n}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(s1(this.persistenceKey,e))}updateQueryState(e,n,r){this.vr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ee("SharedClientState","READ",e,n),n}setItem(e,n){ee("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){const n=e;if(n.storageArea===this.storage){if(ee("SharedClientState","EVENT",n.key,n.newValue),n.key===this.lr)return void Dt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this._r.test(n.key)){if(n.newValue==null){const r=this.Sr(n.key);return this.Dr(r,null)}{const r=this.Cr(n.key,n.newValue);if(r)return this.Dr(r.clientId,r)}}else if(this.wr.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(this.mr.test(n.key)){if(n.newValue!==null){const r=this.$r(n.key,n.newValue);if(r)return this.Mr(r)}}else if(n.key===this.gr){if(n.newValue!==null){const r=this.Ir(n.newValue);if(r)return this.Tr(r)}}else if(n.key===this.dr){const r=function(i){let a=zn.at;if(i!=null)try{const l=JSON.parse(i);me(typeof l=="number"),a=l}catch(l){Dt("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(n.newValue);r!==zn.at&&this.sequenceNumberHandler(r)}else if(n.key===this.yr){const r=this.Or(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Fr(i)))}}}else this.hr.push(n)})}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,n,r){const i=new Op(this.currentUser,e,n,r),a=xA(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const n=xA(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.rr,onlineState:e};this.storage.setItem(this.gr,JSON.stringify(n))}vr(e,n,r){const i=s1(this.persistenceKey,e),a=new xd(e,n,r);this.setItem(i,a.nr())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.yr,n)}Sr(e){const n=this._r.exec(e);return n?n[1]:null}Cr(e,n){const r=this.Sr(e);return Pp.er(r,n)}Nr(e,n){const r=this.wr.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return Op.er(new Yt(a),i,n)}$r(e,n){const r=this.mr.exec(e),i=Number(r[1]);return xd.er(i,n)}Ir(e){return Jx.er(e)}Or(e){return JSON.parse(e)}async kr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Br(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,n){const r=n?this.ar.insert(e,n):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),l=[],d=[];return a.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{a.has(f)||d.push(f)}),this.syncEngine.qr(l,d).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let n=_g();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class f6{constructor(){this.Ur=new sw,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new sw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm=null;function a1(){return Cm===null?Cm=268435456+Math.round(2147483648*Math.random()):Cm++,"0x"+Cm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class t$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,a){const l=a1(),d=this.fo(e,n);ee("RestConnection",`Sending RPC '${e}' ${l}:`,d,r);const f={};return this._o(f,i,a),this.wo(e,d,f,r).then(m=>(ee("RestConnection",`Received RPC '${e}' ${l}: `,m),m),m=>{throw ec("RestConnection",`RPC '${e}' ${l} failed with error: `,m,"url: ",d,"request:",r),m})}mo(e,n,r,i,a,l){return this.lo(e,n,r,i,a)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,n){const r=Jz[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){const a=a1();return new Promise((l,d)=>{const f=new ZV;f.setWithCredentials(!0),f.listenOnce(KV.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case n1.NO_ERROR:const g=f.getResponseJson();ee(vn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case n1.TIMEOUT:ee(vn,`RPC '${e}' ${a} timed out`),d(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case n1.HTTP_ERROR:const v=f.getStatus();if(ee(vn,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let w=f.getResponseJson();Array.isArray(w)&&(w=w[0]);const x=w==null?void 0:w.error;if(x&&x.status&&x.message){const T=function(C){const A=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(A)>=0?A:F.UNKNOWN}(x.status);d(new Z(T,x.message))}else d(new Z(F.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Z(F.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{ee(vn,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(i);ee(vn,`RPC '${e}' ${a} sending request:`,i),f.send(n,"POST",m,r,15)})}yo(e,n,r){const i=a1(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=WV(),d=YV(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new XV({})),this._o(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const m=a.join("");ee(vn,`Creating RPC '${e}' stream ${i}: ${m}`,f);const g=l.createWebChannel(m,f);let v=!1,w=!1;const x=new e$({Yr:C=>{w?ee(vn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(v||(ee(vn,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ee(vn,`RPC '${e}' stream ${i} sending:`,C),g.send(C))},Zr:()=>g.close()}),T=(C,A,_)=>{C.listen(A,L=>{try{_(L)}catch(I){setTimeout(()=>{throw I},0)}})};return T(g,vm.EventType.OPEN,()=>{w||ee(vn,`RPC '${e}' stream ${i} transport opened.`)}),T(g,vm.EventType.CLOSE,()=>{w||(w=!0,ee(vn,`RPC '${e}' stream ${i} transport closed`),x.oo())}),T(g,vm.EventType.ERROR,C=>{w||(w=!0,ec(vn,`RPC '${e}' stream ${i} transport errored:`,C),x.oo(new Z(F.UNAVAILABLE,"The operation could not be completed")))}),T(g,vm.EventType.MESSAGE,C=>{var A;if(!w){const _=C.data[0];me(!!_);const L=_,I=L.error||((A=L[0])===null||A===void 0?void 0:A.error);if(I){ee(vn,`RPC '${e}' stream ${i} received error:`,I);const q=I.status;let j=function($){const Q=Lt[$];if(Q!==void 0)return A4(Q)}(q),M=I.message;j===void 0&&(j=F.INTERNAL,M="Unknown error status: "+q+" with message "+I.message),w=!0,x.oo(new Z(j,M)),g.close()}else ee(vn,`RPC '${e}' stream ${i} received:`,_),x.uo(_)}}),T(d,QV.STAT_EVENT,C=>{C.stat===Rk.PROXY?ee(vn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Rk.NOPROXY&&ee(vn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.ro()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(){return typeof window<"u"?window:null}function op(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return new GB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,n,r,i,a,l,d,f){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new e2(e,n)}$o(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.$o()&&await this.close(0)}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Dt(n.toString()),Dt("Using maximum backoff delay to prevent overloading the backend."),this.ko.Po()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class n$ extends p6{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.Tt=a}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=KB(this.Tt,e),r=function(i){if(!("targetChange"in i))return ge.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ge.min():a.readTime?Rt(a.readTime):ge.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Yd(this.Tt),n.addTarget=function(i,a){let l;const d=a.target;return l=jp(d)?{documents:U4(i,d)}:{query:V4(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=M4(i,a.resumeToken):a.snapshotVersion.compareTo(ge.min())>0&&(l.readTime=oc(i,a.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=XB(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Yd(this.Tt),n.removeTarget=e,this.qo(n)}}class r$ extends p6{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=QB(e.writeResults,e.commitTime),r=Rt(e.commitTime);return this.listener.eu(r,n)}return me(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Yd(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Kd(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i$ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,n,r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.mo(e,n,r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class s${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Dt(n),this.cu=!1):ee("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(l=>{r.enqueueAndForget(async()=>{ro(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(d){const f=oe(d);f.mu.add(4),await _c(f),f.pu.set("Unknown"),f.mu.delete(4),await Lh(f)}(this))})}),this.pu=new s$(r,i)}}async function Lh(t){if(ro(t))for(const e of t.gu)await e(!0)}async function _c(t){for(const e of t.gu)await e(!1)}function Rg(t,e){const n=oe(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),r2(n)?n2(n):Dc(n).Mo()&&t2(n,e))}function Qd(t,e){const n=oe(t),r=Dc(n);n.wu.delete(e),r.Mo()&&g6(n,e),n.wu.size===0&&(r.Mo()?r.Bo():ro(n)&&n.pu.set("Unknown"))}function t2(t,e){t.Iu.Ot(e.targetId),Dc(t).Jo(e)}function g6(t,e){t.Iu.Ot(e),Dc(t).Yo(e)}function n2(t){t.Iu=new $B({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Dc(t).start(),t.pu.au()}function r2(t){return ro(t)&&!Dc(t).$o()&&t.wu.size>0}function ro(t){return oe(t).mu.size===0}function y6(t){t.Iu=void 0}async function a$(t){t.wu.forEach((e,n)=>{t2(t,e)})}async function l$(t,e){y6(t),r2(t)?(t.pu.fu(e),n2(t)):t.pu.set("Unknown")}async function c$(t,e,n){if(t.pu.set("Online"),e instanceof R4&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.wu.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.wu.delete(l),r.Iu.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Up(t,r)}else if(e instanceof ip?t.Iu.Qt(e):e instanceof I4?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(ge.min()))try{const r=await l6(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Iu.ee(a);return l.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=i.wu.get(f);m&&i.wu.set(f,m.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach(d=>{const f=i.wu.get(d);if(!f)return;i.wu.set(d,f.withResumeToken(zt.EMPTY_BYTE_STRING,f.snapshotVersion)),g6(i,d);const m=new Us(f.target,d,1,f.sequenceNumber);t2(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Up(t,r)}}async function Up(t,e,n){if(!to(e))throw e;t.mu.add(1),await _c(t),t.pu.set("Offline"),n||(n=()=>l6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await Lh(t)})}function v6(t,e){return e().catch(n=>Up(t,n,e))}async function jc(t){const e=oe(t),n=Gs(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;u$(e);)try{const i=await Kz(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,d$(e,i)}catch(i){await Up(e,i)}b6(e)&&w6(e)}function u$(t){return ro(t)&&t._u.length<10}function d$(t,e){t._u.push(e);const n=Gs(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function b6(t){return ro(t)&&!Gs(t).$o()&&t._u.length>0}function w6(t){Gs(t).start()}async function h$(t){Gs(t).su()}async function f$(t){const e=Gs(t);for(const n of t._u)e.tu(n.mutations)}async function m$(t,e,n){const r=t._u.shift(),i=qx.from(r,e,n);await v6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jc(t)}async function p$(t,e){e&&Gs(t).Xo&&await async function(n,r){if(i=r.code,k4(i)&&i!==F.ABORTED){const a=n._u.shift();Gs(n).Fo(),await v6(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,r)),await jc(n)}var i}(t,e),b6(t)&&w6(t)}async function SA(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ro(n);n.mu.add(3),await _c(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await Lh(n)}async function ow(t,e){const n=oe(t);e?(n.mu.delete(2),await Lh(n)):e||(n.mu.add(2),await _c(n),n.pu.set("Unknown"))}function Dc(t){return t.Tu||(t.Tu=function(e,n,r){const i=oe(e);return i.ru(),new n$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:a$.bind(null,t),no:l$.bind(null,t),Ho:c$.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.Fo(),r2(t)?n2(t):t.pu.set("Unknown")):(await t.Tu.stop(),y6(t))})),t.Tu}function Gs(t){return t.Eu||(t.Eu=function(e,n,r){const i=oe(e);return i.ru(),new r$(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:h$.bind(null,t),no:p$.bind(null,t),nu:f$.bind(null,t),eu:m$.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.Fo(),await jc(t)):(await t.Eu.stop(),t._u.length>0&&(ee("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,d=new i2(e,n,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ic(t,e){if(Dt("AsyncQueue",`${e}: ${t}`),to(t))return new Z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=dd(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new Wl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Au=new Ct(re.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):ce():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class cc{constructor(e,n,r,i,a,l,d,f,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(d=>{l.push({type:0,doc:d})}),new cc(e,n,Wl.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${constructor(){this.Pu=void 0,this.listeners=[]}}class y${constructor(){this.queries=new no(e=>m4(e),jh),this.onlineState="Unknown",this.vu=new Set}}async function s2(t,e){const n=oe(t),r=e.query;let i=!1,a=n.queries.get(r);if(a||(i=!0,a=new g$),i)try{a.Pu=await n.onListen(r)}catch(l){const d=Ic(l,`Initialization of query '${Zb(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.listeners.push(e),e.bu(n.onlineState),a.Pu&&e.Vu(a.Pu)&&a2(n)}async function o2(t,e){const n=oe(t),r=e.query;let i=!1;const a=n.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=a.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function v$(t,e){const n=oe(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const d of l.listeners)d.Vu(i)&&(r=!0);l.Pu=i}}r&&a2(n)}function b$(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(n);r.queries.delete(e)}function a2(t){t.vu.forEach(e=>{e.next()})}class l2{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new cc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.$u||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=cc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w${constructor(e,n){this.Mu=e,this.byteLength=n}Ou(){return"metadata"in this.Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.Tt=e}Zi(e){return oi(this.Tt,e)}Xi(e){return e.metadata.exists?P4(this.Tt,e.document,!1):lt.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Rt(e)}}class x${constructor(e,n,r){this.Fu=e,this.localStore=n,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x6(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++n;const r=Ve.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Lu(e){const n=new Map,r=new EA(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const d=(n.get(l)||je()).add(a);n.set(l,d)}}return n}async complete(){const e=await Qz(this.localStore,new EA(this.Tt),this.documents,this.Fu.id),n=this.Lu(this.documents);for(const r of this.queries)await Xz(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,qu:this.collectionGroups,Uu:e}}}function x6(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.key=e}}class S6{constructor(e){this.key=e}}class C6{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=je(),this.mutatedKeys=je(),this.ju=g4(e),this.zu=new Wl(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new CA,i=n?n.zu:this.zu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const w=i.get(g),x=Dh(this.query,v)?v:null,T=!!w&&this.mutatedKeys.has(w.key),C=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let A=!1;w&&x?w.data.isEqual(x.data)?T!==C&&(r.track({type:3,doc:x}),A=!0):this.Yu(w,x)||(r.track({type:2,doc:x}),A=!0,(f&&this.ju(x,f)>0||m&&this.ju(x,m)<0)&&(d=!0)):!w&&x?(r.track({type:0,doc:x}),A=!0):w&&!x&&(r.track({type:1,doc:w}),A=!0,(f||m)&&(d=!0)),A&&(x?(l=l.add(x),a=C?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{zu:l,Ju:r,Li:d,mutatedKeys:a}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((m,g)=>function(v,w){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return x(v)-x(w)}(m.type,g.type)||this.ju(m.doc,g.doc)),this.Zu(r);const l=n?this.Xu():[],d=this.Qu.size===0&&this.current?1:0,f=d!==this.Gu;return this.Gu=d,a.length!==0||f?{snapshot:new cc(this.query,e.zu,i,a,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new CA,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=je(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new S6(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new T6(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=je();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return cc.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class T${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class S${constructor(e){this.key=e,this.ic=!1}}class C${constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new no(d=>m4(d),jh),this.uc=new Map,this.cc=new Set,this.ac=new Ct(re.comparator),this.hc=new Map,this.lc=new Kx,this.fc={},this.dc=new Map,this._c=ga.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function E$(t,e){const n=f2(t);let r,i;const a=n.oc.get(e);if(a)r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const l=await ac(n.localStore,Hn(e));n.isPrimaryClient&&Rg(n.remoteStore,l);const d=n.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=await c2(n,e,r,d==="current",l.resumeToken)}return i}async function c2(t,e,n,r,i){t.mc=(v,w,x)=>async function(T,C,A,_){let L=C.view.Hu(A);L.Li&&(L=await Lp(T.localStore,C.query,!1).then(({documents:j})=>C.view.Hu(j,L)));const I=_&&_.targetChanges.get(C.targetId),q=C.view.applyChanges(L,T.isPrimaryClient,I);return aw(T,C.targetId,q.tc),q.snapshot}(t,v,w,x);const a=await Lp(t.localStore,e,!0),l=new C6(e,a.Yi),d=l.Hu(a.documents),f=Mh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=l.applyChanges(d,t.isPrimaryClient,f);aw(t,n,m.tc);const g=new T$(e,n,l);return t.oc.set(e,g),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),m.snapshot}async function k$(t,e){const n=oe(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(a=>!jh(a,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await lc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Qd(n.remoteStore,r.targetId),uc(n,r.targetId)}).catch(eo)):(uc(n,r.targetId),await lc(n.localStore,r.targetId,!0))}async function A$(t,e,n){const r=m2(t);try{const i=await function(a,l){const d=oe(a),f=pt.now(),m=l.reduce((w,x)=>w.add(x.key),je());let g,v;return d.persistence.runTransaction("Locally write mutations","readwrite",w=>{let x=Fn(),T=je();return d.ji.getEntries(w,m).next(C=>{x=C,x.forEach((A,_)=>{_.isValidDocument()||(T=T.add(A))})}).next(()=>d.localDocuments.getOverlayedDocuments(w,x)).next(C=>{g=C;const A=[];for(const _ of l){const L=OB(_,g.get(_.key).overlayedDocument);L!=null&&A.push(new qi(_.key,L,h4(L.value.mapValue),ft.exists(!0)))}return d.mutationQueue.addMutationBatch(w,f,A,l)}).next(C=>{v=C;const A=C.applyToLocalDocumentSet(g,T);return d.documentOverlayCache.saveOverlays(w,C.batchId,A)})}).then(()=>({batchId:v.batchId,changes:j4(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let f=a.fc[a.currentUser.toKey()];f||(f=new Ct(_e)),f=f.insert(l,d),a.fc[a.currentUser.toKey()]=f}(r,i.batchId,n),await Hi(r,i.changes),await jc(r.remoteStore)}catch(i){const a=Ic(i,"Failed to persist write");n.reject(a)}}async function E6(t,e){const n=oe(t);try{const r=await Yz(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.hc.get(a);l&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?me(l.ic):i.removedDocuments.size>0&&(me(l.ic),l.ic=!1))}),await Hi(n,r,e)}catch(r){await eo(r)}}function kA(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((a,l)=>{const d=l.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=oe(a);d.onlineState=l;let f=!1;d.queries.forEach((m,g)=>{for(const v of g.listeners)v.bu(l)&&(f=!0)}),f&&a2(d)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _$(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),a=i&&i.key;if(a){let l=new Ct(re.comparator);l=l.insert(a,lt.newNoDocument(a,ge.min()));const d=je().add(a),f=new Rh(ge.min(),new Map,new nt(_e),l,d);await E6(r,f),r.ac=r.ac.remove(a),r.hc.delete(e),h2(r)}else await lc(r.localStore,e,!1).then(()=>uc(r,e,n)).catch(eo)}async function j$(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await Wz(n.localStore,e);d2(n,r,null),u2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hi(n,i)}catch(i){await eo(i)}}async function D$(t,e,n){const r=oe(t);try{const i=await function(a,l){const d=oe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,l).next(g=>(me(g!==null),m=g.keys(),d.mutationQueue.removeMutationBatch(f,g))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);d2(r,e,n),u2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hi(r,i)}catch(i){await eo(i)}}async function I$(t,e){const n=oe(t);ro(n.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const l=oe(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(n.localStore);if(r===-1)return void e.resolve();const i=n.dc.get(r)||[];i.push(e),n.dc.set(r,i)}catch(r){const i=Ic(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function u2(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function d2(t,e,n){const r=oe(t);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function uc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||k6(t,r)})}function k6(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Qd(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),h2(t))}function aw(t,e,n){for(const r of n)r instanceof T6?(t.lc.addReference(r.key,e),R$(t,r)):r instanceof S6?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||k6(t,r.key)):ce()}function R$(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.cc.add(r),h2(t))}function h2(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new re(Ve.fromString(e)),r=t._c.next();t.hc.set(r,new S$(n)),t.ac=t.ac.insert(n,r),Rg(t.remoteStore,new Us(Hn(Ec(n.path)),r,2,zn.at))}}async function Hi(t,e,n){const r=oe(t),i=[],a=[],l=[];r.oc.isEmpty()||(r.oc.forEach((d,f)=>{l.push(r.mc(f,e,n).then(m=>{if((m||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,m!=null&&m.fromCache?"not-current":"current"),m){i.push(m);const g=Zx.Ni(f.targetId,m);a.push(g)}}))}),await Promise.all(l),r.rc.Ho(i),await async function(d,f){const m=oe(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>B.forEach(f,v=>B.forEach(v.Ci,w=>m.persistence.referenceDelegate.addReference(g,v.targetId,w)).next(()=>B.forEach(v.xi,w=>m.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))}catch(g){if(!to(g))throw g;ee("LocalStore","Failed to update sequence numbers: "+g)}for(const g of f){const v=g.targetId;if(!g.fromCache){const w=m.Ki.get(v),x=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(x);m.Ki=m.Ki.insert(v,T)}}}(r.localStore,a))}async function M$(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await a6(n.localStore,e);n.currentUser=e,function(i,a){i.dc.forEach(l=>{l.forEach(d=>{d.reject(new Z(F.CANCELLED,a))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hi(n,r.Wi)}}function N$(t,e){const n=oe(t),r=n.hc.get(e);if(r&&r.ic)return je().add(r.key);{let i=je();const a=n.uc.get(e);if(!a)return i;for(const l of a){const d=n.oc.get(l);i=i.unionWith(d.view.Wu)}return i}}async function L$(t,e){const n=oe(t),r=await Lp(n.localStore,e.query,!0),i=e.view.nc(r);return n.isPrimaryClient&&aw(n,e.targetId,i.tc),i}async function O$(t,e){const n=oe(t);return d6(n.localStore,e).then(r=>Hi(n,r))}async function P$(t,e,n,r){const i=oe(t),a=await function(l,d){const f=oe(l),m=oe(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",g=>m.An(g,d).next(v=>v?f.localDocuments.getDocuments(g,v):B.resolve(null)))}(i.localStore,e);a!==null?(n==="pending"?await jc(i.remoteStore):n==="acknowledged"||n==="rejected"?(d2(i,e,r||null),u2(i,e),function(l,d){oe(oe(l).mutationQueue).Pn(d)}(i.localStore,e)):ce(),await Hi(i,a)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}async function U$(t,e){const n=oe(t);if(f2(n),m2(n),e===!0&&n.wc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await AA(n,r.toArray());n.wc=!0,await ow(n.remoteStore,!0);for(const a of i)Rg(n.remoteStore,a)}else if(e===!1&&n.wc!==!1){const r=[];let i=Promise.resolve();n.uc.forEach((a,l)=>{n.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(uc(n,l),lc(n.localStore,l,!0))),Qd(n.remoteStore,l)}),await i,await AA(n,r),function(a){const l=oe(a);l.hc.forEach((d,f)=>{Qd(l.remoteStore,f)}),l.lc._s(),l.hc=new Map,l.ac=new Ct(re.comparator)}(n),n.wc=!1,await ow(n.remoteStore,!1)}}async function AA(t,e,n){const r=oe(t),i=[],a=[];for(const l of e){let d;const f=r.uc.get(l);if(f&&f.length!==0){d=await ac(r.localStore,Hn(f[0]));for(const m of f){const g=r.oc.get(m),v=await L$(r,g);v.snapshot&&a.push(v.snapshot)}}else{const m=await u6(r.localStore,l);d=await ac(r.localStore,m),await c2(r,A6(m),l,!1,d.resumeToken)}i.push(d)}return r.rc.Ho(a),i}function A6(t){return f4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function V$(t){const e=oe(t);return oe(oe(e.localStore).persistence).Si()}async function B$(t,e,n,r){const i=oe(t);if(i.wc)return void ee("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const l=await d6(i.localStore,p4(a[0])),d=Rh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",zt.EMPTY_BYTE_STRING);await Hi(i,l,d);break}case"rejected":await lc(i.localStore,e,!0),uc(i,e,r);break;default:ce()}}async function z$(t,e,n){const r=f2(t);if(r.wc){for(const i of e){if(r.uc.has(i)){ee("SyncEngine","Adding an already active target "+i);continue}const a=await u6(r.localStore,i),l=await ac(r.localStore,a);await c2(r,A6(a),l.targetId,!1,l.resumeToken),Rg(r.remoteStore,l)}for(const i of n)r.uc.has(i)&&await lc(r.localStore,i,!1).then(()=>{Qd(r.remoteStore,i),uc(r,i)}).catch(eo)}}function f2(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_$.bind(null,e),e.rc.Ho=v$.bind(null,e.eventManager),e.rc.gc=b$.bind(null,e.eventManager),e}function m2(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=j$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D$.bind(null,e),e}function $$(t,e,n){const r=oe(t);(async function(i,a,l){try{const d=await a.getMetadata();if(await function(v,w){const x=oe(v),T=Rt(w.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",C=>x.$s.getBundleMetadata(C,w.id)).then(C=>!!C&&C.createTime.compareTo(T)>=0)}(i.localStore,d))return await a.close(),l._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(d)),Promise.resolve(new Set);l._updateProgress(x6(d));const f=new x$(d,i.localStore,a.Tt);let m=await a.yc();for(;m;){const v=await f.Bu(m);v&&l._updateProgress(v),m=await a.yc()}const g=await f.complete();return await Hi(i,g.Uu,void 0),await function(v,w){const x=oe(v);return x.persistence.runTransaction("Save bundle","readwrite",T=>x.$s.saveBundleMetadata(T,w))}(i.localStore,d),l._completeWith(g.progress),Promise.resolve(g.qu)}catch(d){return ec("SyncEngine",`Loading bundle failed with ${d}`),l._failWith(d),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class _6{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return o6(this.persistence,new s6,e.initialUser,this.Tt)}Tc(e){return new i6(Ig.qs,this.Tt)}Ic(e){return new f6}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class j6 extends _6{constructor(e,n,r){super(),this.Pc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Pc.initialize(this,e),await m2(this.Pc.syncEngine),await jc(this.Pc.remoteStore),await this.persistence.di(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ec(e){return o6(this.persistence,new s6,e.initialUser,this.Tt)}Ac(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Rz(r,e.asyncQueue,n)}Rc(e,n){const r=new pB(n,this.persistence);return new mB(e.asyncQueue,r)}Tc(e){const n=Xx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Qx(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,m6(),op(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new f6}}class F$ extends j6{constructor(e,n){super(e,n,!1),this.Pc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Pc.syncEngine;this.sharedClientState instanceof o1&&(this.sharedClientState.syncEngine={Br:P$.bind(null,n),Lr:B$.bind(null,n),qr:z$.bind(null,n),Si:V$.bind(null,n),Fr:O$.bind(null,n)},await this.sharedClientState.start()),await this.persistence.di(async r=>{await U$(this.Pc.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Ic(e){const n=m6();if(!o1.C(n))throw new Z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Xx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new o1(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class p2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=M$.bind(null,this.syncEngine),await ow(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new y$}createDatastore(e){const n=Nh(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new t$(i));var i;return function(a,l,d,f){return new i$(a,l,d,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>kA(this.syncEngine,d,0),l=TA.C()?new TA:new Zz,new o$(n,r,i,a,l);var n,r,i,a,l}createSyncEngine(e,n){return function(r,i,a,l,d,f,m){const g=new C$(r,i,a,l,d,f);return m&&(g.wc=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=oe(e);ee("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await _c(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Dt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e,n){this.Vc=e,this.Tt=n,this.metadata=new Qt,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}async getMetadata(){return this.metadata.promise}async yc(){return await this.getMetadata(),this.Dc()}async Dc(){const e=await this.Cc();if(e===null)return null;const n=this.Sc.decode(e),r=Number(n);isNaN(r)&&this.xc(`length string (${n}) is not valid number`);const i=await this.Nc(r);return new w$(JSON.parse(i),e.length+r)}kc(){return this.buffer.findIndex(e=>e===123)}async Cc(){for(;this.kc()<0&&!await this.$c(););if(this.buffer.length===0)return null;const e=this.kc();e<0&&this.xc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Nc(e){for(;this.buffer.length<e;)await this.$c()&&this.xc("Reached the end of bundle when more is expected.");const n=this.Sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}async $c(){const e=await this.Vc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,i){const a=oe(r),l=Yd(a.Tt)+"/documents",d={documents:i.map(v=>Wd(a.Tt,v))},f=await a.mo("BatchGetDocuments",l,d,i.length),m=new Map;f.forEach(v=>{const w=YB(a.Tt,v);m.set(w.key.toString(),w)});const g=[];return i.forEach(v=>{const w=m.get(v.toString());me(!!w),g.push(w)}),g}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=re.fromPath(r);this.mutations.push(new zx(i,this.precondition(i)))}),await async function(n,r){const i=oe(n),a=Yd(i.Tt)+"/documents",l={writes:r.map(d=>Kd(i.Tt,d))};await i.lo("Commit",a,l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ce();n=ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?ft.exists(!1):ft.updateTime(n):ft.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new Z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(n)}return ft.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new e2(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){this.ko.vo(async()=>{const e=new H$(this.datastore),n=this.Fc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Bc(i)}))}).catch(r=>{this.Bc(r)})})}Fc(e){try{const n=this.updateFunction(e);return!Ah(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!k4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=YI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async a=>{ee("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ee("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ic(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function D6(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function I6(t,e){t.asyncQueue.verifyOperationInProgress();const n=await g2(t);ee("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>SA(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,a)=>SA(e.remoteStore,a)),t.onlineComponents=e}async function g2(t){return t.offlineComponents||(ee("FirestoreClient","Using default OfflineComponentProvider"),await D6(t,new _6)),t.offlineComponents}async function Ng(t){return t.onlineComponents||(ee("FirestoreClient","Using default OnlineComponentProvider"),await I6(t,new p2)),t.onlineComponents}function R6(t){return g2(t).then(e=>e.persistence)}function y2(t){return g2(t).then(e=>e.localStore)}function M6(t){return Ng(t).then(e=>e.remoteStore)}function v2(t){return Ng(t).then(e=>e.syncEngine)}function Y$(t){return Ng(t).then(e=>e.datastore)}async function dc(t){const e=await Ng(t),n=e.eventManager;return n.onListen=E$.bind(null,e.syncEngine),n.onUnlisten=k$.bind(null,e.syncEngine),n}function K$(t){return t.asyncQueue.enqueue(async()=>{const e=await R6(t),n=await M6(t);return e.setNetworkEnabled(!0),function(r){const i=oe(r);return i.mu.delete(0),Lh(i)}(n)})}function Q$(t){return t.asyncQueue.enqueue(async()=>{const e=await R6(t),n=await M6(t);return e.setNetworkEnabled(!1),async function(r){const i=oe(r);i.mu.add(0),await _c(i),i.pu.set("Offline")}(n)})}function X$(t,e){const n=new Qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const l=await function(d,f){const m=oe(d);return m.persistence.runTransaction("read document","readonly",g=>m.localDocuments.getDocument(g,f))}(r,i);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new Z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const d=Ic(l,`Failed to get document '${i} from cache`);a.reject(d)}}(await y2(t),e,n)),n.promise}function N6(t,e,n={}){const r=new Qt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,f){const m=new Mg({next:v=>{a.enqueueAndForget(()=>o2(i,g));const w=v.docs.has(l);!w&&v.fromCache?f.reject(new Z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&d&&d.source==="server"?f.reject(new Z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new l2(Ec(l.path),m,{includeMetadataChanges:!0,$u:!0});return s2(i,g)}(await dc(t),t.asyncQueue,e,n,r)),r.promise}function Z$(t,e){const n=new Qt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,i,a){try{const l=await Lp(r,i,!0),d=new C6(i,l.Yi),f=d.Hu(l.documents),m=d.applyChanges(f,!1);a.resolve(m.snapshot)}catch(l){const d=Ic(l,`Failed to execute query '${i} against cache`);a.reject(d)}}(await y2(t),e,n)),n.promise}function L6(t,e,n={}){const r=new Qt;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,f){const m=new Mg({next:v=>{a.enqueueAndForget(()=>o2(i,g)),v.fromCache&&d.source==="server"?f.reject(new Z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),g=new l2(l,m,{includeMetadataChanges:!0,$u:!0});return s2(i,g)}(await dc(t),t.asyncQueue,e,n,r)),r.promise}function J$(t,e){const n=new Mg(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).vu.add(i),i.next()}(await dc(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,i){oe(r).vu.delete(i)}(await dc(t),n))}}function eF(t,e,n,r){const i=function(a,l){let d;return d=typeof a=="string"?new TextEncoder().encode(a):a,function(f,m){return new q$(f,m)}(function(f,m){if(f instanceof Uint8Array)return _A(f,m);if(f instanceof ArrayBuffer)return _A(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),l)}(n,Nh(e));t.asyncQueue.enqueueAndForget(async()=>{$$(await v2(t),i,r)})}function tF(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const i=oe(n);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(await y2(t),e))}const jA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t,e,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O6(t,e,n,r){if(e===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function DA(t){if(!re.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function IA(t){if(re.isDocumentKey(t))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function $e(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lg(t);throw new Z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function P6(t,e){if(e<=0)throw new Z(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,O6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RA(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new nB;switch(n.type){case"gapi":const r=n.client;return new oB(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=jA.get(e);n&&(ee("ComponentProvider","Removing Datastore"),jA.delete(e),n.terminate())}(this),Promise.resolve()}}function nF(t,e,n,r={}){var i;const a=(t=$e(t,Oh))._getSettings();if(a.host!=="firestore.googleapis.com"&&a.host!==e&&ec("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let l,d;if(typeof r.mockUserToken=="string")l=r.mockUserToken,d=Yt.MOCK_USER;else{l=TP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Yt(f)}t._authCredentials=new rB(new WI(l,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ai(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}}class hn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hn(this.firestore,e,this._query)}}class ai extends hn{constructor(e,n,r){super(e,n,Ec(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new re(e))}withConverter(e){return new ai(this.firestore,e,this._path)}}function U6(t,e,...n){if(t=ye(t),b2("collection","path",e),t instanceof Oh){const r=Ve.fromString(e,...n);return IA(r),new ai(t,null,r)}{if(!(t instanceof ct||t instanceof ai))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return IA(r),new ai(t.firestore,null,r)}}function rF(t,e){if(t=$e(t,Oh),b2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hn(t,null,function(n){return new Fi(Ve.emptyPath(),n)}(e))}function Vp(t,e,...n){if(t=ye(t),arguments.length===1&&(e=YI.R()),b2("doc","path",e),t instanceof Oh){const r=Ve.fromString(e,...n);return DA(r),new ct(t,null,new re(r))}{if(!(t instanceof ct||t instanceof ai))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return DA(r),new ct(t.firestore,t instanceof ai?t.converter:null,new re(r))}}function V6(t,e){return t=ye(t),e=ye(e),(t instanceof ct||t instanceof ai)&&(e instanceof ct||e instanceof ai)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function B6(t,e){return t=ye(t),e=ye(e),t instanceof hn&&e instanceof hn&&t.firestore===e.firestore&&jh(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new e2(this,"async_queue_retry"),this.Hc=()=>{const n=op();n&&ee("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=op();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=op();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Qt;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!to(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw Dt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=i2.createAndSchedule(this,e,n,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&ce()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function lw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class sF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=-1;class Et extends Oh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new iF,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||z6(this),this._firestoreClient.terminate()}}function en(t){return t._firestoreClient||z6(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function z6(t){var e;const n=t._freezeSettings(),r=function(i,a,l,d){return new gB(i,a,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new W$(t._authCredentials,t._appCheckCredentials,t._queue,r)}function aF(t,e){F6(t=$e(t,Et));const n=en(t),r=t._freezeSettings(),i=new p2;return $6(n,i,new j6(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function lF(t){F6(t=$e(t,Et));const e=en(t),n=t._freezeSettings(),r=new p2;return $6(e,r,new F$(r,n.cacheSizeBytes))}function $6(t,e,n){const r=new Qt;return t.asyncQueue.enqueue(async()=>{try{await D6(t,n),await I6(t,e),r.resolve()}catch(i){const a=i;if(!function(l){return l.name==="FirebaseError"?l.code===F.FAILED_PRECONDITION||l.code===F.UNIMPLEMENTED:typeof DOMException<"u"&&l instanceof DOMException?l.code===22||l.code===20||l.code===11:!0}(a))throw a;ec("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}}).then(()=>r.promise)}function cF(t){if(t._initialized&&!t._terminated)throw new Z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Rr.C())return Promise.resolve();const r=n+"main";await Rr.delete(r)}(Xx(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function uF(t){return function(e){const n=new Qt;return e.asyncQueue.enqueueAndForget(async()=>I$(await v2(e),n)),n.promise}(en(t=$e(t,Et)))}function dF(t){return K$(en(t=$e(t,Et)))}function hF(t){return Q$(en(t=$e(t,Et)))}function fF(t,e){const n=en(t=$e(t,Et)),r=new sF;return eF(n,t._databaseId,e,r),r}function mF(t,e){return tF(en(t=$e(t,Et)),e).then(n=>n?new hn(t,null,n.query):null)}function F6(t){if(t._initialized||t._terminated)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=class cw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cw(zt.fromBase64String(e))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cw(zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=/^__.*__$/;class gF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new kc(e,this.data,n,this.fieldTransforms)}}class q6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function H6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class Pg{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,a===void 0&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Bp(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(H6(this.ra)&&pF.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class yF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||Nh(e)}wa(e,n,r,i=!1){return new Pg({ra:e,methodName:n,_a:r,path:It.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function _a(t){const e=t._freezeSettings(),n=Nh(t._databaseId);return new yF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ug(t,e,n,r,i,a={}){const l=t.wa(a.merge||a.mergeFields?2:0,e,n,i);S2("Data must be an object, but it was:",l,r);const d=Y6(r,l);let f,m;if(a.merge)f=new $n(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const v of a.mergeFields){const w=uw(e,v,n);if(!l.contains(w))throw new Z(F.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Q6(g,w)||g.push(w)}f=new $n(g),m=l.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=l.fieldTransforms;return new gF(new cn(d),f,m)}class Ph extends Aa{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ph}}function G6(t,e,n){return new Pg({ra:3,_a:e.settings._a,methodName:t._methodName,ca:n},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class w2 extends Aa{_toFieldTransform(e){return new Ih(e.path,new ic)}isEqual(e){return e instanceof w2}}class vF extends Aa{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=G6(this,e,!0),r=this.ma.map(a=>ja(a,n)),i=new ha(r);return new Ih(e.path,i)}isEqual(e){return this===e}}class bF extends Aa{constructor(e,n){super(e),this.ma=n}_toFieldTransform(e){const n=G6(this,e,!0),r=this.ma.map(a=>ja(a,n)),i=new fa(r);return new Ih(e.path,i)}isEqual(e){return this===e}}class wF extends Aa{constructor(e,n){super(e),this.ga=n}_toFieldTransform(e){const n=new sc(e.Tt,b4(e.Tt,this.ga));return new Ih(e.path,n)}isEqual(e){return this===e}}function x2(t,e,n,r){const i=t.wa(1,e,n);S2("Data must be an object, but it was:",i,r);const a=[],l=cn.empty();ka(r,(f,m)=>{const g=C2(e,f,n);m=ye(m);const v=i.ha(g);if(m instanceof Ph)a.push(g);else{const w=ja(m,v);w!=null&&(a.push(g),l.set(g,w))}});const d=new $n(a);return new q6(l,d,i.fieldTransforms)}function T2(t,e,n,r,i,a){const l=t.wa(1,e,n),d=[uw(e,r,n)],f=[i];if(a.length%2!=0)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<a.length;w+=2)d.push(uw(e,a[w])),f.push(a[w+1]);const m=[],g=cn.empty();for(let w=d.length-1;w>=0;--w)if(!Q6(m,d[w])){const x=d[w];let T=f[w];T=ye(T);const C=l.ha(x);if(T instanceof Ph)m.push(x);else{const A=ja(T,C);A!=null&&(m.push(x),g.set(x,A))}}const v=new $n(m);return new q6(g,v,l.fieldTransforms)}function W6(t,e,n,r=!1){return ja(n,t.wa(r?4:3,e))}function ja(t,e){if(K6(t=ye(t)))return S2("Unsupported field value:",e,t),Y6(t,e);if(t instanceof Aa)return function(n,r){if(!H6(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let a=0;for(const l of n){let d=ja(l,r.la(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=ye(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return b4(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=pt.fromDate(n);return{timestampValue:oc(r.Tt,i)}}if(n instanceof pt){const i=new pt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:oc(r.Tt,i)}}if(n instanceof Og)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ya)return{bytesValue:M4(r.Tt,n._byteString)};if(n instanceof ct){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$x(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${Lg(n)}`)}(t,e)}function Y6(t,e){const n={};return t4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(r,i)=>{const a=ja(i,e.ua(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function K6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Og||t instanceof ya||t instanceof ct||t instanceof Aa)}function S2(t,e,n){if(!K6(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Lg(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function uw(t,e,n){if((e=ye(e))instanceof Ws)return e._internalPath;if(typeof e=="string")return C2(t,e);throw Bp("Field path arguments must be of type string or ",t,!1,void 0,n)}const xF=new RegExp("[~\\*/\\[\\]]");function C2(t,e,n){if(e.search(xF)>=0)throw Bp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ws(...e.split("."))._internalPath}catch{throw Bp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bp(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Z(F.INVALID_ARGUMENT,d+t+f)}function Q6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TF extends Xd{data(){return super.data()}}function Vg(t,e){return typeof e=="string"?C2(t,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class E2{}class Uh extends E2{}function Ts(t,e,...n){let r=[];e instanceof E2&&r.push(e),r=r.concat(n),function(i){const a=i.filter(d=>d instanceof k2).length,l=i.filter(d=>d instanceof Bg).length;if(a>1||a>0&&l>0)throw new Z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bg extends Uh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bg(e,n,r)}_apply(e){const n=this._parse(e);return J6(e._query,n),new hn(e.firestore,e.converter,Xb(e._query,n))}_parse(e){const n=_a(e.firestore);return function(i,a,l,d,f,m,g){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){NA(g,m);const w=[];for(const x of g)w.push(MA(d,i,x));v={arrayValue:{values:w}}}else v=MA(d,i,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||NA(g,m),v=W6(l,a,g,m==="in"||m==="not-in");return Oe.create(f,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function SF(t,e,n){const r=e,i=Vg("where",t);return Bg._create(i,r,n)}class k2 extends E2{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new k2(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ze.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const d of l)J6(a,d),a=Xb(a,d)}(e._query,n),new hn(e.firestore,e.converter,Xb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class A2 extends Uh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new A2(e,n)}_apply(e){const n=function(r,i,a){if(r.startAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Gl(i,a);return function(d,f){if(Vx(d)===null){const m=Eg(d);m!==null&&eR(d,m,f.field)}}(r,l),l}(e._query,this._field,this._direction);return new hn(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Fi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function CF(t,e="asc"){const n=e,r=Vg("orderBy",t);return A2._create(r,n)}class zg extends Uh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zg(e,n,r)}_apply(e){return new hn(e.firestore,e.converter,Ip(e._query,this._limit,this._limitType))}}function EF(t){return P6("limit",t),zg._create("limit",t,"F")}function kF(t){return P6("limitToLast",t),zg._create("limitToLast",t,"L")}class $g extends Uh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new $g(e,n,r)}_apply(e){const n=Z6(e,this.type,this._docOrFields,this._inclusive);return new hn(e.firestore,e.converter,function(r,i){return new Fi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,n))}}function AF(...t){return $g._create("startAt",t,!0)}function _F(...t){return $g._create("startAfter",t,!1)}class Fg extends Uh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fg(e,n,r)}_apply(e){const n=Z6(e,this.type,this._docOrFields,this._inclusive);return new hn(e.firestore,e.converter,function(r,i){return new Fi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,n))}}function jF(...t){return Fg._create("endBefore",t,!1)}function DF(...t){return Fg._create("endAt",t,!0)}function Z6(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof Xd)return function(i,a,l,d,f){if(!d)throw new Z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const m=[];for(const g of ea(i))if(g.field.isKeyField())m.push(ua(a,d.key));else{const v=d.data.field(g.field);if(Px(v))throw new Z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(v===null){const w=g.field.canonicalString();throw new Z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}m.push(v)}return new Hs(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_a(t.firestore);return function(a,l,d,f,m,g){const v=a.explicitOrderBy;if(m.length>v.length)throw new Z(F.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let x=0;x<m.length;x++){const T=m[x];if(v[x].field.isKeyField()){if(typeof T!="string")throw new Z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof T}`);if(!Bx(a)&&T.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${T}' contains a slash.`);const C=a.path.child(Ve.fromString(T));if(!re.isDocumentKey(C))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const A=new re(C);w.push(ua(l,A))}else{const C=W6(d,f,T);w.push(C)}}return new Hs(w,g)}(t._query,t.firestore._databaseId,i,e,n,r)}}function MA(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new Z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bx(e)&&n.indexOf("/")!==-1)throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!re.isDocumentKey(r))throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ua(t,new re(r))}if(n instanceof ct)return ua(t,n._key);throw new Z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lg(n)}.`)}function NA(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J6(t,e){if(e.isInequality()){const r=Eg(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new Z(F.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=Vx(t);a!==null&&eR(t,i,a)}const n=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function eR(t,e,n){if(!n.isEqual(e))throw new Z(F.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class _2{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ce()}}convertObject(e,n){const r={};return ka(e.fields,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertGeoPoint(e){return new Og(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=r4(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qd(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);me(F4(r));const i=new $s(r.get(1),r.get(3)),a=new re(r.popFirst(5));return i.isEqual(n)||Dt(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class IF extends _2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bi extends Xd{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Td extends Bi{data(e={}){return super.data(e)}}class Ys{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Td(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const d=new Td(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const d=new Td(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:RF(l.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}function tR(t,e){return t instanceof Bi&&e instanceof Bi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Ys&&e instanceof Ys&&t._firestore===e._firestore&&B6(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){t=$e(t,ct);const e=$e(t.firestore,Et);return N6(en(e),t._key).then(n=>j2(e,t,n))}class Da extends _2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ya(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,n)}}function NF(t){t=$e(t,ct);const e=$e(t.firestore,Et),n=en(e),r=new Da(e);return X$(n,t._key).then(i=>new Bi(e,r,t._key,i,new Yo(i!==null&&i.hasLocalMutations,!0),t.converter))}function LF(t){t=$e(t,ct);const e=$e(t.firestore,Et);return N6(en(e),t._key,{source:"server"}).then(n=>j2(e,t,n))}function OF(t){t=$e(t,hn);const e=$e(t.firestore,Et),n=en(e),r=new Da(e);return X6(t._query),L6(n,t._query).then(i=>new Ys(e,r,t,i))}function PF(t){t=$e(t,hn);const e=$e(t.firestore,Et),n=en(e),r=new Da(e);return Z$(n,t._query).then(i=>new Ys(e,r,t,i))}function UF(t){t=$e(t,hn);const e=$e(t.firestore,Et),n=en(e),r=new Da(e);return L6(n,t._query,{source:"server"}).then(i=>new Ys(e,r,t,i))}function LA(t,e,n){t=$e(t,ct);const r=$e(t.firestore,Et),i=qg(t.converter,e,n);return Vh(r,[Ug(_a(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ft.none())])}function OA(t,e,n,...r){t=$e(t,ct);const i=$e(t.firestore,Et),a=_a(i);let l;return l=typeof(e=ye(e))=="string"||e instanceof Ws?T2(a,"updateDoc",t._key,e,n,r):x2(a,"updateDoc",t._key,e),Vh(i,[l.toMutation(t._key,ft.exists(!0))])}function VF(t){return Vh($e(t.firestore,Et),[new Ac(t._key,ft.none())])}function BF(t,e){const n=$e(t.firestore,Et),r=Vp(t),i=qg(t.converter,e);return Vh(n,[Ug(_a(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ft.exists(!1))]).then(()=>r)}function nR(t,...e){var n,r,i;t=ye(t);let a={includeMetadataChanges:!1},l=0;typeof e[l]!="object"||lw(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(lw(e[l])){const v=e[l];e[l]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let f,m,g;if(t instanceof ct)m=$e(t.firestore,Et),g=Ec(t._key.path),f={next:v=>{e[l]&&e[l](j2(m,t,v))},error:e[l+1],complete:e[l+2]};else{const v=$e(t,hn);m=$e(v.firestore,Et),g=v._query;const w=new Da(m);f={next:x=>{e[l]&&e[l](new Ys(m,w,v,x))},error:e[l+1],complete:e[l+2]},X6(t._query)}return function(v,w,x,T){const C=new Mg(T),A=new l2(w,C,x);return v.asyncQueue.enqueueAndForget(async()=>s2(await dc(v),A)),()=>{C.bc(),v.asyncQueue.enqueueAndForget(async()=>o2(await dc(v),A))}}(en(m),g,d,f)}function zF(t,e){return J$(en(t=$e(t,Et)),lw(e)?e:{next:e})}function Vh(t,e){return function(n,r){const i=new Qt;return n.asyncQueue.enqueueAndForget(async()=>A$(await v2(n),r,i)),i.promise}(en(t),e)}function j2(t,e,n){const r=n.docs.get(e._key),i=new Da(t);return new Bi(t,i,e._key,r,new Yo(n.hasPendingWrites,n.fromCache),e.converter)}const $F={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_a(e)}set(e,n,r){this._verifyNotCommitted();const i=Ns(e,this._firestore),a=qg(i.converter,n,r),l=Ug(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(l.toMutation(i._key,ft.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=Ns(e,this._firestore);let l;return l=typeof(n=ye(n))=="string"||n instanceof Ws?T2(this._dataReader,"WriteBatch.update",a._key,n,r,i):x2(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(l.toMutation(a._key,ft.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ns(e,this._firestore);return this._mutations=this._mutations.concat(new Ac(n._key,ft.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ns(t,e){if((t=ye(t)).firestore!==e)throw new Z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=_a(e)}get(e){const n=Ns(e,this._firestore),r=new IF(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return ce();const a=i[0];if(a.isFoundDocument())return new Xd(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Xd(this._firestore,r,n._key,null,n.converter);throw ce()})}set(e,n,r){const i=Ns(e,this._firestore),a=qg(i.converter,n,r),l=Ug(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,n,r,...i){const a=Ns(e,this._firestore);let l;return l=typeof(n=ye(n))=="string"||n instanceof Ws?T2(this._dataReader,"Transaction.update",a._key,n,r,i):x2(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,l),this}delete(e){const n=Ns(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ns(e,this._firestore),r=new Da(this._firestore);return super.get(e).then(i=>new Bi(this._firestore,r,n._key,i._document,new Yo(!1,!1),n.converter))}}function HF(t,e,n){t=$e(t,Et);const r=Object.assign(Object.assign({},$F),n);return function(i){if(i.maxAttempts<1)throw new Z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new Qt;return i.asyncQueue.enqueueAndForget(async()=>{const f=await Y$(i);new G$(i.asyncQueue,f,l,a,d).run()}),d.promise}(en(t),i=>e(new qF(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(){return new Ph("deleteField")}function WF(){return new w2("serverTimestamp")}function YF(...t){return new vF("arrayUnion",t)}function KF(...t){return new bF("arrayRemove",t)}function QF(t){return new wF("increment",t)}(function(t,e=!0){(function(n){Cc=n})(Ca),Ui(new Cr("firestore",(n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new Et(new iB(n.getProvider("auth-internal")),new lB(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $s(d.options.projectId,f)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Tr(Mk,"3.9.0",t),Tr(Mk,"3.9.0","esm2017")})();const XF="@firebase/firestore-compat",ZF="0.3.5";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function UA(){if(!vB())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Zd{constructor(e){this._delegate=e}static fromBase64String(e){return UA(),new Zd(ya.fromBase64String(e))}static fromUint8Array(e){return PA(),new Zd(ya.fromUint8Array(e))}toBase64(){return UA(),this._delegate.toBase64()}toUint8Array(){return PA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t){return JF(t,["next","error","complete"])}function JF(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{enableIndexedDbPersistence(e,n){return aF(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return lF(e._delegate)}clearIndexedDbPersistence(e){return cF(e._delegate)}}class rR{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $s||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&ec("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){nF(this._delegate,e,n,r)}enableNetwork(){return dF(this._delegate)}disableNetwork(){return hF(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,O6("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return uF(this._delegate)}onSnapshotsInSync(e){return zF(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hc(this,U6(this._delegate,e))}catch(n){throw An(n,"collection()","Firestore.collection()")}}doc(e){try{return new xr(this,Vp(this._delegate,e))}catch(n){throw An(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kn(this,rF(this._delegate,e))}catch(n){throw An(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HF(this._delegate,n=>e(new iR(this,n)))}batch(){return en(this._delegate),new sR(new FF(this._delegate,e=>Vh(this._delegate,e)))}loadBundle(e){return fF(this._delegate,e)}namedQuery(e){return mF(this._delegate,e).then(n=>n?new kn(this,n):null)}}class Hg extends _2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zd(new ya(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return xr.forKey(n,this.firestore,null)}}function tq(t){eB(t)}class iR{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Hg(e)}get(e){const n=Ko(e);return this._delegate.get(n).then(r=>new Jd(this._firestore,new Bi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ko(e);return r?(D2("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const a=Ko(e);return arguments.length===2?this._delegate.update(a,n):this._delegate.update(a,n,r,...i),this}delete(e){const n=Ko(e);return this._delegate.delete(n),this}}class sR{constructor(e){this._delegate=e}set(e,n,r){const i=Ko(e);return r?(D2("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const a=Ko(e);return arguments.length===2?this._delegate.update(a,n):this._delegate.update(a,n,r,...i),this}delete(e){const n=Ko(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class va{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Td(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=va.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(n);return a||(a=new va(e,new Hg(e),n),i.set(n,a)),a}}va.INSTANCES=new WeakMap;class xr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Hg(e)}static forPath(e,n,r){if(e.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xr(n,new ct(n._delegate,r,new re(e)))}static forKey(e,n,r){return new xr(n,new ct(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hc(this.firestore,U6(this._delegate,e))}catch(n){throw An(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof ct?V6(this._delegate,e):!1}set(e,n){n=D2("DocumentReference.set",n);try{return n?LA(this._delegate,e,n):LA(this._delegate,e)}catch(r){throw An(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?OA(this._delegate,e):OA(this._delegate,e,n,...r)}catch(i){throw An(i,"updateDoc()","DocumentReference.update()")}}delete(){return VF(this._delegate)}onSnapshot(...e){const n=oR(e),r=aR(e,i=>new Jd(this.firestore,new Bi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nR(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=NF(this._delegate):(e==null?void 0:e.source)==="server"?n=LF(this._delegate):n=MF(this._delegate),n.then(r=>new Jd(this.firestore,new Bi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xr(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function An(t,e,n){return t.message=t.message.replace(e,n),t}function oR(t){for(const e of t)if(typeof e=="object"&&!dw(e))return e;return{}}function aR(t,e){var n,r;let i;return dw(t[0])?i=t[0]:dw(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:a=>{i.next&&i.next(e(a))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Jd{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new xr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tR(this._delegate,e._delegate)}}class eh extends Jd{data(e){const n=this._delegate.data(e);return tB(n!==void 0),n}}class kn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Hg(e)}where(e,n,r){try{return new kn(this.firestore,Ts(this._delegate,SF(e,n,r)))}catch(i){throw An(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new kn(this.firestore,Ts(this._delegate,CF(e,n)))}catch(r){throw An(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kn(this.firestore,Ts(this._delegate,EF(e)))}catch(n){throw An(n,"limit()","Query.limit()")}}limitToLast(e){try{return new kn(this.firestore,Ts(this._delegate,kF(e)))}catch(n){throw An(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new kn(this.firestore,Ts(this._delegate,AF(...e)))}catch(n){throw An(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new kn(this.firestore,Ts(this._delegate,_F(...e)))}catch(n){throw An(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new kn(this.firestore,Ts(this._delegate,jF(...e)))}catch(n){throw An(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new kn(this.firestore,Ts(this._delegate,DF(...e)))}catch(n){throw An(n,"endAt()","Query.endAt()")}}isEqual(e){return B6(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=PF(this._delegate):(e==null?void 0:e.source)==="server"?n=UF(this._delegate):n=OF(this._delegate),n.then(r=>new hw(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=oR(e),r=aR(e,i=>new hw(this.firestore,new Ys(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nR(this._delegate,n,r)}withConverter(e){return new kn(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nq{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hw{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new kn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new nq(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new eh(this._firestore,r))})}isEqual(e){return tR(this._delegate,e._delegate)}}class hc extends kn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xr(this.firestore,e):null}doc(e){try{return e===void 0?new xr(this.firestore,Vp(this._delegate)):new xr(this.firestore,Vp(this._delegate,e))}catch(n){throw An(n,"doc()","CollectionReference.doc()")}}add(e){return BF(this._delegate,e).then(n=>new xr(this.firestore,n))}isEqual(e){return V6(this._delegate,e._delegate)}withConverter(e){return new hc(this.firestore,e?this._delegate.withConverter(va.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ko(t){return $e(t,ct)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(...e){this._delegate=new Ws(...e)}static documentId(){return new I2(It.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof Ws?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._delegate=e}static serverTimestamp(){const e=WF();return e._methodName="FieldValue.serverTimestamp",new Ho(e)}static delete(){const e=GF();return e._methodName="FieldValue.delete",new Ho(e)}static arrayUnion(...e){const n=YF(...e);return n._methodName="FieldValue.arrayUnion",new Ho(n)}static arrayRemove(...e){const n=KF(...e);return n._methodName="FieldValue.arrayRemove",new Ho(n)}static increment(e){const n=QF(e);return n._methodName="FieldValue.increment",new Ho(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq={Firestore:rR,GeoPoint:Og,Timestamp:pt,Blob:Zd,Transaction:iR,WriteBatch:sR,DocumentReference:xr,DocumentSnapshot:Jd,Query:kn,QueryDocumentSnapshot:eh,QuerySnapshot:hw,CollectionReference:hc,FieldPath:I2,FieldValue:Ho,setLogLevel:tq,CACHE_SIZE_UNLIMITED:oF};function iq(t,e){t.INTERNAL.registerComponent(new Cr("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rq)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){iq(t,(e,n)=>new rR(e,n,new eq)),t.registerVersion(XF,ZF)}sq(J);function R2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Wu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},xl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function lR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aq=oq,lq=lR,cR=new Sa("auth","Firebase",lR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new og("@firebase/auth");function ap(t,...e){VA.logLevel<=ze.ERROR&&VA.error(`Auth (${Ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,...e){throw M2(t,...e)}function dn(t,...e){return M2(t,...e)}function uR(t,e,n){const r=Object.assign(Object.assign({},lq()),{[e]:n});return new Sa("auth","Firebase",r).create(e,{appName:t.name})}function Rc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&fn(t,"argument-error"),uR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cR.create(t,...e)}function te(t,e,...n){if(!t)throw M2(e,...n)}function ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ap(e),new Error(e)}function Nr(t,e){t||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new Map;function ir(t){Nr(t instanceof Function,"Expected a class definition");let e=BA.get(t);return e?(Nr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BA.set(t,e),e)}function cq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function N2(){return zA()==="http:"||zA()==="https:"}function zA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N2()||RD()||"connection"in navigator)?navigator.onLine:!0}function dq(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nr(n>e,"Short delay should be less than long delay!"),this.isMobile=SP()||ux()}get(){return uq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t,e){Nr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=new Bh(3e4,6e4);function $t(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function tn(t,e,n,r,i={}){return hR(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=xc(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),dR.fetch()(fR(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},a))})}async function hR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hq),e);try{const i=new mq(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw fd(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw fd(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw fd(t,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw uR(t,g,m);fn(t,g)}}catch(i){if(i instanceof Kt)throw i;fn(t,"internal-error",{message:String(i)})}}async function Gi(t,e,n,r,i={}){const a=await tn(t,e,n,r,i);return"mfaPendingCredential"in a&&fn(t,"multi-factor-auth-required",{_serverResponse:a}),a}function fR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?L2(t.config,i):`${t.config.apiScheme}://${i}`}class mq{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),fq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pq(t,e){return tn(t,"POST","/v1/accounts:delete",e)}async function gq(t,e){return tn(t,"POST","/v1/accounts:update",e)}async function yq(t,e){return tn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vq(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=Gg(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Sd(l1(i.auth_time)),issuedAtTime:Sd(l1(i.iat)),expirationTime:Sd(l1(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function l1(t){return Number(t)*1e3}function Gg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ap("JWT malformed, contained fewer than 3 sections"),null;try{const i=ID(n);return i?JSON.parse(i):(ap("Failed to decode base64 JWT payload"),null)}catch(i){return ap("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function bq(t){const e=Gg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kt&&wq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zi(t,yq(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Cq(a.providerUserInfo):[],d=Sq(t.providerData,l),f=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(d!=null&&d.length),g=f?m:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new mR(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function Tq(t){const e=ye(t);await nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Sq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Cq(t){return t.map(e=>{var{providerId:n}=e,r=R2(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e){const n=await hR(t,{},async()=>{const r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=fR(t,i,"/v1/token",`key=${a}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",dR.fetch()(l,{method:"POST",headers:d,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bq(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Eq(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new rh;return r&&(te(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(te(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rh,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ta{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=R2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new mR(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await zi(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vq(this,e)}reload(){return Tq(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zi(this,pq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,d,f,m,g;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,x=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,T=(l=n.photoURL)!==null&&l!==void 0?l:void 0,C=(d=n.tenantId)!==null&&d!==void 0?d:void 0,A=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,_=(m=n.createdAt)!==null&&m!==void 0?m:void 0,L=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:I,emailVerified:q,isAnonymous:j,providerData:M,stsTokenManager:$}=n;te(I&&$,e,"internal-error");const Q=rh.fromJSON(this.name,$);te(typeof I=="string",e,"internal-error"),Ss(v,e.name),Ss(w,e.name),te(typeof q=="boolean",e,"internal-error"),te(typeof j=="boolean",e,"internal-error"),Ss(x,e.name),Ss(T,e.name),Ss(C,e.name),Ss(A,e.name),Ss(_,e.name),Ss(L,e.name);const ie=new ta({uid:I,auth:e,email:w,emailVerified:q,displayName:v,isAnonymous:j,photoURL:T,phoneNumber:x,tenantId:C,stsTokenManager:Q,createdAt:_,lastLoginAt:L});return M&&Array.isArray(M)&&(ie.providerData=M.map(he=>Object.assign({},he))),A&&(ie._redirectEventId=A),ie}static async _fromIdTokenResponse(e,n,r=!1){const i=new rh;i.updateFromServerResponse(n);const a=new ta({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nh(a),a}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pR.type="NONE";const fc=pR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e,n){return`firebase:${t}:${e}:${n}`}class Yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=na(this.userKey,i.apiKey,a),this.fullPersistenceKey=na("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yl(ir(fc),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||ir(fc);const l=na(r,e.config.apiKey,e.name);let d=null;for(const m of n)try{const g=await m._get(l);if(g){const v=ta._fromJSON(e,g);m!==a&&(d=v),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Yl(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new Yl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bR(e))return"Blackberry";if(wR(e))return"Webos";if(O2(e))return"Safari";if((e.includes("chrome/")||yR(e))&&!e.includes("edge/"))return"Chrome";if(zh(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gR(t=vt()){return/firefox\//i.test(t)}function O2(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yR(t=vt()){return/crios\//i.test(t)}function vR(t=vt()){return/iemobile/i.test(t)}function zh(t=vt()){return/android/i.test(t)}function bR(t=vt()){return/blackberry/i.test(t)}function wR(t=vt()){return/webos/i.test(t)}function Mc(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kq(t=vt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function Aq(t=vt()){var e;return Mc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _q(){return MD()&&document.documentMode===10}function xR(t=vt()){return Mc(t)||zh(t)||wR(t)||bR(t)||/windows phone/i.test(t)||vR(t)}function jq(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e=[]){let n;switch(t){case"Browser":n=$A(vt());break;case"Worker":n=`${$A(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ca}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FA(this),this.idTokenSubscription=new FA(this),this.beforeStateQueue=new Dq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cR,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Yl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ye(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ir(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Yl.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return te(l,this,"internal-error"),l.then(()=>a(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function Zt(t){return ye(t)}class FA{constructor(e){this.auth=e,this.observer=null,this.addObserver=ND(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Rq(t,e,n){const r=Zt(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),a=SR(e),{host:l,port:d}=Mq(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${l}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Nq()}function SR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Mq(t){const e=SR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:qA(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:qA(l)}}}function qA(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Nq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,n){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return tn(t,"POST","/v1/accounts:resetPassword",$t(t,e))}async function ER(t,e){return tn(t,"POST","/v1/accounts:update",e)}async function Lq(t,e){return tn(t,"POST","/v1/accounts:update",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oq(t,e){return Gi(t,"POST","/v1/accounts:signInWithPassword",$t(t,e))}async function Wg(t,e){return tn(t,"POST","/v1/accounts:sendOobCode",$t(t,e))}async function Pq(t,e){return Wg(t,e)}async function Uq(t,e){return Wg(t,e)}async function Vq(t,e){return Wg(t,e)}async function Bq(t,e){return Wg(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zq(t,e){return Gi(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}async function $q(t,e){return Gi(t,"POST","/v1/accounts:signInWithEmailLink",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends Nc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ih(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ih(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Oq(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return zq(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return ER(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return $q(e,{idToken:n,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Li(t,e){return Gi(t,"POST","/v1/accounts:signInWithIdp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq="http://localhost";class fi extends Nc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=R2(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new fi(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Li(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Li(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Li(e,n)}buildRequest(){const e={requestUri:Fq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qq(t,e){return tn(t,"POST","/v1/accounts:sendVerificationCode",$t(t,e))}async function Hq(t,e){return Gi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e))}async function Gq(t,e){const n=await Gi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,e));if(n.temporaryProof)throw fd(t,"account-exists-with-different-credential",n);return n}const Wq={USER_NOT_FOUND:"user-not-found"};async function Yq(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Gi(t,"POST","/v1/accounts:signInWithPhoneNumber",$t(t,n),Wq)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Nc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ra({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ra({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return Hq(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return Gq(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Yq(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=e;return!r&&!n&&!i&&!a?null:new ra({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Qq(t){const e=Ul(ld(t)).link,n=e?Ul(ld(e)).deep_link_id:null,r=Ul(ld(t)).deep_link_id;return(r?Ul(ld(r)).link:null)||r||n||e||t}class Yg{constructor(e){var n,r,i,a,l,d;const f=Ul(ld(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,g=(r=f.oobCode)!==null&&r!==void 0?r:null,v=Kq((i=f.mode)!==null&&i!==void 0?i:null);te(m&&g&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=g,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=Qq(e);try{return new Yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return ih._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yg.parseLink(n);return te(r,"argument-error"),ih._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Kl extends Lc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),fi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),fi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Kl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Kl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:a,nonce:l,providerId:d}=e;if(!r&&!i&&!n&&!a||!d)return null;try{return new Kl(d)._credential({idToken:n,accessToken:r,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Lc{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Lc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fi._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Lc{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq="http://localhost";class mc extends Nc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Li(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Li(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Li(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:a}=n;return!r||!i||!a||r!==i?null:new mc(r,a)}static _create(e,n){return new mc(e,n)}buildRequest(){return{requestUri:Xq,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="saml.";class zp extends Wi{constructor(e){te(e.startsWith(Zq),"argument-error"),super(e)}static credentialFromResult(e){return zp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return zp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=mc.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return mc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Lc{constructor(){super("twitter.com")}static credential(e,n){return fi._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return Gi(t,"POST","/v1/accounts:signUp",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ta._fromIdTokenResponse(e,r,i),l=HA(r);return new Er({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=HA(r);return new Er({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function HA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jq(t){var e;const n=Zt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Er({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await kR(n,{returnSecureToken:!0}),i=await Er._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p extends Kt{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$p.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $p(e,n,r,i)}}function AR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?$p._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eH(t,e){const n=ye(t);await Kg(!0,n,e);const{providerUserInfo:r}=await gq(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=_R(r||[]);return n.providerData=n.providerData.filter(a=>i.has(a.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function P2(t,e,n=!1){const r=await zi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Er._forOperation(t,"link",r)}async function Kg(t,e,n){await nh(e);const r=_R(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const a=await zi(t,AR(r,i,e,t),n);te(a.idToken,r,"internal-error");const l=Gg(a.idToken);te(l,r,"internal-error");const{sub:d}=l;return te(t.uid===d,r,"user-mismatch"),Er._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&fn(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e,n=!1){const r="signIn",i=await AR(t,r,e),a=await Er._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Qg(t,e){return DR(Zt(t),e)}async function IR(t,e){const n=ye(t);return await Kg(!1,n,e.providerId),P2(n,e)}async function RR(t,e){return jR(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tH(t,e){return Gi(t,"POST","/v1/accounts:signInWithCustomToken",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nH(t,e){const n=Zt(t),r=await tH(n,{token:e,returnSecureToken:!0}),i=await Er._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?U2._fromServerResponse(e,n):fn(e,"internal-error")}}class U2 extends Xg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new U2(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rH(t,e,n){const r=ye(t),i={requestType:"PASSWORD_RESET",email:e};n&&Zg(r,i,n),await Uq(r,i)}async function iH(t,e,n){await CR(ye(t),{oobCode:e,newPassword:n})}async function sH(t,e){await Lq(ye(t),{oobCode:e})}async function MR(t,e){const n=ye(t),r=await CR(n,{oobCode:e}),i=r.requestType;switch(te(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=Xg._fromServerResponse(Zt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function oH(t,e){const{data:n}=await MR(ye(t),e);return n.email}async function aH(t,e,n){const r=Zt(t),i=await kR(r,{returnSecureToken:!0,email:e,password:n}),a=await Er._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function lH(t,e,n){return Qg(ye(t),io.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cH(t,e,n){const r=ye(t),i={requestType:"EMAIL_SIGNIN",email:e};te(n.handleCodeInApp,r,"argument-error"),n&&Zg(r,i,n),await Vq(r,i)}function uH(t,e){const n=Yg.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function dH(t,e,n){const r=ye(t),i=io.credentialWithLink(e,n||th());return te(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Qg(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hH(t,e){return tn(t,"POST","/v1/accounts:createAuthUri",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e){const n=N2()?th():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await hH(ye(t),r);return i||[]}async function mH(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Zg(n.auth,i,e);const{email:a}=await Pq(n.auth,i);a!==t.email&&await t.reload()}async function pH(t,e,n){const r=ye(t),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Zg(r.auth,a,n);const{email:l}=await Bq(r.auth,a);l!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gH(t,e){return tn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yH(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},l=await zi(r,gH(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const d=r.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function vH(t,e){return NR(ye(t),e,null)}function bH(t,e){return NR(ye(t),null,e)}async function NR(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const l=await zi(t,ER(r,a));await t._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wH(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},a=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const l=(n=(e=Gg(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(l){const d=l!=="anonymous"&&l!=="custom"?l:null;return new Ql(a,d)}}if(!r)return null;switch(r){case"facebook.com":return new xH(a,i);case"github.com":return new TH(a,i);case"google.com":return new SH(a,i);case"twitter.com":return new CH(a,i,t.screenName||null);case"custom":case"anonymous":return new Ql(a,null);default:return new Ql(a,r,i)}}class Ql{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class LR extends Ql{constructor(e,n,r,i){super(e,n,r),this.username=i}}class xH extends Ql{constructor(e,n){super(e,"facebook.com",n)}}class TH extends LR{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class SH extends Ql{constructor(e,n){super(e,"google.com",n)}}class CH extends LR{constructor(e,n,r){super(e,"twitter.com",n,r)}}function EH(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:wH(n)}class Qo{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new Qo("enroll",e,n)}static _fromMfaPendingCredential(e){return new Qo("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Qo._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Qo._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Zt(e),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map(d=>Xg._fromServerResponse(r,d));te(i.mfaPendingCredential,r,"internal-error");const l=Qo._fromMfaPendingCredential(i.mfaPendingCredential);return new V2(l,a,async d=>{const f=await d._process(r,l);delete i.mfaInfo,delete i.mfaPendingCredential;const m=Object.assign(Object.assign({},i),{idToken:f.idToken,refreshToken:f.refreshToken});switch(n.operationType){case"signIn":const g=await Er._fromIdTokenResponse(r,n.operationType,m);return await r._updateCurrentUser(g.user),g;case"reauthenticate":return te(n.user,r,"internal-error"),Er._forOperation(n.user,n.operationType,m);default:fn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function kH(t,e){var n;const r=ye(t),i=e;return te(e.customData.operationType,r,"argument-error"),te((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),V2._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:start",$t(t,e))}function _H(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:finalize",$t(t,e))}function jH(t,e){return tn(t,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(t,e))}class B2{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Xg._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new B2(e)}async getSession(){return Qo._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,i=await this.getSession(),a=await zi(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await zi(this.user,jH(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const c1=new WeakMap;function DH(t){const e=ye(t);return c1.has(e)||c1.set(e,B2._fromUser(e)),c1.get(e)}const Fp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fp,"1"),this.storage.removeItem(Fp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IH(){const t=vt();return O2(t)||Mc(t)}const RH=1e3,MH=10;class PR extends OR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=IH()&&jq(),this.fallbackToPolling=xR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(r);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);_q()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,MH):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PR.type="LOCAL";const z2=PR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR extends OR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}UR.type="SESSION";const ba=UR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Jg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async m=>m(n.origin,a)),f=await NH(d);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const m=$h("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===m)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(w.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return window}function OH(t){Bt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof Bt().WorkerGlobalScope<"u"&&typeof Bt().importScripts=="function"}async function PH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VH(){return $2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebaseLocalStorageDb",BH=1,qp="firebaseLocalStorage",BR="fbase_key";class Fh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ey(t,e){return t.transaction([qp],e?"readwrite":"readonly").objectStore(qp)}function zH(){const t=indexedDB.deleteDatabase(VR);return new Fh(t).toPromise()}function fw(){const t=indexedDB.open(VR,BH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qp,{keyPath:BR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qp)?e(r):(r.close(),await zH(),e(await fw()))})})}async function GA(t,e,n){const r=ey(t,!0).put({[BR]:e,value:n});return new Fh(r).toPromise()}async function $H(t,e){const n=ey(t,!1).get(e),r=await new Fh(n).toPromise();return r===void 0?null:r.value}function WA(t,e){const n=ey(t,!0).delete(e);return new Fh(n).toPromise()}const FH=800,qH=3;class zR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>qH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jg._getInstance(VH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PH(),!this.activeServiceWorker)return;this.sender=new LH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fw();return await GA(e,Fp,"1"),await WA(e,Fp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>GA(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$H(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WA(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ey(i,!1).getAll();return new Fh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zR.type="LOCAL";const sh=zR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(t,e){return tn(t,"POST","/v2/accounts/mfaSignIn:start",$t(t,e))}function GH(t,e){return tn(t,"POST","/v2/accounts/mfaSignIn:finalize",$t(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WH(t){return(await tn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function $R(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=dn("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",YH().appendChild(r)})}function FR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=500,QH=6e4,Em=1e12;class XH{constructor(e){this.auth=e,this.counter=Em,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new ZH(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Em;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Em;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Em;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class ZH{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=JH(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},QH)},KH))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function JH(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=FR("rcb"),eG=new Bh(3e4,6e4),tG="https://www.google.com/recaptcha/api.js?";class nG{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Bt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(rG(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Bt().grecaptcha):new Promise((r,i)=>{const a=Bt().setTimeout(()=>{i(dn(e,"network-request-failed"))},eG.get());Bt()[u1]=()=>{Bt().clearTimeout(a),delete Bt()[u1];const d=Bt().grecaptcha;if(!d){i(dn(e,"internal-error"));return}const f=d.render;d.render=(m,g)=>{const v=f(m,g);return this.counter++,v},this.hostLanguage=n,r(d)};const l=`${tG}?${xc({onload:u1,render:"explicit",hl:n})}`;$R(l).catch(()=>{clearTimeout(a),i(dn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Bt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function rG(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class iG{async load(e){return new XH(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="recaptcha",sG={theme:"light",type:"image"};let oG=class{constructor(e,n=Object.assign({},sG),r){this.parameters=n,this.type=qR,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zt(r),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof e=="string"?document.getElementById(e):e;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new iG:new nG,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),i(l))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Bt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(N2()&&!$2(),this.auth,"internal-error"),await aG(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await WH(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function aG(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ra._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function lG(t,e,n){const r=Zt(t),i=await ty(r,e,ye(n));return new F2(i,a=>Qg(r,a))}async function cG(t,e,n){const r=ye(t);await Kg(!1,r,"phone");const i=await ty(r.auth,e,ye(n));return new F2(i,a=>IR(r,a))}async function uG(t,e,n){const r=ye(t),i=await ty(r.auth,e,ye(n));return new F2(i,a=>RR(r,a))}async function ty(t,e,n){var r;const i=await n.verify();try{te(typeof i=="string",t,"argument-error"),te(n.type===qR,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a)return te(l.type==="enroll",t,"internal-error"),(await AH(t,{idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{te(l.type==="signin",t,"internal-error");const d=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return te(d,t,"missing-multi-factor-info"),(await HH(t,{mfaPendingCredential:l.credential,mfaEnrollmentId:d,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:l}=await qq(t,{phoneNumber:a.phoneNumber,recaptchaToken:i});return l}}finally{n._reset()}}async function dG(t,e){await P2(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa=class lp{constructor(e){this.providerId=lp.PROVIDER_ID,this.auth=Zt(e)}verifyPhoneNumber(e,n){return ty(this.auth,e,ye(n))}static credential(e,n){return ra._fromVerification(e,n)}static credentialFromResult(e){const n=e;return lp.credentialFromTaggedObject(n)}static credentialFromError(e){return lp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ra._fromTokenResponse(n,r):null}};wa.PROVIDER_ID="phone";wa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t,e){return e?ir(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2 extends Nc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Li(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Li(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Li(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hG(t){return DR(t.auth,new q2(t),t.bypassAuthState)}function fG(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),jR(n,new q2(t),t.bypassAuthState)}async function mG(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),P2(n,new q2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hG;case"linkViaPopup":case"linkViaRedirect":return mG;case"reauthViaPopup":case"reauthViaRedirect":return fG;default:fn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=new Bh(2e3,1e4);async function gG(t,e,n){const r=Zt(t);Rc(t,e,Wi);const i=Ia(r,n);return new Ii(r,"signInViaPopup",e,i).executeNotNull()}async function yG(t,e,n){const r=ye(t);Rc(r.auth,e,Wi);const i=Ia(r.auth,n);return new Ii(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function vG(t,e,n){const r=ye(t);Rc(r.auth,e,Wi);const i=Ia(r.auth,n);return new Ii(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ii extends HR{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ii.currentPopupAction&&Ii.currentPopupAction.cancel(),Ii.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=$h();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ii.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,pG.get())};e()}}Ii.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="pendingRedirect",Cd=new Map;class wG extends HR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const r=await xG(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xG(t,e){const n=WR(e),r=GR(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function H2(t,e){return GR(t)._set(WR(e),"true")}function TG(){Cd.clear()}function G2(t,e){Cd.set(t._key(),e)}function GR(t){return ir(t._redirectPersistence)}function WR(t){return na(bG,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(t,e,n){return CG(t,e,n)}async function CG(t,e,n){const r=Zt(t);Rc(t,e,Wi),await r._initializationPromise;const i=Ia(r,n);return await H2(i,r),i._openRedirect(r,e,"signInViaRedirect")}function EG(t,e,n){return kG(t,e,n)}async function kG(t,e,n){const r=ye(t);Rc(r.auth,e,Wi),await r.auth._initializationPromise;const i=Ia(r.auth,n);await H2(i,r.auth);const a=await YR(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",a)}function AG(t,e,n){return _G(t,e,n)}async function _G(t,e,n){const r=ye(t);Rc(r.auth,e,Wi),await r.auth._initializationPromise;const i=Ia(r.auth,n);await Kg(!1,r,e.providerId),await H2(i,r.auth);const a=await YR(r);return i._openRedirect(r.auth,e,"linkViaRedirect",a)}async function jG(t,e){return await Zt(t)._initializationPromise,ny(t,e,!1)}async function ny(t,e,n=!1){const r=Zt(t),i=Ia(r,e),l=await new wG(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}async function YR(t){const e=$h(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG=10*60*1e3;class KR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DG&&this.cachedEventUids.clear(),this.cachedEventUids.has(YA(e))}saveEventToCache(e){this.cachedEventUids.add(YA(e)),this.lastProcessedEventTime=Date.now()}}function YA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e={}){return tn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MG=/^https?/;async function NG(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XR(t);for(const n of e)try{if(LG(n))return}catch{}fn(t,"unauthorized-domain")}function LG(t){const e=th(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!MG.test(n))return!1;if(RG.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OG=new Bh(3e4,6e4);function KA(){const t=Bt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PG(t){return new Promise((e,n)=>{var r,i,a;function l(){KA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KA(),n(dn(t,"network-request-failed"))},timeout:OG.get()})}if(!((i=(r=Bt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Bt().gapi)===null||a===void 0)&&a.load)l();else{const d=FR("iframefcb");return Bt()[d]=()=>{gapi.load?l():n(dn(t,"network-request-failed"))},$R(`https://apis.google.com/js/api.js?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw cp=null,e})}let cp=null;function UG(t){return cp=cp||PG(t),cp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG=new Bh(5e3,15e3),BG="__/auth/iframe",zG="emulator/auth/iframe",$G={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qG(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?L2(e,zG):`https://${t.config.authDomain}/${BG}`,r={apiKey:e.apiKey,appName:t.name,v:Ca},i=FG.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${xc(r).slice(1)}`}async function HG(t){const e=await UG(t),n=Bt().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:qG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$G,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=dn(t,"network-request-failed"),d=Bt().setTimeout(()=>{a(l)},VG.get());function f(){Bt().clearTimeout(d),i(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WG=500,YG=600,KG="_blank",QG="http://localhost";class QA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function XG(t,e,n,r=WG,i=YG){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},GG),{width:r.toString(),height:i.toString(),top:a,left:l}),m=vt().toLowerCase();n&&(d=yR(m)?KG:n),gR(m)&&(e=e||QG,f.scrollbars="yes");const g=Object.entries(f).reduce((w,[x,T])=>`${w}${x}=${T},`,"");if(Aq(m)&&d!=="_self")return ZG(e||"",d),new QA(null);const v=window.open(e||"",d,g);te(v,t,"popup-blocked");try{v.focus()}catch{}return new QA(v)}function ZG(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="__/auth/handler",eW="emulator/auth/handler";function mw(t,e,n,r,i,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ca,eventId:i};if(e instanceof Wi){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",DP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(a||{}))l[f]=m}if(e instanceof Lc){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(l.scopes=f.join(","))}t.tenantId&&(l.tid=t.tenantId);const d=l;for(const f of Object.keys(d))d[f]===void 0&&delete d[f];return`${tW(t)}?${xc(d).slice(1)}`}function tW({config:t}){return t.emulator?L2(t,eW):`https://${t.authDomain}/${JG}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="webStorageSupport";class nW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ba,this._completeRedirectFn=ny,this._overrideRedirectResult=G2}async _openPopup(e,n,r,i){var a;Nr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=mw(e,n,r,th(),i);return XG(e,l,$h())}async _openRedirect(e,n,r,i){return await this._originValidation(e),OH(mw(e,n,r,th(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Nr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HG(e),r=new KR(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(d1,{type:d1},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[d1];l!==void 0&&n(!!l),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xR()||O2()||Mc()}}const rW=nW;class iW{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ii("unexpected MultiFactorSessionType")}}}class W2 extends iW{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new W2(e)}_finalizeEnroll(e,n,r){return _H(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return GH(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ZR{constructor(){}static assertion(e){return W2._fromCredential(e)}}ZR.FACTOR_ID="phone";var XA="@firebase/auth",ZA="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function aW(t){Ui(new Cr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:a,authDomain:l}=r.options;return((d,f)=>{te(a&&!a.includes(":"),"invalid-api-key",{appName:d.name}),te(!(l!=null&&l.includes(":")),"argument-error",{appName:d.name});const m={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TR(t)},g=new Iq(d,f,m);return cq(g,n),g})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ui(new Cr("auth-internal",e=>{const n=Zt(e.getProvider("auth").getImmediate());return(r=>new sW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(XA,ZA,oW(t)),Tr(XA,ZA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=5*60;wP("authIdTokenMaxAge");aW("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=2e3;async function uW(t,e,n){var r;const{BuildInfo:i}=xa();Nr(e.sessionId,"AuthEvent did not contain a session ID");const a=await pW(e.sessionId),l={};return Mc()?l.ibi=i.packageName:zh()?l.apn=i.packageName:fn(t,"operation-not-supported-in-this-environment"),i.displayName&&(l.appDisplayName=i.displayName),l.sessionId=a,mw(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,l)}async function dW(t){const{BuildInfo:e}=xa(),n={};Mc()?n.iosBundleId=e.packageName:zh()?n.androidPackageName=e.packageName:fn(t,"operation-not-supported-in-this-environment"),await XR(t,n)}function hW(t){const{cordova:e}=xa();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,kq()?"_blank":"_system","location=yes"),n(i)})})}async function fW(t,e,n){const{cordova:r}=xa();let i=()=>{};try{await new Promise((a,l)=>{let d=null;function f(){var v;a();const w=(v=r.plugins.browsertab)===null||v===void 0?void 0:v.close;typeof w=="function"&&w(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function m(){d||(d=window.setTimeout(()=>{l(dn(t,"redirect-cancelled-by-user"))},cW))}function g(){(document==null?void 0:document.visibilityState)==="visible"&&m()}e.addPassiveListener(f),document.addEventListener("resume",m,!1),zh()&&document.addEventListener("visibilitychange",g,!1),i=()=>{e.removePassiveListener(f),document.removeEventListener("resume",m,!1),document.removeEventListener("visibilitychange",g,!1),d&&window.clearTimeout(d)}})}finally{i()}}function mW(t){var e,n,r,i,a,l,d,f,m,g;const v=xa();te(typeof((e=v==null?void 0:v.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=v==null?void 0:v.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((a=(i=(r=v==null?void 0:v.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||a===void 0?void 0:a.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((f=(d=(l=v==null?void 0:v.cordova)===null||l===void 0?void 0:l.plugins)===null||d===void 0?void 0:d.browsertab)===null||f===void 0?void 0:f.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((g=(m=v==null?void 0:v.cordova)===null||m===void 0?void 0:m.InAppBrowser)===null||g===void 0?void 0:g.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function pW(t){const e=gW(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function gW(t){if(Nr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW=20;class vW extends KR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function bW(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:TW(),postBody:null,tenantId:t.tenantId,error:dn(t,"no-auth-event")}}function wW(t,e){return pw()._set(gw(t),e)}async function JA(t){const e=await pw()._get(gw(t));return e&&await pw()._remove(gw(t)),e}function xW(t,e){var n,r;const i=CW(e);if(i.includes("/__/auth/callback")){const a=up(i),l=a.firebaseError?SW(decodeURIComponent(a.firebaseError)):null,d=(r=(n=l==null?void 0:l.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],f=d?dn(d):null;return f?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function TW(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<yW;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function pw(){return ir(z2)}function gw(t){return na("authEvent",t.config.apiKey,t.name)}function SW(t){try{return JSON.parse(t)}catch{return null}}function CW(t){const e=up(t),n=e.link?decodeURIComponent(e.link):void 0,r=up(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return up(i).link||i||r||n||t}function up(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ul(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EW=500;class kW{constructor(){this._redirectPersistence=ba,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ny,this._overrideRedirectResult=G2}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new vW(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){fn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){mW(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),TG(),await this._originValidation(e);const l=bW(e,r,i);await wW(e,l);const d=await uW(e,l,n),f=await hW(d);return fW(e,a,f)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dW(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:a}=xa(),l=setTimeout(async()=>{await JA(e),n.onEvent(e_())},EW),d=async g=>{clearTimeout(l);const v=await JA(e);let w=null;v&&(g!=null&&g.url)&&(w=xW(v,g.url)),n.onEvent(w||e_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,d);const f=i,m=`${a.packageName.toLowerCase()}://`;xa().handleOpenURL=async g=>{if(g.toLowerCase().startsWith(m)&&d({url:g}),typeof f=="function")try{f(g)}catch(v){console.error(v)}}}}const AW=kW;function e_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:dn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t,e){Zt(t)._logFramework(e)}var jW="@firebase/auth-compat",DW="0.3.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=1e3;function Ed(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function RW(){return Ed()==="http:"||Ed()==="https:"}function JR(t=vt()){return!!((Ed()==="file:"||Ed()==="ionic:"||Ed()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function MW(){return ux()||cx()}function NW(){return MD()&&(document==null?void 0:document.documentMode)===11}function LW(t=vt()){return/Edge\/\d+/.test(t)}function OW(t=vt()){return NW()||LW(t)}function e7(){try{const t=self.localStorage,e=$h();if(t)return t.setItem(e,"1"),t.removeItem(e),OW()?Nd():!0}catch{return Y2()&&Nd()}return!1}function Y2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function h1(){return(RW()||RD()||JR())&&!MW()&&e7()&&!Y2()}function t7(){return JR()&&typeof document<"u"}async function PW(){return t7()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},IW);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function UW(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={LOCAL:"local",NONE:"none",SESSION:"session"},Yu=te,n7="persistence";function VW(t,e){if(Yu(Object.values(rr).includes(e),t,"invalid-persistence-type"),ux()){Yu(e!==rr.SESSION,t,"unsupported-persistence-type");return}if(cx()){Yu(e===rr.NONE,t,"unsupported-persistence-type");return}if(Y2()){Yu(e===rr.NONE||e===rr.LOCAL&&Nd(),t,"unsupported-persistence-type");return}Yu(e===rr.NONE||e7(),t,"unsupported-persistence-type")}async function yw(t){await t._initializationPromise;const e=r7(),n=na(n7,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function BW(t,e){const n=r7();if(!n)return[];const r=na(n7,t,e);switch(n.getItem(r)){case rr.NONE:return[fc];case rr.LOCAL:return[sh,ba];case rr.SESSION:return[ba];default:return[]}}function r7(){var t;try{return((t=UW())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW=te;class Os{constructor(){this.browserResolver=ir(rW),this.cordovaResolver=ir(AW),this.underlyingResolver=null,this._redirectPersistence=ba,this._completeRedirectFn=ny,this._overrideRedirectResult=G2}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return t7()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zW(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await PW();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t){return t.unwrap()}function $W(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FW(t){return s7(t)}function qW(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new HW(t,kH(t,e))}else if(r){const i=s7(e),a=e;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function s7(t){const{_tokenResponse:e}=t instanceof Kt?t.customData:t;if(!e)return null;if(!(t instanceof Kt)&&"temporaryProof"in e&&"phoneNumber"in e)return wa.credentialFromResult(t);const n=e.providerId;if(!n||n===Wu.PASSWORD)return null;let r;switch(n){case Wu.GOOGLE:r=Jr;break;case Wu.FACEBOOK:r=Zr;break;case Wu.GITHUB:r=ei;break;case Wu.TWITTER:r=ti;break;default:const{oauthIdToken:i,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:d,nonce:f}=e;return!a&&!l&&!i&&!d?null:d?n.startsWith("saml.")?mc._create(n,d):fi._fromParams({providerId:n,signInMethod:n,pendingToken:d,idToken:i,accessToken:a}):new Kl(n).credential({idToken:i,accessToken:a,rawNonce:f})}return t instanceof Kt?r.credentialFromError(t):r.credentialFromResult(t)}function Bn(t,e){return e.catch(n=>{throw n instanceof Kt&&qW(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:FW(n),additionalUserInfo:EH(n),user:Ri.getOrCreate(i)}})}async function vw(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Bn(t,n.confirm(r))}}class HW{constructor(e,n){this.resolver=n,this.auth=$W(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Bn(i7(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._delegate=e,this.multiFactor=DH(e)}static getOrCreate(e){return Ri.USER_MAP.has(e)||Ri.USER_MAP.set(e,new Ri(e)),Ri.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Bn(this.auth,IR(this._delegate,e))}async linkWithPhoneNumber(e,n){return vw(this.auth,cG(this._delegate,e,n))}async linkWithPopup(e){return Bn(this.auth,vG(this._delegate,e,Os))}async linkWithRedirect(e){return await yw(Zt(this.auth)),AG(this._delegate,e,Os)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Bn(this.auth,RR(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return vw(this.auth,uG(this._delegate,e,n))}reauthenticateWithPopup(e){return Bn(this.auth,yG(this._delegate,e,Os))}async reauthenticateWithRedirect(e){return await yw(Zt(this.auth)),EG(this._delegate,e,Os)}sendEmailVerification(e){return mH(this._delegate,e)}async unlink(e){return await eH(this._delegate,e),this}updateEmail(e){return vH(this._delegate,e)}updatePassword(e){return bH(this._delegate,e)}updatePhoneNumber(e){return dG(this._delegate,e)}updateProfile(e){return yH(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return pH(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ri.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=te;class bw{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ku(r,"invalid-api-key",{appName:e.name}),Ku(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Os:void 0;this._delegate=n.initialize({options:{persistence:GW(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(aq),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ri.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){Rq(this._delegate,e,n)}applyActionCode(e){return sH(this._delegate,e)}checkActionCode(e){return MR(this._delegate,e)}confirmPasswordReset(e,n){return iH(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Bn(this._delegate,aH(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return fH(this._delegate,e)}isSignInWithEmailLink(e){return uH(this._delegate,e)}async getRedirectResult(){Ku(h1(),this._delegate,"operation-not-supported-in-this-environment");const e=await jG(this._delegate,Os);return e?Bn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){_W(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:a,complete:l}=t_(e,n,r);return this._delegate.onAuthStateChanged(i,a,l)}onIdTokenChanged(e,n,r){const{next:i,error:a,complete:l}=t_(e,n,r);return this._delegate.onIdTokenChanged(i,a,l)}sendSignInLinkToEmail(e,n){return cH(this._delegate,e,n)}sendPasswordResetEmail(e,n){return rH(this._delegate,e,n||void 0)}async setPersistence(e){VW(this._delegate,e);let n;switch(e){case rr.SESSION:n=ba;break;case rr.LOCAL:n=await ir(sh)._isAvailable()?sh:z2;break;case rr.NONE:n=fc;break;default:return fn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Bn(this._delegate,Jq(this._delegate))}signInWithCredential(e){return Bn(this._delegate,Qg(this._delegate,e))}signInWithCustomToken(e){return Bn(this._delegate,nH(this._delegate,e))}signInWithEmailAndPassword(e,n){return Bn(this._delegate,lH(this._delegate,e,n))}signInWithEmailLink(e,n){return Bn(this._delegate,dH(this._delegate,e,n))}signInWithPhoneNumber(e,n){return vw(this._delegate,lG(this._delegate,e,n))}async signInWithPopup(e){return Ku(h1(),this._delegate,"operation-not-supported-in-this-environment"),Bn(this._delegate,gG(this._delegate,e,Os))}async signInWithRedirect(e){return Ku(h1(),this._delegate,"operation-not-supported-in-this-environment"),await yw(this._delegate),SG(this._delegate,e,Os)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return oH(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}bw.Persistence=rr;function t_(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:l=>i(l&&Ri.getOrCreate(l)),error:e,complete:n}}function GW(t,e){const n=BW(t,e);if(typeof self<"u"&&!n.includes(sh)&&n.push(sh),typeof window<"u")for(const r of[z2,ba])n.includes(r)||n.push(r);return n.includes(fc)||n.push(fc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.providerId="phone",this._delegate=new wa(i7(J.auth()))}static credential(e,n){return wa.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}K2.PHONE_SIGN_IN_METHOD=wa.PHONE_SIGN_IN_METHOD;K2.PROVIDER_ID=wa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW=te;class YW{constructor(e,n,r=J.app()){var i;WW((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new oG(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW="auth-compat";function QW(t){t.INTERNAL.registerComponent(new Cr(KW,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new bw(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xl.EMAIL_SIGNIN,PASSWORD_RESET:xl.PASSWORD_RESET,RECOVER_EMAIL:xl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:xl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:xl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:xl.VERIFY_EMAIL}},EmailAuthProvider:io,FacebookAuthProvider:Zr,GithubAuthProvider:ei,GoogleAuthProvider:Jr,OAuthProvider:Kl,SAMLAuthProvider:zp,PhoneAuthProvider:K2,PhoneMultiFactorGenerator:ZR,RecaptchaVerifier:YW,TwitterAuthProvider:ti,Auth:bw,AuthCredential:Nc,Error:Kt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(jW,DW)}QW(J);const o7={apiKey:"AIzaSyAR1iBrxuTXBeFfcMSgwV1AtaisdrT-nME",authDomain:"runeraffle-6fb42.firebaseapp.com",projectId:"runeraffle-6fb42",storageBucket:"runeraffle-6fb42.appspot.com",messagingSenderId:"646334419214",appId:"1:646334419214:web:4ffbeb5b4daf40f2a066a4"};J.apps.length||J.initializeApp(o7);const Ra=J.auth(),st=J.firestore(),XW=new J.auth.GoogleAuthProvider;J.app().functions("europe-west2");const ZW=async()=>{try{return(await Ra.signInWithPopup(XW)).user}catch(t){throw console.error("Error signing in with Google: ",t),t}},JW=async(t,e,n)=>{try{const r=await Ra.createUserWithEmailAndPassword(t,e);return n&&r.user&&(await r.user.updateProfile({displayName:n}),await r.user.sendEmailVerification()),r.user}catch(r){throw console.error("Error registering with email: ",r),r}},eY=async(t,e)=>{try{return(await Ra.signInWithEmailAndPassword(t,e)).user}catch(n){throw console.error("Error logging in with email: ",n),n}},tY=async()=>{try{await Ra.signOut()}catch(t){throw console.error("Error signing out: ",t),t}},nY=()=>Ra.currentUser,rY=t=>Ra.onAuthStateChanged(t),iY=async t=>{try{await Ra.sendPasswordResetEmail(t)}catch(e){throw console.error("Error sending password reset email: ",e),e}},ry=st.collection("notifications"),iy=async t=>{const e={...t,read:!1,createdAt:J.firestore.FieldValue.serverTimestamp()};return(await ry.add(e)).id},ww=async t=>{try{console.log(`Getting notifications for user ID: ${t}`);const e=await ry.where("userId","==",t).orderBy("createdAt","desc").limit(50).get();return console.log(`Found ${e.size} notifications for user ${t}`),e.docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw e instanceof Error&&e.message.includes("requires an index")&&console.error(`
        ------------------------------------------------------------
        MISSING FIRESTORE INDEX DETECTED!
        
        Your notification query requires a Firestore index that does not exist yet.
        Follow these steps to fix it:
        
        1. Go to your Firebase Console
        2. Navigate to Firestore Database  Indexes
        3. Create a new composite index with:
           - Collection: notifications
           - Fields:
             - userId (Ascending)
             - createdAt (Descending)
        
        Or click this link in the error message to create it automatically.
        ------------------------------------------------------------
      `),e}},a7=async t=>{await ry.doc(t).update({read:!0})},xw=async t=>{const e=st.batch();(await ry.where("userId","==",t).where("read","==",!1).get()).docs.forEach(r=>{e.update(r.ref,{read:!0})}),await e.commit()},l7=async(t,e,n,r,i)=>{await iy({userId:t,type:"ticket_purchase",title:"Ticket Purchased",message:`You've successfully purchased ticket #${i} for "${r}".`,competitionId:e,ticketId:n})},sY=async(t,e,n,r="system")=>await iy({userId:t,type:r,title:e,message:n}),oY=async(t,e,n,r,i)=>{console.log(`Creating ticket notification for user ID: ${t}`,{ticketId:e,ticketSubject:n,updatedBy:r,statusChange:i});let a="Support Ticket Updated",l="";i==="test"?(l=`This is a test notification for ticket "${n}". If you're seeing this, notifications are working properly.`,a="Test Notification"):i==="new"?(l=`New support ticket created: "${n}"`,a="New Support Ticket"):i==="assigned"?(l=`You have been assigned to support ticket: "${n}"`,a="Ticket Assigned"):i==="unassigned"?(l=`You have been unassigned from support ticket: "${n}"`,a="Ticket Unassigned"):i?(l=`Your ticket "${n}" status has been changed to ${i}.`,a="Ticket Status Changed"):r==="admin"?(l=`An admin has replied to your ticket "${n}".`,a="New Admin Response"):(l=`New message from user in ticket "${n}".`,a="New User Message");try{const d=await iy({userId:t,type:"ticket_update",title:a,message:l,supportTicketId:e});return console.log(`Successfully created notification (ID: ${d}) for user ${t}`),d}catch(d){throw console.error(`Failed to create notification for user ${t}:`,d),d}},sy=Object.freeze(Object.defineProperty({__proto__:null,createNotification:iy,getUserNotifications:ww,markAllNotificationsRead:xw,markNotificationRead:a7,notifyTicketPurchase:l7,notifyTicketUpdate:oY,notifyUser:sY},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY="type.googleapis.com/google.protobuf.Int64Value",lY="type.googleapis.com/google.protobuf.UInt64Value";function c7(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function Tw(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Tw(e));if(typeof t=="function"||typeof t=="object")return c7(t,e=>Tw(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Hp(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case aY:case lY:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Hp(e)):typeof t=="function"||typeof t=="object"?c7(t,e=>Hp(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xl extends Kt{constructor(e,n,r){super(`${u7}/${e}`,n||""),this.details=r}}function cY(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function uY(t,e){let n=cY(t),r=n,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!n_[l])return new Xl("internal","internal");n=n_[l],r=l}const d=a.message;typeof d=="string"&&(r=d),i=a.details,i!==void 0&&(i=Hp(i))}}catch{}return n==="ok"?null:new Xl(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(){if(this.appCheck){const e=await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(){const e=await this.getAuthToken(),n=await this.getMessagingToken(),r=await this.getAppCheckToken();return{authToken:e,messagingToken:n,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="us-central1";function hY(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xl("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}let fY=class{constructor(e,n,r,i,a=r_,l){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new dY(n,r,i),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin,this.region=r_}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function mY(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}function pY(t,e,n){return r=>vY(t,e,r,n||{})}function gY(t,e,n){return r=>d7(t,e,r,n||{})}async function yY(t,e,n,r){n["Content-Type"]="application/json";let i;try{i=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function vY(t,e,n,r){const i=t._url(e);return d7(t,i,n,r)}async function d7(t,e,n,r){n=Tw(n);const i={data:n},a={},l=await t.contextProvider.getContext();l.authToken&&(a.Authorization="Bearer "+l.authToken),l.messagingToken&&(a["Firebase-Instance-ID-Token"]=l.messagingToken),l.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=l.appCheckToken);const d=r.timeout||7e4,f=hY(d),m=await Promise.race([yY(e,i,a,t.fetchImpl),f.promise,t.cancelAllRequests]);if(f.cancel(),!m)throw new Xl("cancelled","Firebase Functions instance was deleted.");const g=uY(m.status,m.json);if(g)throw g;if(!m.json)throw new Xl("internal","Response is not valid JSON object.");let v=m.json.data;if(typeof v>"u"&&(v=m.json.result),typeof v>"u")throw new Xl("internal","Response is missing data field.");return{data:Hp(v)}}const i_="@firebase/functions",s_="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY="auth-internal",wY="app-check-internal",xY="messaging-internal";function TY(t,e){const n=(r,{instanceIdentifier:i})=>{const a=r.getProvider("app").getImmediate(),l=r.getProvider(bY),d=r.getProvider(xY),f=r.getProvider(wY);return new fY(a,l,d,f,i,t)};Ui(new Cr(u7,n,"PUBLIC").setMultipleInstances(!0)),Tr(i_,s_,e),Tr(i_,s_,"esm2017")}function o_(t,e,n){mY(ye(t),e,n)}function SY(t,e,n){return pY(ye(t),e,n)}function CY(t,e,n){return gY(ye(t),e,n)}TY(fetch.bind(self));const EY="@firebase/functions-compat",kY="0.3.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.app=e,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,n){return SY(this._delegate,e,n)}httpsCallableFromURL(e,n){return CY(this._delegate,e,n)}useFunctionsEmulator(e){const n=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(n==null)throw new Kt("functions","No origin provided to useFunctionsEmulator()");if(n[2]==null)throw new Kt("functions","Port missing in origin provided to useFunctionsEmulator()");return o_(this._delegate,n[1],Number(n[2]))}useEmulator(e,n){return o_(this._delegate,e,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AY="us-central1",_Y=(t,{instanceIdentifier:e})=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("functions").getImmediate({identifier:e??AY});return new h7(n,r)};function jY(){const t={Functions:h7};J.INTERNAL.registerComponent(new Cr("functions-compat",_Y,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jY();J.registerVersion(EY,kY);const DY=async(t,e,n,r,i)=>{try{const l=await J.app().functions("europe-west2").httpsCallable("sendEmail")({to:t,subject:e,html:n,template:r,data:i});return console.log("[EMAIL SERVICE] Email sent successfully via cloud function"),!0}catch(a){return console.error("[EMAIL SERVICE] Error sending email:",a),console.log(`[EMAIL SERVICE] Fallback: Sending email to ${t}`),console.log(`[EMAIL SERVICE] Subject: ${e}`),console.log(`[EMAIL SERVICE] Body: ${n}`),!1}},IY=async(t,e,n,r,i,a,l)=>{const d=`Ticket Purchase Confirmation - ${n}`,f=`
    <h1>Ticket Purchase Confirmation</h1>
    <p>Hello ${e},</p>
    <p>Thank you for purchasing a ticket for the "${n}" competition!</p>
    <h2>Ticket Details:</h2>
    <ul>
      <li>Ticket Number: #${r}</li>
      <li>Purchase Date: ${i.toLocaleDateString()}</li>
      <li>Competition Ends: ${a.toLocaleDateString()}</li>
    </ul>
    <p>You can view the competition details and track your entry at:<br/>
    <a href="${window.location.origin}/competition/${l}">${window.location.origin}/competition/${l}</a></p>
    <p>Good luck!</p>
    <p>The RuneRaffle Team</p>
  `;return DY(t,d,f,"ticket_purchase",{displayName:e,competitionTitle:n,ticketNumber:r,purchaseDate:i,competitionEndsAt:a,competitionId:l})},Yi=st.collection("competitions"),oy=st.collection("tickets"),Ta=st.collection("users"),qh=st.collection("supportTickets"),Sw=st.collection("ticketMessages"),f7=async()=>(await Yi.get()).docs.map(e=>({id:e.id,...e.data()})),Q2=async()=>(await Yi.where("status","in",["active","ending"]).orderBy("createdAt","desc").get()).docs.map(e=>({id:e.id,...e.data()})),ay=async()=>(await Yi.where("status","in",["complete"]).orderBy("completedAt","desc").get()).docs.map(e=>({id:e.id,...e.data()})),so=async t=>{const n=await Yi.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},m7=async t=>{const e={...t,ticketsSold:0,markedEndingSoon:!1,createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp(),triviaQuestion:t.triviaQuestion||"What game is RuneScape developed by?",triviaAnswer:t.triviaAnswer||"Jagex"};return(await Yi.add(e)).id},X2=async(t,e)=>{await Yi.doc(t).update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},p7=async t=>{await Yi.doc(t).delete()},g7=async(t,e=!1)=>{if(await Yi.doc(t).update({status:"cancelled",updatedAt:J.firestore.FieldValue.serverTimestamp()}),e)try{await x7(t)}catch(r){console.error(`Error processing automatic refunds for competition ${t}:`,r)}},ly=async t=>{const e={...t,purchasedAt:J.firestore.FieldValue.serverTimestamp(),isWinner:!1},n=await oy.add(e),r=Yi.doc(t.competitionId),i=await r.get();if(i.exists){const a=i.data();await r.update({ticketsSold:a.ticketsSold+1,updatedAt:J.firestore.FieldValue.serverTimestamp()}),await l7(t.userId,t.competitionId,n.id,a.title,t.ticketNumber);const l=await Ta.doc(t.userId).get();if(l.exists){const d=l.data();d&&d.email&&IY(d.email,d.displayName||"User",a.title,t.ticketNumber,new Date,a.endsAt.toDate(),t.competitionId).catch(f=>console.error("Error sending email:",f))}}return n.id},cy=async t=>(await oy.where("userId","==",t).orderBy("purchasedAt","desc").get()).docs.map(n=>({id:n.id,...n.data()})),y7=async t=>(await oy.where("competitionId","==",t).orderBy("purchasedAt","asc").get()).docs.map(n=>({id:n.id,...n.data()})),v7=async t=>{await Ta.doc(t.email).set({...t,createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()})},Cw=async t=>{const n=await Ta.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},RY=async(t,e)=>{await Ta.doc(t).update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},uy=async(t,e)=>{await Ta.doc(t).update({credits:e,updatedAt:J.firestore.FieldValue.serverTimestamp()})},Z2=async t=>{try{console.log(`Looking up auth user ID for email: ${t}`);try{console.log("Checking auth collection first (best method)");const e=await J.firestore().collection("auth").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].id;return console.log(`Found user auth ID via auth collection: ${n}`),n}}catch(e){console.error("Error checking auth collection:",e)}try{console.log("Looking for auth UID in users collection by email field");const e=await J.firestore().collection("users").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data();if(n&&n.uid)return console.log(`Found user auth ID via user collection: ${n.uid}`),n.uid}}catch(e){console.error("Error checking users by email query:",e)}try{console.log("Checking if email is the document ID");const e=await Ta.doc(t).get();if(e.exists){const n=e.data();if(n&&n.uid)return console.log(`Found user auth ID via direct document lookup: ${n.uid}`),n.uid}}catch(e){console.error("Error checking user document by email ID:",e)}console.log("Looking for the user in the firebase authentication context");try{const e=await J.firestore().collection("currentUsers").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data();if(n&&n.uid)return console.log(`Found user auth UID via currentUsers collection: ${n.uid}`),n.uid}}catch(e){console.log("Error checking currentUsers collection:",e)}try{console.log(`Attempting to get the user document with email ${t}`);const e=await Ta.where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].id;return console.log(`Found user document ID: ${n}`),n}}catch(e){console.error("Error getting user document ID:",e)}console.log("No auth UID found directly. Checking notification history for this user.");try{const e=await J.firestore().collection("notifications").where("email","==",t).limit(1).get();if(!e.empty){const n=e.docs[0].data().userId;return console.log(`Found user ID from past notifications: ${n}`),n}}catch(e){console.log("Error checking notification history:",e)}return console.warn(`WARNING: Could not find auth ID for ${t}. This will likely cause notifications not to show up in the UI. Using email as fallback.`),console.warn("IMPORTANT: Make sure your UI is looking for notifications with the same user ID format as what's being created."),t}catch(e){return console.error(`Error getting auth user ID for ${t}:`,e),null}},b7=async t=>{try{console.log("Creating new support ticket:",{userEmail:t.userEmail,userId:t.userId,subject:t.subject});const e={...t,status:"open",createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()},r=(await qh.add(e)).id;console.log(`Support ticket created with ID: ${r}`);try{const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:d}=await Promise.resolve().then(()=>sy);return{notifyTicketUpdate:d}},[]),{notifyAllAdmins:a}=await oa(async()=>{const{notifyAllAdmins:d}=await import("./adminService-DZBW2axZ.js");return{notifyAllAdmins:d}},[]),l=await a(d=>(console.log(`Sending new ticket notification to admin: ${d}`),i(d,r,t.subject,"user","new")));console.log(`Sent new ticket notifications to ${l} admins`)}catch(i){console.error("Error sending notifications to admins:",i)}return r}catch(e){throw console.error("Error creating support ticket:",e),e}},dy=async t=>{const n=await qh.doc(t).get();return n.exists?{id:n.id,...n.data()}:null},Ew=async(t,e)=>{try{console.log(`Updating support ticket ${t}:`,e);const n=qh.doc(t),r=await dy(t);if(!r)throw console.error(`Cannot update ticket ${t} - not found`),new Error(`Ticket not found: ${t}`);await n.update({...e,updatedAt:J.firestore.FieldValue.serverTimestamp()}),console.log(`Ticket ${t} updated successfully`);const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:a}=await Promise.resolve().then(()=>sy);return{notifyTicketUpdate:a}},void 0);if(r){if(e.status&&e.status!==r.status){const l=await Z2(r.userEmail)||r.userId;console.log(`Status changed to ${e.status} - notifying user: ${l} (original userId: ${r.userId})`),await i(l,t,r.subject,"admin",e.status)}e.assignedTo&&e.assignedTo!==r.assignedTo&&(console.log(`Ticket assigned to new admin: ${e.assignedTo}`),await i(e.assignedTo,t,r.subject,"admin","assigned"),r.assignedTo&&(console.log(`Notifying previous admin ${r.assignedTo} about unassignment`),await i(r.assignedTo,t,r.subject,"admin","unassigned")))}}catch(n){throw console.error("Error updating support ticket:",n),n}},J2=async t=>(await qh.where("userId","==",t).orderBy("createdAt","desc").get()).docs.map(n=>({id:n.id,...n.data()})),w7=async()=>(await qh.where("status","in",["open","in_progress"]).orderBy("priority","desc").orderBy("createdAt","asc").get()).docs.map(e=>({id:e.id,...e.data()})),e5=async t=>{try{console.log(`Adding new ticket message to ticket ${t.ticketId}:`,{isAdmin:t.isAdmin,userId:t.userId});const e={...t,createdAt:J.firestore.FieldValue.serverTimestamp()},n=await Sw.add(e);console.log(`Message added successfully with ID: ${n.id}`),await Sw.doc(t.ticketId).update({updatedAt:J.firestore.FieldValue.serverTimestamp()}),console.log(`Fetching ticket data for ${t.ticketId} to send notifications`);const r=await dy(t.ticketId);if(r){console.log("Found ticket:",{subject:r.subject,userId:r.userId,userEmail:r.userEmail,assignedTo:r.assignedTo}),console.log("Importing notification services");const{notifyTicketUpdate:i}=await oa(async()=>{const{notifyTicketUpdate:a}=await Promise.resolve().then(()=>sy);return{notifyTicketUpdate:a}},void 0);if(t.isAdmin){const l=await Z2(r.userEmail)||r.userId;console.log(`Admin message detected - sending notification to ticket owner: ${l} (original userId: ${r.userId})`),await i(l,t.ticketId,r.subject,"admin")}else if(r.assignedTo)console.log(`User message detected - notifying assigned admin: ${r.assignedTo}`),await i(r.assignedTo,t.ticketId,r.subject,"user");else{console.log("No assigned admin - notifying all admins");const{notifyAllAdmins:a}=await oa(async()=>{const{notifyAllAdmins:d}=await import("./adminService-DZBW2axZ.js");return{notifyAllAdmins:d}},[]),l=await a(d=>(console.log(`Sending notification to admin: ${d}`),i(d,t.ticketId,r.subject,"user")));console.log(`Sent notifications to ${l} admins`)}}else console.error(`No ticket found with ID ${t.ticketId} - cannot send notifications`);return n.id}catch(e){throw console.error("Error adding ticket message:",e),e}},Gp=async t=>(await Sw.where("ticketId","==",t).orderBy("createdAt","asc").get()).docs.map(n=>({id:n.id,...n.data()})),x7=async t=>{try{const e=await y7(t),n=await so(t);if(!n)throw new Error(`Competition ${t} not found`);if(n.status!=="cancelled")throw new Error(`Competition ${t} is not cancelled, current status: ${n.status}`);let r=0,i=0;const a={};for(const d of e)d.refunded||(a[d.userId]||(a[d.userId]={tickets:[],totalRefund:0}),a[d.userId].tickets.push(d),a[d.userId].totalRefund+=n.ticketPrice);const l=st.batch();for(const d in a){const{tickets:f,totalRefund:m}=a[d];try{const g=await st.collection("users").where("uid","==",d).limit(1).get();if(g.empty){console.error(`User ${d} not found, skipping refund`);continue}const v=g.docs[0],x=v.data().credits+m;l.update(v.ref,{credits:x,updatedAt:J.firestore.FieldValue.serverTimestamp()});for(const T of f)T.id&&l.update(oy.doc(T.id),{refunded:!0,updatedAt:J.firestore.FieldValue.serverTimestamp()});r++,i+=m;try{const{notifyUser:T}=await oa(async()=>{const{notifyUser:C}=await Promise.resolve().then(()=>sy);return{notifyUser:C}},void 0);await T(d,"Refund Processed",`Your ${f.length} ticket(s) for "${n.title}" have been refunded (${m} credits).`,"system")}catch(T){console.error("Error sending refund notification:",T)}}catch(g){console.error(`Error processing refund for user ${d}:`,g)}}return await l.commit(),{success:!0,refundedUsers:r,totalCreditsRefunded:i}}catch(e){throw console.error(`Error refunding cancelled competition ${t}:`,e),e}},MY=Object.freeze(Object.defineProperty({__proto__:null,addTicketMessage:e5,buyTicket:ly,cancelCompetition:g7,createCompetition:m7,createSupportTicket:b7,createUser:v7,deleteCompetition:p7,getActiveCompetitions:Q2,getAuthUserIdByEmail:Z2,getCompetition:so,getCompetitionTickets:y7,getCompetitions:f7,getCompletedCompetitions:ay,getOpenSupportTickets:w7,getSupportTicket:dy,getTicketMessages:Gp,getUser:Cw,getUserSupportTickets:J2,getUserTickets:cy,refundCancelledCompetitionTickets:x7,updateCompetition:X2,updateSupportTicket:Ew,updateUser:RY,updateUserCredits:uy},Symbol.toStringTag,{value:"Module"})),T7=k.createContext({currentUser:null,isLoading:!0,userCredits:0,isAdmin:!1,setUserCredits:()=>{}}),NY=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(!0),[a,l]=k.useState(100),[d,f]=k.useState(!1);k.useEffect(()=>{const g=nY();g&&n(g);const v=rY(async w=>{if(n(w),w&&w.email)try{let x=await Cw(w.email);x||(console.log(`Creating Firestore document for user: ${w.email}`),await v7({email:w.email,displayName:w.displayName||w.email,credits:100,isAdmin:!1}),x=await Cw(w.email)),x&&(l(x.credits),f(x.isAdmin))}catch(x){console.error("Error fetching/creating user profile:",x)}else l(100),f(!1);i(!1)});return()=>v()},[]);const m={currentUser:e,isLoading:r,userCredits:a,isAdmin:d,setUserCredits:l};return u.jsx(T7.Provider,{value:m,children:t})},In=()=>k.useContext(T7),LY=mi`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,OY=mi`
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
`,PY=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  ${t=>t.fullPage&&`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: hsla(var(--background), 0.8);
    z-index: 50;
  `}
`,UY=b.div`
  position: relative;
  width: ${t=>t.size}px;
  height: ${t=>t.size}px;
  display: flex;
  justify-content: center;
  align-items: center;
`,VY=b.svg`
  animation: ${LY} 2s linear infinite;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,BY=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${OY} 1.5s ease-in-out infinite;
  font-family: 'Inter', sans-serif;
  font-weight: 800;
  font-size: 24px;
  line-height: 1;
`,zY=b.span`
  color: white;
`,$Y=b.span`
  color: hsl(var(--primary));
`;function ia({size:t=60,fullPage:e=!1}){return u.jsx(PY,{fullPage:e,children:u.jsxs(UY,{size:t,children:[u.jsxs(VY,{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4",stroke:"hsla(var(--primary), 0.3)"}),u.jsx("circle",{cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"4",stroke:"hsl(var(--primary))",strokeDasharray:"125.6",strokeDashoffset:"37.7",strokeLinecap:"round"})]}),u.jsxs(BY,{children:[u.jsx(zY,{children:"R"}),u.jsx($Y,{children:"R"})]})]})})}const FY=b.div`
  position: relative;
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  padding: 2rem;
  margin-bottom: 2rem;
  width: ${t=>t.fullWidth?"100%":"auto"};
  
  ${t=>t.withGlow&&`
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.12);
    border: 1px solid transparent;
    background-image: 
      linear-gradient(hsl(var(--card)), hsl(var(--card))), 
      linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
    background-origin: border-box;
    background-clip: padding-box, border-box;
  `}
  
  ${t=>t.withPattern&&`
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('/images/pattern.svg') repeat;
      opacity: 0.05;
      z-index: 0;
    }
  `}
`,qY=b.div`
  position: relative;
  z-index: 1;
`;function Oi({children:t,withGlow:e=!1,withPattern:n=!1,fullWidth:r=!1}){return u.jsx(FY,{withGlow:e,withPattern:n,fullWidth:r,children:u.jsx(qY,{children:t})})}const HY=mi`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,GY=mi`
  0% { background-position: -1000px 0; }
  100% { background-position: 1000px 0; }
`,WY=mi`
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
`,YY=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,f1=b.section`
  margin-bottom: 4rem;
`,KY=b.div`
  padding: 6rem 2rem;
  margin-bottom: 4rem;
  text-align: center;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, hsl(var(--background)), hsl(222, 47%, 15%));
  border-radius: 1rem;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: radial-gradient(circle at 20px 20px, rgba(255, 255, 255, 0.05) 2px, transparent 0);
    background-size: 30px 30px;
    opacity: 0.4;
    z-index: 0;
  }
  
  @media (max-width: 768px) {
    padding: 4rem 1rem;
  }
`,QY=b.div`
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
`,XY=b.h1`
  font-size: 4.5rem;
  font-weight: 800;
  margin-bottom: 1.5rem;
  line-height: 1;
  letter-spacing: -0.03em;
  animation: ${HY} 6s ease-in-out infinite;
  
  @media (max-width: 768px) {
    font-size: 3rem;
  }
`,ZY=b.span`
  color: white;
`,JY=b.span`
  color: hsl(var(--primary));
`,eK=b.p`
  font-size: 1.5rem;
  margin-bottom: 2.5rem;
  color: hsl(var(--foreground) / 0.9);
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  animation: fadeIn 1s ease-out;
  animation-delay: 0.3s;
  animation-fill-mode: both;
  
  @media (max-width: 768px) {
    font-size: 1.2rem;
  }
`,a_=b.div`
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 2rem;
`,t5=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,kw=b(t5)`
  background-color: hsl(var(--primary));
  color: white;
  padding: 0.875rem 2rem;
  font-size: 1.125rem;
  font-weight: 600;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
  position: relative;
  overflow: hidden;
  
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: ${GY} 3s infinite;
    background-size: 200% 100%;
  }

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }
`,m1=b(t5)`
  background-color: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  padding: 0.875rem 2rem;
  font-size: 1.125rem;
  font-weight: 600;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.15);
    transform: translateY(-4px);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,tK=b.div`
  border-radius: 1rem;
  padding: 2.5rem;
  position: relative;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    cursor: pointer;
  }
`,nK=b.div`
  display: flex;
  flex-direction: column;
  gap: 2rem;
  position: relative;
  z-index: 1;
`,rK=b.div`
  flex: 2;
`,iK=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
`,p1=b.span`
  background-color: ${t=>{switch(t.variant){case"featured":return"rgba(245, 158, 11, 0.2)";case"limited":return"rgba(239, 68, 68, 0.2)";default:return"rgba(0, 136, 204, 0.2)"}}};
  color: ${t=>{switch(t.variant){case"featured":return"rgb(245, 158, 11)";case"limited":return"rgb(239, 68, 68)";default:return"rgb(0, 174, 239)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,dp=b.h2`
  font-size: 1.75rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,l_=b.p`
  margin-bottom: 1.5rem;
  opacity: 0.9;
  line-height: 1.6;
`,c_=b.div`
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.7);
`,sK=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
`,u_=b.div`
  margin: 1.5rem 0;
`,d_=b.div`
  height: 8px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`,h_=b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`,f_=b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,oK=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 1rem 0;
  padding: 1rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.5rem;
`,aK=b.div`
  width: 2.5rem;
  height: 2.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  color: hsl(var(--primary));
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`,lK=b.div`
  flex: 1;
`,cK=b.div`
  font-weight: 600;
  font-size: 1.125rem;
`,uK=b.div`
  font-size: 0.875rem;
  opacity: 0.7;
`,dK=b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`,m_=b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`,hK=b.div`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`,fK=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
`,mK=b.button`
  color: hsl(var(--primary));
  font-weight: 500;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.25rem;
  
  &:hover {
    text-decoration: underline;
  }
`,pK=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;
`,gK=b.div`
  border-radius: 0.75rem;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }
`,yK=b.div`
  height: 10rem;
  background-color: rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
`,vK=b.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
`,bK=b.div`
  position: relative;
  z-index: 1;
  width: 3.5rem;
  height: 3.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`,wK=b.div`
  padding: 1.25rem;
`,xK=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  flex-wrap: wrap;
`,TK=b.span`
  background-color: ${t=>{switch(t.difficulty){case"easy":return"rgba(22, 163, 74, 0.2)";case"medium":return"rgba(245, 158, 11, 0.2)";case"hard":return"rgba(239, 68, 68, 0.2)";default:return"rgba(22, 163, 74, 0.2)"}}};
  color: ${t=>{switch(t.difficulty){case"easy":return"rgb(22, 163, 74)";case"medium":return"rgb(245, 158, 11)";case"hard":return"rgb(239, 68, 68)";default:return"rgb(22, 163, 74)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,SK=b.span`
  background-color: rgba(0, 174, 239, 0.2);
  color: rgb(0, 174, 239);
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,CK=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,EK=b.p`
  font-size: 0.875rem;
  margin-bottom: 1rem;
  opacity: 0.9;
  line-height: 1.6;
`,kK=b.div`
  font-size: 0.75rem;
  font-weight: 500;
  margin-bottom: 0.25rem;
  color: rgba(255, 255, 255, 0.7);
`,AK=b.div`
  font-size: 1.125rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
  margin-bottom: 1rem;
`,_K=b(kw)`
  width: 100%;
  text-align: center;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
`,jK=b(dp)`
  text-align: center;
  margin-bottom: 3rem;
`,DK=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
`,IK=b.div`
  text-align: center;
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 2.5rem;
  transition: all 0.3s ease;
  animation: ${WY} 10s ease-in-out infinite;
  animation-delay: ${t=>(t.itemKey||0)*2}s;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  border: 1px solid transparent;
  background-clip: padding-box, border-box;
  background-origin: padding-box, border-box;
  background-image: 
    linear-gradient(to bottom, hsl(var(--card)), hsl(var(--card))), 
    linear-gradient(to bottom, hsla(var(--primary), 0.2), transparent);
  
  &:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
  }
  
  &:hover .step-icon {
    transform: scale(1.1);
    background-color: rgba(0, 174, 239, 0.3);
  }
  
  &:hover .step-icon::after {
    opacity: 1;
  }
`,RK=b.div`
  width: 5rem;
  height: 5rem;
  background-color: ${t=>`rgba(${t.color}, 0.2)`};
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem auto;
  transition: all 0.3s ease;
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 9999px;
    border: 2px solid ${t=>`rgba(${t.color}, 0.3)`};
    opacity: 0;
    transition: all 0.3s ease;
  }
`,MK=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 14L15 8M9.5 8.5H9.51M14.5 13.5H14.51M19 21V15.5C19 15.5 19 15 18.5 15C18 15 17 14.5 17 13.5C17 12.5 18 12 18.5 12C19 12 19 11.5 19 11.5V5C19 3.89543 18.1046 3 17 3H7C5.89543 3 5 3.89543 5 5V11.5C5 11.5 5 12 5.5 12C6 12 7 12.5 7 13.5C7 14.5 6 15 5.5 15C5 15 5 15.5 5 15.5V21C5 22.1046 5.89543 23 7 23H17C18.1046 23 19 22.1046 19 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),p_=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4.16667 10H15.8333M15.8333 10L10 4.16667M15.8333 10L10 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),g_=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}},NK=b.span`
  font-size: 1.25rem;
  font-weight: bold;
  color: ${t=>`rgb(${t.color})`};
`,LK=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
`,OK=b.p`
  opacity: 0.9;
  line-height: 1.6;
`;function PK(){const[t,e]=k.useState(1),[n,r]=k.useState(null),[i,a]=k.useState([]),[l,d]=k.useState(!0),[f,m]=k.useState(null),[g,v]=k.useState(!1),[w,x]=k.useState(null),[T,C]=k.useState(!1),{currentUser:A,userCredits:_,setUserCredits:L}=In(),I=Pt();k.useEffect(()=>{q()},[]);const q=async()=>{try{d(!0),m(null);const ae=await Q2();if(ae.length>0){const Ae=[...ae].sort((H,W)=>W.ticketsSold-H.ticketsSold);r(Ae[0]),a(ae.slice(0,4))}else r(null),a([])}catch(ae){console.error("Error fetching competitions:",ae),m("Failed to load competitions. Please try again later.")}finally{d(!1)}},j=()=>{if(n){const ae=Math.min(Math.floor((_||0)/n.ticketPrice),n.totalTickets-n.ticketsSold);t<ae&&e(t+1)}else e(ae=>ae+1)},M=()=>{t>1&&e(t-1)},$=()=>{I("/competitions")},Q=()=>{I("/how-it-works")},ie=ae=>{I(`/competition/${ae}`)},he=()=>{I("/competitions")},Ie=()=>{I("/login")},ne=()=>{I("/profile")},ke=async()=>{if(!A||!n||!n.id){A||Ie();return}const ae=t*n.ticketPrice;if(_<ae){alert("Not enough credits to purchase tickets.");return}if(n.ticketsSold+t>n.totalTickets){alert("Not enough tickets available.");return}C(!0);try{for(let Ae=0;Ae<t;Ae++)await ly({competitionId:n.id,userId:A.uid,ticketNumber:n.ticketsSold+Ae+1});r({...n,ticketsSold:n.ticketsSold+t}),L(_-ae),e(1),v(!0),setTimeout(()=>{v(!1)},3e3)}catch(Ae){console.error("Error purchasing tickets:",Ae),alert("Failed to purchase tickets. Please try again.")}finally{C(!1)}};return u.jsxs(YY,{children:[u.jsx(KY,{children:u.jsxs(QY,{children:[u.jsxs(XY,{children:[u.jsx(ZY,{children:"Rune"}),u.jsx(JY,{children:"Raffle"})]}),u.jsx(eK,{children:"Enter exclusive RuneScape item giveaways with verified fair draw technology. Buy tickets, win rare items, and join a community of passionate players."}),u.jsxs(a_,{children:[u.jsxs(kw,{onClick:$,children:["Browse Competitions ",u.jsx(p_,{})]}),u.jsx(m1,{onClick:Q,children:"How It Works"})]})]})}),u.jsx(f1,{children:l?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{})}):f?u.jsx(Oi,{withGlow:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:f}),u.jsx(t5,{onClick:q,children:"Try Again"})]})}):n?u.jsx(Oi,{withGlow:!0,withPattern:!0,children:u.jsx(tK,{onClick:()=>n.id&&ie(n.id),children:u.jsx(nK,{children:u.jsxs(rK,{children:[u.jsxs(iK,{children:[u.jsx(p1,{variant:"featured",children:"Featured"}),u.jsxs(p1,{variant:"primary",children:["Ends in ",g_(n.endsAt)]}),n.status==="ending"&&u.jsx(p1,{variant:"limited",children:"Limited Time"})]}),u.jsx(dp,{children:n.title}),u.jsx(l_,{children:n.description}),u.jsxs(u_,{children:[u.jsx(c_,{children:"Ticket Sales Progress"}),u.jsx(d_,{children:u.jsx(h_,{width:`${Math.min(Math.round(n.ticketsSold/n.totalTickets*100),100)}%`})}),u.jsxs(f_,{children:[u.jsxs("span",{children:[n.ticketsSold,"/",n.totalTickets," tickets sold"]}),u.jsxs("span",{children:[Math.min(Math.round(n.ticketsSold/n.totalTickets*100),100),"% filled"]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx(c_,{children:"Prize Pool:"}),u.jsx(sK,{children:n.prize})]}),u.jsxs(oK,{children:[u.jsx(aK,{children:u.jsx(MK,{})}),u.jsxs(lK,{children:[u.jsxs(cK,{children:["1 Ticket = ",n.ticketPrice," Credits"]}),u.jsx(uK,{children:"Buy more tickets to increase your chances"})]}),u.jsxs(dK,{children:[u.jsx(m_,{onClick:M,disabled:t<=1,children:"-"}),u.jsx(hK,{children:t}),u.jsx(m_,{onClick:j,disabled:t>=Math.min(Math.floor((_||0)/n.ticketPrice),n.totalTickets-n.ticketsSold),children:"+"})]})]}),u.jsx(kw,{onClick:A?ke:Ie,disabled:T||!!A&&(_||0)<t*n.ticketPrice,children:A?T?"Processing...":g?"Purchase Complete!":`Buy ${t} Ticket${t>1?"s":""} (${t*n.ticketPrice} Credits)`:"Sign In to Buy Tickets"}),u.jsx("div",{style:{marginTop:"1rem",display:"flex",gap:"0.5rem",justifyContent:"center"},children:u.jsx(m1,{onClick:ae=>{ae.stopPropagation(),n.id&&ie(n.id)},children:"View Details"})}),A&&_<n.ticketPrice&&u.jsx("div",{style:{marginTop:"0.75rem",textAlign:"center",fontSize:"0.875rem"},children:u.jsx("a",{href:"#",onClick:ae=>{ae.preventDefault(),ne()},style:{color:"hsl(var(--primary))",textDecoration:"none"},children:"Add more credits to your account"})})]})})})}):u.jsx(Oi,{withGlow:!0,withPattern:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"1rem"},children:[u.jsx(dp,{children:"No active competitions"}),u.jsx(l_,{children:"Check back soon for new competitions!"})]})})}),u.jsxs(f1,{children:[u.jsxs(fK,{children:[u.jsx(dp,{children:"Active Competitions"}),u.jsxs(mK,{onClick:he,children:["View All",u.jsx(p_,{})]})]}),l?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading competitions..."}):f?u.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"red"},children:f}):i.length===0?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"No other active competitions found."}):u.jsx(pK,{children:i.map(ae=>u.jsxs(gK,{onClick:()=>ae.id&&ie(ae.id),children:[u.jsx(yK,{children:ae.imageUrl?u.jsx(vK,{src:ae.imageUrl,alt:ae.title}):u.jsx(bK,{children:u.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",color:"rgb(0, 174, 239)",children:u.jsx("path",{d:"M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm1-8.41l2.54 2.53a1 1 0 0 1-1.42 1.42L11.3 12.7A1 1 0 0 1 11 12V8a1 1 0 0 1 2 0v3.59z"})})})}),u.jsxs(wK,{children:[u.jsxs(xK,{children:[u.jsx(TK,{difficulty:ae.difficulty,children:ae.difficulty.charAt(0).toUpperCase()+ae.difficulty.slice(1)}),u.jsxs(SK,{children:["Ends in ",g_(ae.endsAt)]})]}),u.jsx(CK,{children:ae.title}),u.jsx(EK,{children:ae.description}),u.jsxs(u_,{children:[u.jsx(d_,{children:u.jsx(h_,{width:`${Math.min(Math.round(ae.ticketsSold/ae.totalTickets*100),100)}%`})}),u.jsxs(f_,{children:[u.jsxs("span",{children:[ae.ticketsSold,"/",ae.totalTickets," tickets"]}),u.jsxs("span",{children:[Math.min(Math.round(ae.ticketsSold/ae.totalTickets*100),100),"%"]})]})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx(kK,{children:"Prize Pool:"}),u.jsx(AK,{children:ae.prize})]}),u.jsx(_K,{onClick:Ae=>{Ae.stopPropagation(),ae.id&&ie(ae.id)},children:"Enter Raffle"})]})]},ae.id))})]}),u.jsxs(f1,{children:[u.jsx(jK,{children:"How Our Raffles Work"}),u.jsx(DK,{children:[{step:1,title:"Buy Tickets",description:"Purchase tickets using credits. The more tickets you buy, the higher your chances of winning."},{step:2,title:"Wait for the Draw",description:"Once all tickets are sold, our provably fair system randomly selects a winning ticket."},{step:3,title:"Collect Your Prize",description:"If you win, we'll contact you to arrange delivery of your in-game prize within 24 hours."}].map((ae,Ae)=>u.jsxs(IK,{itemKey:Ae,children:[u.jsx(RK,{className:"step-icon",color:"0, 174, 239",children:u.jsx(NK,{color:"0, 174, 239",children:ae.step})}),u.jsx(LK,{children:ae.title}),u.jsx(OK,{children:ae.description})]},Ae))}),u.jsx(a_,{style:{justifyContent:"center",marginTop:"2rem"},children:u.jsx(m1,{onClick:Q,children:"Learn More About Our Fair Draw System"})})]})]})}const UK=b.button`
  height: 2.5rem;
  width: 2.5rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.3);
  }
`,VK=b.span`
  font-size: 1rem;
  font-weight: 600;
`;function BK(){const{currentUser:t}=In(),e=Pt(),n=()=>t!=null&&t.email?t.email.charAt(0).toUpperCase():"U",r=()=>{e("/profile")};return u.jsx(UK,{onClick:r,title:"View Profile",children:u.jsx(VK,{children:n()})})}const zK=b.button`
  position: relative;
  background: none;
  border: none;
  color: white;
  cursor: pointer;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.375rem;
  transition: background-color 0.2s;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,$K=b.div`
  position: absolute;
  top: 0;
  right: 0;
  background-color: hsl(var(--primary));
  color: white;
  font-size: 0.75rem;
  font-weight: bold;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
`,FK=b.div`
  position: absolute;
  top: 100%;
  right: 0;
  width: 320px;
  max-width: 100vw;
  max-height: 400px;
  overflow-y: auto;
  background-color: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  margin-top: 0.5rem;
  z-index: 50;
`,qK=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
`,HK=b.h3`
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
`,GK=b.button`
  background: none;
  border: none;
  color: hsl(var(--primary));
  font-size: 0.875rem;
  cursor: pointer;
  &:hover {
    text-decoration: underline;
  }
`,WK=b.div`
  max-height: 320px;
  overflow-y: auto;
`,YK=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,KK=b.div`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  background-color: ${t=>t.isRead?"transparent":"rgba(59, 130, 246, 0.05)"};
  cursor: pointer;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.03);
  }
`,QK=b.div`
  font-weight: 600;
  margin-bottom: 0.25rem;
`,XK=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 0.5rem;
`,ZK=b.div`
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
`,JK=b.div`
  padding: 2rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,eQ=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),tQ=t=>{if(!t)return"";try{const e=t.toDate(),r=new Date().getTime()-e.getTime(),i=Math.round(r/6e4),a=Math.round(r/36e5),l=Math.round(r/864e5);return i<1?"Just now":i<60?`${i}m ago`:a<24?`${a}h ago`:l<7?`${l}d ago`:e.toLocaleDateString()}catch(e){return console.error("Error formatting notification time:",e),""}};function nQ(){const{currentUser:t,isAdmin:e}=In(),[n,r]=k.useState([]),[i,a]=k.useState(0),[l,d]=k.useState(!1),[f,m]=k.useState(!1),g=k.useRef(null),v=Pt();k.useEffect(()=>{(async()=>{if(t){m(!0);try{console.log("Loading notifications for user:",t.uid);const _=await ww(t.uid);console.log(`Found ${_.length} notifications for user.uid: ${t.uid}`);let L=[..._];if(t.email)try{console.log("Also checking for notifications with email:",t.email);const I=await ww(t.email);console.log(`Found ${I.length} notifications for user.email: ${t.email}`);const q=new Set(L.map(M=>M.id)),j=I.filter(M=>M.id&&!q.has(M.id));console.log(`Adding ${j.length} unique notifications from email lookup`),L=[...L,...j]}catch(I){console.error("Error loading notifications by email:",I)}L.sort((I,q)=>!I.createdAt||!q.createdAt?0:q.createdAt.seconds-I.createdAt.seconds),console.log(`Total combined notifications: ${L.length}`),r(L),a(L.filter(I=>!I.read).length)}catch(_){console.error("Error loading notifications:",_)}finally{m(!1)}}})();const A=_=>{g.current&&!g.current.contains(_.target)&&d(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[t]);const w=async C=>{if(!C.read&&C.id)try{await a7(C.id),r(A=>A.map(_=>_.id===C.id?{..._,read:!0}:_)),a(A=>Math.max(0,A-1))}catch(A){console.error("Error marking notification as read:",A)}d(!1),setTimeout(()=>{if(console.log("Navigating based on notification type:",{type:C.type,competitionId:C.competitionId,supportTicketId:C.supportTicketId}),C.type==="ticket_update"&&C.supportTicketId)if(console.log(`Navigating to support ticket: ${C.supportTicketId}`),e){const A=C.supportTicketId;v(`/admin?tab=support&ticketId=${A}`)}else v(`/support?ticketId=${C.supportTicketId}`);else C.type==="competition_winner"&&C.competitionId?(console.log(`Navigating to winner competition: ${C.competitionId}`),v(`/competition/${C.competitionId}`)):C.competitionId?(console.log(`Navigating to competition: ${C.competitionId}`),v(`/competition/${C.competitionId}`)):C.type==="ticket_purchase"&&C.ticketId?(console.log(`Navigating to ticket details: ${C.ticketId}`),v(`/profile/tickets?ticketId=${C.ticketId}`)):C.type==="credit_update"?(console.log("Navigating to profile/credits"),v("/profile/credits")):C.type==="system"?console.log("System notification - no specific navigation"):console.log("No specific navigation path for this notification type")},100)},x=async()=>{if(t)try{if(await xw(t.uid),t.email)try{await xw(t.email)}catch(C){console.error("Error marking email notifications as read:",C)}r(C=>C.map(A=>({...A,read:!0}))),a(0)}catch(C){console.error("Error marking all notifications as read:",C)}},T=()=>{d(C=>!C)};return t?u.jsxs("div",{style:{position:"relative"},children:[u.jsxs(zK,{onClick:T,children:[u.jsx(eQ,{}),i>0&&u.jsx($K,{children:i>9?"9+":i})]}),l&&u.jsxs(FK,{ref:g,children:[u.jsxs(qK,{children:[u.jsx(HK,{children:"Notifications"}),i>0&&u.jsx(GK,{onClick:x,children:"Mark all as read"})]}),u.jsx(WK,{children:f?u.jsx(YK,{children:"Loading notifications..."}):n.length>0?n.map(C=>u.jsxs(KK,{isRead:C.read,onClick:()=>w(C),children:[u.jsx(QK,{children:C.title}),u.jsx(XK,{children:C.message}),u.jsx(ZK,{children:tQ(C.createdAt)})]},C.id)):u.jsx(JK,{children:"No notifications"})})]})]}):null}const rQ=b.header`
  position: sticky;
  top: 0;
  z-index: 50;
  width: 100%;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  background-color: hsl(222, 47%, 11%);
`,iQ=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;
`,sQ=b.div`
  display: flex;
  height: 4rem;
  align-items: center;
  justify-content: space-between;
`,oQ=b.div`
  display: flex;
  align-items: center;
`,aQ=b(vh)`
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 1.5rem;
  text-decoration: none;
  color: white;
  position: relative;
  
  &:hover {
    color: hsl(var(--primary));
  }
  
  span {
    letter-spacing: 0.5px;
  }
`,lQ=b.span`
  color: hsl(var(--primary));
  font-weight: 800;
`,cQ=b.nav`
  display: flex;
  margin-left: 2.5rem;
  gap: 2rem;
`,Uo=b(vh)`
  font-size: 0.9rem;
  font-weight: 500;
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  transition: all 0.2s;
  padding: 0.5rem 0.75rem;
  cursor: pointer;
  text-decoration: none;
  position: relative;
  
  &:hover {
    color: white;
  }
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: ${t=>t.active?"100%":"0"};
    height: 2px;
    background-color: hsl(var(--primary));
    transition: width 0.2s ease;
  }
  
  &:hover::after {
    width: 100%;
  }
`,uQ=b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`,S7=b.button`
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
`,km=b(S7)`
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: none;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,Am=b(S7)`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  
  &:hover {
    background-color: hsl(var(--primary), 0.9);
    transform: translateY(-1px);
  }
`,dQ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.375rem;
  margin-right: 0.5rem;
`,hQ=b.div`
  width: 1.25rem;
  height: 1.25rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: hsl(var(--primary));
`,fQ=b.span`
  font-weight: 600;
  font-size: 0.875rem;
  color: white;
`,mQ=b.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  overflow: hidden;
  transition: max-height 0.3s ease;
  max-height: ${({isOpen:t})=>t?"300px":"0"};
  background-color: hsl(222, 47%, 11%);
`,pQ=b.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0.5rem 0;
`,Tl=b(Uo)`
  padding: 0.75rem 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  
  &:last-child {
    border-bottom: none;
  }
`,gQ=b.button`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 24px;
  height: 20px;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  margin-right: 1rem;

  span {
    width: 100%;
    height: 2px;
    background-color: white;
    transition: all 0.3s ease;
    transform-origin: left;
  }
  
  &.open {
    span:first-of-type {
      transform: rotate(45deg);
    }
    
    span:nth-of-type(2) {
      opacity: 0;
    }
    
    span:last-of-type {
      transform: rotate(-45deg);
    }
  }
`,y_=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 0.75rem 1rem 1rem;
`,yQ=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});function vQ(){const[t,e]=k.useState(window.innerWidth<768),[n,r]=k.useState(!1),{currentUser:i,userCredits:a,isAdmin:l}=In(),d=Gn(),f=Pt();k.useEffect(()=>{const w=()=>{const x=window.innerWidth<768;e(x),x||r(!1)};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const m=d.pathname,g=async()=>{try{await tY(),f("/"),r(!1)}catch(w){console.error("Error logging out:",w)}},v=()=>{r(!n)};return u.jsx(rQ,{children:u.jsxs(iQ,{children:[u.jsxs(sQ,{children:[u.jsxs(oQ,{children:[t&&u.jsxs(gQ,{onClick:v,className:n?"open":"","aria-label":"Toggle menu",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]}),u.jsx(aQ,{to:"/",children:u.jsxs("span",{children:["Rune",u.jsx(lQ,{children:"Raffle"})]})}),!t&&u.jsxs(cQ,{children:[u.jsx(Uo,{to:"/",active:m==="/"?"true":void 0,children:"Home"}),u.jsx(Uo,{to:"/competitions",active:m==="/competitions"||m.startsWith("/competition/")?"true":void 0,children:"Competitions"}),u.jsx(Uo,{to:"/winners",active:m==="/winners"?"true":void 0,children:"Winners"}),u.jsx(Uo,{to:"/how-it-works",active:m==="/how-it-works"?"true":void 0,children:"How It Works"}),u.jsx(Uo,{to:"/support",active:m==="/support"?"true":void 0,children:"Support"}),l&&u.jsx(Uo,{to:"/admin",active:m==="/admin"?"true":void 0,children:"Admin"})]})]}),u.jsx(uQ,{children:i?u.jsxs(u.Fragment,{children:[u.jsxs(dQ,{children:[u.jsx(hQ,{children:u.jsx(yQ,{})}),u.jsx(fQ,{children:a})]}),u.jsx(nQ,{}),!t&&u.jsxs(u.Fragment,{children:[u.jsx(km,{onClick:()=>f("/profile"),children:"Profile"}),u.jsx(Am,{onClick:g,children:"Logout"})]}),t&&u.jsx(BK,{})]}):!t&&u.jsxs(u.Fragment,{children:[u.jsx(km,{onClick:()=>f("/login"),children:"Login"}),u.jsx(Am,{onClick:()=>f("/register"),children:"Sign Up"})]})})]}),t&&u.jsxs(mQ,{isOpen:n,children:[u.jsxs(pQ,{children:[u.jsx(Tl,{to:"/",active:m==="/"?"true":void 0,children:"Home"}),u.jsx(Tl,{to:"/competitions",active:m==="/competitions"||m.startsWith("/competition/")?"true":void 0,children:"Competitions"}),u.jsx(Tl,{to:"/winners",active:m==="/winners"?"true":void 0,children:"Winners"}),u.jsx(Tl,{to:"/how-it-works",active:m==="/how-it-works"?"true":void 0,children:"How It Works"}),u.jsx(Tl,{to:"/support",active:m==="/support"?"true":void 0,children:"Support"}),l&&u.jsx(Tl,{to:"/admin",active:m==="/admin"?"true":void 0,children:"Admin"})]}),i?u.jsxs(y_,{children:[u.jsx(km,{onClick:()=>{f("/profile"),r(!1)},children:"Profile"}),u.jsx(Am,{onClick:g,children:"Logout"})]}):u.jsxs(y_,{children:[u.jsx(km,{onClick:()=>{f("/login"),r(!1)},children:"Login"}),u.jsx(Am,{onClick:()=>{f("/register"),r(!1)},children:"Sign Up"})]})]})]})})}const bQ=b.footer`
  width: 100%;
  background-color: hsl(222, 47%, 8%);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: 3rem 0 1.5rem;
`,wQ=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
`,xQ=b.div`
  margin-bottom: 2rem;
`,TQ=b.div`
  display: flex;
  align-items: center;
  font-weight: bold;
  font-size: 2rem;
  color: white;

  span {
    letter-spacing: 0.5px;
  }
`,SQ=b.span`
  color: hsl(var(--primary));
  font-weight: 800;
`,CQ=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2.5rem;
`,_m=b.a`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  background-color: hsl(222, 47%, 11%);
  color: rgba(255, 255, 255, 0.8);
  transition: all 0.2s ease;

  &:hover {
    background-color: hsl(var(--primary));
    color: white;
    transform: translateY(-3px);
  }
`,EQ=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2.5rem;
  
  @media (max-width: 640px) {
    flex-direction: column;
    align-items: center;
    gap: 1rem;
  }
`,Qu=b.a`
  color: rgba(255, 255, 255, 0.7);
  font-size: 1rem;
  font-weight: 500;
  transition: color 0.2s ease;
  text-decoration: none;
  
  &:hover {
    color: white;
  }
`,kQ=b.div`
  text-align: center;
  margin-bottom: 2rem;
  max-width: 900px;
`,AQ=b.p`
  color: rgba(255, 255, 255, 0.6);
  font-size: 0.875rem;
  line-height: 1.6;
  margin-bottom: 1.5rem;
`,_Q=b.p`
  color: rgba(255, 255, 255, 0.4);
  font-size: 0.75rem;
  line-height: 1.6;
`,jQ=b.div`
  color: rgba(255, 255, 255, 0.5);
  font-size: 0.875rem;
  text-align: center;
`,DQ=b.div`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  background-color: hsl(222, 47%, 11%);
  padding: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 640px) {
    flex-direction: column;
  }
`,IQ=b.p`
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.875rem;
  margin: 0;
`;b.button`
  background-color: transparent;
  border: none;
  color: white;
  padding: 0.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`;const RQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M23.643 4.937c-.835.37-1.732.62-2.675.733.962-.576 1.7-1.49 2.048-2.578-.9.534-1.897.922-2.958 1.13-.85-.904-2.06-1.47-3.4-1.47-2.572 0-4.658 2.086-4.658 4.66 0 .364.042.718.12 1.06-3.873-.195-7.304-2.05-9.602-4.868-.4.69-.63 1.49-.63 2.342 0 1.616.823 3.043 2.072 3.878-.764-.025-1.482-.234-2.11-.583v.06c0 2.257 1.605 4.14 3.737 4.568-.392.106-.803.162-1.227.162-.3 0-.593-.028-.877-.082.593 1.85 2.313 3.198 4.352 3.234-1.595 1.25-3.604 1.995-5.786 1.995-.376 0-.747-.022-1.112-.065 2.062 1.323 4.51 2.093 7.14 2.093 8.57 0 13.255-7.098 13.255-13.254 0-.2-.005-.402-.014-.602.91-.658 1.7-1.477 2.323-2.41z"})}),MQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"})}),NQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})}),LQ=()=>u.jsx("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})});function OQ(){const t=new Date().getFullYear();return u.jsxs(u.Fragment,{children:[u.jsx(bQ,{children:u.jsxs(wQ,{children:[u.jsx(xQ,{children:u.jsxs(TQ,{children:["Rune",u.jsx(SQ,{children:"Raffle"})]})}),u.jsxs(CQ,{children:[u.jsx(_m,{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter",children:u.jsx(RQ,{})}),u.jsx(_m,{href:"https://discord.com",target:"_blank",rel:"noopener noreferrer","aria-label":"Discord",children:u.jsx(MQ,{})}),u.jsx(_m,{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer","aria-label":"YouTube",children:u.jsx(NQ,{})}),u.jsx(_m,{href:"https://tiktok.com",target:"_blank",rel:"noopener noreferrer","aria-label":"TikTok",children:u.jsx(LQ,{})})]}),u.jsxs(EQ,{children:[u.jsx(Qu,{href:"/about",children:"About"}),u.jsx(Qu,{href:"/fairness",children:"Fairness"}),u.jsx(Qu,{href:"/support",children:"Support"}),u.jsx(Qu,{href:"/terms",children:"Terms of Service"}),u.jsx(Qu,{href:"/privacy",children:"Privacy Policy"})]}),u.jsxs(kQ,{children:[u.jsx(AQ,{children:"RuneRaffle.com is not affiliated, endorsed by, or in any way associated with RuneScape, Jagex Ltd or any of its subsidiaries or its affiliates."}),u.jsx(_Q,{children:"RuneRaffle.com is a fan-made raffle website created for the RuneScape community."})]}),u.jsxs(jQ,{children:["",t,"-",t+3," RuneRaffle. All Rights Reserved."]})]})}),u.jsx(DQ,{children:u.jsx(IQ,{children:"This website uses cookies to improve your experience. By using this site, you agree to our use of cookies."})})]})}const PQ=b.div`
  display: grid;
  gap: 1.5rem;
  
  @media (min-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }
`,v_=b.div`
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
`,b_=b.div`
  padding: 1rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
  display: flex;
  align-items: center;
  justify-content: space-between;
`,w_=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,UQ=b.a`
  font-size: 0.875rem;
  color: hsl(var(--primary));
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`,x_=b.div`
  padding: 1.5rem;
`,VQ=b.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
`,jm=b.div`
  text-align: center;
  padding: 1rem;
`,Dm=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: hsl(var(--primary));
`,Im=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,BQ=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,zQ=b.div`
  padding: 1rem;
  border-radius: 0.5rem;
  border: 1px solid hsl(var(--border));
  
  &:hover {
    background-color: hsla(var(--muted), 0.05);
  }
`,$Q=b.h4`
  font-size: 1rem;
  font-weight: 500;
  margin: 0 0 0.25rem;
`,FQ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,qQ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.5rem;
`,HQ=b.div`
  font-size: 2rem;
  font-weight: bold;
  color: hsl(var(--primary));
`,GQ=b.div`
  text-align: center;
  padding: 2rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,WQ=b.div`
  text-align: center;
  padding: 1.5rem 1rem;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,YQ=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: opacity 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
`;function KQ(){const{currentUser:t,userCredits:e,setUserCredits:n}=In(),[r,i]=k.useState([]),[a,l]=k.useState(!1),[d,f]=k.useState({totalCompetitions:0,winCount:0,ticketsBought:0,spentCredits:0}),m=Pt();k.useEffect(()=>{t&&g()},[t]);const g=async()=>{if(t){l(!0);try{const x=await cy(t.uid),T=x.filter(q=>q.isWinner).length,C=x.length,A=await Promise.all(x.map(async q=>{const j=await so(q.competitionId);return{...q,competition:j}})),_=A.reduce((q,j)=>{var M;return q+(((M=j.competition)==null?void 0:M.ticketPrice)||0)},0),I=A.sort((q,j)=>{var Q,ie;const M=(Q=q.purchasedAt)!=null&&Q.toDate?q.purchasedAt.toDate():new Date(0);return((ie=j.purchasedAt)!=null&&ie.toDate?j.purchasedAt.toDate():new Date(0)).getTime()-M.getTime()}).slice(0,3);i(I),f({totalCompetitions:x.length,winCount:T,ticketsBought:C,spentCredits:_})}catch(x){console.error("Error loading user data:",x)}finally{l(!1)}}},v=x=>{if(!x||!x.toDate)return"Unknown date";const T=x.toDate();return new Date(T).toLocaleDateString()},w=()=>{if(!(t!=null&&t.email))return;const x=e+100;oa(async()=>{const{updateUser:T}=await Promise.resolve().then(()=>MY);return{updateUser:T}},void 0).then(({updateUser:T})=>{const C=t.email||"";T(C,{credits:x}).then(()=>{n(x)}).catch(A=>{console.error("Error adding credits:",A)})})};return a?u.jsx(GQ,{children:"Loading your dashboard..."}):u.jsxs(PQ,{children:[u.jsxs(v_,{children:[u.jsxs(b_,{children:[u.jsx(w_,{children:"Recent Competitions"}),u.jsx(UQ,{href:"#",onClick:x=>{x.preventDefault(),m("/competitions")},children:"View all"})]}),u.jsx(x_,{children:r.length>0?u.jsx(BQ,{children:r.map(x=>{var T;return u.jsxs(zQ,{children:[u.jsx($Q,{children:((T=x.competition)==null?void 0:T.title)||"Unknown Competition"}),u.jsxs("div",{style:{fontSize:"0.875rem",color:"hsl(var(--muted-foreground))"},children:["Ticket #",x.ticketNumber]}),u.jsxs(FQ,{children:[u.jsx("div",{children:v(x.purchasedAt)}),u.jsx("div",{style:{color:x.isWinner?"rgb(22, 163, 74)":"inherit",fontWeight:x.isWinner?500:400},children:x.isWinner?" Winner":"Entered"})]})]},x.id)})}):u.jsxs(WQ,{children:["You haven't entered any competitions yet.",u.jsx("div",{style:{marginTop:"1rem"},children:u.jsx("button",{onClick:()=>m("/competitions"),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",fontSize:"0.875rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer"},children:"Browse Competitions"})})]})})]}),u.jsxs(v_,{children:[u.jsx(b_,{children:u.jsx(w_,{children:"Available Credits"})}),u.jsxs(x_,{children:[u.jsxs(qQ,{children:[u.jsx(HQ,{children:e}),u.jsx(YQ,{onClick:w,children:"Add Credits"})]}),u.jsx("div",{style:{fontSize:"0.875rem",color:"hsl(var(--muted-foreground))",marginBottom:"1.5rem"},children:"Credits are used to enter competitions. Each competition has a different credit cost."}),u.jsxs(VQ,{children:[u.jsxs(jm,{children:[u.jsx(Dm,{children:d.totalCompetitions}),u.jsx(Im,{children:"Total Competitions"})]}),u.jsxs(jm,{children:[u.jsx(Dm,{children:d.winCount}),u.jsx(Im,{children:"Competitions Won"})]}),u.jsxs(jm,{children:[u.jsx(Dm,{children:d.ticketsBought}),u.jsx(Im,{children:"Tickets Purchased"})]}),u.jsxs(jm,{children:[u.jsx(Dm,{children:d.spentCredits}),u.jsx(Im,{children:"Credits Spent"})]})]})]})]})]})}const n5=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,QQ=mi`
  from { opacity: 0; transform: translateX(-10px); }
  to { opacity: 1; transform: translateX(0); }
`,g1=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 1rem 1.5rem;
  color: hsl(var(--foreground));
`,XQ=b.div`
  margin-bottom: 2rem;
  animation: ${n5} 0.5s ease-out forwards;
  
  h1 {
    font-size: 2.5rem;
    font-weight: bold;
    
    @media (max-width: 768px) {
      font-size: 2rem;
    }
  }
`,ZQ=b.div`
  display: flex;
  flex-direction: column;
  gap: 2rem;
  
  @media (min-width: 1024px) {
    flex-direction: row;
  }
`,JQ=b.div`
  width: 100%;
  margin-bottom: 1.5rem;
  animation: ${QQ} 0.5s ease-out forwards;
  
  @media (min-width: 1024px) {
    width: 16rem;
    flex-shrink: 0;
  }
`,eX=b.nav`
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  overflow: hidden;
  position: sticky;
  top: 1.5rem;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
`,Rm=b.a`
  display: flex;
  align-items: center;
  padding: 0.875rem 1.25rem;
  border-left: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  background-color: ${t=>t.active?"hsla(var(--primary), 0.05)":"transparent"};
  font-weight: ${t=>t.active?"600":"400"};
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background-color: ${t=>!t.active&&"hsla(var(--muted), 0.05)"};
  }
`,tX=b.div`
  flex: 1;
  animation: ${n5} 0.5s ease-out forwards;
  animation-delay: 0.1s;
  opacity: 0;
`,T_=b.section`
  margin-bottom: 2.5rem;
`,y1=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
  color: hsl(var(--foreground));
  display: flex;
  align-items: center;
  
  &::after {
    content: '';
    flex-grow: 1;
    height: 1px;
    background-color: hsl(var(--border));
    margin-left: 1rem;
  }
`,S_=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem 0;
  font-size: 1.125rem;
  color: hsl(var(--muted-foreground));
  
  p {
    margin-top: 1.5rem;
  }
`,nX=b.div`
  text-align: center;
  padding: 3rem 1rem;
  border: 1px dashed hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--muted-foreground));
  background-color: hsla(var(--muted), 0.03);
`;b.div`
  margin-bottom: 2rem;
`;b.div`
  padding: 0;
`;b.div`
  margin-bottom: 1.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  padding: 1.5rem;
  border-radius: 0.75rem;
  color: white;
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
`;b.div`
  margin-bottom: 2rem;
`;b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
`;b.div`
  height: 1px;
  background-color: hsl(var(--border));
  margin-bottom: 2rem;
  margin-top: 2rem;
`;const rX=b.div`
  margin-top: 2rem;
  animation: ${n5} 0.5s ease-out forwards;
  animation-delay: 0.2s;
  opacity: 0;
`,iX=b.button`
  padding: 0.75rem 1rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
  }
`,sX=b.table`
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 0.5rem;
  overflow: hidden;
  margin-bottom: 1.5rem;
`,Sl=b.th`
  text-align: left;
  padding: 1rem;
  background-color: hsl(var(--card));
  color: white;
  font-weight: 600;
  font-size: 0.875rem;
  
  &:first-of-type {
    border-top-left-radius: 0.5rem;
  }
  
  &:last-of-type {
    border-top-right-radius: 0.5rem;
  }
`,oX=b.tr`
  background-color: ${t=>t.isWinner?"rgba(22, 163, 74, 0.05)":"transparent"};
  
  &:hover {
    background-color: hsla(var(--muted), 0.05);
  }
`,Cl=b.td`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  font-size: 0.875rem;
`,aX=b.a`
  color: hsl(var(--primary));
  text-decoration: none;
  cursor: pointer;
  
  &:hover {
    text-decoration: underline;
  }
`,lX=b.span`
  display: inline-block;
  padding: 0.25rem 0.625rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${t=>t.status==="active"?"rgba(59, 130, 246, 0.2)":t.status==="ending"?"rgba(245, 158, 11, 0.2)":t.status==="winner"?"rgba(22, 163, 74, 0.2)":"rgba(255, 255, 255, 0.1)"};
  color: ${t=>t.status==="active"?"rgb(59, 130, 246)":t.status==="ending"?"rgb(245, 158, 11)":t.status==="winner"?"rgb(22, 163, 74)":"white"};
`,C_=b.button`
  padding: 0.25rem 0.5rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`;function cX(){const{currentUser:t,isLoading:e,isAdmin:n}=In(),r=Pt(),[i,a]=k.useState("profile"),[l,d]=k.useState([]),[f,m]=k.useState(!1);k.useEffect(()=>{t&&g()},[t]),k.useEffect(()=>{!e&&!t&&r("/login")},[e,t,r]);const g=async()=>{if(t){m(!0);try{const v=await cy(t.uid),w=await Promise.all(v.map(async x=>{const T=await so(x.competitionId);return{...x,competition:T}}));d(w)}catch(v){console.error("Error loading tickets:",v)}finally{m(!1)}}};return e?u.jsx(g1,{children:u.jsxs(S_,{children:[u.jsx(ia,{size:80}),u.jsx("p",{children:"Loading profile..."})]})}):t?u.jsxs(g1,{children:[u.jsx(XQ,{children:u.jsx("h1",{children:"My Account"})}),u.jsxs(ZQ,{children:[u.jsx(JQ,{children:u.jsxs(eX,{children:[u.jsx(Rm,{active:i==="profile",onClick:()=>a("profile"),children:"Profile"}),u.jsx(Rm,{active:i==="orders",onClick:()=>a("orders"),children:"My Tickets"}),u.jsx(Rm,{onClick:()=>r("/support"),children:"Support"}),u.jsx(Rm,{active:i==="referrals",onClick:()=>a("referrals"),children:"Referrals"})]})}),u.jsxs(tX,{children:[i==="profile"&&u.jsx(Oi,{withGlow:!0,children:u.jsx(KQ,{})}),i==="orders"&&u.jsxs(T_,{children:[u.jsx(y1,{children:"Ticket History"}),f?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"2rem 0"},children:u.jsx(ia,{size:50})}):l.length>0?u.jsxs(sX,{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx(Sl,{children:"Ticket #"}),u.jsx(Sl,{children:"Competition"}),u.jsx(Sl,{children:"Purchase Date"}),u.jsx(Sl,{children:"Price"}),u.jsx(Sl,{children:"Status"}),u.jsx(Sl,{children:"Actions"})]})}),u.jsx("tbody",{children:l.map(v=>{var w,x,T,C,A;return u.jsxs(oX,{isWinner:v.isWinner,children:[u.jsx(Cl,{children:v.ticketNumber}),u.jsx(Cl,{children:u.jsx(aX,{onClick:()=>r(`/competition/${v.competitionId}`),children:((w=v.competition)==null?void 0:w.title)||"Unknown Competition"})}),u.jsx(Cl,{children:uX(v.purchasedAt)}),u.jsxs(Cl,{children:[((x=v.competition)==null?void 0:x.ticketPrice)||0," credits"]}),u.jsx(Cl,{children:u.jsx(lX,{status:v.isWinner?"winner":((T=v.competition)==null?void 0:T.status)==="complete"?"ended":"active",children:v.isWinner?" Winner":((C=v.competition)==null?void 0:C.status)==="complete"?"Ended":((A=v.competition)==null?void 0:A.status)==="ending"?"Ending Soon":"Active"})}),u.jsxs(Cl,{children:[u.jsx(C_,{onClick:()=>r(`/competition/${v.competitionId}`),children:"View"}),v.isWinner&&u.jsx(C_,{style:{marginLeft:"0.5rem",backgroundColor:"rgba(22, 163, 74, 0.2)",color:"rgb(22, 163, 74)"},onClick:()=>r(`/verification/${v.competitionId}`),children:"Verify"})]})]},v.id)})})]}):u.jsxs(nX,{children:[u.jsx("p",{children:"You haven't entered any competitions yet."}),u.jsx("button",{onClick:()=>r("/competitions"),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:500,backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer",marginTop:"1rem"},children:"Browse Competitions"})]})]}),i==="referrals"&&u.jsxs(T_,{children:[u.jsx(y1,{children:"My Referrals"}),u.jsxs(Oi,{withGlow:!0,withPattern:!0,children:[u.jsx("p",{style:{marginBottom:"1.5rem"},children:"Earn rewards by referring friends to RuneRaffle. Track your referrals and rewards here."}),u.jsx("button",{onClick:()=>r("/referrals"),style:{padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:500,backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:v=>{v.currentTarget.style.transform="translateY(-2px)",v.currentTarget.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.2)"},onMouseOut:v=>{v.currentTarget.style.transform="translateY(0)",v.currentTarget.style.boxShadow="none"},children:"Go to Referral Program"})]})]})]})]}),n&&u.jsx(rX,{children:u.jsxs(Oi,{withGlow:!0,children:[u.jsx(y1,{children:"Admin Tools"}),u.jsx(iX,{onClick:()=>r("/admin"),children:"Go to Admin Dashboard"})]})})]}):u.jsx(g1,{children:u.jsxs(S_,{children:[u.jsx(ia,{size:80}),u.jsx("p",{children:"Redirecting to login..."})]})})}const uX=t=>{if(!t||!t.toDate)return"Unknown date";const e=t.toDate();return new Date(e).toLocaleDateString()},C7=50,E7=25,dX=async(t,e)=>{try{const r=await J.functions().httpsCallable("generateReferralCode")(),{referralCode:i,isNew:a}=r.data;return console.log(`[REFERRAL] ${a?"Generated":"Retrieved"} referral code: ${i}`),i}catch(n){return console.error("[REFERRAL] Error getting/creating referral code:",n),console.log("[REFERRAL] Falling back to local referral code generation"),hX(t)}},hX=async(t,e)=>{const n=st.collection("referrals"),r=await n.where("userId","==",t).limit(1).get();if(!r.empty)return r.docs[0].data().code;const i=fX(t),a={code:i,userId:t,referredUsers:[],createdAt:J.firestore.FieldValue.serverTimestamp(),updatedAt:J.firestore.FieldValue.serverTimestamp()};return await n.add(a),i},fX=t=>{const e=t.substring(0,6),n=Math.random().toString(36).substring(2,6).toUpperCase();return`${e}-${n}`},mX=async t=>{const n=await st.collection("referrals").where("code","==",t).limit(1).get();if(n.empty)return null;const r=n.docs[0];return{id:r.id,...r.data()}},pX=async(t,e,n)=>{try{const i=await J.functions().httpsCallable("processReferral")({referralCode:t});return console.log("[REFERRAL] Processed referral through cloud function"),i.data.success}catch(r){return console.error("[REFERRAL] Error processing referral through cloud function:",r),console.log("[REFERRAL] Falling back to local referral processing"),gX(t,e,n)}},gX=async(t,e,n)=>{try{const r=await mX(t);if(!r||!r.id)return console.error(`Invalid referral code: ${t}`),!1;if(r.userId===e)return console.error("User cannot refer themselves"),!1;if(r.referredUsers.includes(e))return console.error("User already referred"),!1;await st.collection("referrals").doc(r.id).update({referredUsers:J.firestore.FieldValue.arrayUnion(e),updatedAt:J.firestore.FieldValue.serverTimestamp()});const a=st.collection("referralRewards"),l={referrerId:r.userId,referredUserId:e,creditAmount:C7,status:"pending",createdAt:J.firestore.FieldValue.serverTimestamp()};await a.add(l);const d=await st.collection("users").doc(r.userId).get();return d.exists&&d.data()&&await uy(n,E7),!0}catch(r){return console.error("Error processing referral:",r),!1}},yX=async t=>{try{return(await J.functions().httpsCallable("getUserReferrals")()).data}catch(e){return console.error("[REFERRAL] Error getting user referrals through cloud function:",e),console.log("[REFERRAL] Falling back to local referral retrieval"),vX(t)}},vX=async t=>{const n=await st.collection("referrals").where("userId","==",t).get();return n.empty?[]:n.docs.map(r=>({id:r.id,...r.data()}))},bX=async t=>{const e=await yX(t);if(e.length===0)return{totalReferrals:0,pendingRewards:0,completedRewards:0,totalEarned:0};const n=e.reduce((m,g)=>m+g.referredUsers.length,0),i=await st.collection("referralRewards").where("referrerId","==",t).get();if(i.empty)return{totalReferrals:n,pendingRewards:0,completedRewards:0,totalEarned:0};const a=i.docs.map(m=>m.data()),l=a.filter(m=>m.status==="pending").length,d=a.filter(m=>m.status==="completed").length,f=a.filter(m=>m.status==="completed").reduce((m,g)=>m+g.creditAmount,0);return{totalReferrals:n,pendingRewards:l,completedRewards:d,totalEarned:f}},wX=b.div`
  display: flex;
  flex-direction: ${t=>t.vertical?"column":"row"};
  gap: 0.75rem;
  margin: 1rem 0;
`,Hh=b.button`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  background-color: ${t=>t.bgColor};
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }
  
  svg {
    width: 1.25rem;
    height: 1.25rem;
  }
`,xX=({url:t,title:e})=>{const n=()=>{const r=`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Hh,{onClick:n,bgColor:"#1DA1F2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M22 5.8C21.2483 6.1263 20.4534 6.34419 19.64 6.45C20.4982 5.92831 21.1413 5.12621 21.45 4.19C20.6438 4.66 19.7593 4.99469 18.84 5.18C18.2245 4.52484 17.405 4.0759 16.5098 3.90723C15.6147 3.73857 14.6945 3.85958 13.8938 4.2531C13.093 4.64661 12.4569 5.29455 12.0852 6.09405C11.7135 6.89354 11.6273 7.79301 11.84 8.65C10.2094 8.57305 8.61444 8.16651 7.15865 7.45839C5.70287 6.75027 4.41885 5.75739 3.39 4.53C3.02914 5.15798 2.83952 5.86882 2.84 6.59C2.83872 7.26149 3.00422 7.92163 3.32176 8.51342C3.63929 9.10521 4.09752 9.60936 4.66 9.98C4.00798 9.96031 3.36989 9.7822 2.8 9.46V9.51C2.8036 10.4383 3.12129 11.3372 3.7199 12.0613C4.31851 12.7854 5.15615 13.2893 6.07 13.49C5.46409 13.6544 4.8285 13.6778 4.21 13.56C4.46168 14.3612 4.96624 15.0598 5.6562 15.5703C6.34617 16.0808 7.18675 16.3776 8.06 16.42C6.6172 17.5491 4.83588 18.1747 3 18.29C3.69472 18.8003 4.4681 19.193 5.28491 19.4527C6.10172 19.7124 6.9483 19.8355 7.8 19.8173C11.9486 19.7417 15.558 16.8846 17.001 13.01C17.3389 12.2254 17.5857 11.4043 17.736 10.561C18.5161 9.96318 19.1863 9.23099 19.72 8.39C18.9668 8.73161 18.1575 8.95841 17.33 9.06C18.1932 8.5367 18.8409 7.73654 19.15 6.8C18.3236 7.27212 17.4392 7.60818 16.52 7.79C15.9182 7.18744 15.1337 6.78146 14.2875 6.63193C13.4412 6.48239 12.5696 6.59789 11.7961 6.96121C11.0225 7.32453 10.3884 7.91593 9.98728 8.65608C9.58613 9.39622 9.43645 10.2466 9.56 11.08H9.28C9.05141 11.0852 8.82328 11.0734 8.598 11.045C8.598 8.768 10.438 6.856 12.731 6.714C12.928 6.7 13.124 6.7 13.32 6.7C15.498 6.7 17.308 8.233 17.641 10.27C17.641 10.27 17.673 10.367 17.673 10.464C17.7182 10.8271 17.7408 11.1927 17.741 11.559L17.726 11.912C17.726 15.043 15.186 17.611 12.055 17.642H12.002C11.8942 17.642 11.7864 17.642 11.6787 17.642C9.651 17.642 7.859 16.701 6.7 15.251C8.23118 15.1171 9.68342 14.5156 10.8486 13.5274C12.0138 12.5392 12.8354 11.2148 13.205 9.754C12.5595 9.75619 11.9309 9.56953 11.4046 9.21779C10.8783 8.86606 10.4808 8.36807 10.272 7.788C10.9752 7.76732 11.668 7.60154 12.302 7.3C11.7388 7.05067 11.2509 6.67464 10.8794 6.20288C10.5079 5.73112 10.2643 5.1787 10.17 4.593C10.816 4.91 11.536 5.097 12.271 5.135C11.1256 4.3766 10.4185 3.02791 10.44 1.593C10.44 1.201 10.496 0.827 10.593 0.473C12.6574 2.96681 15.7044 4.48586 18.97 4.72C18.9466 4.47595 18.9342 4.23062 18.933 3.985C18.933 1.782 20.722 0 22.925 0H22.939C23.9702 0.0152816 24.9525 0.459188 25.673 1.221C26.5016 1.05358 27.2987 0.741367 28.033 0.296C27.7648 1.18349 27.1757 1.94152 26.372 2.425C27.1383 2.33715 27.8869 2.14078 28.593 1.845C28.0367 2.6153 27.357 3.29123 26.581 3.835C26.6543 4.31703 26.6907 4.80395 26.69 5.292C26.69 13.485 20.569 23 10.361 23C7.80286 23.0014 5.29285 22.2975 3.106 20.968L3 20.904C5.05151 20.9433 7.07241 20.3773 8.838 19.26L9 19.156L8.635 19.063C6.54037 18.6175 4.71326 17.3417 3.612 15.543L3.458 15.267L3.581 15.283C4.30539 15.3528 5.03884 15.2533 5.72 14.992L6.127 14.826L5.687 14.767C3.41354 14.3701 1.61178 12.5667 1.219 10.294L1.178 10.024L1.425 10.112C2.08084 10.3921 2.78562 10.53 3.498 10.516L3.87 10.516L3.538 10.298C1.75269 9.11397 0.749609 7.0311 1.02432 4.9327C1.29903 2.8343 2.80973 1.07396 4.882 0.351L5.147 0.259L5.332 0.454C7.98998 3.38325 11.6118 5.1017 15.44 5.24C15.5463 5.24228 15.6523 5.2345 15.758 5.217L15.875 5.2L15.862 5.082C15.687 3.53 16.221 2.001 17.3 0.908C18.0432 0.15654 19.0333 -0.225698 20.0539 -0.147398C21.0744 -0.0690983 22.0002 0.461458 22.602 1.299L22.687 1.416L22.822 1.389C23.698 1.278 24.5593 1.06855 25.388 0.766L26.08 0.511L25.698 1.143C25.4753 1.49784 25.2025 1.81954 24.889 2.095L24.386 2.531L24.982 2.388C25.3631 2.30049 25.737 2.1855 26.1 2.044L26.872 1.787L26.353 2.422C25.8515 3.01882 25.2954 3.56744 24.693 4.062C24.6277 4.67737 24.5337 5.28952 24.411 5.895C24.3303 7.32594 24.0382 8.73682 23.544 10.083C23.0503 11.4325 22.3609 12.7015 21.5 13.843C20.639 14.9861 19.5975 15.9772 18.419 16.774C16.3576 18.2058 13.9539 19.0258 11.463 19.13H11.427C9.08065 19.13 6.81856 18.2911 5.053 16.793L4.846 16.602L5.113 16.694C5.90106 16.9513 6.72554 17.0837 7.556 17.086H7.605C7.557 17.057 7.515 17.022 7.471 16.985C6.40526 16.0761 5.68656 14.81 5.45596 13.4147C5.22537 12.0195 5.49896 10.5851 6.221 9.399L6.42 9.093L6.067 9.293C5.24134 9.74936 4.49616 10.3514 3.87 11.068L3.515 11.468L3.837 11.022C3.84761 10.5221 3.89259 10.0233 3.972 9.528C3.97725 9.46084 3.98491 9.39382 3.995 9.327C3.64043 9.46017 3.29821 9.6228 2.976 9.812L2.347 10.233L3.02 9.632C2.80296 8.83865 2.75304 8.00813 2.874 7.195L3.097 5.854L1.967 6.801C1.61444 7.09342 1.3255 7.45468 1.116 7.861L0.966 8.145L1.094 7.832C1.18207 7.62137 1.28271 7.4176 1.395 7.221L1.605 6.856L1.342 7.186C1.12 7.434 0.944 7.723 0.824 8.038L0.664 8.462L0.789 8.021C0.85 7.827 0.923 7.638 1.008 7.455L1.191 7.08L0.937 7.417C0.77 7.641 0.649 7.893 0.579 8.161L0.465 8.592L0.558 8.148C0.686971 7.65491 0.909894 7.19324 1.214 6.788L1.613 6.245L1.111 6.702C0.788 7.002 0.54 7.365 0.384 7.764L0.131 8.389L0.347 7.748C0.451 7.429 0.597 7.124 0.782 6.843L1.157 6.305L0.687 6.812C0.58 6.929 0.501 7.064 0.454 7.21L0.378 7.45L0.417 7.202C0.476 6.849 0.631 6.518 0.86 6.244L1.414 5.577L0.729 6.201C0.604 6.317 0.491 6.444 0.39 6.581L0.224 6.795L0.354 6.6C0.437065 6.46989 0.530045 6.34655 0.632 6.231L0.966 5.86L0.551 6.239C0.395 6.383 0.292 6.573 0.259 6.78L0.215 7.052L0.214 6.773C0.214 6.615 0.252 6.459 0.326 6.317L0.498 6.012L0.296 6.293C0.220729 6.40767 0.164094 6.53435 0.128 6.667L0.076 6.861L0.083 6.658C0.0957336 6.52566 0.129903 6.39646 0.184 6.276L0.303 6.039L0.178 6.267C0.124 6.371 0.091 6.485 0.081 6.602L0.067 6.773L0.053 6.592C0.0466406 6.32041 0.123726 6.05465 0.271 5.831L0.505 5.503L0.244 5.844C0.15 5.972 0.093 6.121 0.079 6.277L0.06 6.491L0.044 6.269C0.0356654 6.1541 0.0448436 6.03866 0.0712 5.92723C0.0975564 5.81581 0.140561 5.70996 0.198 5.615L0.384 5.362L0.175 5.626C0.115 5.709 0.07 5.803 0.042 5.902L0 6.055L0.007 5.9C0.0119349 5.81718 0.0283116 5.7353 0.056 5.656L0.125 5.483L0.041 5.653C0.0159342 5.71412 0.0021402 5.77817 1.12764e-07 5.843L-0.003 5.956L-0.001 5.84C0.00133171 5.75653 0.0185033 5.67429 0.05 5.599L0.107 5.461L0.049 5.59C0.0187223 5.67414 0.00192402 5.76084 0 5.848L0 5.957L0 5.847C-6.04546e-05 5.7754 0.0147021 5.70453 0.0437 5.638L0.114 5.483L0.037 5.651C0.0124273 5.72999 0.0002182 5.81166 0 5.894L0.003 6L0 5.893C0.00266466 5.8061 0.0194323 5.7211 0.05 5.642L0.121 5.491L0.04 5.658C0.0130511 5.74144 0.000205079 5.82798 0 5.915L0.004 6.018L0 5.911C0.00225869 5.82336 0.0191525 5.73748 0.05 5.658L0.119 5.504L0.039 5.67C0.0117511 5.75745 -0.00131225 5.84726 0.000139117 5.937L0.004 6.037L0 5.933C0.0033277 5.8298 0.0293555 5.72903 0.076 5.637L0.182 5.444L0.05 5.663C0.0178435 5.75897 0.000782188 5.85794 0 5.957L0.004 6.072L0 5.953C0.00410598 5.83959 0.0319093 5.72875 0.081 5.628L0.188 5.434L0.054 5.655C0.0183755 5.7522 -0.000110984 5.85301 9.95727e-08 5.954L0.004 6.072L-0.001 5.951C0.00322566 5.83717 0.0309991 5.72592 0.08 5.625L0.188 5.429L0.053 5.652C0.0181054 5.74981 0.000100156 5.84975 0 5.95L0.004 6.067L0 5.95L0.004 5.834L0 5.95L0.004 6.067Z",fill:"currentColor"})}),"Twitter"]})},TX=({url:t,title:e})=>{const n=()=>{const r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}&quote=${encodeURIComponent(e)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Hh,{onClick:n,bgColor:"#1877F2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M24 12.073C24 5.404 18.627 0 12 0C5.37 0 0 5.404 0 12.073C0 18.065 4.388 23.04 10.125 23.952V15.563H7.078V12.073H10.125V9.415C10.125 6.39 11.917 4.717 14.658 4.717C15.97 4.717 17.344 4.953 17.344 4.953V7.925H15.83C14.34 7.925 13.875 8.85 13.875 9.803V12.073H17.203L16.67 15.563H13.875V23.952C19.612 23.04 24 18.065 24 12.073Z",fill:"currentColor"})}),"Facebook"]})},SX=({url:t,title:e,description:n})=>{const r=()=>{const i=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}&title=${encodeURIComponent(e)}${n?`&summary=${encodeURIComponent(n)}`:""}`;window.open(i,"_blank","noopener,noreferrer")};return u.jsxs(Hh,{onClick:r,bgColor:"#0A66C2",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M20.447 20.452H16.893V14.883C16.893 13.555 16.866 11.846 15.041 11.846C13.188 11.846 12.905 13.291 12.905 14.785V20.452H9.35103V9H12.765V10.561H12.811C13.288 9.661 14.448 8.711 16.181 8.711C19.782 8.711 20.448 11.081 20.448 14.166V20.452H20.447ZM5.33903 7.433C4.19303 7.433 3.27403 6.509 3.27403 5.368C3.27403 4.227 4.19403 3.305 5.33903 3.305C6.48003 3.305 7.40003 4.227 7.40003 5.368C7.40003 6.509 6.47903 7.433 5.33903 7.433ZM7.11703 20.452H3.56103V9H7.11703V20.452Z",fill:"currentColor"})}),"LinkedIn"]})},CX=({url:t,title:e})=>{const n=()=>{const r=`https://wa.me/?text=${encodeURIComponent(`${e} ${t}`)}`;window.open(r,"_blank","noopener,noreferrer")};return u.jsxs(Hh,{onClick:n,bgColor:"#25D366",children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M17.472 14.382C17.204 14.248 15.739 13.527 15.493 13.438C15.246 13.35 15.066 13.305 14.887 13.573C14.707 13.842 14.133 14.518 13.975 14.697C13.816 14.877 13.658 14.899 13.39 14.766C13.122 14.632 12.132 14.315 10.97 13.278C10.055 12.462 9.445 11.462 9.287 11.193C9.128 10.925 9.27 10.777 9.404 10.641C9.526 10.518 9.673 10.321 9.809 10.163C9.945 10.005 9.99 9.894 10.078 9.714C10.166 9.534 10.122 9.377 10.055 9.243C9.99 9.109 9.383 7.642 9.158 7.106C8.941 6.584 8.721 6.656 8.556 6.646C8.397 6.637 8.217 6.637 8.038 6.637C7.858 6.637 7.567 6.702 7.32 6.97C7.074 7.238 6.309 7.959 6.309 9.426C6.309 10.893 7.381 12.316 7.518 12.496C7.654 12.676 9.442 15.429 12.171 16.729C12.833 17.022 13.348 17.203 13.75 17.338C14.412 17.557 15.013 17.528 15.485 17.461C16.01 17.386 17.218 16.749 17.443 16.125C17.667 15.501 17.667 14.965 17.601 14.853C17.535 14.742 17.355 14.675 17.087 14.541M12.04 21.933H12.035C10.2422 21.9334 8.48473 21.4504 6.931 20.527L6.586 20.327L2.855 21.336L3.879 17.695L3.658 17.339C2.65082 15.7382 2.11493 13.8829 2.116 11.987C2.118 6.491 6.544 2.066 12.04 2.066C14.691 2.066 17.178 3.078 19.042 4.944C19.9651 5.86371 20.6988 6.95356 21.1992 8.15591C21.6997 9.35826 21.9566 10.6485 21.954 11.953C21.952 17.45 17.527 21.933 12.04 21.933M20.494 3.492C19.3376 2.32837 17.9595 1.40929 16.4418 0.796438C14.924 0.183584 13.2951 -0.112069 11.66 -0.0749934C5.287 -0.0749934 0.115 5.093 0.112 11.466C0.110545 13.4775 0.633001 15.447 1.625 17.183L0 23L5.947 21.41C7.62514 22.3129 9.51882 22.7849 11.444 22.785H11.45C17.823 22.785 22.995 17.616 22.998 11.243C23.0359 9.60953 22.7408 7.9824 22.0995 6.46482C21.4583 4.94723 20.5119 3.5655 19.333 2.401",fill:"currentColor"})}),"WhatsApp"]})},EX=({url:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})};return u.jsx(Hh,{onClick:r,bgColor:e?"#22c55e":"#64748b",children:e?u.jsxs(u.Fragment,{children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"currentColor"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z",fill:"currentColor"})}),"Copy Link"]})})};function k7({title:t,url:e,description:n,image:r,vertical:i=!1}){return u.jsxs(wX,{vertical:i,children:[u.jsx(xX,{url:e,title:t}),u.jsx(TX,{url:e,title:t}),u.jsx(SX,{url:e,title:t,description:n}),u.jsx(CX,{url:e,title:t}),u.jsx(EX,{url:e})]})}const kX=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,AX=b.div`
  margin-bottom: 2rem;
`,_X=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,jX=b.p`
  font-size: 1.125rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 1.5rem;
`,v1=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  margin-bottom: 2rem;
`,b1=b.div`
  padding: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,w1=b.h2`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,x1=b.p`
  color: hsl(var(--muted-foreground));
  margin-bottom: 0;
`,T1=b.div`
  padding: 1.5rem;
`,DX=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 2rem;
`,IX=b.div`
  background-color: hsl(var(--muted) / 0.1);
  padding: 1.5rem;
  border-radius: 0.5rem;
  border: 1px dashed hsl(var(--border));
  text-align: center;
  font-family: monospace;
  font-size: 1.5rem;
  font-weight: bold;
  letter-spacing: 2px;
  color: hsl(var(--primary));
`,E_=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  
  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
`,RX=b.div`
  margin-top: 2rem;
  background-color: hsl(var(--muted) / 0.1);
  padding: 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  word-break: break-all;
`,MX=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
`,Mm=b.div`
  background-color: hsl(var(--muted) / 0.1);
  padding: 1.5rem;
  border-radius: 0.5rem;
  text-align: center;
`,Nm=b.div`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: hsl(var(--primary));
`,Lm=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,NX=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
`,k_=b.div`
  background-color: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,A_=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,__=b.p`
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
  margin-bottom: 0;
  flex-grow: 1;
`,j_=b.div`
  font-size: 1.5rem;
  font-weight: bold;
  color: hsl(var(--primary));
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,LX=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));
`,OX=b.div`
  text-align: center;
  padding: 2rem 1rem;
  color: hsl(var(--destructive));
  background-color: hsl(var(--destructive) / 0.1);
  border-radius: 0.5rem;
  margin-bottom: 2rem;
`;function PX(){const{currentUser:t}=In(),[e,n]=k.useState(null),[r,i]=k.useState(null),[a,l]=k.useState(!0),[d,f]=k.useState(null),[m,g]=k.useState(!1),v=t&&e?`${window.location.origin}/register?ref=${e}`:"";k.useEffect(()=>{(async()=>{if(!(!t||!t.email))try{l(!0),f(null);const C=await dX(t.uid,t.email);n(C);const A=await bX(t.uid);i(A)}catch(C){console.error("Error loading referral data:",C),f("Failed to load referral data. Please try again later.")}finally{l(!1)}})()},[t]);const w=()=>{e&&navigator.clipboard.writeText(e).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})},x=()=>{v&&navigator.clipboard.writeText(v).then(()=>{g(!0),setTimeout(()=>g(!1),2e3)})};return a?u.jsx(LX,{children:"Loading referral information..."}):u.jsxs(kX,{children:[u.jsxs(AX,{children:[u.jsx(_X,{children:"Refer Friends, Earn Credits"}),u.jsx(jX,{children:"Share your unique referral code with friends and earn credits when they sign up and participate."})]}),d&&u.jsx(OX,{children:d}),u.jsxs(NX,{children:[u.jsxs(k_,{children:[u.jsx(A_,{children:"You'll receive"}),u.jsx(__,{children:"When someone uses your referral code to sign up and makes their first purchase, you'll receive credits as a reward."}),u.jsxs(j_,{children:[u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),C7," credits"]})]}),u.jsxs(k_,{children:[u.jsx(A_,{children:"They'll receive"}),u.jsx(__,{children:"Your friends will also get bonus credits when they sign up using your referral code. A win-win for everyone!"}),u.jsxs(j_,{children:[u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),E7," credits"]})]})]}),u.jsxs(v1,{children:[u.jsxs(b1,{children:[u.jsx(w1,{children:"Your Referral Code"}),u.jsx(x1,{children:"Share this code with friends or use the direct link below."})]}),u.jsxs(T1,{children:[u.jsxs(DX,{children:[u.jsx(IX,{children:e}),u.jsx(E_,{onClick:w,children:m?u.jsxs(u.Fragment,{children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z",fill:"currentColor"})}),"Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z",fill:"currentColor"})}),"Copy Code"]})})]}),u.jsxs(RX,{children:[u.jsx("strong",{children:"Direct sign-up link:"})," ",v,u.jsx(E_,{onClick:x,style:{marginTop:"1rem"},children:m?"Link Copied!":"Copy Sign-up Link"})]})]})]}),u.jsxs(v1,{children:[u.jsxs(b1,{children:[u.jsx(w1,{children:"Share Your Referral Link"}),u.jsx(x1,{children:"Easily share your referral link on social media or via message."})]}),u.jsx(T1,{children:u.jsx(k7,{title:"Join me on RuneRaffle and get free credits!",url:v,description:"Sign up using my referral link and get bonus credits to start entering raffles for epic RuneScape prizes."})})]}),r&&u.jsxs(v1,{children:[u.jsxs(b1,{children:[u.jsx(w1,{children:"Your Referral Stats"}),u.jsx(x1,{children:"Track how many friends you've referred and credits you've earned."})]}),u.jsx(T1,{children:u.jsxs(MX,{children:[u.jsxs(Mm,{children:[u.jsx(Nm,{children:r.totalReferrals}),u.jsx(Lm,{children:"Total Referrals"})]}),u.jsxs(Mm,{children:[u.jsx(Nm,{children:r.pendingRewards}),u.jsx(Lm,{children:"Pending Rewards"})]}),u.jsxs(Mm,{children:[u.jsx(Nm,{children:r.completedRewards}),u.jsx(Lm,{children:"Completed Rewards"})]}),u.jsxs(Mm,{children:[u.jsx(Nm,{children:r.totalEarned}),u.jsx(Lm,{children:"Total Credits Earned"})]})]})})]})]})}const UX=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,VX=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,BX=b.div`
  margin-bottom: 2rem;
`,zX=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;

  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,$X=b.p`
  font-size: 1.125rem;
  margin-bottom: 2rem;
  opacity: 0.9;
  line-height: 1.6;
`,FX=b.div`
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  justify-content: center;

  @media (max-width: 768px) {
    justify-content: flex-start;
    overflow-x: auto;
    padding-bottom: 0.5rem;
  }
`,Om=b.button`
  padding: 0.75rem 1.25rem;
  border-radius: 0.5rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.05)"};
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  border: none;
  box-shadow: ${t=>t.active?"0 4px 12px rgba(99, 102, 241, 0.2)":"none"};
  
  &:hover {
    background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.1)"};
    transform: translateY(-2px);
  }
`;b.div`
  height: 1px;
  background-color: rgba(255, 255, 255, 0.1);
  margin: 2rem 0;
`;const qX=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
  gap: 1rem;
  
  @media (max-width: 768px) {
    flex-direction: column;
    align-items: flex-start;
  }
`,HX=b.h2`
  font-size: 1.5rem;
  font-weight: bold;
  color: white;
`,GX=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,WX=b.span`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,YX=b.select`
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
  }
`,KX=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
`,QX=b.div`
  border-radius: 0.75rem;
  overflow: hidden;
  background-color: hsl(var(--card));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
  animation: ${UX} 0.5s ease-out forwards;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,XX=b.div`
  height: 10rem;
  background-color: rgba(0, 0, 0, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
`,ZX=b.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
`,JX=b.div`
  position: relative;
  z-index: 1;
  width: 3.5rem;
  height: 3.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgb(0, 174, 239);
`,eZ=b.div`
  position: absolute;
  top: 0.75rem;
  left: 0.75rem;
  display: flex;
  gap: 0.5rem;
  z-index: 2;
`,tZ=b.div`
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  background-color: ${t=>{switch(t.status){case"active":return"rgba(22, 163, 74, 0.8)";case"ending":return"rgba(245, 158, 11, 0.8)";case"complete":return"rgba(107, 114, 128, 0.8)";default:return"rgba(22, 163, 74, 0.8)"}}};
  color: white;
  text-transform: uppercase;
`,nZ=b.div`
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  background-color: ${t=>{switch(t.difficulty){case"easy":return"rgba(22, 163, 74, 0.8)";case"medium":return"rgba(245, 158, 11, 0.8)";case"hard":return"rgba(239, 68, 68, 0.8)";default:return"rgba(22, 163, 74, 0.8)"}}};
  color: white;
`,rZ=b.div`
  padding: 1.25rem;
`,iZ=b.div`
  margin-top: -1.5rem;
  margin-bottom: 1rem;
  background-color: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.2);
  color: rgb(245, 158, 11);
  font-weight: 600;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  display: inline-block;
`,sZ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,oZ=b.p`
  font-size: 0.875rem;
  margin-bottom: 1rem;
  opacity: 0.9;
  line-height: 1.6;
`,aZ=b.div`
  margin: 1rem 0;
`,lZ=b.div`
  height: 6px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`,cZ=b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`,uZ=b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`,dZ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`;b.div`
  display: flex;
  flex-direction: column;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
`;b.div`
  display: flex;
  flex-direction: column;
  align-items: flex-end;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
  color: ${t=>t.color||"white"};
`;b.div`
  text-align: center;
  padding: 3rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.75rem;
`;b.div`
  width: 4rem;
  height: 4rem;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.5rem auto;
  color: rgba(255, 255, 255, 0.5);
`;b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`;b.p`
  opacity: 0.7;
  max-width: 24rem;
  margin: 0 auto;
`;b.div`
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 2rem;
`;b.button`
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 0.375rem;
  border: none;
  background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.05)"};
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.8)"};
  cursor: pointer;
  
  &:hover {
    background-color: ${t=>t.active?"hsl(var(--primary))":"rgba(255, 255, 255, 0.1)"};
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;const D_=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),hZ=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}};function fZ(){const[t,e]=k.useState("all"),[n,r]=k.useState([]),[i,a]=k.useState(!0),[l,d]=k.useState(null),[f,m]=k.useState("popularity"),g=Pt();k.useEffect(()=>{v()},[t]);const v=async()=>{try{a(!0),d(null);let T=[];t==="completed"?T=await ay():(T=await Q2(),t==="active"?T=T.filter(A=>A.status==="active"):t==="ending"&&(T=T.filter(A=>A.status==="ending")));const C=w(T,f);r(C)}catch(T){console.error("Error fetching competitions:",T),d("Failed to load competitions. Please try again.")}finally{a(!1)}},w=(T,C)=>{switch(C){case"popularity":return[...T].sort((A,_)=>_.ticketsSold/_.totalTickets-A.ticketsSold/A.totalTickets);case"newest":return[...T].sort((A,_)=>{var L,I;return(((L=_.createdAt)==null?void 0:L.seconds)||0)-(((I=A.createdAt)==null?void 0:I.seconds)||0)});case"ending-soon":return[...T].sort((A,_)=>{const L=A.endsAt?new Date(A.endsAt.seconds*1e3):new Date(0),I=_.endsAt?new Date(_.endsAt.seconds*1e3):new Date(0);return L.getTime()-I.getTime()});case"price-low":return[...T].sort((A,_)=>A.ticketPrice-_.ticketPrice);case"price-high":return[...T].sort((A,_)=>_.ticketPrice-A.ticketPrice);default:return T}},x=T=>{g(`/competition/${T}`)};return u.jsxs(VX,{children:[u.jsxs(BX,{children:[u.jsx(zX,{children:"Competitions"}),u.jsx($X,{children:"Browse and enter our current RuneScape raffles. Each entry gives you a chance to win valuable items with our provably fair drawing system."})]}),u.jsxs(Oi,{withGlow:!0,children:[u.jsxs(FX,{children:[u.jsx(Om,{active:t==="all",onClick:()=>e("all"),children:"All Competitions"}),u.jsx(Om,{active:t==="active",onClick:()=>e("active"),children:"Active"}),u.jsx(Om,{active:t==="ending",onClick:()=>e("ending"),children:"Ending Soon"}),u.jsx(Om,{active:t==="completed",onClick:()=>e("completed"),children:"Completed"})]}),u.jsxs(qX,{children:[u.jsx(HX,{children:t==="all"?"All Competitions":t==="active"?"Active Competitions":t==="ending"?"Ending Soon":"Completed Competitions"}),u.jsxs(GX,{children:[u.jsx(WX,{children:"Sort by:"}),u.jsxs(YX,{value:f,onChange:T=>{m(T.target.value),r(w(n,T.target.value))},children:[u.jsx("option",{value:"popularity",children:"Popularity"}),u.jsx("option",{value:"newest",children:"Newest"}),u.jsx("option",{value:"ending-soon",children:"Ending Soon"}),u.jsx("option",{value:"price-low",children:"Price: Low to High"}),u.jsx("option",{value:"price-high",children:"Price: High to Low"})]})]})]}),i?u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{})}):l?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:l}),u.jsx("button",{onClick:v,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",cursor:"pointer"},children:"Try Again"})]}):n.length===0?u.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"No competitions found for the selected filter."}):u.jsx(KX,{children:n.map((T,C)=>u.jsxs(QX,{onClick:()=>x(T.id),style:{animationDelay:`${C*.05}s`},children:[u.jsxs(XX,{children:[T.imageUrl?u.jsx(ZX,{src:T.imageUrl,alt:T.title}):u.jsx(JX,{children:u.jsx(D_,{})}),u.jsxs(eZ,{children:[u.jsx(tZ,{status:T.status,children:T.status}),u.jsx(nZ,{difficulty:T.difficulty,children:T.difficulty})]})]}),u.jsxs(rZ,{children:[u.jsx(iZ,{children:T.prizeValue}),u.jsx(sZ,{children:T.title}),u.jsx(oZ,{children:T.description}),u.jsxs(aZ,{children:[u.jsx(lZ,{children:u.jsx(cZ,{width:`${T.ticketsSold/T.totalTickets*100}%`})}),u.jsxs(uZ,{children:[u.jsxs("span",{children:[T.ticketsSold," / ",T.totalTickets," tickets sold"]}),u.jsxs("span",{children:[Math.round(T.ticketsSold/T.totalTickets*100),"%"]})]})]}),u.jsxs(dZ,{children:[u.jsxs("div",{children:[u.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.125rem"},children:[T.ticketPrice," credits"]}),u.jsx("div",{style:{fontSize:"0.75rem",opacity:.7},children:"per ticket"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("div",{style:{color:"rgb(14, 165, 233)"},children:u.jsx(D_,{})}),u.jsx("div",{style:{fontWeight:"bold"},children:T.status==="complete"?"Completed":hZ(T.endsAt)})]}),u.jsx("div",{style:{fontSize:"0.75rem",opacity:.7,textAlign:"right"},children:T.status==="complete"?"Winner drawn":"remaining"})]})]})]})]},T.id))})]})]})}const S1=b.div`
  margin-top: 2rem;
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
`,C1=b.h3`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,mZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1.5rem;
  gap: 1rem;
`,pZ=b.div`
  font-size: 1.5rem;
  font-weight: 500;
  padding: 0 1rem;
`,Aw=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  ${t=>t.variant==="primary"?`
    background: hsl(var(--primary));
    color: white;
    border: none;
    
    &:hover:not(:disabled) {
      opacity: 0.9;
    }
  `:t.variant==="danger"?`
    background: hsl(var(--destructive));
    color: white;
    border: none;
    
    &:hover:not(:disabled) {
      opacity: 0.9;
    }
  `:`
    background: transparent;
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    
    &:hover:not(:disabled) {
      background: hsl(var(--accent));
    }
  `}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,I_=b(Aw)`
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.25rem;
  padding: 0;
`,gZ=b.div`
  background: hsl(var(--accent));
  padding: 1rem;
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
`,E1=b.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
  
  &:last-child {
    margin-bottom: 0;
    padding-top: 0.5rem;
    border-top: 1px solid hsl(var(--border));
    font-weight: 600;
  }
`,yZ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,vZ=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-bottom: 1rem;
`,bZ=b.div`
  padding: 1rem;
  background-color: rgba(22, 163, 74, 0.1);
  color: rgb(22, 163, 74);
  border-radius: 0.5rem;
  margin-bottom: 1rem;
`;function wZ({competition:t,onPurchaseComplete:e,ticketCount:n,ticketPrice:r,onIncrement:i,onDecrement:a,onPurchase:l,loading:d,success:f,disabled:m}){const{currentUser:g,userCredits:v,setUserCredits:w}=In(),[x,T]=k.useState(1),[C,A]=k.useState(!1),[_,L]=k.useState(!1),[I,q]=k.useState(null),j=n!==void 0?n:x,M=r!==void 0?r:(t==null?void 0:t.ticketPrice)||0,$=d!==void 0?d:C,Q=f!==void 0?f:_;k.useEffect(()=>{t&&(T(1),L(!1),q(null))},[t==null?void 0:t.id]);const ie=t?t.totalTickets-t.ticketsSold:99,he=Math.floor(v/M),Ie=Math.min(ie,he,10),ne=j*M,ke=v<ne,ae=()=>{i?i():j<Ie&&T(W=>W+1)},Ae=()=>{a?a():j>1&&T(W=>W-1)},H=async()=>{if(l){await l();return}if(!(!g||!(t!=null&&t.id))&&!ke){A(!0),q(null);try{const W=t.ticketsSold+1,se=[];for(let R=0;R<j;R++){const X=W+R;se.push(ly({competitionId:t.id,userId:g.uid,ticketNumber:X}))}await Promise.all(se);const Se=v-ne;g.email&&(await uy(g.email,Se),w(Se)),L(!0),e&&e(),setTimeout(()=>{L(!1)},3e3)}catch(W){console.error("Error purchasing tickets:",W),q(W.message||"Failed to purchase tickets")}finally{A(!1)}}};return(t==null?void 0:t.status)!=="active"?u.jsxs(S1,{children:[u.jsx(C1,{children:"Ticket Purchase"}),u.jsx("div",{children:"This competition is no longer accepting entries."})]}):ie<=0?u.jsxs(S1,{children:[u.jsx(C1,{children:"Ticket Purchase"}),u.jsx("div",{children:"All tickets for this competition have been sold."})]}):u.jsxs(S1,{children:[u.jsx(C1,{children:"Purchase Tickets"}),Q?u.jsxs(u.Fragment,{children:[u.jsxs(bZ,{children:["Congratulations! You have successfully purchased ",j," ticket",j!==1?"s":"","."]}),u.jsx(Aw,{variant:"primary",onClick:()=>L(!1),children:"Purchase More Tickets"})]}):u.jsxs(u.Fragment,{children:[u.jsxs(yZ,{children:[u.jsx("span",{children:"Available Credits:"}),u.jsx("strong",{children:v})]}),u.jsxs(mZ,{children:[u.jsx(I_,{onClick:Ae,disabled:j<=1||$,children:"-"}),u.jsx(pZ,{children:j}),u.jsx(I_,{onClick:ae,disabled:j>=Ie||$,children:"+"})]}),u.jsxs(gZ,{children:[u.jsxs(E1,{children:[u.jsx("div",{children:"Ticket Price:"}),u.jsxs("div",{children:[M," credits"]})]}),u.jsxs(E1,{children:[u.jsx("div",{children:"Quantity:"}),u.jsx("div",{children:j})]}),u.jsxs(E1,{children:[u.jsx("div",{children:"Total:"}),u.jsxs("div",{children:[ne," credits"]})]})]}),ke&&u.jsx(vZ,{children:"You don't have enough credits. Please add more credits or reduce the number of tickets."}),I&&u.jsx("div",{style:{color:"hsl(var(--destructive))",marginBottom:"1rem"},children:I}),u.jsx(Aw,{variant:"primary",onClick:H,disabled:ke||$||j<=0,children:$?"Processing...":`Buy ${j} Ticket${j!==1?"s":""}`})]})]})}const k1=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,R_=b.button`
  background: none;
  border: none;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
  margin-bottom: 2rem;
  padding: 0.5rem;
  border-radius: 0.375rem;
  
  &:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.05);
  }
`,xZ=b.div`
  display: grid;
  grid-template-columns: 1fr 350px;
  gap: 2rem;
  
  @media (max-width: 1024px) {
    grid-template-columns: 1fr;
  }
`,TZ=b.div``,SZ=b.div`
  @media (max-width: 1024px) {
    grid-row: 1;
    margin-bottom: 2rem;
  }
`,M_=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
`,N_=b.div`
  padding: 1.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
`,L_=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
`,CZ=b.p`
  font-size: 0.875rem;
  opacity: 0.9;
  line-height: 1.6;
`,O_=b.div`
  padding: 1.5rem;
`;b.div`
  padding: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`;const EZ=b.div`
  margin-bottom: 2rem;
`,kZ=b.div`
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  flex-wrap: wrap;
`,A1=b.span`
  background-color: ${t=>{switch(t.variant){case"featured":return"rgba(245, 158, 11, 0.2)";case"limited":return"rgba(239, 68, 68, 0.2)";case"status":return"rgba(22, 163, 74, 0.2)";default:return"rgba(0, 136, 204, 0.2)"}}};
  color: ${t=>{switch(t.variant){case"featured":return"rgb(245, 158, 11)";case"limited":return"rgb(239, 68, 68)";case"status":return"rgb(22, 163, 74)";default:return"rgb(0, 174, 239)"}}};
  padding: 0.25rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
`,AZ=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;

  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,_Z=b.p`
  font-size: 1.125rem;
  margin-bottom: 2rem;
  opacity: 0.9;
  line-height: 1.6;
`,jZ=b.div`
  margin-top: 3rem;
  margin-bottom: 1.5rem;
`,_1=b.h2`
  font-size: 1.75rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,P_=b.div`
  display: flex;
  background-color: hsl(var(--card));
  padding: 1.5rem;
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  margin-bottom: 2rem;
  
  @media (max-width: 768px) {
    flex-direction: column;
  }
`,U_=b.div`
  width: 5rem;
  height: 5rem;
  flex-shrink: 0;
  background-color: rgba(245, 158, 11, 0.1);
  border-radius: 0.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 1.5rem;
  color: rgb(245, 158, 11);
  
  @media (max-width: 768px) {
    margin-right: 0;
    margin-bottom: 1rem;
  }
`,V_=b.div`
  flex: 1;
`,B_=b.h3`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,z_=b.div`
  font-size: 1.125rem;
  font-weight: bold;
  color: rgb(245, 158, 11);
  margin-bottom: 1rem;
`,$_=b.p`
  opacity: 0.9;
  line-height: 1.6;
`;b.div`
  margin: 1.5rem 0;
`;b.div`
  font-size: 0.875rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: rgba(255, 255, 255, 0.7);
`;b.div`
  height: 8px;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 9999px;
  overflow: hidden;
`;b.div`
  height: 100%;
  width: ${t=>t.width};
  background-color: hsl(var(--primary));
  border-radius: 9999px;
  transition: width 0.3s ease;
`;b.div`
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
  font-size: 0.75rem;
`;b.span`
  color: rgba(255, 255, 255, 0.7);
`;b.span`
  font-weight: 600;
`;b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 1rem 0;
  padding: 1rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 0.5rem;
`;b.div`
  width: 2.5rem;
  height: 2.5rem;
  background-color: rgba(0, 174, 239, 0.2);
  color: hsl(var(--primary));
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
`;b.div`
  flex: 1;
`;b.div`
  font-weight: 600;
  font-size: 1.125rem;
`;b.div`
  font-size: 0.875rem;
  opacity: 0.7;
`;b.div`
  display: flex;
  align-items: center;
  gap: 0.75rem;
`;b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;b.div`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`;const DZ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  
  &:hover {
    transform: translateY(-2px);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
`;b(DZ)`
  background-color: hsl(var(--primary));
  color: white;
`;b.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin: 1.5rem 0;
`;b.div`
  display: flex;
  flex-direction: column;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-bottom: 0.25rem;
`;const IZ=b.span`
  font-weight: 600;
`;b(IZ)`
  color: ${t=>t.ending?"rgb(245, 158, 11)":"white"};
`;b.div`
  margin-top: 3rem;
`;b.div`
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 0.375rem;
  padding: 1rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin: 1rem 0;
`;b.div`
  display: flex;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  margin-bottom: 1.5rem;
`;b.button`
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  cursor: pointer;
  font-weight: 500;
  color: ${t=>t.active?"white":"rgba(255, 255, 255, 0.7)"};
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  transition: all 0.2s ease;
  
  &:hover {
    color: white;
  }
`;const RZ=b.div`
  height: 300px;
  width: 100%;
  border-radius: 0.75rem;
  margin-bottom: 2rem;
  background-color: hsl(var(--card));
  background-image: ${t=>t.imageUrl?`url(${t.imageUrl})`:"none"};
  background-size: cover;
  background-position: center;
  position: relative;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
    border-radius: 0.75rem;
    opacity: ${t=>t.imageUrl?1:0};
  }
`,F_=b.div`
  height: 1px;
  background-color: rgba(255, 255, 255, 0.1);
  margin: 2rem 0;
`,MZ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
`,q_=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M15.8333 10H4.16675M4.16675 10L10.0001 4.16667M4.16675 10L10.0001 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),H_=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 17C8.41015 17 5.5 14.0899 5.5 10.5V4.5H18.5V10.5C18.5 14.0899 15.5899 17 12 17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M8.5 20.5H15.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M12 17V20.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M18.5 7.5H20.5C21.6046 7.5 22.5 6.60457 22.5 5.5C22.5 4.39543 21.6046 3.5 20.5 3.5H18.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M5.5 7.5H3.5C2.39543 7.5 1.5 6.60457 1.5 5.5C1.5 4.39543 2.39543 3.5 3.5 3.5H5.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),NZ=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M13.3333 9.16667V6.66667C13.3333 4.36548 11.4678 2.5 9.16667 2.5C6.86548 2.5 5 4.36548 5 6.66667V9.16667M6.66667 17.5H11.6667C12.5871 17.5 13.3333 16.7538 13.3333 15.8333V10.8333C13.3333 9.91286 12.5871 9.16667 11.6667 9.16667H6.66667C5.74619 9.16667 5 9.91286 5 10.8333V15.8333C5 16.7538 5.74619 17.5 6.66667 17.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),LZ=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
`,OZ=b.h4`
  font-size: 1.125rem;
  font-weight: 600;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,PZ=b.p`
  margin-bottom: 1.25rem;
  line-height: 1.6;
`,UZ=b.input`
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 0.375rem;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
  }
`,VZ=b.button`
  background-color: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
  
  &:disabled {
    background-color: rgba(255, 255, 255, 0.2);
    cursor: not-allowed;
  }
`,G_=b.div`
  margin-top: 1rem;
  padding: 0.75rem;
  border-radius: 0.375rem;
  background-color: ${t=>t.correct?"rgba(22, 163, 74, 0.2)":"rgba(239, 68, 68, 0.2)"};
  color: ${t=>t.correct?"rgb(22, 163, 74)":"rgb(239, 68, 68)"};
  font-weight: 500;
`,BZ=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10 10.8333V10C10.9205 10 11.6667 9.25381 11.6667 8.33333C11.6667 7.41286 10.9205 6.66667 10 6.66667C9.07953 6.66667 8.33334 7.41286 8.33334 8.33333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M9.99999 13.3333H10.0083",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),zZ=t=>{if(!t)return"N/A";try{const e=new Date(t.seconds*1e3),n=new Date;if(e<=n)return"Ended";const r=e.getTime()-n.getTime(),i=Math.floor(r/(1e3*60*60*24));if(i>0)return`${i} days`;const a=Math.floor(r/(1e3*60*60));return a>0?`${a} hours`:`${Math.floor(r/(1e3*60))} minutes`}catch(e){return console.error("Error formatting time",e),"N/A"}},$Z=b.section`
  margin-top: 3rem;
  margin-bottom: 2rem;
`,j1=b.div`
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1.25rem;
  margin-bottom: 1rem;
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  transition: transform 0.2s, box-shadow 0.2s;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  }
`,D1=b.div`
  background-color: hsl(var(--primary));
  color: white;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.125rem;
  flex-shrink: 0;
`,I1=b.div`
  flex: 1;
`,R1=b.h4`
  margin: 0 0 0.5rem 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: white;
`,M1=b.p`
  margin: 0;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.5;
  font-size: 0.875rem;
`;b.div`
  display: flex;
  align-items: center;
  margin-bottom: 0.75rem;
`;b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`;b.span`
  font-weight: 600;
`;b.div`
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
  background-color: ${t=>{switch(t.status){case"active":return"rgb(22, 163, 74)";case"ending":return"rgb(245, 158, 11)";case"complete":return"rgb(22, 163, 74)";case"cancelled":return"rgb(239, 68, 68)";default:return"rgba(255, 255, 255, 0.5)"}}};
  margin-right: 0.5rem;
`;const FZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
`,qZ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`,HZ=b.div`
  display: flex;
  align-items: center;
`,W_=b.button`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  border: none;
  cursor: pointer;
  font-size: 1.25rem;
  transition: all 0.2s ease;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,GZ=b.span`
  font-weight: 600;
  min-width: 1.5rem;
  text-align: center;
`,WZ=b.div`
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
`,YZ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
  margin-right: 0.5rem;
`,KZ=b.span`
  font-weight: 600;
`;b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`;const QZ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: hsl(var(--primary));
  color: white;
  
  &:hover {
    transform: translateY(-2px);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }
`,XZ=b.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
`,ZZ=b.span`
  font-size: 0.75rem;
  color: rgba(255, 255, 255, 0.7);
`,JZ=b.span`
  font-weight: 600;
`,eJ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
`,tJ=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,nJ=b.span`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`;function rJ(){const{id:t}=Xw(),{currentUser:e,userCredits:n,setUserCredits:r}=In(),i=Pt(),[a,l]=k.useState(1),[d,f]=k.useState(null),[m,g]=k.useState(!0),[v,w]=k.useState(null),[x,T]=k.useState(!1),[C,A]=k.useState(!1),[_,L]=k.useState(""),[I,q]=k.useState(!1),[j,M]=k.useState(!1),[$,Q]=k.useState(""),[ie,he]=k.useState(0),Ie=()=>{he(se=>se+1)};k.useEffect(()=>{(async()=>{if(!t){w("Competition ID is missing"),g(!1);return}try{const Se=await so(t);Se?f(Se):w("Competition not found")}catch(Se){console.error("Error fetching competition:",Se),w("Failed to load competition details")}finally{g(!1)}})()},[t]);const ne=()=>{const se=d?Math.min(Math.floor(n/d.ticketPrice),d.totalTickets-d.ticketsSold):0;a<se&&l(a+1)},ke=()=>{a>1&&l(a-1)},ae=()=>{i("/competitions")},Ae=()=>{if(!d)return;const se=d.triviaAnswer||"Jagex";_.trim().toLowerCase()===se.toLowerCase()?(M(!0),q(!0),Q("")):(M(!1),q(!0),Q("Incorrect answer. Please try again."),setTimeout(()=>{q(!1),Q("")},3e3))},H=async()=>{if(!e||!d||!d.id)return;if(!j){Q("Please answer the trivia question correctly before purchasing tickets.");return}const se=a*d.ticketPrice;if(n<se){alert("Not enough credits to purchase tickets.");return}if(d.ticketsSold+a>d.totalTickets){alert("Not enough tickets available.");return}T(!0);try{for(let Se=0;Se<a;Se++)await ly({competitionId:d.id,userId:e.uid,ticketNumber:d.ticketsSold+Se+1});f({...d,ticketsSold:d.ticketsSold+a}),r(n-se),l(1),A(!0),setTimeout(()=>{A(!1)},3e3)}catch(Se){console.error("Error purchasing tickets:",Se),alert("Failed to purchase tickets. Please try again.")}finally{T(!1)}};if(m)return u.jsx(k1,{children:u.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:"Loading competition details..."})});if(v||!d)return u.jsxs(k1,{children:[u.jsxs(R_,{onClick:ae,children:[u.jsx(q_,{})," Back to Competitions"]}),u.jsx("div",{style:{textAlign:"center",padding:"3rem",color:"red"},children:v||"Competition not found"})]});d.totalTickets-d.ticketsSold;const W=d.status==="complete"||d.status==="cancelled";return zZ(d.endsAt),Math.min(Math.round(d.ticketsSold/d.totalTickets*100),100),u.jsxs(k1,{children:[u.jsxs(R_,{onClick:ae,children:[u.jsx(q_,{})," Back to Competitions"]}),u.jsxs(xZ,{children:[u.jsxs(TZ,{children:[d.imageUrl&&u.jsx(RZ,{imageUrl:d.imageUrl}),u.jsxs(EZ,{children:[u.jsxs(kZ,{children:[u.jsx(A1,{variant:"status",children:d.status==="active"?"Active":d.status==="ending"?"Ending Soon":d.status==="complete"?"Completed":"Cancelled"}),u.jsx(A1,{variant:"primary",children:d.difficulty}),d.status==="ending"&&u.jsx(A1,{variant:"limited",children:"Limited Time"})]}),u.jsx(AZ,{children:d.title}),u.jsx(_Z,{children:d.description})]}),u.jsx(jZ,{children:u.jsx(_1,{children:"Prize Details"})}),u.jsxs(P_,{children:[u.jsx(U_,{children:u.jsx(H_,{})}),u.jsxs(V_,{children:[u.jsx(B_,{children:d.prize}),u.jsxs(z_,{children:["Value: ",d.prizeValue]}),u.jsx($_,{children:"Win this amazing prize by participating in our raffle. Each ticket gives you a chance to win!"})]})]}),d.status==="complete"&&d.winner&&u.jsxs(M_,{children:[u.jsx(N_,{children:u.jsx(L_,{children:"Winner Announcement"})}),u.jsxs(O_,{children:[u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Winner:"}),u.jsx("div",{children:d.winner.username||d.winner.email})]}),d.winningTicket&&u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Winning Ticket:"}),u.jsxs("div",{children:["#",d.winningTicket]})]}),d.seed&&u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Verification Seed:"}),u.jsx("div",{style:{fontFamily:"monospace",backgroundColor:"rgba(0,0,0,0.2)",padding:"0.5rem",borderRadius:"0.25rem",wordBreak:"break-all"},children:d.seed})]})]})]}),u.jsxs($Z,{children:[u.jsx(_1,{children:"How It Works"}),u.jsxs("div",{children:[u.jsxs(j1,{children:[u.jsx(D1,{children:"1"}),u.jsxs(I1,{children:[u.jsx(R1,{children:"Purchase Tickets"}),u.jsx(M1,{children:"Use your credits to buy raffle tickets. Each ticket gives you one entry in the draw and increases your chances of winning. You can purchase multiple tickets for better odds."})]})]}),u.jsxs(j1,{children:[u.jsx(D1,{children:"2"}),u.jsxs(I1,{children:[u.jsx(R1,{children:"Fair Random Drawing"}),u.jsx(M1,{children:"When all tickets are sold or the competition end date is reached, a winner is selected using our provably fair system that ensures complete transparency and randomness in the selection process."})]})]}),u.jsxs(j1,{children:[u.jsx(D1,{children:"3"}),u.jsxs(I1,{children:[u.jsx(R1,{children:"Claim Your Prize"}),u.jsx(M1,{children:"Winners are notified immediately, and prizes are delivered directly to your account. No complicated claims process - just enjoy your winnings and good luck on your next entry!"})]})]})]})]}),u.jsx(F_,{}),u.jsx(_1,{children:"Prize Details"}),u.jsxs(P_,{children:[u.jsx(U_,{children:u.jsx(H_,{})}),u.jsxs(V_,{children:[u.jsx(B_,{children:d.prize}),u.jsxs(z_,{children:["Value: ",d.prizeValue]}),u.jsx($_,{children:"The winner will be contacted via email to arrange prize delivery."})]})]})]}),u.jsx(SZ,{children:u.jsxs(M_,{children:[u.jsxs(N_,{children:[u.jsx(L_,{children:"Purchase Tickets"}),u.jsx(CZ,{children:"Buy tickets to enter this competition. Each ticket gives you a chance to win."})]}),u.jsxs(O_,{children:[!W&&u.jsxs(LZ,{children:[u.jsxs(OZ,{children:[u.jsx(BZ,{})," Skill-Based Entry Question"]}),u.jsx(PZ,{children:d.triviaQuestion||"What game is RuneScape developed by?"}),j?u.jsx(G_,{correct:!0,children:"Correct! You may now purchase tickets."}):u.jsxs(u.Fragment,{children:[u.jsx(UZ,{placeholder:"Enter your answer",value:_,onChange:se=>L(se.target.value),disabled:j}),u.jsx(VZ,{onClick:Ae,disabled:!_.trim(),children:"Submit Answer"}),I&&!j&&u.jsx(G_,{correct:!1,children:$||"Incorrect answer. Please try again."})]})]}),W?u.jsxs(tJ,{children:[u.jsx(NZ,{}),u.jsxs(nJ,{children:["This competition has ",d.status==="complete"?"ended":"been cancelled","."]})]}):u.jsxs(u.Fragment,{children:[u.jsxs(FZ,{children:[u.jsx(qZ,{children:"Number of Tickets"}),u.jsxs(HZ,{children:[u.jsx(W_,{onClick:ke,disabled:a===1,children:"-"}),u.jsx(GZ,{children:a}),u.jsx(W_,{onClick:ne,disabled:a>=Math.min(Math.floor(n/d.ticketPrice),d.totalTickets-d.ticketsSold),children:"+"})]})]}),u.jsxs(WZ,{children:[u.jsx(YZ,{children:"Total Price"}),u.jsxs(KZ,{children:[a*d.ticketPrice," credits"]})]}),u.jsx(QZ,{onClick:H,disabled:!j||x||n<a*d.ticketPrice,children:x?"Processing...":C?"Purchase Complete!":"Buy Tickets"}),u.jsxs(XZ,{children:[u.jsxs(ZZ,{children:["Available Credits: ",u.jsx(JZ,{children:n})]}),u.jsx(eJ,{onClick:()=>i("/profile/credits"),children:"Add Credits"})]})]})]})]})})]}),d&&e&&u.jsx(wZ,{competition:d,onPurchaseComplete:Ie}),u.jsx(F_,{}),u.jsx(MZ,{children:"Share this competition"}),u.jsx(k7,{title:`Check out this RuneRaffle competition: ${d.title}`,url:window.location.href,description:`${d.description} Prize value: ${d.prizeValue} credits. Enter now!`})]})}const iJ=mi`
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
`,sJ=b.div`
  margin-bottom: 2rem;
  text-align: ${t=>t.centered?"center":"left"};
  animation: ${t=>t.withAnimation?iJ:"none"} 0.5s ease-out forwards;
`,oJ=b.h1`
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: hsl(var(--foreground));
  line-height: 1.2;
  
  @media (max-width: 768px) {
    font-size: 2rem;
  }
`,aJ=b.p`
  font-size: 1.125rem;
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  line-height: 1.6;
  max-width: 800px;
  margin-left: ${t=>{var e;return((e=t.style)==null?void 0:e.textAlign)==="center"?"auto":"0"}};
  margin-right: ${t=>{var e;return((e=t.style)==null?void 0:e.textAlign)==="center"?"auto":"0"}};
`,lJ=b.div`
  margin-top: 1.5rem;
`;function Pm({title:t,description:e,children:n,centered:r=!1,withAnimation:i=!0}){return u.jsxs(sJ,{centered:r,withAnimation:i,children:[u.jsx(oJ,{children:t}),e&&u.jsx(aJ,{style:{textAlign:r?"center":"left"},children:e}),n&&u.jsx(lJ,{children:n})]})}const cJ=mi`
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
`,Um=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,uJ=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 1.5rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,dJ=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  animation: ${cJ} 0.5s ease-out forwards;
  opacity: 0;
  
  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.1);
  }
`,hJ=b.div`
  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
  padding: 1.5rem;
  position: relative;
`,fJ=b.h3`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`,mJ=b.div`
  font-size: 0.875rem;
  color: rgba(255, 255, 255, 0.7);
`,pJ=b.div`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background-color: rgba(245, 158, 11, 0.2);
  color: rgb(245, 158, 11);
  font-weight: 600;
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
`,gJ=b.div`
  padding: 1.5rem;
`,yJ=b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: white;
`,vJ=b.p`
  font-size: 0.875rem;
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  line-height: 1.6;
`,bJ=b.div`
  margin-bottom: 1.5rem;
  padding: 0.75rem;
  background-color: rgba(245, 158, 11, 0.05);
  border-radius: 0.5rem;
  border: 1px dashed rgba(245, 158, 11, 0.2);
`,wJ=b.div`
  font-weight: 600;
  margin-bottom: 0.25rem;
`,xJ=b.div`
  font-weight: bold;
  color: rgb(245, 158, 11);
  font-size: 1.125rem;
  margin-bottom: 0.75rem;
`,TJ=b.div`
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
`,SJ=b.div`
  font-weight: 600;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,CJ=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,N1=b.div`
  display: flex;
  justify-content: space-between;
  font-size: 0.875rem;
  overflow: hidden;
  
  @media (max-width: 768px) {
    flex-direction: column;
    gap: 0.25rem;
  }
`,L1=b.span`
  color: rgba(255, 255, 255, 0.7);
`,O1=b.span`
  font-family: monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
  
  @media (max-width: 768px) {
    max-width: 100%;
  }
`,EJ=b.a`
  color: hsl(var(--primary));
  text-decoration: none;
  font-size: 0.875rem;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  margin-top: 0.5rem;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    text-decoration: underline;
    color: hsl(var(--primary) / 0.8);
  }
`,kJ=b.button`
  padding: 0.75rem 1.5rem;
  border-radius: 0.375rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  width: 100%;
  margin-top: 1rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
`,AJ=b(kJ)`
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  
  &:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }
`,_J=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM7.1 11.5L3.6 8.1L4.8 6.9L7.1 9.2L11.1 5.4L12.3 6.6L7.1 11.5Z",fill:"#10B981"})}),jJ=()=>u.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M8.5 3.5V1H1V11H11V3.5H8.5Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M8.5 7.5L11 5L8.5 2.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),DJ=t=>{if(!t||!t.toDate)return"Unknown date";const e=t.toDate(),n={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,n)};function IJ(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),[i,a]=k.useState(null),l=Pt();k.useEffect(()=>{(async()=>{try{r(!0);const g=await ay();e(g)}catch(g){console.error("Error fetching winners:",g),a("Failed to load winners. Please try again later.")}finally{r(!1)}})()},[]);const d=m=>{l(`/competition/${m}`)},f=m=>{l(`/verification/${m}`)};return n?u.jsxs(Um,{children:[u.jsx(Pm,{title:"Recent Winners",description:"Loading winner information...",centered:!0}),u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"3rem 0"},children:u.jsx(ia,{size:80})})]}):i?u.jsxs(Um,{children:[u.jsx(Pm,{title:"Recent Winners",centered:!0}),u.jsx(Oi,{withGlow:!0,children:u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("p",{style:{color:"hsl(var(--destructive))",marginBottom:"1.5rem"},children:i}),u.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.5rem 1rem",backgroundColor:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Try Again"})]})})]}):t.length===0?u.jsx(Um,{children:u.jsx(Pm,{title:"Recent Winners",description:"No completed competitions yet. Check back soon!",centered:!0})}):u.jsxs(Um,{children:[u.jsx(Pm,{title:"Recent Winners",description:"Congratulations to all our past competition winners! Browse through the list of winners and see what prizes they've taken home.",centered:!0}),u.jsx(Oi,{withGlow:!0,children:u.jsx(uJ,{children:t.map((m,g)=>{var v;return u.jsxs(dJ,{style:{animationDelay:`${g*.1}s`},children:[u.jsxs(hJ,{children:[u.jsx(fJ,{children:((v=m.winner)==null?void 0:v.username)||"Anonymous Winner"}),u.jsx(mJ,{children:DJ(m.completedAt)}),u.jsx(pJ,{children:"Winner"})]}),u.jsxs(gJ,{children:[u.jsx(yJ,{children:m.title}),u.jsx(vJ,{children:m.description.length>100?m.description.substring(0,100)+"...":m.description}),u.jsxs(bJ,{children:[u.jsx(wJ,{children:"Prize Won:"}),u.jsx(xJ,{children:m.prize}),u.jsxs("div",{children:["Valued at: ",m.prizeValue]})]}),u.jsxs(TJ,{children:[u.jsxs(SJ,{children:[u.jsx(_J,{})," Verified Fair Draw"]}),u.jsxs(CJ,{children:[u.jsxs(N1,{children:[u.jsx(L1,{children:"Draw Seed:"}),u.jsx(O1,{children:m.seed||"N/A"})]}),u.jsxs(N1,{children:[u.jsx(L1,{children:"Total Tickets:"}),u.jsx(O1,{children:m.ticketsSold})]}),u.jsxs(N1,{children:[u.jsx(L1,{children:"Winning Ticket:"}),u.jsx(O1,{children:m.winningTicket||"N/A"})]})]}),u.jsxs(EJ,{onClick:()=>f(m.id),children:["Verify Draw Results ",u.jsx(jJ,{})]})]}),u.jsx(AJ,{onClick:()=>d(m.id),children:"View Competition Details"})]})]},m.id)})})})]})}const r5=k.createContext({});function i5(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const s5=typeof window<"u",A7=s5?k.useLayoutEffect:k.useEffect,hy=k.createContext(null),o5=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class RJ extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function MJ({children:t,isPresent:e,anchorX:n}){const r=k.useId(),i=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(o5);return k.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:g,right:v}=a.current;if(e||!i.current||!d||!f)return;const w=n==="left"?`left: ${g}`:`right: ${v}`;i.current.dataset.motionPopId=r;const x=document.createElement("style");return l&&(x.nonce=l),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${w}px !important;
            top: ${m}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[e]),u.jsx(RJ,{isPresent:e,childRef:i,sizeRef:a,children:k.cloneElement(t,{ref:i})})}const NJ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:d})=>{const f=i5(LJ),m=k.useId(),g=k.useCallback(w=>{f.set(w,!0);for(const x of f.values())if(!x)return;r&&r()},[f,r]),v=k.useMemo(()=>({id:m,initial:e,isPresent:n,custom:i,onExitComplete:g,register:w=>(f.set(w,!1),()=>f.delete(w))}),a?[Math.random(),g]:[n,g]);return k.useMemo(()=>{f.forEach((w,x)=>f.set(x,!1))},[n]),k.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=u.jsx(MJ,{isPresent:n,anchorX:d,children:t})),u.jsx(hy.Provider,{value:v,children:t})};function LJ(){return new Map}function _7(t=!0){const e=k.useContext(hy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const l=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const Vm=t=>t.key||"";function Y_(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const OJ=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:d="left"})=>{const[f,m]=_7(l),g=k.useMemo(()=>Y_(t),[t]),v=l&&!f?[]:g.map(Vm),w=k.useRef(!0),x=k.useRef(g),T=i5(()=>new Map),[C,A]=k.useState(g),[_,L]=k.useState(g);A7(()=>{w.current=!1,x.current=g;for(let j=0;j<_.length;j++){const M=Vm(_[j]);v.includes(M)?T.delete(M):T.get(M)!==!0&&T.set(M,!1)}},[_,v.length,v.join("-")]);const I=[];if(g!==C){let j=[...g];for(let M=0;M<_.length;M++){const $=_[M],Q=Vm($);v.includes(Q)||(j.splice(M,0,$),I.push($))}return a==="wait"&&I.length&&(j=I),L(Y_(j)),A(g),null}const{forceRender:q}=k.useContext(r5);return u.jsx(u.Fragment,{children:_.map(j=>{const M=Vm(j),$=l&&!f?!1:g===_||v.includes(M),Q=()=>{if(T.has(M))T.set(M,!0);else return;let ie=!0;T.forEach(he=>{he||(ie=!1)}),ie&&(q==null||q(),L(x.current),l&&(m==null||m()),r&&r())};return u.jsx(NJ,{isPresent:$,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,onExitComplete:$?void 0:Q,anchorX:d,children:j},M)})})};function a5(t,e){t.indexOf(e)===-1&&t.push(e)}function l5(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let j7=()=>{};const PJ={useManualTiming:!1};function c5(t){let e;return()=>(e===void 0&&(e=t()),e)}const Sr=t=>t,oh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class u5{constructor(){this.subscriptions=[]}add(e){return a5(this.subscriptions,e),()=>l5(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const li=t=>t*1e3,ci=t=>t/1e3;function D7(t,e){return e?t*(1e3/e):0}const UJ=c5(()=>window.ScrollTimeline!==void 0);class VJ{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(UJ()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class BJ extends VJ{then(e,n){return this.finished.finally(e).then(()=>{})}}const K_={value:null},d5=t=>Array.isArray(t)&&typeof t[0]=="number",zJ={};function $J(t,e){const n=c5(t);return()=>zJ[e]??n()}const ah=$J(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),I7=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(a/(i-1))+", ";return`linear(${r.substring(0,r.length-2)})`},md=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,_w={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:md([0,.65,.55,1]),circOut:md([.55,0,1,.45]),backIn:md([.31,.01,.66,-.59]),backOut:md([.33,1.53,.69,.99])};function R7(t,e){if(t)return typeof t=="function"&&ah()?I7(t,e):d5(t)?md(t):Array.isArray(t)?t.map(n=>R7(n,e)||_w.easeOut):_w[t]}function FJ(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:d="easeInOut",times:f}={},m=void 0){const g={[e]:n};f&&(g.offset=f);const v=R7(d,i);return Array.isArray(v)&&(g.easing=v),t.animate(g,{delay:r,duration:i,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:m})}function h5(t){return typeof t=="function"&&"applyToOptions"in t}function f5(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Wp=2e4;function m5(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Wp;)e+=n,r=t.next(e);return e>=Wp?1/0:e}function qJ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(m5(r),Wp);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:ci(i)}}function M7(t){return!!(typeof t=="function"&&ah()||!t||typeof t=="string"&&(t in _w||ah())||d5(t)||Array.isArray(t)&&t.every(M7))}function Q_(t,e){t.timeline=e,t.onfinish=null}const Bm=["read","resolveKeyframes","update","preRender","render","postRender"];function HJ(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1},f=0;function m(v){l.has(v)&&(g.schedule(v),t()),f++,v(d)}const g={schedule:(v,w=!1,x=!1)=>{const C=x&&i?n:r;return w&&l.add(v),C.has(v)||C.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(d=v,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(m),e&&K_.value&&K_.value.frameloop[e].push(f),f=0,n.clear(),i=!1,a&&(a=!1,g.process(v))}};return g}const GJ=40;function N7(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Bm.reduce((_,L)=>(_[L]=HJ(a,e?L:void 0),_),{}),{read:d,resolveKeyframes:f,update:m,preRender:g,render:v,postRender:w}=l,x=()=>{const _=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,GJ),1),i.timestamp=_,i.isProcessing=!0,d.process(i),f.process(i),m.process(i),g.process(i),v.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},T=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Bm.reduce((_,L)=>{const I=l[L];return _[L]=(q,j=!1,M=!1)=>(n||T(),I.schedule(q,j,M)),_},{}),cancel:_=>{for(let L=0;L<Bm.length;L++)l[Bm[L]].cancel(_)},state:i,steps:l}}const{schedule:at,cancel:Ks,state:on,steps:P1}=N7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0),{schedule:p5}=N7(queueMicrotask,!1);let hp;function WJ(){hp=void 0}const ui={now:()=>(hp===void 0&&ui.set(on.isProcessing||PJ.useManualTiming?on.timestamp:performance.now()),hp),set:t=>{hp=t,queueMicrotask(WJ)}},Ir={x:!1,y:!1};function L7(){return Ir.x||Ir.y}function YJ(t){return t==="x"||t==="y"?Ir[t]?null:(Ir[t]=!0,()=>{Ir[t]=!1}):Ir.x||Ir.y?null:(Ir.x=Ir.y=!0,()=>{Ir.x=Ir.y=!1})}function KJ(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function O7(t,e){const n=KJ(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function X_(t){return!(t.pointerType==="touch"||L7())}function QJ(t,e,n={}){const[r,i,a]=O7(t,n),l=d=>{if(!X_(d))return;const{target:f}=d,m=e(f,d);if(typeof m!="function"||!f)return;const g=v=>{X_(v)&&(m(v),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,i)};return r.forEach(d=>{d.addEventListener("pointerenter",l,i)}),a}const P7=(t,e)=>e?t===e?!0:P7(t,e.parentElement):!1,g5=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,XJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZJ(t){return XJ.has(t.tagName)||t.tabIndex!==-1}const pd=new WeakSet;function Z_(t){return e=>{e.key==="Enter"&&t(e)}}function U1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JJ=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Z_(()=>{if(pd.has(n))return;U1(n,"down");const i=Z_(()=>{U1(n,"up")}),a=()=>U1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function J_(t){return g5(t)&&!L7()}function eee(t,e,n={}){const[r,i,a]=O7(t,n),l=d=>{const f=d.currentTarget;if(!J_(d)||pd.has(f))return;pd.add(f);const m=e(f,d),g=(x,T)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",w),!(!J_(x)||!pd.has(f))&&(pd.delete(f),typeof m=="function"&&m(x,{success:T}))},v=x=>{g(x,f===window||f===document||n.useGlobalTarget||P7(f,x.target))},w=x=>{g(x,!1)};window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",w,i)};return r.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",l,i),d instanceof HTMLElement&&(d.addEventListener("focus",m=>JJ(m,i)),!ZJ(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),a}const e3=30,tee=t=>!isNaN(parseFloat(t));class nee{constructor(e,n={}){this.version="12.6.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=ui.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ui.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tee(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new u5);const r=this.events[e].add(n);return e==="change"?()=>{r(),at.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ui.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>e3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,e3);return D7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lh(t,e){return new nee(t,e)}const U7=k.createContext({strict:!1}),t3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pc={};for(const t in t3)pc[t]={isEnabled:e=>t3[t].some(n=>!!e[n])};function ree(t){for(const e in t)pc[e]={...pc[e],...t[e]}}const iee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||iee.has(t)}let V7=t=>!Yp(t);function see(t){t&&(V7=e=>e.startsWith("on")?!Yp(e):t(e))}try{see(require("@emotion/is-prop-valid").default)}catch{}function oee(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(V7(i)||n===!0&&Yp(i)||!e&&!Yp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function aee(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const fy=k.createContext({});function my(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ch(t){return typeof t=="string"||Array.isArray(t)}const y5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],v5=["initial",...y5];function py(t){return my(t.animate)||v5.some(e=>ch(t[e]))}function B7(t){return!!(py(t)||t.variants)}function lee(t,e){if(py(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ch(n)?n:void 0,animate:ch(r)?r:void 0}}return t.inherit!==!1?e:{}}function cee(t){const{initial:e,animate:n}=lee(t,k.useContext(fy));return k.useMemo(()=>({initial:e,animate:n}),[n3(e),n3(n)])}function n3(t){return Array.isArray(t)?t.join(" "):t}const uee=Symbol.for("motionComponentSymbol");function Bl(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function dee(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Bl(n)&&(n.current=r))},[e])}const b5=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hee="framerAppearId",z7="data-"+b5(hee),$7=k.createContext({});function fee(t,e,n,r,i){var C,A;const{visualElement:a}=k.useContext(fy),l=k.useContext(U7),d=k.useContext(hy),f=k.useContext(o5).reducedMotion,m=k.useRef(null);r=r||l.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:a,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,v=k.useContext($7);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&mee(m.current,n,i,v);const w=k.useRef(!1);k.useInsertionEffect(()=>{g&&w.current&&g.update(n,d)});const x=n[z7],T=k.useRef(!!x&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,x))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,x)));return A7(()=>{g&&(w.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),p5.render(g.render),T.current&&g.animationState&&g.animationState.animateChanges())}),k.useEffect(()=>{g&&(!T.current&&g.animationState&&g.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,x)}),T.current=!1))}),g}function mee(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:d,layoutScroll:f,layoutRoot:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:F7(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||d&&Bl(d),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:m})}function F7(t){if(t)return t.options.allowProjection!==!1?t.projection:F7(t.parent)}function pee({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&ree(t);function a(d,f){let m;const g={...k.useContext(o5),...d,layoutId:gee(d)},{isStatic:v}=g,w=cee(d),x=r(d,v);if(!v&&s5){yee();const T=vee(g);m=T.MeasureLayout,w.visualElement=fee(i,x,g,e,T.ProjectionNode)}return u.jsxs(fy.Provider,{value:w,children:[m&&w.visualElement?u.jsx(m,{visualElement:w.visualElement,...g}):null,n(i,d,dee(x,w.visualElement,f),x,v,w.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=k.forwardRef(a);return l[uee]=i,l}function gee({layoutId:t}){const e=k.useContext(r5).id;return e&&t!==void 0?e+"-"+t:t}function yee(t,e){k.useContext(U7).strict}function vee(t){const{drag:e,layout:n}=pc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const q7=t=>e=>typeof e=="string"&&e.startsWith(t),w5=q7("--"),bee=q7("var(--"),x5=t=>bee(t)?wee.test(t.split("/*")[0].trim()):!1,wee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uh={};function xee(t){for(const e in t)uh[e]=t[e],w5(e)&&(uh[e].isCSSVariable=!0)}const Oc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ma=new Set(Oc);function H7(t,{layout:e,layoutId:n}){return Ma.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!uh[t]||t==="opacity")}const xn=t=>!!(t&&t.getVelocity),G7=(t,e)=>e&&typeof t=="number"?e.transform(t):t,$i=(t,e,n)=>n>e?e:n<t?t:n,Pc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},dh={...Pc,transform:t=>$i(0,1,t)},zm={...Pc,default:1},Gh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rs=Gh("deg"),di=Gh("%"),xe=Gh("px"),Tee=Gh("vh"),See=Gh("vw"),r3={...di,parse:t=>di.parse(t)/100,transform:t=>di.transform(t*100)},Cee={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,backgroundPositionX:xe,backgroundPositionY:xe},Eee={rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:zm,scaleX:zm,scaleY:zm,scaleZ:zm,skew:Rs,skewX:Rs,skewY:Rs,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:dh,originX:r3,originY:r3,originZ:xe},i3={...Pc,transform:Math.round},T5={...Cee,...Eee,zIndex:i3,size:xe,fillOpacity:dh,strokeOpacity:dh,numOctaves:i3},kee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Aee=Oc.length;function _ee(t,e,n){let r="",i=!0;for(let a=0;a<Aee;a++){const l=Oc[a],d=t[l];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(l.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const m=G7(d,T5[l]);if(!f){i=!1;const g=kee[l]||l;r+=`${g}(${m}) `}n&&(e[l]=m)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function S5(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,d=!1;for(const f in e){const m=e[f];if(Ma.has(f)){l=!0;continue}else if(w5(f)){i[f]=m;continue}else{const g=G7(m,T5[f]);f.startsWith("origin")?(d=!0,a[f]=g):r[f]=g}}if(e.transform||(l||n?r.transform=_ee(e,t.transform,n):r.transform&&(r.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:g=0}=a;r.transformOrigin=`${f} ${m} ${g}`}}const C5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W7(t,e,n){for(const r in e)!xn(e[r])&&!H7(r,n)&&(t[r]=e[r])}function jee({transformTemplate:t},e){return k.useMemo(()=>{const n=C5();return S5(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Dee(t,e){const n=t.style||{},r={};return W7(r,n,t),Object.assign(r,jee(t,e)),r}function Iee(t,e){const n={},r=Dee(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Ree=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function E5(t){return typeof t!="string"||t.includes("-")?!1:!!(Ree.indexOf(t)>-1||/[A-Z]/u.test(t))}const Mee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Nee={offset:"strokeDashoffset",array:"strokeDasharray"};function Lee(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Mee:Nee;t[a.offset]=xe.transform(-r);const l=xe.transform(e),d=xe.transform(n);t[a.array]=`${l} ${d}`}function s3(t,e,n){return typeof t=="string"?t:xe.transform(e+n*t)}function Oee(t,e,n){const r=s3(e,t.x,t.width),i=s3(n,t.y,t.height);return`${r} ${i}`}function k5(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:d=1,pathOffset:f=0,...m},g,v){if(S5(t,m,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:x,dimensions:T}=t;w.transform&&(T&&(x.transform=w.transform),delete w.transform),T&&(i!==void 0||a!==void 0||x.transform)&&(x.transformOrigin=Oee(T,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(w.x=e),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),l!==void 0&&Lee(w,l,d,f,!1)}const Y7=()=>({...C5(),attrs:{}}),A5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Pee(t,e,n,r){const i=k.useMemo(()=>{const a=Y7();return k5(a,e,A5(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};W7(a,t.style,t),i.style={...a,...i.style}}return i}function Uee(t=!1){return(n,r,i,{latestValues:a},l)=>{const f=(E5(n)?Pee:Iee)(r,a,l,n),m=oee(r,typeof n=="string",t),g=n!==k.Fragment?{...m,...f,ref:i}:{},{children:v}=r,w=k.useMemo(()=>xn(v)?v.get():v,[v]);return k.createElement(n,{...g,children:w})}}function o3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function _5(t,e,n,r){if(typeof e=="function"){const[i,a]=o3(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=o3(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const jw=t=>Array.isArray(t),Vee=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Bee=t=>jw(t)?t[t.length-1]||0:t;function fp(t){const e=xn(t)?t.get():t;return Vee(e)?e.toValue():e}function zee({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const l={latestValues:$ee(r,i,a,t),renderState:e()};return n&&(l.onMount=d=>n({props:r,current:d,...l}),l.onUpdate=d=>n(d)),l}const K7=t=>(e,n)=>{const r=k.useContext(fy),i=k.useContext(hy),a=()=>zee(t,e,r,i);return n?a():i5(a)};function $ee(t,e,n,r){const i={},a=r(t,{});for(const w in a)i[w]=fp(a[w]);let{initial:l,animate:d}=t;const f=py(t),m=B7(t);e&&m&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?d:l;if(v&&typeof v!="boolean"&&!my(v)){const w=Array.isArray(v)?v:[v];for(let x=0;x<w.length;x++){const T=_5(t,w[x]);if(T){const{transitionEnd:C,transition:A,..._}=T;for(const L in _){let I=_[L];if(Array.isArray(I)){const q=g?I.length-1:0;I=I[q]}I!==null&&(i[L]=I)}for(const L in C)i[L]=C[L]}}}return i}function j5(t,e,n){var a;const{style:r}=t,i={};for(const l in r)(xn(r[l])||e.style&&xn(e.style[l])||H7(l,t)||((a=n==null?void 0:n.getValue(l))==null?void 0:a.liveStyle)!==void 0)&&(i[l]=r[l]);return i}const Fee={useVisualState:K7({scrapeMotionValuesFromProps:j5,createRenderState:C5})};function Q7(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function X7(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const Z7=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function J7(t,e,n,r){X7(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Z7.has(i)?i:b5(i),e.attrs[i])}function eM(t,e,n){const r=j5(t,e,n);for(const i in t)if(xn(t[i])||xn(e[i])){const a=Oc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const a3=["x","y","width","height","cx","cy","r"],qee={useVisualState:K7({scrapeMotionValuesFromProps:eM,createRenderState:Y7,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const d in i)if(Ma.has(d)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let d=0;d<a3.length;d++){const f=a3[d];t[f]!==e[f]&&(l=!0)}l&&at.read(()=>{Q7(n,r),at.render(()=>{k5(r,i,A5(n.tagName),t.transformTemplate),J7(n,r)})})}})};function Hee(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...E5(r)?qee:Fee,preloadedFeatures:t,useRender:Uee(i),createVisualElement:e,Component:r};return pee(l)}}function hh(t,e,n){const r=t.getProps();return _5(r,e,n!==void 0?n:r.custom,t)}const tM=new Set(["width","height","top","left","right","bottom",...Oc]);function Gee(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,lh(n))}function Wee(t,e){const n=hh(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const d=Bee(a[l]);Gee(t,l,d)}}function Yee(t){return!!(xn(t)&&t.add)}function Dw(t,e){const n=t.getValue("willChange");if(Yee(n))return n.add(e)}function nM(t){return t.props[z7]}const rM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Kee=1e-7,Qee=12;function Xee(t,e,n,r,i){let a,l,d=0;do l=e+(n-e)/2,a=rM(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>Kee&&++d<Qee);return l}function Wh(t,e,n,r){if(t===e&&n===r)return Sr;const i=a=>Xee(a,0,1,t,n);return a=>a===0||a===1?a:rM(i(a),e,r)}const iM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sM=t=>e=>1-t(1-e),oM=Wh(.33,1.53,.69,.99),D5=sM(oM),aM=iM(D5),lM=t=>(t*=2)<1?.5*D5(t):.5*(2-Math.pow(2,-10*(t-1))),I5=t=>1-Math.sin(Math.acos(t)),cM=sM(I5),uM=iM(I5),dM=t=>/^0[^.\s]+$/u.test(t);function Zee(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||dM(t):!0}const kd=t=>Math.round(t*1e5)/1e5,R5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Jee(t){return t==null}const ete=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,M5=(t,e)=>n=>!!(typeof n=="string"&&ete.test(n)&&n.startsWith(t)||e&&!Jee(n)&&Object.prototype.hasOwnProperty.call(n,e)),hM=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,d]=r.match(R5);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:d!==void 0?parseFloat(d):1}},tte=t=>$i(0,255,t),V1={...Pc,transform:t=>Math.round(tte(t))},Xo={test:M5("rgb","red"),parse:hM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+V1.transform(t)+", "+V1.transform(e)+", "+V1.transform(n)+", "+kd(dh.transform(r))+")"};function nte(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Iw={test:M5("#"),parse:nte,transform:Xo.transform},zl={test:M5("hsl","hue"),parse:hM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+di.transform(kd(e))+", "+di.transform(kd(n))+", "+kd(dh.transform(r))+")"},wn={test:t=>Xo.test(t)||Iw.test(t)||zl.test(t),parse:t=>Xo.test(t)?Xo.parse(t):zl.test(t)?zl.parse(t):Iw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xo.transform(t):zl.transform(t)},rte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ite(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(R5))==null?void 0:e.length)||0)+(((n=t.match(rte))==null?void 0:n.length)||0)>0}const fM="number",mM="color",ste="var",ote="var(",l3="${}",ate=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const d=e.replace(ate,f=>(wn.test(f)?(r.color.push(a),i.push(mM),n.push(wn.parse(f))):f.startsWith(ote)?(r.var.push(a),i.push(ste),n.push(f)):(r.number.push(a),i.push(fM),n.push(parseFloat(f))),++a,l3)).split(l3);return{values:n,split:d,indexes:r,types:i}}function pM(t){return fh(t).values}function gM(t){const{split:e,types:n}=fh(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const d=n[l];d===fM?a+=kd(i[l]):d===mM?a+=wn.transform(i[l]):a+=i[l]}return a}}const lte=t=>typeof t=="number"?0:t;function cte(t){const e=pM(t);return gM(t)(e.map(lte))}const Qs={test:ite,parse:pM,createTransformer:gM,getAnimatableNone:cte},ute=new Set(["brightness","contrast","saturate","opacity"]);function dte(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(R5)||[];if(!r)return t;const i=n.replace(r,"");let a=ute.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const hte=/\b([a-z-]*)\(.*?\)/gu,Rw={...Qs,getAnimatableNone:t=>{const e=t.match(hte);return e?e.map(dte).join(" "):t}},fte={...T5,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:Rw,WebkitFilter:Rw},yM=t=>fte[t];function vM(t,e){let n=yM(t);return n!==Rw&&(n=Qs),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const mte=new Set(["auto","none","0"]);function pte(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!mte.has(a)&&fh(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=vM(n,i)}const Zo=t=>t*180/Math.PI,Mw=t=>{const e=Zo(Math.atan2(t[1],t[0]));return Nw(e)},gte={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Mw,rotateZ:Mw,skewX:t=>Zo(Math.atan(t[1])),skewY:t=>Zo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Nw=t=>(t=t%360,t<0&&(t+=360),t),c3=Mw,u3=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),d3=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),yte={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u3,scaleY:d3,scale:t=>(u3(t)+d3(t))/2,rotateX:t=>Nw(Zo(Math.atan2(t[6],t[5]))),rotateY:t=>Nw(Zo(Math.atan2(-t[2],t[0]))),rotateZ:c3,rotate:c3,skewX:t=>Zo(Math.atan(t[4])),skewY:t=>Zo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function h3(t){return t.includes("scale")?1:0}function Lw(t,e){if(!t||t==="none")return h3(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=yte,i=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gte,i=d}if(!i)return h3(e);const a=r[e],l=i[1].split(",").map(bte);return typeof a=="function"?a(l):l[a]}const vte=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Lw(n,e)};function bte(t){return parseFloat(t.trim())}const f3=t=>t===Pc||t===xe,wte=new Set(["x","y","z"]),xte=Oc.filter(t=>!wte.has(t));function Tte(t){const e=[];return xte.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const gc={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Lw(e,"x"),y:(t,{transform:e})=>Lw(e,"y")};gc.translateX=gc.x;gc.translateY=gc.y;const sa=new Set;let Ow=!1,Pw=!1;function bM(){if(Pw){const t=Array.from(sa).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Tte(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{var d;(d=r.getValue(a))==null||d.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Pw=!1,Ow=!1,sa.forEach(t=>t.complete()),sa.clear()}function wM(){sa.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Pw=!0)})}function Ste(){wM(),bM()}class N5{constructor(e,n,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(sa.add(this),Ow||(Ow=!0,at.read(wM),at.resolveKeyframes(bM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),d=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const f=r.readValue(n,d);f!=null&&(e[0]=f)}e[0]===void 0&&(e[0]=d),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),sa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,sa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const xM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Cte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ete(t){const e=Cte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function TM(t,e,n=1){const[r,i]=Ete(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return xM(l)?parseFloat(l):l}return x5(i)?TM(i,e,n+1):i}const SM=t=>e=>e.test(t),kte={test:t=>t==="auto",parse:t=>t},CM=[Pc,xe,di,Rs,See,Tee,kte],m3=t=>CM.find(SM(t));class EM extends N5{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),x5(m))){const g=TM(m,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!tM.has(r)||e.length!==2)return;const[i,a]=e,l=m3(i),d=m3(a);if(l!==d)if(f3(l)&&f3(d))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Zee(e[i])&&r.push(i);r.length&&pte(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var d;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=gc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([f,m])=>{e.getValue(f).set(m)}),this.resolveNoneKeyframes()}}const p3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Qs.test(t)||t==="0")&&!t.startsWith("url("));function Ate(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _te(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=p3(i,e),d=p3(a,e);return!l||!d?!1:Ate(t)||(n==="spring"||h5(n))&&r}const jte=t=>t!==null;function gy(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(jte),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const Dte=40;class kM{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...d}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ui.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,...d},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Dte?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Ste(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ui.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:d,onUpdate:f,isGenerator:m}=this.options;if(!m&&!_te(e,r,i,a))if(l)this.options.duration=0;else{f&&f(gy(e,this.options,n)),d&&d(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const yt=(t,e,n)=>t+(e-t)*n;function B1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Ite({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;i=B1(f,d,t+1/3),a=B1(f,d,t),l=B1(f,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Kp(t,e){return n=>n>0?e:t}const z1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Rte=[Iw,Xo,zl],Mte=t=>Rte.find(e=>e.test(t));function g3(t){const e=Mte(t);if(!e)return!1;let n=e.parse(t);return e===zl&&(n=Ite(n)),n}const y3=(t,e)=>{const n=g3(t),r=g3(e);if(!n||!r)return Kp(t,e);const i={...n};return a=>(i.red=z1(n.red,r.red,a),i.green=z1(n.green,r.green,a),i.blue=z1(n.blue,r.blue,a),i.alpha=yt(n.alpha,r.alpha,a),Xo.transform(i))},Nte=(t,e)=>n=>e(t(n)),Yh=(...t)=>t.reduce(Nte),Uw=new Set(["none","hidden"]);function Lte(t,e){return Uw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ote(t,e){return n=>yt(t,e,n)}function L5(t){return typeof t=="number"?Ote:typeof t=="string"?x5(t)?Kp:wn.test(t)?y3:Vte:Array.isArray(t)?AM:typeof t=="object"?wn.test(t)?y3:Pte:Kp}function AM(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>L5(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function Pte(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=L5(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Ute(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][r[a]],d=t.values[l]??0;n[i]=d,r[a]++}return n}const Vte=(t,e)=>{const n=Qs.createTransformer(e),r=fh(t),i=fh(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Uw.has(t)&&!i.values.length||Uw.has(e)&&!r.values.length?Lte(t,e):Yh(AM(Ute(r,i),i.values),n):Kp(t,e)};function _M(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?yt(t,e,n):L5(t)(t,e)}const Bte=5;function jM(t,e,n){const r=Math.max(e-Bte,0);return D7(n-t(r),e-r)}const xt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},v3=.001;function zte({duration:t=xt.duration,bounce:e=xt.bounce,velocity:n=xt.velocity,mass:r=xt.mass}){let i,a,l=1-e;l=$i(xt.minDamping,xt.maxDamping,l),t=$i(xt.minDuration,xt.maxDuration,ci(t)),l<1?(i=m=>{const g=m*l,v=g*t,w=g-n,x=Vw(m,l),T=Math.exp(-v);return v3-w/x*T},a=m=>{const v=m*l*t,w=v*n+n,x=Math.pow(l,2)*Math.pow(m,2)*t,T=Math.exp(-v),C=Vw(Math.pow(m,2),l);return(-i(m)+v3>0?-1:1)*((w-x)*T)/C}):(i=m=>{const g=Math.exp(-m*t),v=(m-n)*t+1;return-.001+g*v},a=m=>{const g=Math.exp(-m*t),v=(n-m)*(t*t);return g*v});const d=5/t,f=Fte(i,a,d);if(t=li(t),isNaN(f))return{stiffness:xt.stiffness,damping:xt.damping,duration:t};{const m=Math.pow(f,2)*r;return{stiffness:m,damping:l*2*Math.sqrt(r*m),duration:t}}}const $te=12;function Fte(t,e,n){let r=n;for(let i=1;i<$te;i++)r=r-t(r)/e(r);return r}function Vw(t,e){return t*Math.sqrt(1-e*e)}const qte=["duration","bounce"],Hte=["stiffness","damping","mass"];function b3(t,e){return e.some(n=>t[n]!==void 0)}function Gte(t){let e={velocity:xt.velocity,stiffness:xt.stiffness,damping:xt.damping,mass:xt.mass,isResolvedFromDuration:!1,...t};if(!b3(t,Hte)&&b3(t,qte))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*$i(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:xt.mass,stiffness:i,damping:a}}else{const n=zte(t);e={...e,...n,mass:xt.mass},e.isResolvedFromDuration=!0}return e}function Qp(t=xt.visualDuration,e=xt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],d={done:!1,value:a},{stiffness:f,damping:m,mass:g,duration:v,velocity:w,isResolvedFromDuration:x}=Gte({...n,velocity:-ci(n.velocity||0)}),T=w||0,C=m/(2*Math.sqrt(f*g)),A=l-a,_=ci(Math.sqrt(f/g)),L=Math.abs(A)<5;r||(r=L?xt.restSpeed.granular:xt.restSpeed.default),i||(i=L?xt.restDelta.granular:xt.restDelta.default);let I;if(C<1){const j=Vw(_,C);I=M=>{const $=Math.exp(-C*_*M);return l-$*((T+C*_*A)/j*Math.sin(j*M)+A*Math.cos(j*M))}}else if(C===1)I=j=>l-Math.exp(-_*j)*(A+(T+_*A)*j);else{const j=_*Math.sqrt(C*C-1);I=M=>{const $=Math.exp(-C*_*M),Q=Math.min(j*M,300);return l-$*((T+C*_*A)*Math.sinh(Q)+j*A*Math.cosh(Q))/j}}const q={calculatedDuration:x&&v||null,next:j=>{const M=I(j);if(x)d.done=j>=v;else{let $=0;C<1&&($=j===0?li(T):jM(I,j,M));const Q=Math.abs($)<=r,ie=Math.abs(l-M)<=i;d.done=Q&&ie}return d.value=d.done?l:M,d},toString:()=>{const j=Math.min(m5(q),Wp),M=I7($=>q.next(j*$).value,j,30);return j+"ms "+M},toTransition:()=>{}};return q}Qp.applyToOptions=t=>{const e=qJ(t,100,Qp);return t.ease=ah()?e.ease:"easeOut",t.duration=li(e.duration),t.type="keyframes",t};function w3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:d,max:f,restDelta:m=.5,restSpeed:g}){const v=t[0],w={done:!1,value:v},x=Q=>d!==void 0&&Q<d||f!==void 0&&Q>f,T=Q=>d===void 0?f:f===void 0||Math.abs(d-Q)<Math.abs(f-Q)?d:f;let C=n*e;const A=v+C,_=l===void 0?A:l(A);_!==A&&(C=_-v);const L=Q=>-C*Math.exp(-Q/r),I=Q=>_+L(Q),q=Q=>{const ie=L(Q),he=I(Q);w.done=Math.abs(ie)<=m,w.value=w.done?_:he};let j,M;const $=Q=>{x(w.value)&&(j=Q,M=Qp({keyframes:[w.value,T(w.value)],velocity:jM(I,Q,w.value),damping:i,stiffness:a,restDelta:m,restSpeed:g}))};return $(0),{calculatedDuration:null,next:Q=>{let ie=!1;return!M&&j===void 0&&(ie=!0,q(Q),$(Q)),j!==void 0&&Q>=j?M.next(Q-j):(!ie&&q(Q),w)}}}const Wte=Wh(.42,0,1,1),Yte=Wh(0,0,.58,1),DM=Wh(.42,0,.58,1),Kte=t=>Array.isArray(t)&&typeof t[0]!="number",Qte={linear:Sr,easeIn:Wte,easeInOut:DM,easeOut:Yte,circIn:I5,circInOut:uM,circOut:cM,backIn:D5,backInOut:aM,backOut:oM,anticipate:lM},x3=t=>{if(d5(t)){j7(t.length===4);const[e,n,r,i]=t;return Wh(e,n,r,i)}else if(typeof t=="string")return Qte[t];return t};function Xte(t,e,n){const r=[],i=n||_M,a=t.length-1;for(let l=0;l<a;l++){let d=i(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Sr:e;d=Yh(f,d)}r.push(d)}return r}function Zte(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(j7(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=Xte(e,r,i),f=d.length,m=g=>{if(l&&g<t[0])return e[0];let v=0;if(f>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const w=oh(t[v],t[v+1],g);return d[v](w)};return n?g=>m($i(t[0],t[a-1],g)):m}function Jte(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=oh(0,e,r);t.push(yt(n,1,i))}}function ene(t){const e=[0];return Jte(e,t.length-1),e}function tne(t,e){return t.map(n=>n*e)}function nne(t,e){return t.map(()=>e||DM).splice(0,t.length-1)}function Xp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Kte(r)?r.map(x3):x3(r),a={done:!1,value:e[0]},l=tne(n&&n.length===e.length?n:ene(e),t),d=Zte(l,e,{ease:Array.isArray(i)?i:nne(e,i)});return{calculatedDuration:t,next:f=>(a.value=d(f),a.done=f>=t,a)}}const rne=t=>{const e=({timestamp:n})=>t(n);return{start:()=>at.update(e,!0),stop:()=>Ks(e),now:()=>on.isProcessing?on.timestamp:ui.now()}},ine={decay:w3,inertia:w3,tween:Xp,keyframes:Xp,spring:Qp},sne=t=>t/100;class O5 extends kM{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||N5,d=(f,m)=>this.onKeyframesResolved(f,m);this.resolver=new l(a,d,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,d=h5(n)?n:ine[n]||Xp;let f,m;d!==Xp&&typeof e[0]!="number"&&(f=Yh(sne,_M(e[0],e[1])),e=[0,100]);const g=d({...this.options,keyframes:e});a==="mirror"&&(m=d({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=m5(g));const{calculatedDuration:v}=g,w=v+i,x=w*(r+1)-i;return{generator:g,mirroredGenerator:m,mapPercentToKeyframes:f,calculatedDuration:v,resolvedDuration:w,totalDuration:x}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:Q}=this.options;return{done:!0,value:Q[Q.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:d,keyframes:f,calculatedDuration:m,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return a.next(0);const{delay:w,repeat:x,repeatType:T,repeatDelay:C,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const _=this.currentTime-w*(this.speed>=0?1:-1),L=this.speed>=0?_<0:_>g;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let I=this.currentTime,q=a;if(x){const Q=Math.min(this.currentTime,g)/v;let ie=Math.floor(Q),he=Q%1;!he&&Q>=1&&(he=1),he===1&&ie--,ie=Math.min(ie,x+1),!!(ie%2)&&(T==="reverse"?(he=1-he,C&&(he-=C/v)):T==="mirror"&&(q=l)),I=$i(0,1,he)*v}const j=L?{done:!1,value:f[0]}:q.next(I);d&&(j.value=d(j.value));let{done:M}=j;!L&&m!==null&&(M=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return $&&i!==void 0&&(j.value=gy(f,this.options,i)),A&&A(j.value),$&&this.finish(),j}get duration(){const{resolved:e}=this;return e?ci(e.calculatedDuration):0}get time(){return ci(this.currentTime)}set time(e){e=li(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ci(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rne,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const one=new Set(["opacity","clipPath","filter","transform"]),ane=c5(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Zp=10,lne=2e4;function cne(t){return h5(t.type)||t.type==="spring"||!M7(t.ease)}function une(t,e){const n=new O5({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<lne;)r=n.sample(a),i.push(r.value),a+=Zp;return{times:void 0,keyframes:i,duration:a-Zp,ease:"linear"}}const IM={anticipate:lM,backInOut:aM,circInOut:uM};function dne(t){return t in IM}class T3 extends kM{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new EM(a,(l,d)=>this.onKeyframesResolved(l,d),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:l,motionValue:d,name:f,startTime:m}=this.options;if(!d.owner||!d.owner.current)return!1;if(typeof a=="string"&&ah()&&dne(a)&&(a=IM[a]),cne(this.options)){const{onComplete:v,onUpdate:w,motionValue:x,element:T,...C}=this.options,A=une(e,C);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,i=A.times,a=A.ease,l="keyframes"}const g=FJ(d.owner.current,f,e,{...this.options,duration:r,times:i,ease:a});return g.startTime=m??this.calcStartTime(),this.pendingTimeline?(Q_(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;d.set(gy(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ci(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ci(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=li(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Sr;const{animation:r}=n;Q_(r,e)}return Sr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:l,times:d}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:g,onComplete:v,element:w,...x}=this.options,T=new O5({...x,keyframes:r,duration:i,type:a,ease:l,times:d,isGenerator:!0}),C=li(this.time);m.setWithVelocity(T.sample(C-Zp).value,T.sample(C).value,Zp)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:l,type:d}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=n.owner.getProps();return ane()&&r&&one.has(r)&&(r!=="transform"||!m)&&!f&&!i&&a!=="mirror"&&l!==0&&d!=="inertia"}}const hne={type:"spring",stiffness:500,damping:25,restSpeed:10},fne=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mne={type:"keyframes",duration:.8},pne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},gne=(t,{keyframes:e})=>e.length>2?mne:Ma.has(t)?t.startsWith("scale")?fne(e[1]):hne:pne;function yne({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:d,from:f,elapsed:m,...g}){return!!Object.keys(g).length}const P5=(t,e,n,r={},i,a)=>l=>{const d=f5(r,t)||{},f=d.delay||r.delay||0;let{elapsed:m=0}=r;m=m-li(f);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:w=>{e.set(w),d.onUpdate&&d.onUpdate(w)},onComplete:()=>{l(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:a?void 0:i};yne(d)||(g={...g,...gne(t,g)}),g.duration&&(g.duration=li(g.duration)),g.repeatDelay&&(g.repeatDelay=li(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!d.type&&!d.ease,v&&!a&&e.get()!==void 0){const w=gy(g.keyframes,d);if(w!==void 0)return at.update(()=>{g.onUpdate(w),g.onComplete()}),new BJ([])}return!a&&T3.supports(g)?new T3(g):new O5(g)};function vne({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function RM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...d}=e;r&&(a=r);const f=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const g in d){const v=t.getValue(g,t.latestValues[g]??null),w=d[g];if(w===void 0||m&&vne(m,g))continue;const x={delay:n,...f5(a||{},g)};let T=!1;if(window.MotionHandoffAnimation){const A=nM(t);if(A){const _=window.MotionHandoffAnimation(A,g,at);_!==null&&(x.startTime=_,T=!0)}}Dw(t,g),v.start(P5(g,v,w,t.shouldReduceMotion&&tM.has(g)?{type:!1}:x,t,T));const C=v.animation;C&&f.push(C)}return l&&Promise.all(f).then(()=>{at.update(()=>{l&&Wee(t,l)})}),f}function Bw(t,e,n={}){var f;const r=hh(t,e,n.type==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(RM(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:w}=i;return bne(t,e,g+m,v,w,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,g]=d==="beforeChildren"?[a,l]:[l,a];return m().then(()=>g())}else return Promise.all([a(),l(n.delay)])}function bne(t,e,n=0,r=0,i=1,a){const l=[],d=(t.variantChildren.size-1)*r,f=i===1?(m=0)=>m*r:(m=0)=>d-m*r;return Array.from(t.variantChildren).sort(wne).forEach((m,g)=>{m.notify("AnimationStart",e),l.push(Bw(m,e,{...a,delay:n+f(g)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(l)}function wne(t,e){return t.sortNodePosition(e)}function xne(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Bw(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Bw(t,e,n);else{const i=typeof e=="function"?hh(t,e,n.custom):e;r=Promise.all(RM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function MM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Tne=v5.length;function NM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Tne;n++){const r=v5[n],i=t.props[r];(ch(i)||i===!1)&&(e[r]=i)}return e}const Sne=[...y5].reverse(),Cne=y5.length;function Ene(t){return e=>Promise.all(e.map(({animation:n,options:r})=>xne(t,n,r)))}function kne(t){let e=Ene(t),n=S3(),r=!0;const i=f=>(m,g)=>{var w;const v=hh(t,g,f==="exit"?(w=t.presenceContext)==null?void 0:w.custom:void 0);if(v){const{transition:x,transitionEnd:T,...C}=v;m={...m,...C,...T}}return m};function a(f){e=f(t)}function l(f){const{props:m}=t,g=NM(t.parent)||{},v=[],w=new Set;let x={},T=1/0;for(let A=0;A<Cne;A++){const _=Sne[A],L=n[_],I=m[_]!==void 0?m[_]:g[_],q=ch(I),j=_===f?L.isActive:null;j===!1&&(T=A);let M=I===g[_]&&I!==m[_]&&q;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),L.protectedKeys={...x},!L.isActive&&j===null||!I&&!L.prevProp||my(I)||typeof I=="boolean")continue;const $=Ane(L.prevProp,I);let Q=$||_===f&&L.isActive&&!M&&q||A>T&&q,ie=!1;const he=Array.isArray(I)?I:[I];let Ie=he.reduce(i(_),{});j===!1&&(Ie={});const{prevResolvedValues:ne={}}=L,ke={...ne,...Ie},ae=W=>{Q=!0,w.has(W)&&(ie=!0,w.delete(W)),L.needsAnimating[W]=!0;const se=t.getValue(W);se&&(se.liveStyle=!1)};for(const W in ke){const se=Ie[W],Se=ne[W];if(x.hasOwnProperty(W))continue;let R=!1;jw(se)&&jw(Se)?R=!MM(se,Se):R=se!==Se,R?se!=null?ae(W):w.add(W):se!==void 0&&w.has(W)?ae(W):L.protectedKeys[W]=!0}L.prevProp=I,L.prevResolvedValues=Ie,L.isActive&&(x={...x,...Ie}),r&&t.blockInitialAnimation&&(Q=!1),Q&&(!(M&&$)||ie)&&v.push(...he.map(W=>({animation:W,options:{type:_}})))}if(w.size){const A={};if(typeof m.initial!="boolean"){const _=hh(t,Array.isArray(m.initial)?m.initial[0]:m.initial);_&&_.transition&&(A.transition=_.transition)}w.forEach(_=>{const L=t.getBaseTarget(_),I=t.getValue(_);I&&(I.liveStyle=!0),A[_]=L??null}),v.push({animation:A})}let C=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(v):Promise.resolve()}function d(f,m){var v;if(n[f].isActive===m)return Promise.resolve();(v=t.variantChildren)==null||v.forEach(w=>{var x;return(x=w.animationState)==null?void 0:x.setActive(f,m)}),n[f].isActive=m;const g=l(f);for(const w in n)n[w].protectedKeys={};return g}return{animateChanges:l,setActive:d,setAnimateFunction:a,getState:()=>n,reset:()=>{n=S3(),r=!0}}}function Ane(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!MM(e,t):!1}function Ao(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function S3(){return{animate:Ao(!0),whileInView:Ao(),whileHover:Ao(),whileTap:Ao(),whileDrag:Ao(),whileFocus:Ao(),exit:Ao()}}class oo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class _ne extends oo{constructor(e){super(e),e.animationState||(e.animationState=kne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();my(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let jne=0;class Dne extends oo{constructor(){super(...arguments),this.id=jne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Ine={animation:{Feature:_ne},exit:{Feature:Dne}};function mh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kh(t){return{point:{x:t.pageX,y:t.pageY}}}const Rne=t=>e=>g5(e)&&t(e,Kh(e));function Ad(t,e,n,r){return mh(t,e,Rne(n),r)}function LM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Mne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Nne(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const OM=1e-4,Lne=1-OM,One=1+OM,PM=.01,Pne=0-PM,Une=0+PM;function jn(t){return t.max-t.min}function Vne(t,e,n){return Math.abs(t-e)<=n}function C3(t,e,n,r=.5){t.origin=r,t.originPoint=yt(e.min,e.max,t.origin),t.scale=jn(n)/jn(e),t.translate=yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Lne&&t.scale<=One||isNaN(t.scale))&&(t.scale=1),(t.translate>=Pne&&t.translate<=Une||isNaN(t.translate))&&(t.translate=0)}function _d(t,e,n,r){C3(t.x,e.x,n.x,r?r.originX:void 0),C3(t.y,e.y,n.y,r?r.originY:void 0)}function E3(t,e,n){t.min=n.min+e.min,t.max=t.min+jn(e)}function Bne(t,e,n){E3(t.x,e.x,n.x),E3(t.y,e.y,n.y)}function k3(t,e,n){t.min=e.min-n.min,t.max=t.min+jn(e)}function jd(t,e,n){k3(t.x,e.x,n.x),k3(t.y,e.y,n.y)}const A3=()=>({translate:0,scale:1,origin:0,originPoint:0}),$l=()=>({x:A3(),y:A3()}),_3=()=>({min:0,max:0}),jt=()=>({x:_3(),y:_3()});function wr(t){return[t("x"),t("y")]}function $1(t){return t===void 0||t===1}function zw({scale:t,scaleX:e,scaleY:n}){return!$1(t)||!$1(e)||!$1(n)}function Vo(t){return zw(t)||UM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function UM(t){return j3(t.x)||j3(t.y)}function j3(t){return t&&t!=="0%"}function Jp(t,e,n){const r=t-n,i=e*r;return n+i}function D3(t,e,n,r,i){return i!==void 0&&(t=Jp(t,i,r)),Jp(t,n,r)+e}function $w(t,e=0,n=1,r,i){t.min=D3(t.min,e,n,r,i),t.max=D3(t.max,e,n,r,i)}function VM(t,{x:e,y:n}){$w(t.x,e.translate,e.scale,e.originPoint),$w(t.y,n.translate,n.scale,n.originPoint)}const I3=.999999999999,R3=1.0000000000001;function zne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let d=0;d<i;d++){a=n[d],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ql(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,VM(t,l)),r&&Vo(a.latestValues)&&ql(t,a.latestValues))}e.x<R3&&e.x>I3&&(e.x=1),e.y<R3&&e.y>I3&&(e.y=1)}function Fl(t,e){t.min=t.min+e,t.max=t.max+e}function M3(t,e,n,r,i=.5){const a=yt(t.min,t.max,i);$w(t,e,n,a,r)}function ql(t,e){M3(t.x,e.x,e.scaleX,e.scale,e.originX),M3(t.y,e.y,e.scaleY,e.scale,e.originY)}function BM(t,e){return LM(Nne(t.getBoundingClientRect(),e))}function $ne(t,e,n){const r=BM(t,n),{scroll:i}=e;return i&&(Fl(r.x,i.offset.x),Fl(r.y,i.offset.y)),r}const zM=({current:t})=>t?t.ownerDocument.defaultView:null,N3=(t,e)=>Math.abs(t-e);function Fne(t,e){const n=N3(t.x,e.x),r=N3(t.y,e.y);return Math.sqrt(n**2+r**2)}class $M{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=q1(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,x=Fne(v.offset,{x:0,y:0})>=3;if(!w&&!x)return;const{point:T}=v,{timestamp:C}=on;this.history.push({...T,timestamp:C});const{onStart:A,onMove:_}=this.handlers;w||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,v)},this.handlePointerMove=(v,w)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=F1(w,this.transformPagePoint),at.update(this.updatePoint,!0)},this.handlePointerUp=(v,w)=>{this.end();const{onEnd:x,onSessionEnd:T,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=q1(v.type==="pointercancel"?this.lastMoveEventInfo:F1(w,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,A),T&&T(v,A)},!g5(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=Kh(e),d=F1(l,this.transformPagePoint),{point:f}=d,{timestamp:m}=on;this.history=[{...f,timestamp:m}];const{onSessionStart:g}=n;g&&g(e,q1(d,this.history)),this.removeListeners=Yh(Ad(this.contextWindow,"pointermove",this.handlePointerMove),Ad(this.contextWindow,"pointerup",this.handlePointerUp),Ad(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ks(this.updatePoint)}}function F1(t,e){return e?{point:e(t.point)}:t}function L3(t,e){return{x:t.x-e.x,y:t.y-e.y}}function q1({point:t},e){return{point:t,delta:L3(t,FM(e)),offset:L3(t,qne(e)),velocity:Hne(e,.1)}}function qne(t){return t[0]}function FM(t){return t[t.length-1]}function Hne(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=FM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>li(e)));)n--;if(!r)return{x:0,y:0};const a=ci(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Gne(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yt(n,t,r.max):Math.min(t,n)),t}function O3(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Wne(t,{top:e,left:n,bottom:r,right:i}){return{x:O3(t.x,n,i),y:O3(t.y,e,r)}}function P3(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Yne(t,e){return{x:P3(t.x,e.x),y:P3(t.y,e.y)}}function Kne(t,e){let n=.5;const r=jn(t),i=jn(e);return i>r?n=oh(e.min,e.max-r,t.min):r>i&&(n=oh(t.min,t.max-i,e.min)),$i(0,1,n)}function Qne(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Fw=.35;function Xne(t=Fw){return t===!1?t=0:t===!0&&(t=Fw),{x:U3(t,"left","right"),y:U3(t,"top","bottom")}}function U3(t,e,n){return{min:V3(t,e),max:V3(t,n)}}function V3(t,e){return typeof t=="number"?t:t[e]||0}const Zne=new WeakMap;class Jne{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kh(g).point)},a=(g,v)=>{const{drag:w,dragPropagation:x,onDragStart:T}=this.getProps();if(w&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=YJ(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(A=>{let _=this.getAxisMotionValue(A).get()||0;if(di.test(_)){const{projection:L}=this.visualElement;if(L&&L.layout){const I=L.layout.layoutBox[A];I&&(_=jn(I)*(parseFloat(_)/100))}}this.originPoint[A]=_}),T&&at.postRender(()=>T(g,v)),Dw(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:w,dragDirectionLock:x,onDirectionLock:T,onDrag:C}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:A}=v;if(x&&this.currentDirection===null){this.currentDirection=ere(A),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",v.point,A),this.updateAxis("y",v.point,A),this.visualElement.render(),C&&C(g,v)},d=(g,v)=>this.stop(g,v),f=()=>wr(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)==null?void 0:v.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new $M(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:zM(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&at.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!$m(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=Gne(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Bl(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Wne(r.layoutBox,e):this.constraints=!1,this.elastic=Xne(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=Qne(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Bl(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=$ne(r,i.root,this.visualElement.getTransformPagePoint());let l=Yne(i.layout.layoutBox,a);if(n){const d=n(Mne(l));this.hasMutatedConstraints=!!d,d&&(l=LM(d))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=wr(g=>{if(!$m(g,n,this.currentDirection))return;let v=f&&f[g]||{};l&&(v={min:0,max:0});const w=i?200:1e6,x=i?40:1e7,T={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...v};return this.startAxisValueAnimation(g,T)});return Promise.all(m).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Dw(this.visualElement,e),r.start(P5(e,r,0,n,this.visualElement,!1))}stopAnimation(){wr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wr(n=>{const{drag:r}=this.getProps();if(!$m(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:d}=i.layout.layoutBox[n];a.set(e[n]-yt(l,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(l=>{const d=this.getAxisMotionValue(l);if(d&&this.constraints!==!1){const f=d.get();i[l]=Kne({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wr(l=>{if(!$m(l,e,null))return;const d=this.getAxisMotionValue(l),{min:f,max:m}=this.constraints[l];d.set(yt(f,m,i[l]))})}addListeners(){if(!this.visualElement.current)return;Zne.set(this.visualElement,this);const e=this.visualElement.current,n=Ad(e,"pointerdown",f=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();Bl(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),at.read(r);const l=mh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(wr(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=f[g].translate,v.set(v.get()+f[g].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Fw,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:d}}}function $m(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function ere(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tre extends oo{constructor(e){super(e),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new Jne(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const B3=t=>(e,n)=>{t&&at.postRender(()=>t(e,n))};class nre extends oo{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(e){this.session=new $M(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:B3(e),onStart:B3(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&at.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=Ad(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z3(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xu={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(xe.test(t))t=parseFloat(t);else return t;const n=z3(t,e.target.x),r=z3(t,e.target.y);return`${n}% ${r}%`}},rre={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Qs.parse(t);if(i.length>5)return r;const a=Qs.createTransformer(t),l=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;i[0+l]/=d,i[1+l]/=f;const m=yt(d,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=m),typeof i[3+l]=="number"&&(i[3+l]/=m),a(i)}};class ire extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;xee(sre),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),mp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||at.postRender(()=>{const d=l.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),p5.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qM(t){const[e,n]=_7(),r=k.useContext(r5);return u.jsx(ire,{...t,layoutGroup:r,switchLayoutGroup:k.useContext($7),isPresent:e,safeToRemove:n})}const sre={borderRadius:{...Xu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xu,borderTopRightRadius:Xu,borderBottomLeftRadius:Xu,borderBottomRightRadius:Xu,boxShadow:rre};function ore(t,e,n){const r=xn(t)?t:lh(t);return r.start(P5("",r,e,n)),r.animation}function are(t){return t instanceof SVGElement&&t.tagName!=="svg"}const lre=(t,e)=>t.depth-e.depth;class cre{constructor(){this.children=[],this.isDirty=!1}add(e){a5(this.children,e),this.isDirty=!0}remove(e){l5(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lre),this.isDirty=!1,this.children.forEach(e)}}function ure(t,e){const n=ui.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Ks(r),t(a-e))};return at.read(r,!0),()=>Ks(r)}const HM=["TopLeft","TopRight","BottomLeft","BottomRight"],dre=HM.length,$3=t=>typeof t=="string"?parseFloat(t):t,F3=t=>typeof t=="number"||xe.test(t);function hre(t,e,n,r,i,a){i?(t.opacity=yt(0,n.opacity!==void 0?n.opacity:1,fre(r)),t.opacityExit=yt(e.opacity!==void 0?e.opacity:1,0,mre(r))):a&&(t.opacity=yt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<dre;l++){const d=`border${HM[l]}Radius`;let f=q3(e,d),m=q3(n,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||F3(f)===F3(m)?(t[d]=Math.max(yt($3(f),$3(m),r),0),(di.test(m)||di.test(f))&&(t[d]+="%")):t[d]=m}(e.rotate||n.rotate)&&(t.rotate=yt(e.rotate||0,n.rotate||0,r))}function q3(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fre=GM(0,.5,cM),mre=GM(.5,.95,Sr);function GM(t,e,n){return r=>r<t?0:r>e?1:n(oh(t,e,r))}function H3(t,e){t.min=e.min,t.max=e.max}function yr(t,e){H3(t.x,e.x),H3(t.y,e.y)}function G3(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function W3(t,e,n,r,i){return t-=e,t=Jp(t,1/n,r),i!==void 0&&(t=Jp(t,1/i,r)),t}function pre(t,e=0,n=1,r=.5,i,a=t,l=t){if(di.test(e)&&(e=parseFloat(e),e=yt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let d=yt(a.min,a.max,r);t===a&&(d-=e),t.min=W3(t.min,e,n,d,i),t.max=W3(t.max,e,n,d,i)}function Y3(t,e,[n,r,i],a,l){pre(t,e[n],e[r],e[i],e.scale,a,l)}const gre=["x","scaleX","originX"],yre=["y","scaleY","originY"];function K3(t,e,n,r){Y3(t.x,e,gre,n?n.x:void 0,r?r.x:void 0),Y3(t.y,e,yre,n?n.y:void 0,r?r.y:void 0)}function Q3(t){return t.translate===0&&t.scale===1}function WM(t){return Q3(t.x)&&Q3(t.y)}function X3(t,e){return t.min===e.min&&t.max===e.max}function vre(t,e){return X3(t.x,e.x)&&X3(t.y,e.y)}function Z3(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YM(t,e){return Z3(t.x,e.x)&&Z3(t.y,e.y)}function J3(t){return jn(t.x)/jn(t.y)}function ej(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class bre{constructor(){this.members=[]}add(e){a5(this.members,e),e.scheduleRender()}remove(e){if(l5(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wre(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:v,rotateY:w,skewX:x,skewY:T}=n;m&&(r=`perspective(${m}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),x&&(r+=`skewX(${x}deg) `),T&&(r+=`skewY(${T}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(r+=`scale(${d}, ${f})`),r||"none"}const H1=["","X","Y","Z"],xre={visibility:"hidden"},tj=1e3;let Tre=0;function G1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function KM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",at,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&KM(r)}function QM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},d=e==null?void 0:e()){this.id=Tre++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ere),this.nodes.forEach(Dre),this.nodes.forEach(Ire),this.nodes.forEach(kre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new cre)}addEventListener(l,d){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new u5),this.eventHandlers.get(l).add(d)}notifyListeners(l,...d){const f=this.eventHandlers.get(l);f&&f.notify(...d)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=are(l),this.instance=l;const{layoutId:f,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(m||f)&&(this.isLayoutDirty=!0),t){let v;const w=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=ure(w,250),mp.hasAnimatedSinceResize&&(mp.hasAnimatedSinceResize=!1,this.nodes.forEach(rj))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&g&&(f||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:w,hasRelativeLayoutChanged:x,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||g.getDefaultTransition()||Ore,{onLayoutAnimationStart:A,onLayoutAnimationComplete:_}=g.getProps(),L=!this.targetLayout||!YM(this.targetLayout,T),I=!w&&x;if(this.options.layoutRoot||this.resumeFrom||I||w&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,I);const q={...f5(C,"layout"),onPlay:A,onComplete:_};(g.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else w||rj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rre),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nj);return}this.isUpdating||this.nodes.forEach(_re),this.isUpdating=!1,this.nodes.forEach(jre),this.nodes.forEach(Sre),this.nodes.forEach(Cre),this.clearAllSnapshots();const d=ui.now();on.delta=$i(0,1e3/60,d-on.timestamp),on.timestamp=d,on.isProcessing=!0,P1.update.process(on),P1.preRender.process(on),P1.render.process(on),on.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,p5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Are),this.sharedNodes.forEach(Mre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,at.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){at.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jn(this.snapshot.measuredBox.x)&&!jn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(d=!1),d){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!WM(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;l&&(d||Vo(this.latestValues)||g)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return l&&(f=this.removeTransform(f)),Pre(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return jt();const d=l.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(Ure))){const{scroll:g}=this.root;g&&(Fl(d.x,g.offset.x),Fl(d.y,g.offset.y))}return d}removeElementScroll(l){var f;const d=jt();if(yr(d,l),(f=this.scroll)!=null&&f.wasRoot)return d;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:v,options:w}=g;g!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&yr(d,l),Fl(d.x,v.offset.x),Fl(d.y,v.offset.y))}return d}applyTransform(l,d=!1){const f=jt();yr(f,l);for(let m=0;m<this.path.length;m++){const g=this.path[m];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ql(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Vo(g.latestValues)&&ql(f,g.latestValues)}return Vo(this.latestValues)&&ql(f,this.latestValues),f}removeTransform(l){const d=jt();yr(d,l);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Vo(m.latestValues))continue;zw(m.latestValues)&&m.updateSnapshot();const g=jt(),v=m.measurePageBox();yr(g,v),K3(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Vo(this.latestValues)&&K3(d,this.latestValues),d}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==on.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var w;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=on.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),jd(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Bne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yr(this.target,this.layout.layoutBox),VM(this.target,this.targetDelta)):yr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),jd(this.relativeTargetOrigin,this.target,x.target),yr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zw(this.parent.latestValues)||UM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===on.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;yr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,w=this.treeScale.y;zne(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=jt());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(G3(this.prevProjectionDelta.x,this.projectionDelta.x),G3(this.prevProjectionDelta.y,this.projectionDelta.y)),_d(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==w||!ej(this.projectionDelta.x,this.prevProjectionDelta.x)||!ej(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),l){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$l(),this.projectionDelta=$l(),this.projectionDeltaWithTransform=$l()}setAnimationOrigin(l,d=!1){const f=this.snapshot,m=f?f.latestValues:{},g={...this.latestValues},v=$l();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const w=jt(),x=f?f.source:void 0,T=this.layout?this.layout.source:void 0,C=x!==T,A=this.getStack(),_=!A||A.members.length<=1,L=!!(C&&!_&&this.options.crossfade===!0&&!this.path.some(Lre));this.animationProgress=0;let I;this.mixTargetDelta=q=>{const j=q/1e3;ij(v.x,l.x,j),ij(v.y,l.y,j),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jd(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Nre(this.relativeTarget,this.relativeTargetOrigin,w,j),I&&vre(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=jt()),yr(I,this.relativeTarget)),C&&(this.animationValues=g,hre(g,m,this.latestValues,j,L,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=at.update(()=>{mp.hasAnimatedSinceResize=!0,this.currentAnimation=ore(0,tj,{...l,onUpdate:d=>{this.mixTargetDelta(d),l.onUpdate&&l.onUpdate(d)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:g}=l;if(!(!d||!f||!m)){if(this!==l&&this.layout&&m&&XM(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||jt();const v=jn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+v;const w=jn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+w}yr(d,f),ql(d,g),_d(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(l,d){this.sharedNodes.has(l)||this.sharedNodes.set(l,new bre),this.sharedNodes.get(l).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var d;const{layoutId:l}=this.options;return l?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:l}=this.options;return l?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let d=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&G1("z",l,m,this.animationValues);for(let g=0;g<H1.length;g++)G1(`rotate${H1[g]}`,l,m,this.animationValues),G1(`skew${H1[g]}`,l,m,this.animationValues);l.render();for(const g in m)l.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return xre;const d={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=fp(l==null?void 0:l.pointerEvents)||"",d.transform=f?f(this.latestValues,""):"none",d;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=fp(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(x.transform=f?f({},""):"none",this.hasProjected=!1),x}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),d.transform=wre(this.projectionDeltaWithTransform,this.treeScale,g),f&&(d.transform=f(g,d.transform));const{x:v,y:w}=this.projectionDelta;d.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,m.animationValues?d.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:d.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in uh){if(g[x]===void 0)continue;const{correct:T,applyTo:C,isCSSVariable:A}=uh[x],_=d.transform==="none"?g[x]:T(g[x],m);if(C){const L=C.length;for(let I=0;I<L;I++)d[C[I]]=_}else A?this.options.visualElement.renderState.vars[x]=_:d[x]=_}return this.options.layoutId&&(d.pointerEvents=m===this?fp(l==null?void 0:l.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var d;return(d=l.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(nj),this.root.sharedNodes.clear()}}}function Sre(t){t.updateLayout()}function Cre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=e.source!==t.layout.source;a==="size"?wr(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],x=jn(w);w.min=r[v].min,w.max=w.min+x}):XM(a,e.layoutBox,r)&&wr(v=>{const w=l?e.measuredBox[v]:e.layoutBox[v],x=jn(r[v]);w.max=w.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+x)});const d=$l();_d(d,r,e.layoutBox);const f=$l();l?_d(f,t.applyTransform(i,!0),e.measuredBox):_d(f,r,e.layoutBox);const m=!WM(d);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:x}=v;if(w&&x){const T=jt();jd(T,e.layoutBox,w.layoutBox);const C=jt();jd(C,r,x.layoutBox),YM(T,C)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=T,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Ere(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Are(t){t.clearSnapshot()}function nj(t){t.clearMeasurements()}function _re(t){t.isLayoutDirty=!1}function jre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Dre(t){t.resolveTargetDelta()}function Ire(t){t.calcProjection()}function Rre(t){t.resetSkewAndRotation()}function Mre(t){t.removeLeadSnapshot()}function ij(t,e,n){t.translate=yt(e.translate,0,n),t.scale=yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sj(t,e,n,r){t.min=yt(e.min,n.min,r),t.max=yt(e.max,n.max,r)}function Nre(t,e,n,r){sj(t.x,e.x,n.x,r),sj(t.y,e.y,n.y,r)}function Lre(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Ore={duration:.45,ease:[.4,0,.1,1]},oj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),aj=oj("applewebkit/")&&!oj("chrome/")?Math.round:Sr;function lj(t){t.min=aj(t.min),t.max=aj(t.max)}function Pre(t){lj(t.x),lj(t.y)}function XM(t,e,n){return t==="position"||t==="preserve-aspect"&&!Vne(J3(e),J3(n),.2)}function Ure(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Vre=QM({attachResizeListener:(t,e)=>mh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),W1={current:void 0},ZM=QM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!W1.current){const t=new Vre({});t.mount(window),t.setOptions({layoutScroll:!0}),W1.current=t}return W1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Bre={pan:{Feature:nre},drag:{Feature:tre,ProjectionNode:ZM,MeasureLayout:qM}};function cj(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&at.postRender(()=>a(e,Kh(e)))}class zre extends oo{mount(){const{current:e}=this.node;e&&(this.unmount=QJ(e,(n,r)=>(cj(this.node,r,"Start"),i=>cj(this.node,i,"End"))))}unmount(){}}class $re extends oo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yh(mh(this.node.current,"focus",()=>this.onFocus()),mh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uj(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&at.postRender(()=>a(e,Kh(e)))}class Fre extends oo{mount(){const{current:e}=this.node;e&&(this.unmount=eee(e,(n,r)=>(uj(this.node,r,"Start"),(i,{success:a})=>uj(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const qw=new WeakMap,Y1=new WeakMap,qre=t=>{const e=qw.get(t.target);e&&e(t)},Hre=t=>{t.forEach(qre)};function Gre({root:t,...e}){const n=t||document;Y1.has(n)||Y1.set(n,{});const r=Y1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Hre,{root:t,...e})),r[i]}function Wre(t,e,n){const r=Gre(e);return qw.set(t,n),r.observe(t),()=>{qw.delete(t),r.unobserve(t)}}const Yre={some:0,all:1};class Kre extends oo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Yre[i]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,a&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=m?g:v;w&&w(f)};return Wre(this.node.current,l,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Qre(e,n))&&this.startObserver()}unmount(){}}function Qre({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Xre={inView:{Feature:Kre},tap:{Feature:Fre},focus:{Feature:$re},hover:{Feature:zre}},Zre={layout:{ProjectionNode:ZM,MeasureLayout:qM}},Hw={current:null},JM={current:!1};function Jre(){if(JM.current=!0,!!s5)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Hw.current=t.matches;t.addListener(e),e()}else Hw.current=!1}const eie=[...CM,wn,Qs],tie=t=>eie.find(SM(t)),nie=new WeakMap;function rie(t,e,n){for(const r in e){const i=e[r],a=n[r];if(xn(i))t.addValue(r,i);else if(xn(a))t.addValue(r,lh(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,lh(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class iie{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=N5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=ui.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,at.render(this.render,!1,!0))};const{latestValues:f,renderState:m,onUpdate:g}=l;this.onUpdate=g,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!a,this.isControllingVariants=py(n),this.isVariantNode=B7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...w}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in w){const T=w[x];f[x]!==void 0&&xn(T)&&T.set(f[x],!1)}}mount(e){this.current=e,nie.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JM.current||Jre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hw.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ks(this.notifyUpdate),Ks(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ma.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&at.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pc){const n=pc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dj.length;r++){const i=dj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=rie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=lh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(xM(r)||dM(r))?r=parseFloat(r):!tie(r)&&Qs.test(n)&&(r=vM(e,n)),this.setBaseTarget(e,xn(r)?r.get():r)),xn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=_5(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!xn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new u5),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eN extends iie{constructor(){super(...arguments),this.KeyframeResolver=EM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;xn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sie(t){return window.getComputedStyle(t)}class oie extends eN{constructor(){super(...arguments),this.type="html",this.renderInstance=X7}readValueFromInstance(e,n){if(Ma.has(n))return vte(e,n);{const r=sie(e),i=(w5(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return BM(e,n)}build(e,n,r){S5(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return j5(e,n,r)}}class aie extends eN{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&Q7(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ma.has(n)){const r=yM(n);return r&&r.default||0}return n=Z7.has(n)?n:b5(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return eM(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&at.postRender(this.updateDimensions)}build(e,n,r){k5(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){J7(e,n,r,i)}mount(e){this.isSVGTag=A5(e.tagName),super.mount(e)}}const lie=(t,e)=>E5(t)?new aie(e):new oie(e,{allowProjection:t!==k.Fragment}),cie=Hee({...Ine,...Xre,...Bre,...Zre},lie),yy=aee(cie),uie=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
  
  @media (max-width: 768px) {
    padding: 1rem;
  }
`,die=b.div`
  text-align: center;
  padding: 4rem 1rem;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  border-radius: 1rem;
  margin-bottom: 4rem;
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('/images/pattern.svg') repeat;
    opacity: 0.1;
  }
  
  @media (max-width: 768px) {
    padding: 2.5rem 1rem;
    margin-bottom: 2rem;
  }
`,hie=b.div`
  position: relative;
  z-index: 1;
`,fie=b.h1`
  font-size: 3.5rem;
  font-weight: bold;
  margin-bottom: 1.5rem;
  color: white;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

  @media (max-width: 768px) {
    font-size: 2.5rem;
  }
`,mie=b.p`
  font-size: 1.25rem;
  margin-bottom: 2rem;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
`,pie=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-bottom: 4rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }
`,gie=b(yy.div)`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 2rem;
  position: relative;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;
  
  &:hover {
    transform: translateY(-5px);
    border-color: hsl(var(--primary));
  }
`,El=b.div`
  width: 3rem;
  height: 3rem;
  border-radius: 9999px;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
  position: relative;
  z-index: 1;
`,kl=b.h3`
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: white;
`,_o=b.p`
  opacity: 0.9;
  line-height: 1.6;
  margin-bottom: 1.5rem;
`,yie=b.div`
  position: absolute;
  top: 0;
  right: 0;
  width: 100px;
  height: 100px;
  opacity: 0.1;
  transform: translate(20px, -20px);
`,vie=b.div`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 3rem;
  margin-bottom: 4rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 768px) {
    padding: 1.5rem;
    margin-bottom: 2.5rem;
  }
  
  h2 {
    font-size: 1.75rem;
    margin-bottom: 1rem;
    
    @media (max-width: 768px) {
      font-size: 1.5rem;
    }
  }
`;b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
`;b.div`
  display: flex;
  align-items: flex-start;
  gap: 1rem;
`;b.div`
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 0.5rem;
  background-color: hsl(var(--primary));
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
`;b.div`
  flex: 1;
`;b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: white;
`;b.p`
  opacity: 0.9;
  line-height: 1.6;
`;const bie=b.div`
  margin-top: 4rem;
`,wie=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
`,xie=b(yy.div)`
  background-color: hsl(var(--card));
  border-radius: 1rem;
  padding: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  cursor: pointer;
  
  &:hover {
    border-color: hsl(var(--primary));
  }
`,Tie=b.h4`
  font-size: 1.125rem;
  font-weight: bold;
  margin-bottom: 0.75rem;
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
`,Sie=b(yy.p)`
  opacity: 0.9;
  line-height: 1.6;
  margin: 0;
`,Cie=b.button`
  padding: 1rem 2rem;
  border-radius: 0.5rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border: none;
  transition: all 0.2s ease;
  gap: 0.5rem;
  background: linear-gradient(135deg, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  font-size: 1.125rem;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
`,Eie=b.div`
  display: flex;
  justify-content: center;
  margin-top: 3rem;
`,kie=b.svg`
  width: 20px;
  height: 20px;
  transform: ${t=>t.isExpanded?"rotate(90deg)":"none"};
  transition: transform 0.2s ease;
`,hj=({isExpanded:t})=>u.jsx(kie,{isExpanded:t,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4.16675 10H15.8334M15.8334 10L10.0001 4.16667M15.8334 10L10.0001 15.8333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Aie=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M20.5899 22C20.5899 18.13 16.7399 15 11.9999 15C7.25991 15 3.40991 18.13 3.40991 22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),_ie=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M12 8V12L14 14M12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),fj=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M4 7V5C4 4.44772 4.44772 4 5 4H19C19.5523 4 20 4.44772 20 5V7M4 7V19C4 19.5523 4.44772 20 5 20H19C19.5523 20 20 19.5523 20 19V7M4 7H20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),jie=()=>u.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Die=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.258 9.77251 19.9887C9.5799 19.7194 9.31074 19.5143 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.0113 9.77251C4.28059 9.5799 4.48572 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),K1=b.div`
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 0.5rem;
  padding: 1rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin: 1rem 0;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  @media (max-width: 768px) {
    font-size: 0.75rem;
    padding: 0.75rem;
  }
`,Iie=b.div`
  background-color: rgba(245, 158, 11, 0.1);
  border-left: 4px solid rgb(245, 158, 11);
  padding: 1.5rem;
  margin: 2rem 0;
  border-radius: 0.5rem;
`,Rie=b.div`
  font-weight: bold;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: rgb(245, 158, 11);
`,Mie=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M8.57465 3.34064L1.51631 15.0782C1.37078 15.3327 1.29873 15.6223 1.30566 15.9158C1.31258 16.2093 1.3982 16.4949 1.55414 16.7417C1.71008 16.9885 1.9309 17.1866 2.19475 17.3142C2.4586 17.4419 2.75334 17.4942 3.04798 17.4656H17.1647C17.4593 17.4942 17.754 17.4419 18.0179 17.3142C18.2817 17.1866 18.5026 16.9885 18.6585 16.7417C18.8144 16.4949 18.9 16.2093 18.907 15.9158C18.9139 15.6223 18.8418 15.3327 18.6963 15.0782L11.638 3.34064C11.473 3.10683 11.2463 2.92137 10.9818 2.80094C10.7172 2.6805 10.4246 2.62964 10.1363 2.62964C9.84798 2.62964 9.55538 2.6805 9.29083 2.80094C9.02628 2.92137 8.79957 3.10683 8.63465 3.34064V3.34064Z",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10.1064 7.5V10.8333",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10.1064 14.1667H10.1147",stroke:"currentColor",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),Zu=b.div`
  display: flex;
  gap: 1.5rem;
  margin-bottom: 2rem;
  background-color: rgba(255, 255, 255, 0.05);
  border-radius: 1rem;
  padding: 1.5rem;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  &:hover {
    border-color: hsl(var(--primary));
  }
  
  @media (max-width: 768px) {
    flex-direction: column;
    gap: 1rem;
    padding: 1.25rem;
  }
`,Ju=b.div`
  flex: 1;
`;function Nie(){const t=Pt(),[e,n]=k.useState(null),r=[{number:1,title:"Create an Account",description:"Sign up for a free RuneRaffle account. You'll need this to enter raffles and track your entries.",icon:u.jsx(Aie,{})},{number:2,title:"Purchase Credits",description:"Add credits to your account. Credits are used to purchase raffle tickets, with each raffle having its own ticket price.",icon:u.jsx(_ie,{})},{number:3,title:"Choose a Raffle",description:"Browse our active raffles and select the prizes you're interested in winning. Each raffle has a limited number of tickets available.",icon:u.jsx(fj,{})},{number:4,title:"Buy Tickets",description:"Purchase one or more tickets for your chosen raffle. The more tickets you buy, the higher your chances of winning. Some raffles have limits on how many tickets one user can purchase.",icon:u.jsx(fj,{})},{number:5,title:"Wait for the Draw",description:"Once all tickets are sold, the raffle ends and a winner is automatically selected using our provably fair system.",icon:u.jsx(jie,{})},{number:6,title:"Collect Your Prize",description:"If you win, we'll contact you to arrange delivery of your prize. All prizes are delivered within 24 hours of the draw.",icon:u.jsx(Die,{})}],i=[{question:"How does the provably fair system work?",answer:"Our system uses a combination of server-generated seeds and blockchain data to ensure random and verifiable results. Each draw can be independently verified by anyone."},{question:"What happens if I win?",answer:"If you win a raffle, you'll receive an email notification and in-app notification. Our team will contact you to arrange the delivery of your prize."},{question:"How do I verify a draw result?",answer:"You can verify any draw result by visiting the verification page for that competition. The page will show you the exact process used to determine the winner."},{question:"How long do I have to wait to receive my prize?",answer:"If you win, we'll contact you via the email associated with your account. Prizes are delivered in-game within 24 hours of the draw completion. Make sure to provide your correct RuneScape username when prompted."},{question:"Are there limits to how many tickets I can buy?",answer:"Yes, most raffles have a maximum number of tickets per user to ensure fair participation. This limit is clearly displayed on each raffle page."},{question:"What happens if a raffle doesn't sell all tickets?",answer:"Most raffles have a set time limit. If all tickets aren't sold by the end date, the draw will still take place with the tickets that have been purchased. In rare cases, we may extend the raffle period, but this will always be clearly communicated."},{question:"Can I get a refund for my tickets?",answer:"Generally, all ticket purchases are final. However, if a raffle is cancelled for any reason, all credits will be refunded to your account automatically."}];return u.jsxs(uie,{children:[u.jsx(die,{children:u.jsxs(hie,{children:[u.jsx(fie,{children:"How RuneRaffle Works"}),u.jsx(mie,{children:"Learn about our fair and transparent raffle system that allows players to win epic RuneScape prizes. Our draws are provably fair and fully transparent."})]})}),u.jsx(pie,{children:r.map((a,l)=>u.jsxs(gie,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.1},whileHover:{scale:1.02},children:[u.jsx(El,{children:a.number}),u.jsx(yie,{children:a.icon}),u.jsx(kl,{children:a.title}),u.jsx(_o,{children:a.description})]},a.number))}),u.jsxs(vie,{children:[u.jsx("h2",{children:"Our Provably Fair System"}),u.jsx(_o,{children:"We use a sophisticated cryptographic system to ensure complete fairness and transparency in our draws. Here's how it works:"}),u.jsxs("div",{style:{marginTop:"2rem"},children:[u.jsxs(Zu,{children:[u.jsx(El,{children:"1"}),u.jsxs(Ju,{children:[u.jsx(kl,{children:"Creating a Cryptographic Seed"}),u.jsx(_o,{children:"Before the raffle begins, our system generates a random seed. This seed is then hashed using SHA-256 encryption, creating a unique cryptographic fingerprint that cannot be reverse-engineered."}),u.jsxs(K1,{children:["Original Seed: 8f6b0a06c7d1e2f354b9a687c0d31e25",u.jsx("br",{}),"SHA-256 Hash: 7f83b1657ff1fc53b92dc18148a1d65dfc2d4b1fa3d677284addd200126d9069"]})]})]}),u.jsxs(Zu,{children:[u.jsx(El,{children:"2"}),u.jsxs(Ju,{children:[u.jsx(kl,{children:"Public Hash Verification"}),u.jsx(_o,{children:"The hash is published publicly at the start of the raffle, so everyone can see it. This proves we've already determined a seed but cannot change it, as any modification would produce a completely different hash."})]})]}),u.jsxs(Zu,{children:[u.jsx(El,{children:"3"}),u.jsxs(Ju,{children:[u.jsx(kl,{children:"Adding External Entropy"}),u.jsx(_o,{children:"When the raffle ends, we combine our original seed with a source of external entropy that couldn't have been predicted when the raffle started. We use the hash of the most recent Bitcoin block at the time the raffle ends."}),u.jsxs(K1,{children:["Original Seed: 8f6b0a06c7d1e2f354b9a687c0d31e25",u.jsx("br",{}),"Bitcoin Block Hash: 0000000000000000000392ff974383c752f58e86f86abc293ade35208c5c4808",u.jsx("br",{}),"Combined Value: 8f6b0a06c7d1e2f354b9a687c0d31e250000000000000000000392ff974383c752f58e86f86abc293ade35208c5c4808"]})]})]}),u.jsxs(Zu,{children:[u.jsx(El,{children:"4"}),u.jsxs(Ju,{children:[u.jsx(kl,{children:"Selecting the Winner"}),u.jsx(_o,{children:"The combined value is hashed again, and the resulting number is used to determine the winning ticket. This is done by taking the modulo of the number with the total tickets sold."}),u.jsxs(K1,{children:["Final Hash: e9c0f8f2d5b5a9e7b5c6d3f9a8c7b6a5d4f3e2d1c0b9a8f7e6d5c4b3a2f1e0d9",u.jsx("br",{}),"Numeric Value (first 8 chars): 0xe9c0f8f2 = 3,922,317,554",u.jsx("br",{}),"Total Tickets: 500",u.jsx("br",{}),"Winning Ticket Number: 3,922,317,554 % 500 = 54"]})]})]}),u.jsxs(Zu,{children:[u.jsx(El,{children:"5"}),u.jsxs(Ju,{children:[u.jsx(kl,{children:"Revealing the Original Seed"}),u.jsx(_o,{children:"After the winner is selected, we publish the original seed. Anyone can verify that:"}),u.jsxs("ul",{style:{listStyleType:"disc",paddingLeft:"1.5rem",marginBottom:"1rem"},children:[u.jsx("li",{children:"The SHA-256 hash of our original seed matches the pre-published hash"}),u.jsx("li",{children:"The Bitcoin block hash we used is authentic and corresponds to the correct block"}),u.jsx("li",{children:"When combined, these values correctly determine the winning ticket"})]})]})]}),u.jsxs(Iie,{children:[u.jsxs(Rie,{children:[u.jsx(Mie,{}),"Important Note"]}),u.jsx("p",{style:{fontSize:window.innerWidth<768?"0.9rem":"1rem"},children:"Our provably fair system ensures that neither we nor any player can manipulate the outcome. The combination of our pre-committed seed and external entropy from the Bitcoin blockchain guarantees a completely fair and transparent draw."})]})]})]}),u.jsxs(bie,{children:[u.jsx("h2",{children:"Frequently Asked Questions"}),u.jsx(wie,{children:i.map((a,l)=>u.jsxs(xie,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.1},onClick:()=>n(e===l?null:l),children:[u.jsxs(Tie,{children:[a.question,u.jsx(hj,{isExpanded:e===l})]}),u.jsx(OJ,{children:e===l&&u.jsx(yy.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},children:u.jsx(Sie,{children:a.answer})})})]},l))})]}),u.jsx(Eie,{children:u.jsxs(Cie,{onClick:()=>t("/competitions"),children:["Start Entering Raffles",u.jsx(hj,{isExpanded:!1})]})})]})}const Lie=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 80vh;
  padding: 1.5rem;
  background: linear-gradient(to bottom, rgba(13, 6, 32, 0.8) 0%, rgba(13, 6, 32, 0.95) 100%);
`,Oie=b.div`
  width: 100%;
  max-width: 450px;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  overflow: hidden;
`,Pie=b.div`
  padding: 1.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  color: white;
  text-align: center;
`,Uie=b.h1`
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
`,Vie=b.p`
  font-size: 0.9rem;
  opacity: 0.9;
`,Bie=b.div`
  padding: 1.5rem;
`,zie=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,Q1=b.button`
  flex: 1;
  padding: 0.75rem 1rem;
  background: transparent;
  border: none;
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  font-weight: ${t=>t.active?"600":"400"};
  cursor: pointer;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  transition: all 0.2s ease;

  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`,$ie=b.form`
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,Fm=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,qm=b.label`
  font-size: 0.9rem;
  font-weight: 500;
  color: hsl(var(--foreground));
`,Hm=b.input`
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 1rem;
  transition: border-color 0.2s ease;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,tN=b.button`
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  border: none;
  background: hsl(var(--primary));
  color: white;
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.2s ease;
  margin-top: 0.5rem;

  &:hover {
    background: hsl(265, 83%, 45%);
  }

  &:disabled {
    opacity: 0.7;
    cursor: not-allowed;
  }
`,Fie=b(tN)`
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
`,qie=b.div`
  display: flex;
  align-items: center;
  margin: 1.5rem 0;
  color: hsl(var(--muted-foreground));
  font-size: 0.9rem;

  &::before, &::after {
    content: '';
    flex: 1;
    height: 1px;
    background: hsl(var(--border));
  }

  &::before {
    margin-right: 1rem;
  }

  &::after {
    margin-left: 1rem;
  }
`,Hie=b.div`
  color: hsl(var(--destructive));
  font-size: 0.9rem;
  margin-top: 0.5rem;
`,Gie=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M21.8055 10.0415H21V10H12V14H17.6515C16.827 16.3285 14.6115 18 12 18C8.6865 18 6 15.3135 6 12C6 8.6865 8.6865 6 12 6C13.5295 6 14.921 6.577 15.9805 7.5195L18.809 4.691C17.023 3.0265 14.634 2 12 2C6.4775 2 2 6.4775 2 12C2 17.5225 6.4775 22 12 22C17.5225 22 22 17.5225 22 12C22 11.3295 21.931 10.675 21.8055 10.0415Z",fill:"white"})});function mj({mode:t="login"}){const[e,n]=k.useState(t),[r,i]=k.useState(""),[a,l]=k.useState(""),[d,f]=k.useState(""),[m,g]=k.useState(""),[v,w]=k.useState(null),[x,T]=k.useState(null),[C,A]=k.useState(!1),_=Pt(),L=Gn();k.useEffect(()=>{const M=new URLSearchParams(L.search).get("ref");M&&(g(M),n("register"))},[L]);const I=async j=>{j.preventDefault(),w(null),T(null),A(!0);try{if(e==="login")await eY(r,a),_("/");else if(e==="register"){const M=await JW(r,a,d);if(m&&M)try{const $=await pX(m,M.uid,r);T($?"Account created with referral bonus! Please check your email for verification.":"Account created! Referral code could not be processed. Please check your email for verification.")}catch($){console.error("Error processing referral:",$),T("Account created! Referral code could not be processed. Please check your email for verification.")}else T("Account created! Please check your email for verification.");setTimeout(()=>_("/"),2e3)}else e==="reset"&&(await iY(r),T("Password reset email sent. Please check your inbox."))}catch(M){console.error("Auth error:",M);const $=M.code||"";$.includes("auth/user-not-found")||$.includes("auth/wrong-password")?w("Invalid email or password. Please try again."):$.includes("auth/email-already-in-use")?w("This email is already registered. Please log in instead."):$.includes("auth/weak-password")?w("Password should be at least 6 characters long."):$.includes("auth/invalid-email")?w("Please enter a valid email address."):$.includes("auth/network-request-failed")?w("Network error. Please check your connection and try again."):$.includes("auth/too-many-requests")?w("Too many failed attempts. Please try again later."):$.includes("auth/api-key-not-valid")?w("Authentication service error. Please contact support."):w(M.message||"An error occurred during authentication")}finally{A(!1)}},q=async()=>{w(null),A(!0);try{await ZW(),_("/")}catch(j){console.error("Google sign-in error:",j);const M=j.code||"";M.includes("auth/popup-closed-by-user")?w("Sign-in popup was closed. Please try again."):M.includes("auth/popup-blocked")?w("Sign-in popup was blocked. Please allow popups for this site."):M.includes("auth/cancelled-popup-request")?w(null):M.includes("auth/network-request-failed")?w("Network error. Please check your connection and try again."):M.includes("auth/too-many-requests")?w("Too many failed attempts. Please try again later."):M.includes("auth/api-key-not-valid")?w("Authentication service error. Please contact support."):w(j.message||"An error occurred during Google sign-in")}finally{A(!1)}};return u.jsx(Lie,{children:u.jsxs(Oie,{children:[u.jsxs(Pie,{children:[u.jsx(Uie,{children:e==="login"?"Welcome Back":e==="register"?"Create Account":"Reset Password"}),u.jsx(Vie,{children:e==="login"?"Sign in to your account to continue":e==="register"?"Create a new account to get started":"Enter your email to reset your password"})]}),u.jsxs(Bie,{children:[u.jsxs(zie,{children:[u.jsx(Q1,{active:e==="login",onClick:()=>{n("login"),w(null),T(null)},children:"Login"}),u.jsx(Q1,{active:e==="register",onClick:()=>{n("register"),w(null),T(null)},children:"Register"}),u.jsx(Q1,{active:e==="reset",onClick:()=>{n("reset"),w(null),T(null)},children:"Reset"})]}),x&&u.jsx("div",{style:{padding:"0.75rem",backgroundColor:"rgba(22, 163, 74, 0.1)",color:"rgb(22, 163, 74)",borderRadius:"0.375rem",marginBottom:"1rem"},children:x}),u.jsxs($ie,{onSubmit:I,children:[e==="register"&&u.jsxs(u.Fragment,{children:[u.jsxs(Fm,{children:[u.jsx(qm,{htmlFor:"displayName",children:"Display Name"}),u.jsx(Hm,{id:"displayName",type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Your display name",required:!0,autoComplete:"name"})]}),u.jsxs(Fm,{children:[u.jsx(qm,{htmlFor:"referralCode",children:"Referral Code (Optional)"}),u.jsx(Hm,{id:"referralCode",type:"text",value:m,onChange:j=>g(j.target.value),placeholder:"Enter referral code",autoComplete:"off"})]})]}),u.jsxs(Fm,{children:[u.jsx(qm,{htmlFor:"email",children:"Email"}),u.jsx(Hm,{id:"email",type:"email",value:r,onChange:j=>i(j.target.value),placeholder:"email@example.com",required:!0,autoComplete:"email"})]}),e!=="reset"&&u.jsxs(Fm,{children:[u.jsx(qm,{htmlFor:"password",children:"Password"}),u.jsx(Hm,{id:"password",type:"password",value:a,onChange:j=>l(j.target.value),placeholder:"",required:!0,autoComplete:e==="login"?"current-password":"new-password"})]}),v&&u.jsx(Hie,{children:v}),u.jsx(tN,{type:"submit",disabled:C,children:C?"Processing...":e==="login"?"Sign In":e==="register"?"Create Account":"Reset Password"})]}),e!=="reset"&&u.jsxs(u.Fragment,{children:[u.jsx(qie,{children:"Or continue with"}),u.jsxs(Fie,{type:"button",onClick:q,disabled:C,children:[u.jsx(Gie,{}),"Sign in with Google"]})]}),e==="login"&&u.jsx("div",{style:{textAlign:"center",marginTop:"1rem",fontSize:"0.875rem",color:"hsl(var(--muted-foreground))"},children:u.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),n("reset"),w(null),T(null)},style:{color:"hsl(var(--primary))",textDecoration:"none"},children:"Forgot your password?"})})]})]})})}const Wie=b.div`
  overflow-x: auto;
`,Yie=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,Kie=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,Cs=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,Qie=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,Xie=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Es=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,Zie=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  
  ${({status:t})=>{switch(t){case"active":return`
          background-color: rgba(34, 197, 94, 0.1);
          color: rgb(34, 197, 94);
        `;case"ending":return`
          background-color: rgba(234, 179, 8, 0.1);
          color: rgb(234, 179, 8);
        `;case"complete":return`
          background-color: rgba(59, 130, 246, 0.1);
          color: rgb(59, 130, 246);
        `;case"cancelled":return`
          background-color: rgba(239, 68, 68, 0.1);
          color: rgb(239, 68, 68);
        `;default:return""}}}
`,Qh=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  margin-right: 0.5rem;
  
  &:last-child {
    margin-right: 0;
  }
`,Jie=b(Qh)`
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`,ese=b(Qh)`
  background-color: hsl(var(--secondary) / 0.1);
  color: hsl(var(--secondary));
  
  &:hover {
    background-color: hsl(var(--secondary) / 0.2);
  }
`,tse=b(Qh)`
  background-color: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
  
  &:hover {
    background-color: rgba(34, 197, 94, 0.2);
  }
`,nse=b(Qh)`
  background-color: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
  
  &:hover {
    background-color: rgba(239, 68, 68, 0.2);
  }
  
  /* Add a title attribute for hover tooltip */
  &:after {
    content: attr(title);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.5rem;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  &:hover:after {
    visibility: visible;
    opacity: 1;
  }
`,rse=b(Qh)`
  background-color: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
  
  &:hover {
    background-color: rgba(239, 68, 68, 0.2);
  }
  
  /* Add a title attribute for hover tooltip */
  &:after {
    content: attr(title);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    padding: 0.5rem;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    white-space: nowrap;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  &:hover:after {
    visibility: visible;
    opacity: 1;
  }
`,ise=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,sse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,ose=b.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
`;function ase(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),i=Pt();k.useEffect(()=>{(async()=>{try{const w=await f7();e(w)}catch(w){console.error("Error fetching competitions:",w)}finally{r(!1)}})()},[]);const a=v=>{i(`/competition/${v}`)},l=v=>{i(`/admin/edit-competition/${v}`)},d=async v=>{if(window.confirm("Are you sure you want to delete this competition? This action cannot be undone."))try{await p7(v),e(t.filter(w=>w.id!==v)),alert("Competition deleted successfully")}catch(w){console.error("Error deleting competition:",w),alert("Failed to delete competition")}},f=async v=>{if(window.confirm(`Are you sure you want to cancel this competition?
Note: This keeps the competition in the system but marks it as cancelled.`)){const w=window.confirm("Do you want to automatically refund all purchased tickets for this competition?");try{await g7(v,w),e(t.map(x=>x.id===v?{...x,status:"cancelled"}:x)),alert(w?"Competition cancelled and refund process initiated. Users will receive credits for purchased tickets.":"Competition cancelled successfully. No refunds were processed.")}catch(x){console.error("Error cancelling competition:",x),alert("Failed to cancel competition")}}},m=async v=>{if(window.confirm("This would normally open a modal for drawing the winner. Do you want to simulate completion?"))try{const w={userId:"simulated-user-id",username:"SimulatedWinner",email:"winner@example.com"};await X2(v,{status:"complete",completedAt:J.firestore.Timestamp.now(),winner:w,seed:"0x"+Math.random().toString(16).substring(2,10),blockHash:"0x"+Math.random().toString(16).substring(2,66),winningTicket:Math.floor(Math.random()*1e3)+1}),e(t.map(x=>x.id===v?{...x,status:"complete",completedAt:J.firestore.Timestamp.now(),winner:w}:x)),alert("Competition completed successfully")}catch(w){console.error("Error completing competition:",w),alert("Failed to complete competition")}},g=v=>v?v.toDate().toLocaleDateString():"N/A";return n?u.jsx(ise,{children:"Loading competitions..."}):t.length===0?u.jsx(sse,{children:"No competitions found. Create one to get started."}):u.jsx(Wie,{children:u.jsxs(Yie,{children:[u.jsx(Kie,{children:u.jsxs("tr",{children:[u.jsx(Cs,{children:"Title"}),u.jsx(Cs,{children:"Status"}),u.jsx(Cs,{children:"Difficulty"}),u.jsx(Cs,{children:"Ticket Price"}),u.jsx(Cs,{children:"Tickets"}),u.jsx(Cs,{children:"Created"}),u.jsx(Cs,{children:"Ends"}),u.jsx(Cs,{children:"Actions"})]})}),u.jsx(Qie,{children:t.map(v=>u.jsxs(Xie,{children:[u.jsx(Es,{children:v.title}),u.jsx(Es,{children:u.jsx(Zie,{status:v.status,children:v.status.charAt(0).toUpperCase()+v.status.slice(1)})}),u.jsx(Es,{children:v.difficulty.charAt(0).toUpperCase()+v.difficulty.slice(1)}),u.jsxs(Es,{children:[v.ticketPrice," Credits"]}),u.jsxs(Es,{children:[v.ticketsSold," / ",v.totalTickets]}),u.jsx(Es,{children:g(v.createdAt)}),u.jsx(Es,{children:g(v.endsAt)}),u.jsx(Es,{children:u.jsxs(ose,{children:[u.jsx(ese,{onClick:()=>a(v.id),children:"View"}),v.status!=="complete"&&v.status!=="cancelled"&&u.jsxs(u.Fragment,{children:[u.jsx(Jie,{onClick:()=>l(v.id),children:"Edit"}),u.jsx(tse,{onClick:()=>m(v.id),children:"Complete"}),u.jsx(nse,{onClick:()=>f(v.id),title:"Cancel marks competition as cancelled but keeps it in the system",children:"Cancel"})]}),u.jsx(rse,{onClick:()=>d(v.id),title:"Delete permanently removes the competition from the database",children:"Delete"})]})})]},v.id))})]})})}const lse=b.div`
  overflow-x: auto;
`,cse=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,use=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,jo=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,dse=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,hse=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Do=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,fse=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${({admin:t})=>t?"rgba(34, 197, 94, 0.1)":"rgba(59, 130, 246, 0.1)"};
  color: ${({admin:t})=>t?"rgb(34, 197, 94)":"rgb(59, 130, 246)"};
`,nN=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  margin-right: 0.5rem;
  
  &:last-child {
    margin-right: 0;
  }
`,mse=b(nN)`
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`,pse=b(nN)`
  background-color: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
  
  &:hover {
    background-color: rgba(34, 197, 94, 0.2);
  }
`,gse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,yse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,vse=b.div`
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
`;function bse(){const[t,e]=k.useState([]),[n,r]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const g=(await st.collection("users").get()).docs.map(v=>({id:v.id,...v.data()}));e(g)}catch(f){console.error("Error fetching users:",f)}finally{r(!1)}})()},[]);const i=async(d,f)=>{const m=parseInt(prompt(`Current credits: ${f}. Enter amount to add:`)||"0");if(isNaN(m)||m<0){alert("Please enter a valid number of credits");return}try{const g=f+m;await uy(d,g),e(t.map(v=>v.email===d?{...v,credits:g}:v)),alert(`Added ${m} credits to ${d}. New balance: ${g}`)}catch(g){console.error("Error adding credits:",g),alert("Failed to add credits")}},a=async(d,f)=>{if(window.confirm(`Are you sure you want to ${f?"remove":"grant"} admin privileges to ${d}?`))try{await st.collection("users").doc(d).update({isAdmin:!f,updatedAt:new Date}),e(t.map(g=>g.email===d?{...g,isAdmin:!f}:g)),alert(`${f?"Removed":"Granted"} admin privileges for ${d}`)}catch(m){console.error("Error toggling admin status:",m),alert("Failed to update admin status")}},l=d=>d?new Date(d.seconds*1e3).toLocaleDateString():"N/A";return n?u.jsx(gse,{children:"Loading users..."}):t.length===0?u.jsx(yse,{children:"No users found."}):u.jsx(lse,{children:u.jsxs(cse,{children:[u.jsx(use,{children:u.jsxs("tr",{children:[u.jsx(jo,{children:"Email"}),u.jsx(jo,{children:"Display Name"}),u.jsx(jo,{children:"Role"}),u.jsx(jo,{children:"Credits"}),u.jsx(jo,{children:"Joined"}),u.jsx(jo,{children:"Last Updated"}),u.jsx(jo,{children:"Actions"})]})}),u.jsx(dse,{children:t.map(d=>u.jsxs(hse,{children:[u.jsx(Do,{children:d.email}),u.jsx(Do,{children:d.displayName||"Not set"}),u.jsx(Do,{children:u.jsx(fse,{admin:d.isAdmin,children:d.isAdmin?"Admin":"User"})}),u.jsx(Do,{children:d.credits}),u.jsx(Do,{children:l(d.createdAt)}),u.jsx(Do,{children:l(d.updatedAt)}),u.jsx(Do,{children:u.jsxs(vse,{children:[u.jsx(pse,{onClick:()=>i(d.email,d.credits),children:"Add Credits"}),u.jsx(mse,{onClick:()=>a(d.email,d.isAdmin),children:d.isAdmin?"Remove Admin":"Make Admin"})]})})]},d.email))})]})})}const wse=b.div`
  overflow-x: auto;
`,xse=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,Tse=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,Io=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,Sse=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,Cse=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,Ro=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,Ese=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,kse=b.div`
  text-align: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,Ase=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  background-color: hsl(var(--secondary) / 0.1);
  color: hsl(var(--secondary));
  
  &:hover {
    background-color: hsl(var(--secondary) / 0.2);
  }
`,_se=b.span`
  display: inline-block;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  
  &:hover {
    text-decoration: underline;
  }
`,jse=b.button`
  padding: 0.375rem 0.625rem;
  border-radius: 0.25rem;
  font-size: 0.75rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  background-color: hsl(var(--primary) / 0.1);
  color: hsl(var(--primary));
  
  &:hover {
    background-color: hsl(var(--primary) / 0.2);
  }
`;function Dse(){const[t,e]=k.useState([]),[n,r]=k.useState(!0),i=Pt();k.useEffect(()=>{(async()=>{try{const g=await ay();e(g)}catch(g){console.error("Error fetching completed competitions:",g)}finally{r(!1)}})()},[]);const a=m=>{i(`/competition/${m}`)},l=m=>m?new Date(m.seconds*1e3).toLocaleDateString():"N/A",d=m=>{navigator.clipboard.writeText(m).then(()=>alert("Copied to clipboard!")).catch(g=>console.error("Could not copy text: ",g))},f=m=>{var v,w;const g=`
Competition: ${m.title}
Completed: ${l(m.completedAt)}
Winner: ${(v=m.winner)==null?void 0:v.username} (${(w=m.winner)==null?void 0:w.email})
Seed: ${m.seed}
Block Hash: ${m.blockHash}
Winning Ticket: ${m.winningTicket}
    `;alert(g)};return n?u.jsx(Ese,{children:"Loading completed competitions..."}):t.length===0?u.jsx(kse,{children:"No completed competitions found."}):u.jsx(wse,{children:u.jsxs(xse,{children:[u.jsx(Tse,{children:u.jsxs("tr",{children:[u.jsx(Io,{children:"Competition"}),u.jsx(Io,{children:"Prize"}),u.jsx(Io,{children:"Completed Date"}),u.jsx(Io,{children:"Winner"}),u.jsx(Io,{children:"Seed"}),u.jsx(Io,{children:"Winning Ticket"}),u.jsx(Io,{children:"Actions"})]})}),u.jsx(Sse,{children:t.map(m=>{var g;return u.jsxs(Cse,{children:[u.jsx(Ro,{children:m.title}),u.jsx(Ro,{children:m.prizeValue}),u.jsx(Ro,{children:l(m.completedAt)}),u.jsx(Ro,{children:(g=m.winner)==null?void 0:g.username}),u.jsx(Ro,{children:u.jsx(_se,{onClick:()=>d(m.seed||""),title:"Click to copy",children:m.seed||"N/A"})}),u.jsx(Ro,{children:m.winningTicket||"N/A"}),u.jsxs(Ro,{children:[u.jsx(Ase,{onClick:()=>a(m.id),children:"View"})," ",u.jsx(jse,{onClick:()=>f(m),children:"Verification"})]})]},m.id)})})]})})}const pj=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
`,gj=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  color: hsl(var(--foreground));
`,Ise=b.form`
  display: grid;
  gap: 1.5rem;
`,vr=b.div`
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
`,X1=b.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  
  @media (min-width: 640px) {
    grid-template-columns: 1fr 1fr;
  }
`,br=b.label`
  font-size: 0.875rem;
  font-weight: 500;
  color: hsl(var(--foreground));
`,ks=b.input`
  width: 100%;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,yj=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  resize: vertical;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,vj=b.select`
  width: 100%;
  padding: 0.625rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid hsl(var(--border));
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  font-size: 0.875rem;
  transition: border-color 0.2s, box-shadow 0.2s;

  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,rN=b.button`
  padding: 0.625rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
`,Rse=b(rN)`
  background-color: hsl(var(--primary));
  color: white;

  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Mse=b(rN)`
  background-color: transparent;
  color: hsl(var(--foreground));
  border: 1px solid hsl(var(--border));

  &:hover {
    background-color: hsl(var(--muted) / 0.3);
  }
`,Nse=b.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem;
`,Lse=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-top: 0.5rem;
`;function Ose({competitionId:t,onCancel:e,onSuccess:n}){const[r,i]=k.useState({title:"",description:"",prize:"",prizeValue:"",imageUrl:"",difficulty:"medium",ticketPrice:3,totalTickets:500,endsAt:new Date(Date.now()+6048e5).toISOString().split("T")[0],status:"active",triviaQuestion:"",triviaAnswer:""}),[a,l]=k.useState(!1),[d,f]=k.useState(null),[m,g]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){g(!0);try{const T=await so(t);if(T){const C=T.endsAt.toDate().toISOString().split("T")[0];i({title:T.title||"",description:T.description||"",prize:T.prize||"",prizeValue:T.prizeValue||"",imageUrl:T.imageUrl||"",difficulty:T.difficulty||"medium",ticketPrice:T.ticketPrice||3,totalTickets:T.totalTickets||500,endsAt:C,status:T.status||"active",triviaQuestion:T.triviaQuestion||"",triviaAnswer:T.triviaAnswer||""})}else f("Competition not found")}catch(T){console.error("Error fetching competition:",T),f(T.message||"An error occurred while fetching the competition")}finally{g(!1)}}})()},[t]);const v=x=>{const{name:T,value:C}=x.target;i(A=>({...A,[T]:C}))},w=async x=>{x.preventDefault(),f(""),l(!0);try{if(!r.title||!r.description||!r.prize||!r.prizeValue||!r.ticketPrice||!r.totalTickets||!r.endsAt||!r.triviaQuestion||!r.triviaAnswer)throw new Error("Please fill in all required fields.");if(Number(r.ticketPrice)<=0)throw new Error("Ticket price must be greater than 0.");if(Number(r.totalTickets)<=0)throw new Error("Total tickets must be greater than 0.");const T=new Date(r.endsAt);if(T<=new Date)throw new Error("End date must be in the future.");const C={...r,ticketPrice:Number(r.ticketPrice),totalTickets:Number(r.totalTickets),status:r.status,difficulty:r.difficulty,endsAt:J.firestore.Timestamp.fromDate(T)};t?(await X2(t,C),alert("Competition updated successfully!")):(await m7(C),alert("Competition created successfully!")),n?n():e()}catch(T){console.error("Error saving competition:",T),f(T.message||"An error occurred while saving the competition.")}finally{l(!1)}};return m?u.jsx(pj,{children:u.jsx(gj,{children:"Loading competition data..."})}):u.jsxs(pj,{children:[u.jsx(gj,{children:t?"Edit Competition":"Create New Competition"}),u.jsxs(Ise,{onSubmit:w,children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"title",children:"Title*"}),u.jsx(ks,{id:"title",name:"title",value:r.title,onChange:v,placeholder:"e.g. Dragon Slayer Challenge",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"description",children:"Description*"}),u.jsx(yj,{id:"description",name:"description",value:r.description,onChange:v,placeholder:"Provide details about the competition and prizes",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"imageUrl",children:"Image URL"}),u.jsx(ks,{id:"imageUrl",name:"imageUrl",value:r.imageUrl,onChange:v,placeholder:"https://example.com/image.jpg"}),u.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",opacity:.7},children:"Provide a URL to an image for this competition (optional)"})]}),u.jsxs(X1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"prize",children:"Prize*"}),u.jsx(ks,{id:"prize",name:"prize",value:r.prize,onChange:v,placeholder:"e.g. Dragon Gear + 100M OSRS Gold",required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"prizeValue",children:"Prize Value Display*"}),u.jsx(ks,{id:"prizeValue",name:"prizeValue",value:r.prizeValue,onChange:v,placeholder:"e.g. 100M OSRS Gold",required:!0})]})]}),u.jsxs(X1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"difficulty",children:"Difficulty"}),u.jsxs(vj,{id:"difficulty",name:"difficulty",value:r.difficulty,onChange:v,children:[u.jsx("option",{value:"easy",children:"Easy"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"hard",children:"Hard"})]})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"status",children:"Status"}),u.jsxs(vj,{id:"status",name:"status",value:r.status,onChange:v,children:[u.jsx("option",{value:"active",children:"Active"}),u.jsx("option",{value:"ending",children:"Ending Soon"})]})]})]}),u.jsxs(X1,{children:[u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"ticketPrice",children:"Ticket Price (Credits)*"}),u.jsx(ks,{id:"ticketPrice",name:"ticketPrice",type:"number",min:"1",value:r.ticketPrice,onChange:v,required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"totalTickets",children:"Total Tickets*"}),u.jsx(ks,{id:"totalTickets",name:"totalTickets",type:"number",min:"1",value:r.totalTickets,onChange:v,required:!0})]})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"endsAt",children:"End Date*"}),u.jsx(ks,{id:"endsAt",name:"endsAt",type:"date",value:r.endsAt,onChange:v,required:!0})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"triviaQuestion",children:"Trivia Question*"}),u.jsx(yj,{id:"triviaQuestion",name:"triviaQuestion",value:r.triviaQuestion,onChange:v,placeholder:"Enter a RuneScape related trivia question",required:!0}),u.jsx("div",{style:{fontSize:"0.75rem",marginTop:"0.25rem",opacity:.7},children:"Trivia questions help classify competitions as skill-based contests"})]}),u.jsxs(vr,{children:[u.jsx(br,{htmlFor:"triviaAnswer",children:"Correct Answer*"}),u.jsx(ks,{id:"triviaAnswer",name:"triviaAnswer",value:r.triviaAnswer,onChange:v,placeholder:"Enter the correct answer to the trivia question",required:!0})]}),d&&u.jsx(Lse,{children:d}),u.jsxs(Nse,{children:[u.jsx(Mse,{type:"button",onClick:e,children:"Cancel"}),u.jsx(Rse,{type:"submit",disabled:a,children:a?t?"Updating...":"Creating...":t?"Update Competition":"Create Competition"})]})]})]})}async function Pse(){console.log("Starting database seeding...");try{J.apps.length||J.initializeApp(o7);const t=J.firestore(),e=[{email:"admin@example.com",displayName:"Admin User",credits:1e3,isAdmin:!0,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"user@example.com",displayName:"Regular User",credits:100,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"player1@example.com",displayName:"Lucky Player",credits:250,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)},{email:"player2@example.com",displayName:"Big Winner",credits:500,isAdmin:!1,createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date)}],n=["https://oldschool.runescape.wiki/images/Dragon_claws_detail.png","https://oldschool.runescape.wiki/images/Abyssal_whip_detail.png","https://oldschool.runescape.wiki/images/Twisted_bow_detail.png","https://oldschool.runescape.wiki/images/3rd_age_platebody_detail.png","https://oldschool.runescape.wiki/images/Bandos_chestplate_detail.png","https://oldschool.runescape.wiki/images/Dragon_warhammer_detail.png","https://oldschool.runescape.wiki/images/Saradomin_godsword_detail.png","https://oldschool.runescape.wiki/images/Elder_maul_detail.png","https://oldschool.runescape.wiki/images/Ancestral_robe_top_detail.png","https://oldschool.runescape.wiki/images/Scythe_of_vitur_%28uncharged%29_detail.png"],r=[{title:"OSRS Gold Giveaway",description:"Win 10M OSRS gold! This competition is perfect for players looking to boost their wealth with some easy gold.",prize:"10M OSRS Gold",prizeValue:"5 USD",imageUrl:"https://oldschool.runescape.wiki/images/Gold_coin_10000.png",ticketPrice:10,totalTickets:100,ticketsSold:25,difficulty:"easy",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+7*24*60*60*1e3))},{title:"Dragon Warhammer Giveaway",description:"Win a Dragon Warhammer, one of the most sought-after weapons for PvM content!",prize:"Dragon Warhammer",prizeValue:"25 USD",imageUrl:n[5],ticketPrice:25,totalTickets:200,ticketsSold:50,difficulty:"medium",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+14*24*60*60*1e3))},{title:"Twisted Bow Challenge",description:"The ultimate OSRS prize - win a Twisted Bow, the most powerful ranged weapon in the game!",prize:"Twisted Bow",prizeValue:"100 USD",imageUrl:n[2],ticketPrice:50,totalTickets:500,ticketsSold:125,difficulty:"hard",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+21*24*60*60*1e3))},{title:"3rd Age Armor Set",description:"Show off your wealth with this ultra-rare 3rd Age armor set!",prize:"3rd Age Full Armor Set",prizeValue:"75 USD",imageUrl:n[3],ticketPrice:40,totalTickets:300,ticketsSold:89,difficulty:"hard",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+10*24*60*60*1e3))},{title:"Bandos Armor Giveaway",description:"Win the complete Bandos armor set, perfect for melee training and bossing!",prize:"Full Bandos Armor Set",prizeValue:"30 USD",imageUrl:n[4],ticketPrice:20,totalTickets:150,ticketsSold:62,difficulty:"medium",status:"active",createdAt:J.firestore.Timestamp.fromDate(new Date),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()+5*24*60*60*1e3))}],i=[{title:"Abyssal Whip Giveaway",description:"This competition has ended. The winner received an Abyssal Whip!",prize:"Abyssal Whip",prizeValue:"10 USD",imageUrl:n[1],ticketPrice:15,totalTickets:50,ticketsSold:50,difficulty:"easy",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-14*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-7*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-7*24*60*60*1e3)),winner:{userId:"user@example.com",username:"Regular User",email:"user@example.com"},seed:"abcdef1234567890",blockHash:"block123456789",winningTicket:42},{title:"Dragon Claws Competition",description:"This competition has ended. The winner received Dragon Claws!",prize:"Dragon Claws",prizeValue:"40 USD",imageUrl:n[0],ticketPrice:35,totalTickets:200,ticketsSold:198,difficulty:"hard",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-15*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-15*24*60*60*1e3)),winner:{userId:"player1@example.com",username:"Lucky Player",email:"player1@example.com"},seed:"lucky123456789",blockHash:"block987654321",winningTicket:137},{title:"Saradomin Godsword Raffle",description:"This competition has ended. The winner received a Saradomin Godsword!",prize:"Saradomin Godsword",prizeValue:"20 USD",imageUrl:n[6],ticketPrice:20,totalTickets:100,ticketsSold:100,difficulty:"medium",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-21*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-10*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-10*24*60*60*1e3)),winner:{userId:"player2@example.com",username:"Big Winner",email:"player2@example.com"},seed:"winner987654321",blockHash:"block555666777",winningTicket:73},{title:"Elder Maul Giveaway",description:"This competition has ended. The winner received an Elder Maul!",prize:"Elder Maul",prizeValue:"35 USD",imageUrl:n[7],ticketPrice:30,totalTickets:150,ticketsSold:142,difficulty:"medium",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-30*24*60*60*1e3)),winner:{userId:"player1@example.com",username:"Lucky Player",email:"player1@example.com"},seed:"maul123456789",blockHash:"block444555666",winningTicket:89},{title:"Ancestral Robes Competition",description:"This competition has ended. The winner received Ancestral Robes!",prize:"Ancestral Robes Set",prizeValue:"60 USD",imageUrl:n[8],ticketPrice:45,totalTickets:250,ticketsSold:243,difficulty:"hard",status:"complete",createdAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-60*24*60*60*1e3)),updatedAt:J.firestore.Timestamp.fromDate(new Date),endsAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),completedAt:J.firestore.Timestamp.fromDate(new Date(Date.now()-45*24*60*60*1e3)),winner:{userId:"player2@example.com",username:"Big Winner",email:"player2@example.com"},seed:"robes987654321",blockHash:"block111222333",winningTicket:175}],a=[...r,...i];for(const l of e)await t.collection("users").doc(l.email).set(l),console.log(`Added user: ${l.email}`);for(const l of a)await t.collection("competitions").add(l),console.log(`Added competition: ${l.title}`);for(const l of i){const d=await t.collection("competitions").where("title","==",l.title).get();if(!d.empty){const f=d.docs[0].id;await t.collection("tickets").add({competitionId:f,userId:l.winner.userId,purchasedAt:l.completedAt,ticketNumber:l.winningTicket,isWinner:!0}),console.log(`Added winning ticket for competition: ${l.title}`);const m=e.map(g=>g.email);for(let g=0;g<Math.min(l.ticketsSold-1,10);g++){let v=m[Math.floor(Math.random()*m.length)];for(;v===l.winner.userId;)v=m[Math.floor(Math.random()*m.length)];let w=Math.floor(Math.random()*l.totalTickets)+1;for(;w===l.winningTicket;)w=Math.floor(Math.random()*l.totalTickets)+1;await t.collection("tickets").add({competitionId:f,userId:v,purchasedAt:J.firestore.Timestamp.fromDate(new Date(l.completedAt.toDate().getTime()-Math.random()*7*24*60*60*1e3)),ticketNumber:w,isWinner:!1})}console.log(`Added ${Math.min(l.ticketsSold-1,10)} random tickets for competition: ${l.title}`)}}return console.log("Database seeding completed successfully!"),!0}catch(t){return console.error("Error seeding database:",t),!1}}const Use=b.div`
  padding: 1.5rem;
`,Vse=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,Bse=b.p`
  color: hsl(var(--muted-foreground));
  margin-bottom: 1.5rem;
`,zse=b.button`
  background-color: #4caf50;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  margin: 10px 0;
  
  &:hover {
    background-color: #45a049;
  }
  
  &:disabled {
    background-color: #cccccc;
    cursor: not-allowed;
  }
`,$se=b.div`
  margin-top: 10px;
  padding: 10px;
  border-radius: 4px;
  background-color: ${t=>t.success?"#dff0d8":"#f2dede"};
  color: ${t=>t.success?"#3c763d":"#a94442"};
`;function Fse(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),i=async()=>{e(!0),r(null);try{const a=await Pse();r(a?{success:!0,message:"Database seeded successfully!"}:{success:!1,message:"Failed to seed database. Check console for errors."})}catch(a){console.error("Error in seed operation:",a),r({success:!1,message:`Error: ${a instanceof Error?a.message:"Unknown error"}`})}finally{e(!1)}};return u.jsxs(Use,{children:[u.jsx(Vse,{children:"Database Seeder"}),u.jsx(Bse,{children:"Use this tool to seed the database with sample data for testing. This will add sample users, competitions, and completed competitions."}),u.jsx(zse,{onClick:i,disabled:t,children:t?"Seeding...":"Seed Database"}),n&&u.jsx($se,{success:n.success,children:n.message})]})}const qse=b.div`
  padding: 1.5rem;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  margin-bottom: 2rem;
  border: 1px solid hsl(var(--border));
`,Hse=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,bj=b.p`
  margin-bottom: 1.5rem;
  color: hsl(var(--muted-foreground));
  font-size: 0.875rem;
`,Gse=b.div`
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
`,Wse=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  
  ${t=>{switch(t.variant){case"primary":return`
          background: hsl(var(--primary));
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;case"success":return`
          background: rgb(22, 163, 74);
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;case"destructive":return`
          background: hsl(var(--destructive));
          color: white;
          &:hover:not(:disabled) {
            opacity: 0.9;
          }
        `;default:return`
          background: transparent;
          color: hsl(var(--foreground));
          border: 1px solid hsl(var(--border));
          &:hover:not(:disabled) {
            background: hsl(var(--accent));
          }
        `}}}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Yse=b.div`
  padding: 0.75rem;
  border-radius: 0.375rem;
  margin-bottom: 1rem;
  background-color: ${t=>t.success?"rgba(22, 163, 74, 0.1)":"rgba(239, 68, 68, 0.1)"};
  color: ${t=>t.success?"rgb(22, 163, 74)":"rgb(239, 68, 68)"};
  font-size: 0.875rem;
`;function Kse(){const[t,e]=k.useState(!1),[n,r]=k.useState(null),i=async()=>{if(!t){e(!0),r(null);try{const f=(await J.app().functions("europe-west2").httpsCallable("manualProcessCompetitions")()).data;f.success?r({success:!0,message:`Successfully processed ${f.processedCount} competitions.`}):r({success:!1,message:"Error processing competitions."})}catch(a){console.error("Error processing competitions:",a),r({success:!1,message:`Error: ${a instanceof Error?a.message:"Unknown error"}`})}finally{e(!1)}}};return u.jsxs(qse,{children:[u.jsx(Hse,{children:"Competition Processor"}),u.jsx(bj,{children:"Use this tool to manually process all competitions that have ended and are waiting to be completed. This will select winners for ended competitions using a fair and transparent selection algorithm."}),u.jsx(bj,{children:"Note: Competitions are automatically processed every hour, but you can use this to process them immediately."}),u.jsx(Gse,{children:u.jsx(Wse,{variant:"primary",onClick:i,disabled:t,children:t?"Processing...":"Process Ended Competitions"})}),n&&u.jsx(Yse,{success:n.success,children:n.message})]})}const Qse=b.div`
  padding: 1.5rem;
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
`,Xse=b.h2`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
`,Zse=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,Z1=b.button`
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`,Jse=b.div`
  display: grid;
  grid-template-columns: 1fr 2fr;
  gap: 1.5rem;
  
  @media (max-width: 960px) {
    grid-template-columns: 1fr;
  }
`,eoe=b.div`
  max-height: 700px;
  overflow-y: auto;
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
`,toe=b.div`
  padding: 1rem;
  border-bottom: 1px solid hsl(var(--border));
  background: ${t=>t.isSelected?"hsl(var(--accent))":"transparent"};
  cursor: pointer;
  
  &:last-child {
    border-bottom: none;
  }
  
  &:hover {
    background: hsl(var(--accent));
  }
`,noe=b.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.5rem;
`,roe=b.h3`
  font-size: 0.875rem;
  font-weight: 600;
  margin: 0;
`,wj=b.span`
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  background-color: ${t=>{switch(t.status){case"open":return"rgba(22, 163, 74, 0.2)";case"in_progress":return"rgba(245, 158, 11, 0.2)";case"resolved":return"rgba(37, 99, 235, 0.2)";case"closed":return"rgba(107, 114, 128, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.status){case"open":return"rgb(22, 163, 74)";case"in_progress":return"rgb(245, 158, 11)";case"resolved":return"rgb(37, 99, 235)";case"closed":return"rgb(107, 114, 128)";default:return"rgb(107, 114, 128)"}}};
`,J1=b.span`
  font-size: 0.75rem;
  padding: 0.125rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  margin-right: 0.5rem;
  background-color: ${t=>{switch(t.type){case"prize_collection":return"rgba(239, 68, 68, 0.2)";case"support":return"rgba(37, 99, 235, 0.2)";case"refund":return"rgba(245, 158, 11, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.type){case"prize_collection":return"rgb(239, 68, 68)";case"support":return"rgb(37, 99, 235)";case"refund":return"rgb(245, 158, 11)";default:return"rgb(107, 114, 128)"}}};
`,ioe=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
`,soe=b.div`
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  overflow: hidden;
`,ooe=b.div`
  padding: 3rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
`,aoe=b.div`
  padding: 1rem;
  background: hsl(var(--accent));
  border-bottom: 1px solid hsl(var(--border));
`,loe=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
`,coe=b.div`
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
`,Gm=b.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.75rem;
`,uoe=b.div`
  padding: 1rem;
`,doe=b.div`
  white-space: pre-wrap;
  background: hsl(var(--background));
  padding: 1rem;
  border-radius: 0.375rem;
  margin-bottom: 1.5rem;
  font-size: 0.875rem;
`,hoe=b.div`
  margin-top: 1.5rem;
`,foe=b.div`
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: 300px;
  overflow-y: auto;
  padding: 0.5rem;
`,moe=b.div`
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
`,poe=b.div`
  width: 2rem;
  height: 2rem;
  border-radius: 9999px;
  background-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.2)":"rgba(107, 114, 128, 0.2)"};
  color: ${t=>t.isAdmin?"rgb(37, 99, 235)":"rgb(107, 114, 128)"};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  font-size: 0.75rem;
`,goe=b.div`
  flex: 1;
  background: hsl(var(--background));
  padding: 0.75rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
`,yoe=b.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 0.5rem;
  font-size: 0.75rem;
`,voe=b.span`
  font-weight: 600;
`,boe=b.span`
  color: hsl(var(--muted-foreground));
`,woe=b.div`
  white-space: pre-wrap;
`,xoe=b.form`
  margin-top: 1.5rem;
`,Toe=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.75rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.375rem;
  color: hsl(var(--foreground));
  resize: vertical;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 1px hsl(var(--primary));
  }
`,Soe=b.div`
  display: flex;
  gap: 0.5rem;
  justify-content: space-between;
`,Coe=b.button`
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-weight: 500;
  transition: all 0.2s;
  cursor: pointer;
  
  ${t=>{switch(t.variant){case"primary":return`
          background: hsl(var(--primary));
          color: white;
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `;case"danger":return`
          background: hsl(var(--destructive));
          color: white;
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `;case"outline":return`
          background: transparent;
          color: hsl(var(--foreground));
          border: 1px solid hsl(var(--border));
          
          &:hover {
            background: hsl(var(--accent));
          }
        `;default:return`
          background: hsl(var(--secondary));
          color: hsl(var(--secondary-foreground));
          border: none;
          
          &:hover {
            opacity: 0.9;
          }
        `}}}
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Eoe=b.div`
  display: flex;
  gap: 0.5rem;
`,eb=b.div`
  padding: 3rem;
  text-align: center;
  color: hsl(var(--muted-foreground));
`,koe=b.div`
  display: flex;
  gap: 0.5rem;
  margin-top: 1rem;
`,tb=t=>{if(!t)return"N/A";try{return new Date(t.seconds*1e3).toLocaleString()}catch{return"N/A"}},Aoe=()=>{const{currentUser:t}=In(),e=Pt(),n=Gn(),[r,i]=k.useState("all"),[a,l]=k.useState([]),[d,f]=k.useState(null),[m,g]=k.useState([]),[v,w]=k.useState(""),[x,T]=k.useState(!0),[C,A]=k.useState(!1),_=M=>new URLSearchParams(n.search).get(M);k.useEffect(()=>{(async()=>{if(t)try{T(!0);const $=await w7();l($);const Q=_("ticketId");if(Q){console.log("Looking for ticket ID from URL:",Q);let ie=$.find(he=>he.id===Q);if(!ie){console.log("Ticket not found in open tickets, attempting to load directly");try{const he=await dy(Q);he&&(ie=he,l(Ie=>Ie.some(ne=>ne.id===he.id)?Ie:[...Ie,he]))}catch(he){console.error("Error loading ticket by ID:",he)}}ie?(console.log("Found ticket from URL param:",ie.subject),await L(ie)):console.log("Ticket ID from URL not found")}}catch($){console.error("Error loading tickets:",$)}finally{T(!1)}})()},[t,n.search]);const L=async M=>{if(f(M),M.id)try{if(M.status==="open"){const Q=(t==null?void 0:t.email)||void 0;await Ew(M.id,{status:"in_progress",assignedTo:Q}),l(ie=>ie.map(he=>he.id===M.id?{...he,status:"in_progress",assignedTo:Q}:he)),f(ie=>ie?{...ie,status:"in_progress",assignedTo:Q}:null)}const $=await Gp(M.id);g($),e(`/admin?tab=support&ticketId=${M.id}`,{replace:!0})}catch($){console.error("Error updating ticket status:",$)}},I=async M=>{if(M.preventDefault(),!(!t||!d||!d.id||!v.trim()))try{if(A(!0),await e5({ticketId:d.id,userId:t.uid,isAdmin:!0,message:v}),w(""),d.id){const $=await Gp(d.id);g($)}}catch($){console.error("Error sending reply:",$)}finally{A(!1)}},q=async()=>{if(!(!d||!d.id)&&confirm("Are you sure you want to mark this ticket as resolved?"))try{await Ew(d.id,{status:"resolved"}),l(M=>M.filter($=>$.id!==d.id)),f(null),e("/admin?tab=support",{replace:!0})}catch(M){console.error("Error resolving ticket:",M)}},j=a.filter(M=>r==="all"?!0:r==="prize"?M.type==="prize_collection":r==="support"?M.type==="support":!0);return u.jsxs(Qse,{children:[u.jsx(Xse,{children:"Support Tickets"}),u.jsxs(Zse,{children:[u.jsx(Z1,{active:r==="all",onClick:()=>i("all"),children:"All Tickets"}),u.jsx(Z1,{active:r==="prize",onClick:()=>i("prize"),children:"Prize Collection"}),u.jsx(Z1,{active:r==="support",onClick:()=>i("support"),children:"Support"})]}),x?u.jsx(eb,{children:"Loading tickets..."}):j.length===0?u.jsx(eb,{children:"No open tickets found."}):u.jsxs(Jse,{children:[u.jsx(eoe,{children:j.map(M=>u.jsxs(toe,{isSelected:(d==null?void 0:d.id)===M.id,onClick:()=>L(M),children:[u.jsxs(noe,{children:[u.jsx(roe,{children:M.subject}),u.jsx(wj,{status:M.status,children:M.status.replace("_"," ")})]}),u.jsxs(ioe,{children:[u.jsxs("div",{children:[u.jsx(J1,{type:M.type,children:M.type.replace("_"," ")}),M.priority==="high"&&u.jsx(J1,{type:"high",children:"High Priority"})]}),u.jsx("div",{children:tb(M.createdAt)})]})]},M.id))}),u.jsx(soe,{children:d?u.jsxs(u.Fragment,{children:[u.jsxs(aoe,{children:[u.jsx(loe,{children:d.subject}),u.jsxs(coe,{children:[u.jsxs(Gm,{children:[u.jsx("span",{children:"From:"}),u.jsx("strong",{children:d.userEmail})]}),u.jsxs(Gm,{children:[u.jsx("span",{children:"Created:"}),u.jsx("strong",{children:tb(d.createdAt)})]}),u.jsxs(Gm,{children:[u.jsx("span",{children:"Status:"}),u.jsx(wj,{status:d.status,children:d.status.replace("_"," ")})]}),u.jsxs(Gm,{children:[u.jsx("span",{children:"Type:"}),u.jsx(J1,{type:d.type,children:d.type.replace("_"," ")})]})]}),u.jsx(koe,{children:u.jsx("button",{onClick:q,disabled:d.status==="resolved",style:{padding:"0.5rem 1rem",background:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.25rem",cursor:"pointer",opacity:d.status==="resolved"?.5:1},children:"Mark as Resolved"})})]}),u.jsxs(uoe,{children:[u.jsx("h4",{children:"Description"}),u.jsx(doe,{children:d.description}),u.jsxs(hoe,{children:[u.jsx("h4",{children:"Messages"}),m.length===0?u.jsx(eb,{children:"No messages yet."}):u.jsx(foe,{children:m.map(M=>u.jsxs(moe,{isAdmin:M.isAdmin,children:[u.jsx(poe,{isAdmin:M.isAdmin,children:M.isAdmin?"A":"U"}),u.jsxs(goe,{children:[u.jsxs(yoe,{children:[u.jsx(voe,{children:M.isAdmin?"Admin":d.userEmail}),u.jsx(boe,{children:tb(M.createdAt)})]}),u.jsx(woe,{children:M.message})]})]},M.id))}),u.jsxs(xoe,{onSubmit:I,children:[u.jsx(Toe,{value:v,onChange:M=>w(M.target.value),placeholder:"Type your reply here...",required:!0}),u.jsx(Soe,{children:u.jsx(Eoe,{children:u.jsx(Coe,{variant:"primary",type:"submit",disabled:C||!v.trim(),children:C?"Sending...":"Send Reply"})})})]})]})]})]}):u.jsx(ooe,{children:"Select a ticket to view details"})})]})]})},_oe=async()=>{const e=(await st.collection("competitions").get()).docs.map(a=>({id:a.id,...a.data()}));let n=0;const r={},i={};return e.forEach(a=>{const l=a.ticketsSold*a.ticketPrice;if(n+=l,r[a.id]=l,a.completedAt){const d=new Date(a.completedAt.toDate()).toISOString().split("T")[0];i[d]=(i[d]||0)+l}}),{totalRevenue:n,revenueByCompetition:r,revenueByDay:i}},joe=async()=>{const e=(await st.collection("users").get()).docs.map(v=>({id:v.id,...v.data()})),n=new Date,r=new Date(n);r.setDate(r.getDate()-30);const i=new Date(n);i.setDate(i.getDate()-7);const a={};let l=0,d=0;e.forEach(v=>{if(v.createdAt){const w=v.createdAt.toDate(),x=w.toISOString().split("T")[0];a[x]=(a[x]||0)+1,w>=i&&l++,w>=r&&d++}});const f=J.firestore.Timestamp.fromDate(r),m=await st.collection("tickets").where("purchasedAt",">=",f).get(),g=new Set(m.docs.map(v=>v.data().userId));return{totalUsers:e.length,newUsersLast7Days:l,newUsersLast30Days:d,usersByJoinDate:a,activeUsers:g.size}},Doe=async()=>{const e=(await st.collection("competitions").get()).docs.map(f=>({id:f.id,...f.data()})),n=e.filter(f=>f.status==="active"||f.status==="ending"),r=e.filter(f=>f.status==="complete"),i=e.reduce((f,m)=>f+m.ticketsSold,0),a=e.length>0?Math.round(i/e.length):0,l=[...e].sort((f,m)=>m.ticketsSold-f.ticketsSold).slice(0,5).map(f=>({id:f.id,title:f.title,ticketsSold:f.ticketsSold})),d=[...r].filter(f=>f.winner).sort((f,m)=>!f.completedAt||!m.completedAt?0:m.completedAt.toDate().getTime()-f.completedAt.toDate().getTime()).slice(0,5).map(f=>{var m,g;return{id:f.id,title:f.title,winner:((m=f.winner)==null?void 0:m.username)||"Unknown",endDate:((g=f.completedAt)==null?void 0:g.toDate())||new Date}});return{totalCompetitions:e.length,activeCompetitions:n.length,completedCompetitions:r.length,averageTicketsSold:a,mostPopularCompetitions:l,recentlyEndedCompetitions:d}},Ioe=async()=>{const e=(await st.collection("tickets").get()).docs.map(v=>({id:v.id,...v.data()})),n=new Date,r=new Date(n);r.setDate(r.getDate()-30);const i=new Date(n);i.setDate(i.getDate()-7);const a={};let l=0,d=0;const f={};e.forEach(v=>{if(v.purchasedAt){const w=v.purchasedAt.toDate(),x=w.toISOString().split("T")[0];a[x]=(a[x]||0)+1,w>=i&&l++,w>=r&&d++}f[v.userId]=(f[v.userId]||0)+1});const m=Object.keys(f).length,g=m>0?Math.round(e.length/m*100)/100:0;return{totalTicketsSold:e.length,ticketsSoldLast7Days:l,ticketsSoldLast30Days:d,ticketsByDay:a,averageTicketsPerUser:g}},Roe=async()=>{const t=await st.collection("users").get(),e=t.docs.length;let n=0;t.forEach(d=>{const f=d.data();n+=f.credits||0});const r=await st.collection("tickets").get(),i=new Set(r.docs.map(d=>d.data().userId)).size,a=await st.collection("supportTickets").get(),l=await st.collection("supportTickets").where("status","in",["open","in_progress"]).get();return{conversionRate:e>0?Math.round(i/e*100):0,averageCreditsPerUser:e>0?Math.round(n/e*100)/100:0,totalSupportTickets:a.docs.length,openSupportTickets:l.docs.length}},Moe=async()=>{const[t,e,n,r,i]=await Promise.all([_oe(),joe(),Doe(),Ioe(),Roe()]);return{revenue:t,users:e,competitions:n,tickets:r,system:i}},iN=6048e5,Noe=864e5,xj=Symbol.for("constructDateFrom");function Xs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&xj in t?t[xj](e):t instanceof Date?new t.constructor(e):new Date(e)}function Pr(t,e){return Xs(e||t,t)}let Loe={};function vy(){return Loe}function ph(t,e){var d,f,m,g;const n=vy(),r=(e==null?void 0:e.weekStartsOn)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??n.weekStartsOn??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,i=Pr(t,e==null?void 0:e.in),a=i.getDay(),l=(a<r?7:0)+a-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function eg(t,e){return ph(t,{...e,weekStartsOn:1})}function sN(t,e){const n=Pr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Xs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=eg(i),l=Xs(n,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const d=eg(l);return n.getTime()>=a.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function Tj(t){const e=Pr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Ooe(t,...e){const n=Xs.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function Sj(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Poe(t,e,n){const[r,i]=Ooe(n==null?void 0:n.in,t,e),a=Sj(r),l=Sj(i),d=+a-Tj(a),f=+l-Tj(l);return Math.round((d-f)/Noe)}function Uoe(t,e){const n=sN(t,e),r=Xs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),eg(r)}function Voe(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Boe(t){return!(!Voe(t)&&typeof t!="number"||isNaN(+Pr(t)))}function zoe(t,e){const n=Pr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const $oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Foe=(t,e,n)=>{let r;const i=$oe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function nb(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qoe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hoe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Goe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Woe={date:nb({formats:qoe,defaultWidth:"full"}),time:nb({formats:Hoe,defaultWidth:"full"}),dateTime:nb({formats:Goe,defaultWidth:"full"})},Yoe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Koe=(t,e,n,r)=>Yoe[t];function ed(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,d=n!=null&&n.width?String(n.width):l;i=t.formattingValues[d]||t.formattingValues[l]}else{const l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[d]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const Qoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xoe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zoe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Joe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nae=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rae={ordinalNumber:nae,era:ed({values:Qoe,defaultWidth:"wide"}),quarter:ed({values:Xoe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ed({values:Zoe,defaultWidth:"wide"}),day:ed({values:Joe,defaultWidth:"wide"}),dayPeriod:ed({values:eae,defaultWidth:"wide",formattingValues:tae,defaultFormattingWidth:"wide"})};function td(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],d=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],f=Array.isArray(d)?sae(d,v=>v.test(l)):iae(d,v=>v.test(l));let m;m=t.valueCallback?t.valueCallback(f):f,m=n.valueCallback?n.valueCallback(m):m;const g=e.slice(l.length);return{value:m,rest:g}}}function iae(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function sae(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function oae(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const d=e.slice(i.length);return{value:l,rest:d}}}const aae=/^(\d+)(th|st|nd|rd)?/i,lae=/\d+/i,cae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uae={any:[/^b/i,/^(a|c)/i]},dae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hae={any:[/1/i,/2/i,/3/i,/4/i]},fae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bae={ordinalNumber:oae({matchPattern:aae,parsePattern:lae,valueCallback:t=>parseInt(t,10)}),era:td({matchPatterns:cae,defaultMatchWidth:"wide",parsePatterns:uae,defaultParseWidth:"any"}),quarter:td({matchPatterns:dae,defaultMatchWidth:"wide",parsePatterns:hae,defaultParseWidth:"any",valueCallback:t=>t+1}),month:td({matchPatterns:fae,defaultMatchWidth:"wide",parsePatterns:mae,defaultParseWidth:"any"}),day:td({matchPatterns:pae,defaultMatchWidth:"wide",parsePatterns:gae,defaultParseWidth:"any"}),dayPeriod:td({matchPatterns:yae,defaultMatchWidth:"any",parsePatterns:vae,defaultParseWidth:"any"})},wae={code:"en-US",formatDistance:Foe,formatLong:Woe,formatRelative:Koe,localize:rae,match:bae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xae(t,e){const n=Pr(t,e==null?void 0:e.in);return Poe(n,zoe(n))+1}function Tae(t,e){const n=Pr(t,e==null?void 0:e.in),r=+eg(n)-+Uoe(n);return Math.round(r/iN)+1}function oN(t,e){var g,v,w,x;const n=Pr(t,e==null?void 0:e.in),r=n.getFullYear(),i=vy(),a=(e==null?void 0:e.firstWeekContainsDate)??((v=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??i.firstWeekContainsDate??((x=(w=i.locale)==null?void 0:w.options)==null?void 0:x.firstWeekContainsDate)??1,l=Xs((e==null?void 0:e.in)||t,0);l.setFullYear(r+1,0,a),l.setHours(0,0,0,0);const d=ph(l,e),f=Xs((e==null?void 0:e.in)||t,0);f.setFullYear(r,0,a),f.setHours(0,0,0,0);const m=ph(f,e);return+n>=+d?r+1:+n>=+m?r:r-1}function Sae(t,e){var d,f,m,g;const n=vy(),r=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,i=oN(t,e),a=Xs((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ph(a,e)}function Cae(t,e){const n=Pr(t,e==null?void 0:e.in),r=+ph(n,e)-+Sae(n,e);return Math.round(r/iN)+1}function Xe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const As={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Xe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Xe(n+1,2)},d(t,e){return Xe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Xe(t.getHours()%12||12,e.length)},H(t,e){return Xe(t.getHours(),e.length)},m(t,e){return Xe(t.getMinutes(),e.length)},s(t,e){return Xe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Xe(i,e.length)}},Al={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cj={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return As.y(t,e)},Y:function(t,e,n,r){const i=oN(t,r),a=i>0?i:1-i;if(e==="YY"){const l=a%100;return Xe(l,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Xe(a,e.length)},R:function(t,e){const n=sN(t);return Xe(n,e.length)},u:function(t,e){const n=t.getFullYear();return Xe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Xe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Xe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return As.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Xe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Cae(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Xe(i,e.length)},I:function(t,e,n){const r=Tae(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Xe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):As.d(t,e)},D:function(t,e,n){const r=xae(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Xe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Xe(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Xe(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Xe(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Al.noon:r===0?i=Al.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Al.evening:r>=12?i=Al.afternoon:r>=4?i=Al.morning:i=Al.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return As.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):As.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Xe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Xe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):As.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):As.s(t,e)},S:function(t,e){return As.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return kj(r);case"XXXX":case"XX":return Bo(r);case"XXXXX":case"XXX":default:return Bo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return kj(r);case"xxxx":case"xx":return Bo(r);case"xxxxx":case"xxx":default:return Bo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Ej(r,":");case"OOOO":default:return"GMT"+Bo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Ej(r,":");case"zzzz":default:return"GMT"+Bo(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Xe(r,e.length)},T:function(t,e,n){return Xe(+t,e.length)}};function Ej(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Xe(a,2)}function kj(t,e){return t%60===0?(t>0?"-":"+")+Xe(Math.abs(t)/60,2):Bo(t,e)}function Bo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Xe(Math.trunc(r/60),2),a=Xe(r%60,2);return n+i+e+a}const Aj=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},aN=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Eae=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return Aj(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",Aj(r,e)).replace("{{time}}",aN(i,e))},kae={p:aN,P:Eae},Aae=/^D+$/,_ae=/^Y+$/,jae=["D","DD","YY","YYYY"];function Dae(t){return Aae.test(t)}function Iae(t){return _ae.test(t)}function Rae(t,e,n){const r=Mae(t,e,n);if(console.warn(r),jae.includes(t))throw new RangeError(r)}function Mae(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Nae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oae=/^'([^]*?)'?$/,Pae=/''/g,Uae=/[a-zA-Z]/;function Vae(t,e,n){var g,v,w,x;const r=vy(),i=r.locale??wae,a=r.firstWeekContainsDate??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=r.weekStartsOn??((x=(w=r.locale)==null?void 0:w.options)==null?void 0:x.weekStartsOn)??0,d=Pr(t,n==null?void 0:n.in);if(!Boe(d))throw new RangeError("Invalid time value");let f=e.match(Lae).map(T=>{const C=T[0];if(C==="p"||C==="P"){const A=kae[C];return A(T,i.formatLong)}return T}).join("").match(Nae).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const C=T[0];if(C==="'")return{isToken:!1,value:Bae(T)};if(Cj[C])return{isToken:!0,value:T};if(C.match(Uae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:T}});i.localize.preprocessor&&(f=i.localize.preprocessor(d,f));const m={firstWeekContainsDate:a,weekStartsOn:l,locale:i};return f.map(T=>{if(!T.isToken)return T.value;const C=T.value;(Iae(C)||Dae(C))&&Rae(C,e,String(t));const A=Cj[C[0]];return A(d,C,i.localize,m)}).join("")}function Bae(t){const e=t.match(Oae);return e?e[1].replace(Pae,"'"):t}const zae=b.div`
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(12, 1fr);
  
  @media (max-width: 1024px) {
    grid-template-columns: repeat(6, 1fr);
  }
  
  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
`,U5=b.div`
  background-color: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`,Mo=b.div`
  padding: 1rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
  display: flex;
  align-items: center;
  justify-content: space-between;
`,No=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,Lo=b.div`
  padding: 1.5rem;
`,Wm=b(U5)`
  grid-column: span 3;
  
  @media (max-width: 1024px) {
    grid-column: span 3;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,_j=b(U5)`
  grid-column: span 6;
  
  @media (max-width: 1024px) {
    grid-column: span 6;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,$ae=b(U5)`
  grid-column: span 12;
  
  @media (max-width: 1024px) {
    grid-column: span 6;
  }
  
  @media (max-width: 768px) {
    grid-column: span 1;
  }
`,qr=b.div`
  text-align: center;
`,Hr=b.div`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 0.5rem;
  color: ${t=>t.isPrimary?"hsl(var(--primary))":"hsl(var(--foreground))"};
`,Gr=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,Fae=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));
`,jj=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--destructive));
`,Dj=b.div`
  overflow-x: auto;
`,Ij=b.table`
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;
`,Rj=b.thead`
  background-color: hsl(var(--muted) / 0.5);
  border-bottom: 1px solid hsl(var(--border));
`,_l=b.th`
  padding: 0.75rem 1rem;
  text-align: left;
  font-weight: 600;
  color: hsl(var(--foreground));
  white-space: nowrap;
`,Mj=b.tbody`
  & tr:nth-of-type(even) {
    background-color: hsl(var(--muted) / 0.3);
  }
`,Nj=b.tr`
  border-bottom: 1px solid hsl(var(--border));
  transition: background-color 0.2s;
  
  &:hover {
    background-color: hsl(var(--muted) / 0.5);
  }
`,jl=b.td`
  padding: 0.75rem 1rem;
  vertical-align: middle;
`,qae=b.span`
  display: inline-block;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  background-color: ${t=>`hsl(${t.color} / 0.1)`};
  color: ${t=>`hsl(${t.color})`};
`,Lj=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 1rem;
`;b.div`
  height: 300px;
  margin-top: 1rem;
  position: relative;
`;const Hae=b.div`
  height: 1.5rem;
  width: ${t=>t.width};
  background-color: ${t=>t.color||"hsl(var(--primary))"};
  border-radius: 4px;
  transition: width 0.5s ease;
  position: relative;
  
  &::after {
    content: '${t=>t.width}';
    position: absolute;
    right: 8px;
    top: 2px;
    color: white;
    font-size: 0.75rem;
  }
`;function Gae(){const[t,e]=k.useState(null),[n,r]=k.useState(!0),[i,a]=k.useState(null);return k.useEffect(()=>{(async()=>{try{r(!0);const d=await Moe();e(d),a(null)}catch(d){console.error("Error fetching analytics data:",d),a("Failed to load analytics data. Please try again later.")}finally{r(!1)}})()},[]),n?u.jsx(Fae,{children:"Loading analytics data..."}):i?u.jsx(jj,{children:i}):t?u.jsxs(zae,{children:[u.jsxs(Wm,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Revenue"})}),u.jsx(Lo,{children:u.jsxs(qr,{children:[u.jsxs(Hr,{isPrimary:!0,children:[t.revenue.totalRevenue," credits"]}),u.jsx(Gr,{children:"Total Revenue"})]})})]}),u.jsxs(Wm,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Users"})}),u.jsxs(Lo,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.users.totalUsers}),u.jsx(Gr,{children:"Total Users"})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.875rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"New (7 days):"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.users.newUsersLast7Days})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[u.jsx("span",{children:"New (30 days):"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.users.newUsersLast30Days})]})]})]})]}),u.jsxs(Wm,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Competitions"})}),u.jsxs(Lo,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.competitions.totalCompetitions}),u.jsx(Gr,{children:"Total Competitions"})]}),u.jsxs(Lj,{style:{marginTop:"1rem"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"hsl(var(--primary))"},children:t.competitions.activeCompetitions}),u.jsx("div",{style:{fontSize:"0.75rem",color:"hsl(var(--muted-foreground))"},children:"Active"})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"hsl(var(--primary))"},children:t.competitions.completedCompetitions}),u.jsx("div",{style:{fontSize:"0.75rem",color:"hsl(var(--muted-foreground))"},children:"Completed"})]})]})]})]}),u.jsxs(Wm,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Tickets"})}),u.jsxs(Lo,{children:[u.jsxs(qr,{children:[u.jsx(Hr,{children:t.tickets.totalTicketsSold}),u.jsx(Gr,{children:"Total Tickets Sold"})]}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.875rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[u.jsx("span",{children:"Last 7 days:"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.tickets.ticketsSoldLast7Days})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"0.5rem"},children:[u.jsx("span",{children:"Last 30 days:"}),u.jsx("span",{style:{fontWeight:"bold"},children:t.tickets.ticketsSoldLast30Days})]})]})]})]}),u.jsxs(_j,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Most Popular Competitions"})}),u.jsx(Lo,{children:u.jsx(Dj,{children:u.jsxs(Ij,{children:[u.jsx(Rj,{children:u.jsxs("tr",{children:[u.jsx(_l,{children:"Title"}),u.jsx(_l,{children:"Tickets Sold"}),u.jsx(_l,{children:"Fill %"})]})}),u.jsx(Mj,{children:t.competitions.mostPopularCompetitions.map(l=>u.jsxs(Nj,{children:[u.jsx(jl,{children:l.title}),u.jsx(jl,{children:l.ticketsSold}),u.jsx(jl,{children:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:u.jsx(Hae,{width:`${Math.min(100,Math.round(Math.random()*100))}%`})})})]},l.id))})]})})})]}),u.jsxs(_j,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"Recent Completed Competitions"})}),u.jsx(Lo,{children:u.jsx(Dj,{children:u.jsxs(Ij,{children:[u.jsx(Rj,{children:u.jsxs("tr",{children:[u.jsx(_l,{children:"Title"}),u.jsx(_l,{children:"Winner"}),u.jsx(_l,{children:"End Date"})]})}),u.jsx(Mj,{children:t.competitions.recentlyEndedCompetitions.map(l=>u.jsxs(Nj,{children:[u.jsx(jl,{children:l.title}),u.jsx(jl,{children:u.jsx(qae,{color:"var(--primary)",children:l.winner})}),u.jsx(jl,{children:Vae(l.endDate,"MMM dd, yyyy")})]},l.id))})]})})})]}),u.jsxs($ae,{children:[u.jsx(Mo,{children:u.jsx(No,{children:"System Statistics"})}),u.jsx(Lo,{children:u.jsxs(Lj,{children:[u.jsxs(qr,{children:[u.jsxs(Hr,{children:[t.system.conversionRate,"%"]}),u.jsx(Gr,{children:"Conversion Rate"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.averageCreditsPerUser}),u.jsx(Gr,{children:"Avg. Credits / User"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.tickets.averageTicketsPerUser}),u.jsx(Gr,{children:"Avg. Tickets / User"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.competitions.averageTicketsSold}),u.jsx(Gr,{children:"Avg. Tickets / Competition"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.totalSupportTickets}),u.jsx(Gr,{children:"Total Support Tickets"})]}),u.jsxs(qr,{children:[u.jsx(Hr,{children:t.system.openSupportTickets}),u.jsx(Gr,{children:"Open Support Tickets"})]})]})})]})]}):u.jsx(jj,{children:"No data available"})}const Wae=async()=>{try{const e=await fetch("https://europe-west2-runeraffle-6fb42.cloudfunctions.net/helloWorld",{mode:"cors",headers:{Accept:"application/json"}});return e.ok?await e.json():{error:`HTTP error: ${e.status} ${e.statusText}`,headers:Object.fromEntries([...e.headers])}}catch(t){return console.error("Error testing helloWorld function:",t),{error:"Failed to call helloWorld function",details:String(t)}}},Yae=async()=>{try{const t="https://europe-west2-runeraffle-6fb42.cloudfunctions.net/helloWorld";try{const e=await fetch(t,{method:"OPTIONS",headers:{Origin:window.location.origin,"Access-Control-Request-Method":"GET","Access-Control-Request-Headers":"Content-Type"}}),n={"access-control-allow-origin":e.headers.get("access-control-allow-origin"),"access-control-allow-methods":e.headers.get("access-control-allow-methods"),"access-control-allow-headers":e.headers.get("access-control-allow-headers")};return{status:e.status,statusText:e.statusText,corsHeaders:n,mode:"preflight",headers:Object.fromEntries([...e.headers])}}catch{const n=await fetch(t,{headers:{Origin:window.location.origin}});return{status:n.status,statusText:n.statusText,corsHeaders:{"access-control-allow-origin":n.headers.get("access-control-allow-origin")},mode:"simple",headers:Object.fromEntries([...n.headers])}}}catch(t){return console.error("Error testing helloWorld CORS:",t),{error:"Failed to test CORS configuration",details:String(t)}}},Kae=async t=>{try{return(await J.app().functions("europe-west2").httpsCallable("sendEmail")({to:t,subject:"Test Email from Firebase Cloud Functions",text:"This is a test email sent from Firebase Cloud Functions",html:"<h1>Test Email</h1><p>This is a test email sent from Firebase Cloud Functions</p>"})).data}catch(e){return console.error("Error testing sendEmail function:",e),{error:"Failed to call sendEmail function",details:e instanceof Error?e.message:String(e)}}},Qae=async()=>{try{return(await J.app().functions("europe-west2").httpsCallable("generateReferralCode")()).data}catch(t){return console.error("Error testing generateReferralCode function:",t),{error:"Failed to call generateReferralCode function",details:t instanceof Error?t.message:String(t)}}},Xae=async t=>{try{return(await J.app().functions("europe-west2").httpsCallable("verifyUserEmail")({email:t})).data}catch(e){return console.error("Error testing verifyUserEmail function:",e),{error:"Failed to call verifyUserEmail function",details:e instanceof Error?e.message:String(e)}}},Zae=()=>{const{currentUser:t}=In(),[e,n]=k.useState(null),[r,i]=k.useState(null),[a,l]=k.useState((t==null?void 0:t.email)||""),d=async(f,m)=>{i(f),n(null);try{const g=await m();n({testName:f,result:g})}catch(g){n({testName:f,error:JSON.stringify(g)})}finally{i(null)}};return t?u.jsxs("div",{className:"p-4",children:[u.jsx("h1",{className:"text-xl font-bold mb-4",children:"Test Firebase Cloud Functions"}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block mb-2",children:"Email for testing:"}),u.jsx("input",{type:"email",value:a,onChange:f=>l(f.target.value),className:"border p-2 rounded w-full max-w-md"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("button",{onClick:()=>d("helloWorld",Wae),disabled:r!==null,className:"bg-blue-500 text-white p-2 rounded disabled:opacity-50",children:r==="helloWorld"?"Testing...":"Test Hello World"}),u.jsx("button",{onClick:()=>d("helloWorldCORS",Yae),disabled:r!==null,className:"bg-blue-300 text-white p-2 rounded disabled:opacity-50",children:r==="helloWorldCORS"?"Testing...":"Test CORS Configuration"}),u.jsx("button",{onClick:()=>d("sendEmail",()=>Kae(a)),disabled:r!==null||!a,className:"bg-green-500 text-white p-2 rounded disabled:opacity-50",children:r==="sendEmail"?"Testing...":"Test Send Email"}),u.jsx("button",{onClick:()=>d("generateReferralCode",Qae),disabled:r!==null,className:"bg-purple-500 text-white p-2 rounded disabled:opacity-50",children:r==="generateReferralCode"?"Testing...":"Test Generate Referral Code"}),u.jsx("button",{onClick:()=>d("verifyUserEmail",()=>Xae(a)),disabled:r!==null||!a,className:"bg-yellow-500 text-white p-2 rounded disabled:opacity-50",children:r==="verifyUserEmail"?"Testing...":"Test Verify User Email"})]}),e&&u.jsxs("div",{className:"mt-6 p-4 bg-gray-100 rounded",children:[u.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Results: ",e.testName]}),u.jsx("pre",{className:"bg-white p-2 rounded overflow-auto max-h-96",children:JSON.stringify(e.result||e.error,null,2)})]})]}):u.jsx("div",{className:"p-4",children:"Please login to test functions"})},Oj=b.div`
  max-width: 1280px;
  margin: 0 auto;
  padding: 1.5rem;
`,Jae=b.div`
  margin-bottom: 2rem;
`,ele=b.h1`
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: hsl(var(--foreground));
`,tle=b.p`
  color: hsl(var(--muted-foreground));
`,nle=b.div`
  display: flex;
  border-bottom: 1px solid hsl(var(--border));
  margin-bottom: 2rem;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
`,_s=b.button`
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  font-weight: ${t=>t.active?"600":"500"};
  color: ${t=>t.active?"hsl(var(--primary))":"hsl(var(--muted-foreground))"};
  background: transparent;
  border: none;
  border-bottom: 2px solid ${t=>t.active?"hsl(var(--primary))":"transparent"};
  cursor: pointer;
  transition: all 0.2s;
  white-space: nowrap;

  &:hover {
    color: ${t=>!t.active&&"hsl(var(--foreground))"};
  }
`;b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }

  p {
    max-width: 500px;
    margin: 0 auto;
  }
`;const rle=b.div`
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
`,V5=b.button`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
`,ile=b(V5)`
  background-color: hsl(var(--primary));
  color: white;

  &:hover {
    background-color: hsl(var(--primary) / 0.9);
  }
`,nd=b(V5)`
  background-color: hsl(var(--secondary));
  color: hsl(var(--secondary-foreground));

  &:hover {
    background-color: hsl(var(--secondary) / 0.9);
  }
`;b(V5)`
  background-color: hsl(var(--destructive));
  color: white;

  &:hover {
    background-color: hsl(var(--destructive) / 0.9);
  }
`;const sle=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }
`,ole=b.div`
  text-align: center;
  padding: 3rem 1rem;
  color: hsl(var(--muted-foreground));

  h2 {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: hsl(var(--foreground));
  }

  p {
    max-width: 500px;
    margin: 0 auto;
  }
`;function Dl(){const{currentUser:t,isLoading:e,isAdmin:n}=In(),[r,i]=k.useState("competitions"),[a,l]=k.useState(null),d=Pt(),f=Gn(),{id:m}=Xw();k.useEffect(()=>{const x=new URLSearchParams(f.search).get("tab");(x==="support"||x==="competitions"||x==="users"||x==="winners"||x==="create"||x==="seeder"||x==="processor"||x==="analytics"||x==="functions")&&i(x),f.pathname.includes("/admin/edit-competition/")&&m?(l(m),i("create")):l(null)},[f.search,f.pathname,m]),k.useEffect(()=>{(!t||!n)&&d("/login")},[t,n,d]);const g=()=>{a?d("/admin?tab=competitions"):i("competitions")},v=()=>{d("/admin?tab=competitions")};return e?u.jsx(sle,{children:"Loading..."}):!t||!n?u.jsx(Oj,{children:u.jsxs(ole,{children:[u.jsx("h2",{children:"Access Denied"}),u.jsx("p",{children:"You do not have permission to access the admin dashboard."}),u.jsx("button",{onClick:()=>d("/login"),style:{padding:"0.5rem 1rem",background:"hsl(var(--primary))",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",marginTop:"1rem"},children:"Go to Login"})]})}):u.jsxs(Oj,{children:[u.jsxs(Jae,{children:[u.jsx(ele,{children:"Admin Dashboard"}),u.jsx(tle,{children:"Manage competitions, users, and system settings"})]}),!a&&u.jsxs(u.Fragment,{children:[u.jsxs(rle,{children:[u.jsx(ile,{onClick:()=>i("create"),disabled:r==="create",children:"+ New Competition"}),u.jsx(nd,{onClick:()=>i("processor"),disabled:r==="processor",children:"Process Competitions"}),u.jsx(nd,{onClick:()=>i("analytics"),disabled:r==="analytics",children:"Analytics"}),u.jsx(nd,{onClick:()=>i("support"),disabled:r==="support",children:"Support Tickets"}),u.jsx(nd,{onClick:()=>i("seeder"),disabled:r==="seeder",children:"Database Seeder"}),u.jsx(nd,{onClick:()=>i("functions"),disabled:r==="functions",children:"Test Functions"})]}),u.jsxs(nle,{children:[u.jsx(_s,{active:r==="competitions",onClick:()=>i("competitions"),children:"Competitions"}),u.jsx(_s,{active:r==="users",onClick:()=>i("users"),children:"Users"}),u.jsx(_s,{active:r==="winners",onClick:()=>i("winners"),children:"Past Winners"}),u.jsx(_s,{active:r==="analytics",onClick:()=>i("analytics"),children:"Analytics"}),u.jsx(_s,{active:r==="processor",onClick:()=>i("processor"),children:"Processor"}),u.jsx(_s,{active:r==="support",onClick:()=>i("support"),children:"Support"}),u.jsx(_s,{active:r==="seeder",onClick:()=>i("seeder"),children:"Seeder"}),u.jsx(_s,{active:r==="functions",onClick:()=>i("functions"),children:"Functions"})]})]}),r==="competitions"&&u.jsx(ase,{}),r==="users"&&u.jsx(bse,{}),r==="winners"&&u.jsx(Dse,{}),r==="create"&&u.jsx(Ose,{competitionId:a||void 0,onCancel:g,onSuccess:v}),r==="processor"&&u.jsx(Kse,{}),r==="support"&&u.jsx(Aoe,{}),r==="seeder"&&u.jsx(Fse,{}),r==="analytics"&&u.jsx(Gae,{}),r==="functions"&&u.jsx(Zae,{})]})}async function ale(t,e,n){return lle(t,e,n)}function lle(t,e,n){return new Promise((r,i)=>{try{if(n<=0)throw new Error("Total tickets must be greater than 0");const l=new TextEncoder().encode(`${t}-${e}`);crypto.subtle.digest("SHA-256",l).then(d=>{const m=Array.from(new Uint8Array(d)).map(w=>w.toString(16).padStart(2,"0")).join(""),v=parseInt(m.substring(0,8),16)%n+1;r(v)})}catch(a){i(a)}})}const rb=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
`,ib=b.div`
  text-align: center;
  margin-bottom: 2rem;
`,sb=b.h1`
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-fill-color: transparent;
`,ob=b.p`
  color: hsl(var(--muted-foreground));
  font-size: 1.125rem;
`,Pj=b.div`
  background: hsl(var(--card));
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  padding: 1.5rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,Uj=b.div`
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid hsl(var(--border));
`,Vj=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
`,Bj=b.p`
  color: hsl(var(--muted-foreground));
`,js=b.div`
  display: flex;
  flex-direction: column;
  margin-bottom: 1.5rem;
  
  @media (min-width: 640px) {
    flex-direction: row;
    align-items: center;
  }
`,Ds=b.div`
  font-weight: 500;
  margin-bottom: 0.5rem;
  flex: 0 0 200px;
  
  @media (min-width: 640px) {
    margin-bottom: 0;
  }
`,Is=b.div`
  flex: 1;
  word-break: break-all;
  font-family: monospace;
  background: hsl(var(--muted) / 0.1);
  padding: 0.75rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
`,cle=b.div`
  padding: 1rem;
  border-radius: 0.5rem;
  text-align: center;
  margin-top: 1.5rem;
  background-color: ${t=>t.status==="success"?"rgba(22, 163, 74, 0.1)":t.status==="error"?"rgba(220, 38, 38, 0.1)":"rgba(37, 99, 235, 0.1)"};
  color: ${t=>t.status==="success"?"rgb(22, 163, 74)":t.status==="error"?"rgb(220, 38, 38)":"rgb(37, 99, 235)"};
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: 500;
`,ule=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 18.3333C14.6024 18.3333 18.3334 14.6024 18.3334 10C18.3334 5.39763 14.6024 1.66666 10 1.66666C5.39765 1.66666 1.66669 5.39763 1.66669 10C1.66669 14.6024 5.39765 18.3333 10 18.3333Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7.5 10L9.16667 11.6667L12.5 8.33334",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),dle=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("path",{d:"M10 18.3333C14.6024 18.3333 18.3334 14.6024 18.3334 10C18.3334 5.39763 14.6024 1.66666 10 1.66666C5.39765 1.66666 1.66669 5.39763 1.66669 10C1.66669 14.6024 5.39765 18.3333 10 18.3333Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M12.5 7.5L7.5 12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M7.5 7.5L12.5 12.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),hle=()=>u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"animate-spin",children:[u.jsx("path",{d:"M10 1.66666V4.99999",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M10 15V18.3333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M4.10834 4.10834L6.46667 6.46667",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.5333 13.5333L15.8917 15.8917",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M1.66669 10H5.00002",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M15 10H18.3333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M4.10834 15.8917L6.46667 13.5333",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M13.5333 6.46667L15.8917 4.10834",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),ab=b(vh)`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: hsl(var(--primary));
  font-weight: 500;
  margin-bottom: 1.5rem;
  text-decoration: none;
  
  &:hover {
    text-decoration: underline;
  }
`,lb=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),fle=b.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 1.5rem;
`,cb=b.div`
  background: hsla(var(--muted), 0.1);
  padding: 1rem;
  border-radius: 0.5rem;
  text-align: center;
`,ub=b.div`
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
  color: hsl(var(--primary));
`,db=b.div`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,rd=b.div`
  margin-bottom: 1.5rem;
  padding: 1rem;
  background: hsla(var(--muted), 0.05);
  border-radius: 0.5rem;
  border-left: 4px solid hsl(var(--primary));
`,Il=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
`,id=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
`,hb=b.pre`
  background: hsla(var(--muted), 0.1);
  padding: 1rem;
  border-radius: 0.375rem;
  font-family: monospace;
  font-size: 0.875rem;
  overflow-x: auto;
  margin-top: 1rem;
`;function mle(){var v;const{id:t}=Xw(),[e,n]=k.useState(null),[r,i]=k.useState(!0),[a,l]=k.useState("pending"),[d,f]=k.useState(null);if(k.useEffect(()=>{(async()=>{if(t)try{i(!0);const x=await so(t);if(n(x),x&&x.status==="complete"&&x.seed&&x.blockHash&&x.winningTicket!==void 0){l("loading");const T=await ale(x.seed,x.blockHash,x.totalTickets);f({expected:x.winningTicket,calculated:T});const C=T===x.winningTicket;l(C?"success":"error")}}catch(x){console.error("Error loading competition:",x),l("error")}finally{i(!1)}})()},[t]),r)return u.jsxs(rb,{children:[u.jsxs(ab,{to:"/winners",children:[u.jsx(lb,{})," Back to Winners"]}),u.jsxs(ib,{children:[u.jsx(sb,{children:"Verifying Competition..."}),u.jsx(ob,{children:"Loading competition details"})]})]});if(!e)return u.jsxs(rb,{children:[u.jsxs(ab,{to:"/winners",children:[u.jsx(lb,{})," Back to Winners"]}),u.jsxs(ib,{children:[u.jsx(sb,{children:"Competition Not Found"}),u.jsx(ob,{children:"The competition you're looking for doesn't exist or has been removed."})]})]});const m=e.ticketsSold/e.totalTickets*100,g=e.ticketsSold>0?1/e.ticketsSold*100:0;return u.jsxs(rb,{children:[u.jsxs(ab,{to:"/winners",children:[u.jsx(lb,{})," Back to Winners"]}),u.jsxs(ib,{children:[u.jsx(sb,{children:"Draw Verification"}),u.jsx(ob,{children:"Verify the fairness of our competition draw"})]}),u.jsxs(Pj,{children:[u.jsxs(Uj,{children:[u.jsx(Vj,{children:e.title}),u.jsx(Bj,{children:e.status==="complete"?"This competition has ended and a winner has been selected.":"This competition is still active. Verification will be available after the draw."})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Competition ID:"}),u.jsx(Is,{children:e.id})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Prize:"}),u.jsx(Is,{children:e.prize})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Status:"}),u.jsx(Is,{children:e.status})]}),e.status==="complete"&&u.jsxs(u.Fragment,{children:[u.jsxs(js,{children:[u.jsx(Ds,{children:"Winner:"}),u.jsxs(Is,{children:[((v=e.winner)==null?void 0:v.username)||"Anonymous"," (Ticket #",e.winningTicket,")"]})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Seed:"}),u.jsx(Is,{children:e.seed})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Block Hash:"}),u.jsx(Is,{children:e.blockHash})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Total Tickets:"}),u.jsx(Is,{children:e.totalTickets})]}),u.jsxs(js,{children:[u.jsx(Ds,{children:"Tickets Sold:"}),u.jsx(Is,{children:e.ticketsSold})]}),u.jsxs(fle,{children:[u.jsxs(cb,{children:[u.jsxs(ub,{children:[m.toFixed(2),"%"]}),u.jsx(db,{children:"Participation Rate"})]}),u.jsxs(cb,{children:[u.jsxs(ub,{children:["1 in ",e.ticketsSold]}),u.jsx(db,{children:"Winning Odds"})]}),u.jsxs(cb,{children:[u.jsxs(ub,{children:[g.toFixed(2),"%"]}),u.jsx(db,{children:"Win Percentage"})]})]}),a!=="pending"&&u.jsxs(cle,{status:a,children:[a==="success"&&u.jsxs(u.Fragment,{children:[u.jsx(ule,{})," Verified: The draw was conducted fairly."]}),a==="error"&&u.jsxs(u.Fragment,{children:[u.jsx(dle,{})," Verification Failed: The calculated result doesn't match."]}),a==="loading"&&u.jsxs(u.Fragment,{children:[u.jsx(hle,{})," Verifying..."]})]}),d&&u.jsxs("div",{style:{marginTop:"1.5rem"},children:[u.jsx(Il,{children:"Verification Result:"}),u.jsx(hb,{children:`Expected Winning Ticket: #${d.expected}
Calculated Winning Ticket: #${d.calculated}
Result: ${d.expected===d.calculated?"VALID ":"INVALID "}`})]})]})]}),u.jsxs(Pj,{children:[u.jsxs(Uj,{children:[u.jsx(Vj,{children:"How Verification Works"}),u.jsx(Bj,{children:"Our provably fair draw system ensures complete transparency and fairness."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 1: Pre-committed Seed"}),u.jsx(id,{children:"Before the competition ends, we generate and commit to a random seed. This seed is used as one source of randomness for the draw."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 2: External Randomness"}),u.jsx(id,{children:"We use a blockchain block hash as an external source of randomness that cannot be predicted or manipulated by us or any participant."})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 3: Combining Randomness"}),u.jsx(id,{children:"We combine our seed with the blockchain hash to create a deterministic but unpredictable result. This combined value is hashed using SHA-256."}),u.jsx(hb,{children:`Combined Input: ${e.seed}-${e.blockHash}
SHA-256 Hash: [Calculated in your browser]`})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 4: Selecting the Winner"}),u.jsx(id,{children:"The first 8 characters of the resulting hash are converted to a number. We take this number modulo the total number of tickets to get a value between 1 and the total number of tickets."}),u.jsx(hb,{children:`Winning Ticket = hash_number % ${e.totalTickets} + 1`})]}),u.jsxs(rd,{children:[u.jsx(Il,{children:"Step 5: Verification"}),u.jsx(id,{children:"You can independently verify the result by running the same calculation using the provided seed and block hash. This page performs this verification automatically in your browser."})]})]})]})}const fb=b.div`
  width: 100%;
  background: hsla(var(--background), 0.5);
  border-radius: 0.75rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  
  &:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
  }
`,mb=b.div`
  padding: 2rem 2rem 1.5rem;
  border-bottom: 1px solid hsl(var(--border));
`,pb=b.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
`,gb=b.p`
  margin: 0.75rem 0 0;
  font-size: 1rem;
  color: hsl(var(--muted-foreground));
`,yb=b.div`
  padding: 2rem;
`,Rl=b.div`
  margin-bottom: 1.5rem;
`,Ml=b.label`
  display: block;
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: hsl(var(--foreground));
`,zj=b.input`
  width: 100%;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,Gw=b.select`
  width: 100%;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
  
  option {
    padding: 0.5rem;
  }
`,ple=b(Gw)`
  margin-top: 0.5rem;
`,gle=b.textarea`
  width: 100%;
  min-height: 150px;
  padding: 0.875rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  resize: vertical;
  transition: all 0.2s ease;
  font-size: 0.95rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 2px hsla(var(--primary), 0.2);
  }
`,vb=b.div`
  margin-top: 1.5rem;
  display: flex;
  justify-content: flex-end;
`,Ym=b.button`
  padding: 0.875rem 1.75rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.5rem;
  font-weight: 600;
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    background: hsl(265, 83%, 45%);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
  }
  
  &:active:not(:disabled) {
    transform: translateY(0);
  }
  
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`,yle=b.div`
  color: hsl(var(--destructive));
  font-size: 0.875rem;
  margin-top: 0.75rem;
  padding: 0.75rem;
  background-color: hsla(var(--destructive), 0.1);
  border-radius: 0.375rem;
`,vle=b.div`
  padding: 1rem;
  background-color: rgba(22, 163, 74, 0.1);
  color: rgb(22, 163, 74);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
`,$j=b.div`
  padding: 1rem;
  background-color: hsla(var(--muted), 0.2);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
  font-size: 0.875rem;
  border-left: 4px solid hsl(var(--primary));
`,ble=b.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  
  @media (max-width: 640px) {
    grid-template-columns: 1fr;
  }
`;function wle({onSuccess:t,initialType:e="support",competitionId:n}){const{currentUser:r}=In(),i=Pt(),[a,l]=k.useState(e),[d,f]=k.useState(""),[m,g]=k.useState(""),[v,w]=k.useState("medium"),[x,T]=k.useState(n||""),[C,A]=k.useState(""),[_,L]=k.useState([]),[I,q]=k.useState(!1),[j,M]=k.useState(null),[$,Q]=k.useState(!1),[ie,he]=k.useState(null);k.useEffect(()=>{a==="prize_collection"&&r&&(async()=>{try{const ae=(await cy(r.uid)).filter(W=>W.isWinner);if(ae.length===0)return;const H=(await Promise.all(ae.map(W=>so(W.competitionId)))).filter(W=>W!==null&&W.winner!==void 0&&W.winner.userId===r.uid);if(L(H),n){T(n);const W=H.find(se=>se.id===n);W&&f(`Prize Collection: ${W.title}`)}else if(H.length>0){const W=H[0];W&&W.id&&(T(W.id),f(`Prize Collection: ${W.title}`))}}catch(ke){console.error("Error loading won competitions:",ke),M("Failed to load your winning competitions. Please try again.")}})()},[a,r,n]);const Ie=async ne=>{if(ne.preventDefault(),!r||!r.email){M("You must be logged in to create a support ticket");return}if(!d.trim()){M("Please enter a subject");return}if(!m.trim()){M("Please enter a description");return}if(a==="prize_collection"&&!x){M("Please select a competition");return}if(a==="prize_collection"&&!C.trim()){M("Please enter your in-game name");return}q(!0),M(null);try{const ke={userId:r.uid,userEmail:r.email,type:a,priority:v,subject:d,description:a==="prize_collection"?`${m}

In-game name: ${C}`:m};a==="prize_collection"&&x&&(ke.competitionId=x);const ae=await b7(ke);he(ae),Q(!0),t?t(ae):(f(""),g(""),w("medium"),A(""))}catch(ke){console.error("Error creating ticket:",ke),M("Failed to create ticket. Please try again.")}finally{q(!1)}};return r?$?u.jsxs(fb,{children:[u.jsxs(mb,{children:[u.jsx(pb,{children:"Ticket Created Successfully"}),u.jsx(gb,{children:"We'll get back to you as soon as possible."})]}),u.jsxs(yb,{children:[u.jsx(vle,{children:"Your ticket has been created successfully. You can view its status in your tickets list."}),ie&&u.jsxs($j,{children:[u.jsx("strong",{children:"Ticket ID:"})," ",ie]}),u.jsxs(vb,{children:[u.jsx(Ym,{style:{marginRight:"1rem"},onClick:()=>Q(!1),children:"Create Another Ticket"}),ie&&u.jsx(Ym,{onClick:()=>i(`/support?ticketId=${ie}`),children:"View Ticket"})]})]})]}):u.jsxs(fb,{children:[u.jsxs(mb,{children:[u.jsx(pb,{children:a==="prize_collection"?"Prize Collection Request":"Support Ticket"}),u.jsx(gb,{children:a==="prize_collection"?"Fill out this form to arrange collection of your prize.":"Let us know how we can help you."})]}),u.jsxs(yb,{children:[a==="prize_collection"&&_.length===0&&u.jsx($j,{children:"You don't have any prizes to collect. If you believe this is an error, please create a support ticket instead."}),u.jsxs("form",{onSubmit:Ie,children:[u.jsxs(ble,{children:[u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"type",children:"Ticket Type"}),u.jsxs(Gw,{id:"type",value:a,onChange:ne=>l(ne.target.value),children:[u.jsx("option",{value:"support",children:"General Support"}),u.jsx("option",{value:"prize_collection",children:"Prize Collection"}),u.jsx("option",{value:"refund",children:"Refund Request"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"priority",children:"Priority"}),u.jsxs(Gw,{id:"priority",value:v,onChange:ne=>w(ne.target.value),children:[u.jsx("option",{value:"low",children:"Low"}),u.jsx("option",{value:"medium",children:"Medium"}),u.jsx("option",{value:"high",children:"High"})]})]})]}),a==="prize_collection"&&u.jsxs(Rl,{children:[u.jsx(Ml,{children:"Select Prize"}),u.jsxs(ple,{value:x,onChange:ne=>{const ke=ne.target.value;T(ke);const ae=_.find(Ae=>Ae.id===ke);ae&&f(`Prize Collection: ${ae.title}`)},disabled:_.length===0,children:[u.jsx("option",{value:"",children:"Select a competition"}),_.map(ne=>u.jsxs("option",{value:ne.id,children:[ne.title," - ",ne.prize]},ne.id))]})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"subject",children:"Subject"}),u.jsx(zj,{id:"subject",type:"text",value:d,onChange:ne=>f(ne.target.value),placeholder:"Brief summary of your issue",required:!0})]}),a==="prize_collection"&&u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"inGameName",children:"Your In-Game Name"}),u.jsx(zj,{id:"inGameName",type:"text",value:C,onChange:ne=>A(ne.target.value),placeholder:"Your RuneScape username",required:!0})]}),u.jsxs(Rl,{children:[u.jsx(Ml,{htmlFor:"description",children:"Description"}),u.jsx(gle,{id:"description",value:m,onChange:ne=>g(ne.target.value),placeholder:a==="prize_collection"?"Please let us know your preferred time for prize collection and any other relevant details.":"Please describe your issue in detail.",required:!0})]}),j&&u.jsx(yle,{children:j}),u.jsx(vb,{children:u.jsx(Ym,{type:"submit",disabled:I||a==="prize_collection"&&_.length===0,children:I?"Submitting...":"Submit Ticket"})})]})]})]}):u.jsxs(fb,{children:[u.jsxs(mb,{children:[u.jsx(pb,{children:"Support Ticket"}),u.jsx(gb,{children:"You need to be logged in to create a support ticket."})]}),u.jsx(yb,{children:u.jsx(vb,{children:u.jsx(Ym,{onClick:()=>i("/login"),children:"Sign In"})})})]})}const bb=b.div`
  width: 100%;
  background: transparent;
  border-radius: 0.75rem;
  overflow: hidden;
`,wb=b.h2`
  display: none; /* Hide this as we already have a title in the support section */
`,xb=b.div`
  text-align: center;
  padding: 3rem;
  color: hsl(var(--muted-foreground));
  background: hsla(var(--muted), 0.03);
  border-radius: 0.75rem;
  border: 1px dashed hsl(var(--border));
`,xle=b.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
  max-height: none;
  overflow-y: visible;
  
  @media (min-width: 1024px) {
    max-height: 600px;
    overflow-y: auto;
    padding-right: 1rem;
  }
  
  /* Scrollbar styling */
  &::-webkit-scrollbar {
    width: 6px;
  }
  
  &::-webkit-scrollbar-track {
    background: hsla(var(--muted), 0.1);
    border-radius: 3px;
  }
  
  &::-webkit-scrollbar-thumb {
    background: hsla(var(--muted), 0.5);
    border-radius: 3px;
  }
`,Tle=b.div`
  padding: 1.5rem;
  border-radius: 0.75rem;
  background: ${t=>t.isSelected?"hsla(var(--primary), 0.08)":"hsla(var(--background), 0.8)"};
  border: 1px solid ${t=>t.isSelected?"hsla(var(--primary), 0.3)":"hsl(var(--border))"};
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: ${t=>t.isSelected?"0 4px 12px rgba(0, 0, 0, 0.1)":"0 2px 8px rgba(0, 0, 0, 0.05)"};
  
  &:hover {
    background: hsla(var(--primary), 0.05);
    border-color: hsla(var(--primary), 0.2);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  }
`,Sle=b.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 0.5rem;
`,Cle=b.h3`
  font-size: 1rem;
  font-weight: 600;
  margin: 0;
`,Fj=b.span`
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  background-color: ${t=>{switch(t.status){case"open":return"rgba(22, 163, 74, 0.2)";case"in_progress":return"rgba(245, 158, 11, 0.2)";case"resolved":return"rgba(37, 99, 235, 0.2)";case"closed":return"rgba(107, 114, 128, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.status){case"open":return"rgb(22, 163, 74)";case"in_progress":return"rgb(245, 158, 11)";case"resolved":return"rgb(37, 99, 235)";case"closed":return"rgb(107, 114, 128)";default:return"rgb(107, 114, 128)"}}};
`,qj=b.span`
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  border-radius: 9999px;
  font-weight: 500;
  margin-right: 0.5rem;
  background-color: ${t=>{switch(t.type){case"prize_collection":return"rgba(239, 68, 68, 0.2)";case"support":return"rgba(37, 99, 235, 0.2)";case"refund":return"rgba(245, 158, 11, 0.2)";default:return"rgba(107, 114, 128, 0.2)"}}};
  color: ${t=>{switch(t.type){case"prize_collection":return"rgb(239, 68, 68)";case"support":return"rgb(37, 99, 235)";case"refund":return"rgb(245, 158, 11)";default:return"rgb(107, 114, 128)"}}};
`,Ele=b.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
  margin-top: 0.5rem;
`,kle=b.span``,Ale=b.div`
  display: flex;
  gap: 0.5rem;
  margin-top: 0.5rem;
`,_le=b.div`
  margin-top: 0;
  padding: 2rem;
  background: hsla(var(--background), 0.5);
  border: 1px solid hsl(var(--border));
  border-radius: 0.75rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,jle=b.div`
  margin-bottom: 2rem;
`,sd=b.div`
  display: flex;
  margin-bottom: 0.75rem;
  font-size: 0.9rem;
`,od=b.div`
  width: 120px;
  font-weight: 600;
  color: hsl(var(--muted-foreground));
`,ad=b.div`
  flex: 1;
`,Dle=b.div`
  padding: 1.5rem;
  background: hsl(var(--background));
  border-radius: 0.5rem;
  white-space: pre-wrap;
  margin-bottom: 2rem;
  font-size: 0.9rem;
  border: 1px solid hsl(var(--border));
`,Ile=b.div`
  margin-top: 1.5rem;
`,Rle=b.h3`
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 3rem;
    height: 2px;
    background-color: hsl(var(--primary));
  }
`,Mle=b.div`
  display: flex;
  margin-bottom: 1.5rem;
  flex-direction: ${t=>t.isAdmin?"row":"row-reverse"};
`,Nle=b.div`
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 9999px;
  background-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.2)":"rgba(22, 163, 74, 0.2)"};
  color: ${t=>t.isAdmin?"rgb(37, 99, 235)":"rgb(22, 163, 74)"};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
  margin-right: ${t=>t.isAdmin?"0.75rem":"0"};
  margin-left: ${t=>t.isAdmin?"0":"0.75rem"};
`,Lle=b.div`
  max-width: 80%;
  background: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"rgba(22, 163, 74, 0.1)"};
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  position: relative;
  
  &:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-top-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"rgba(22, 163, 74, 0.1)"};
    border-bottom: 0;
    top: 0.75rem;
    left: ${t=>t.isAdmin?"-8px":"auto"};
    right: ${t=>t.isAdmin?"auto":"-8px"};
    border-left-color: ${t=>t.isAdmin?"transparent":"rgba(22, 163, 74, 0.1)"};
    border-right-color: ${t=>t.isAdmin?"rgba(37, 99, 235, 0.1)":"transparent"};
  }
`,Ole=b.div`
  white-space: pre-wrap;
  font-size: 0.875rem;
`,Ple=b.div`
  font-size: 0.75rem;
  color: hsl(var(--muted-foreground));
  margin-top: 0.375rem;
  text-align: right;
`,Ule=b.form`
  margin-top: 1.5rem;
`,Vle=b.textarea`
  width: 100%;
  min-height: 100px;
  padding: 0.75rem;
  background: hsl(var(--background));
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  color: hsl(var(--foreground));
  resize: vertical;
  margin-bottom: 1rem;
  
  &:focus {
    outline: none;
    border-color: hsl(var(--primary));
    box-shadow: 0 0 0 1px hsl(var(--primary));
  }
`,Ble=b.button`
  padding: 0.75rem 1rem;
  background: hsl(var(--primary));
  color: white;
  border: none;
  border-radius: 0.375rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover:not(:disabled) {
    opacity: 0.9;
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,zle=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 5rem 1rem;
  color: hsl(var(--muted-foreground));
  text-align: center;
  background: hsla(var(--muted), 0.03);
  border-radius: 0.75rem;
  border: 1px dashed hsl(var(--border));
  
  svg {
    margin-bottom: 1.5rem;
    color: hsla(var(--muted), 0.5);
  }
`,Hj=b.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  color: hsl(var(--muted-foreground));
`,$le=b.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 2rem;
  
  @media (min-width: 1024px) {
    grid-template-columns: 2fr 3fr;
  }
`,Fle=b.div`
  @media (max-width: 1024px) {
    display: ${t=>t.hidden?"none":"block"};
  }
`,qle=b.div`
  @media (max-width: 1024px) {
    display: ${t=>t.hidden?"none":"block"};
  }
`,Hle=b.button`
  display: none;
  align-items: center;
  gap: 0.5rem;
  background: none;
  border: none;
  padding: 0.75rem;
  color: hsl(var(--primary));
  cursor: pointer;
  margin-bottom: 1rem;
  font-weight: 500;
  
  @media (max-width: 1024px) {
    display: flex;
  }
`,Km=t=>{if(!t)return"N/A";try{return new Date(t.seconds*1e3).toLocaleString()}catch{return"N/A"}},Gle=({onTicketUpdate:t,initialTicketId:e})=>{const{currentUser:n}=In(),[r,i]=k.useState([]),[a,l]=k.useState(null),[d,f]=k.useState([]),[m,g]=k.useState(""),[v,w]=k.useState(!0),[x,T]=k.useState(!1),[C,A]=k.useState(!1),[_,L]=k.useState(!0),[I,q]=k.useState(!1),j=Gn(),M=Pt(),$=ne=>new URLSearchParams(j.search).get(ne);k.useEffect(()=>{(async()=>{if(n)try{w(!0);const ke=await J2(n.uid);i(ke);const ae=$("ticketId")||e;if(console.log("Looking for ticket ID:",ae),ae){const Ae=ke.find(H=>H.id===ae);Ae?(console.log("Found ticket:",Ae.subject),l(Ae),Ae.id&&await Q(Ae.id),window.innerWidth<=1024&&(L(!1),q(!0))):console.log("Ticket ID not found in user tickets")}}catch(ke){console.error("Error loading tickets:",ke)}finally{w(!1)}})()},[n,j.search,e]);const Q=async ne=>{try{T(!0);const ke=await Gp(ne);f(ke)}catch(ke){console.error("Error loading messages:",ke)}finally{T(!1)}},ie=ne=>{l(ne),ne.id&&(Q(ne.id),M(`/support?ticketId=${ne.id}`,{replace:!0})),window.innerWidth<=1024&&(L(!1),q(!0))},he=()=>{L(!0),q(!1),M("/support",{replace:!0})},Ie=async ne=>{if(ne.preventDefault(),!(!n||!a||!a.id||!m.trim()))try{A(!0),await e5({ticketId:a.id,userId:n.uid,isAdmin:!1,message:m}),g(""),await Q(a.id),t&&t()}catch(ke){console.error("Error sending reply:",ke)}finally{A(!1)}};return n?v?u.jsxs(bb,{children:[u.jsx(wb,{children:"Your Support Tickets"}),u.jsx(Hj,{children:"Loading your tickets..."})]}):u.jsxs(bb,{children:[u.jsx(wb,{children:"Your Support Tickets"}),r.length===0?u.jsx(xb,{children:"You don't have any support tickets yet."}):u.jsxs($le,{children:[u.jsx(Fle,{hidden:!_,children:u.jsx(xle,{children:r.map(ne=>u.jsxs(Tle,{onClick:()=>ie(ne),isSelected:(a==null?void 0:a.id)===ne.id,children:[u.jsxs(Sle,{children:[u.jsx(Cle,{children:ne.subject}),u.jsx(Fj,{status:ne.status,children:ne.status==="open"?"Open":ne.status==="in_progress"?"In Progress":ne.status==="resolved"?"Resolved":"Closed"})]}),u.jsx(Ale,{children:u.jsx(qj,{type:ne.type,children:ne.type==="prize_collection"?"Prize Collection":ne.type==="support"?"Support":ne.type==="refund"?"Refund":"Other"})}),u.jsx(Ele,{children:u.jsxs(kle,{children:["Created: ",Km(ne.createdAt)]})})]},ne.id))})}),u.jsx(qle,{hidden:!I&&window.innerWidth<=1024,children:a?u.jsxs(_le,{children:[u.jsxs(Hle,{onClick:he,children:[u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M10 12L6 8L10 4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back to tickets"]}),u.jsxs(jle,{children:[u.jsxs(sd,{children:[u.jsx(od,{children:"Subject:"}),u.jsx(ad,{children:a.subject})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Status:"}),u.jsx(ad,{children:u.jsx(Fj,{status:a.status,children:a.status==="open"?"Open":a.status==="in_progress"?"In Progress":a.status==="resolved"?"Resolved":"Closed"})})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Type:"}),u.jsx(ad,{children:u.jsx(qj,{type:a.type,children:a.type==="prize_collection"?"Prize Collection":a.type==="support"?"Support":a.type==="refund"?"Refund":"Other"})})]}),u.jsxs(sd,{children:[u.jsx(od,{children:"Created:"}),u.jsx(ad,{children:Km(a.createdAt)})]}),a.resolvedAt&&u.jsxs(sd,{children:[u.jsx(od,{children:"Resolved:"}),u.jsx(ad,{children:Km(a.resolvedAt)})]})]}),u.jsxs("div",{children:[u.jsx("h3",{children:"Description"}),u.jsx(Dle,{children:a.description})]}),u.jsxs(Ile,{children:[u.jsx(Rle,{children:"Messages"}),x&&u.jsx(Hj,{children:"Loading messages..."}),!x&&d.length===0&&u.jsx(xb,{children:"No messages yet."}),!x&&d.map(ne=>{var ke;return u.jsxs(Mle,{isAdmin:ne.isAdmin,children:[u.jsx(Nle,{isAdmin:ne.isAdmin,children:ne.isAdmin?"A":((ke=n==null?void 0:n.displayName)==null?void 0:ke[0])||"U"}),u.jsxs(Lle,{isAdmin:ne.isAdmin,children:[u.jsx(Ole,{children:ne.message}),u.jsx(Ple,{children:Km(ne.createdAt)})]})]},ne.id)}),a.status!=="resolved"&&a.status!=="closed"&&u.jsxs(Ule,{onSubmit:Ie,children:[u.jsx(Vle,{value:m,onChange:ne=>g(ne.target.value),placeholder:"Type your reply here...",required:!0}),u.jsx(Ble,{type:"submit",disabled:C||!m.trim(),children:C?"Sending...":"Send Reply"})]})]})]}):u.jsxs(zle,{children:[u.jsx("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{d:"M9 12H15M9 16H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L18.7071 8.70711C18.8946 8.89464 19 9.149 19 9.41421V19C19 20.1046 18.1046 21 17 21Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Select a ticket to view details"]})})]})]}):u.jsxs(bb,{children:[u.jsx(wb,{children:"Your Support Tickets"}),u.jsx(xb,{children:"Please sign in to view your support tickets."})]})},Tb=b.div`
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,Gj=b.div`
  margin-bottom: 2rem;
  text-align: center;
`,Wj=b.h1`
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  background: linear-gradient(to right, hsl(var(--primary)), hsl(265, 83%, 45%));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
`,Yj=b.p`
  font-size: 1.1rem;
  color: hsl(var(--muted-foreground));
  max-width: 700px;
  margin: 0 auto;
`,Wle=b.div`
  background: hsl(var(--card));
  border-radius: 1rem;
  border: 1px solid hsl(var(--border));
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
`,Yle=b.div`
  display: flex;
  border-bottom: 1px solid hsl(var(--border));
`,Kj=b.button`
  padding: 1.5rem 2rem;
  background: ${t=>t.active?"hsl(var(--primary))":"transparent"};
  color: ${t=>t.active?"white":"hsl(var(--foreground))"};
  border: none;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  
  &:hover {
    background: ${t=>t.active?"hsl(var(--primary))":"hsla(var(--muted), 0.1)"};
  }
  
  &:after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: ${t=>t.active?"white":"transparent"};
    transition: all 0.2s;
  }
`,Kle=b.div`
  padding: 2rem;
`,Qle=b.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 300px;
  color: hsl(var(--muted-foreground));
  font-size: 1.1rem;
  
  p {
    margin-top: 1rem;
  }
`,Xle=b.div`
  text-align: center;
  padding: 3rem 1.5rem;
  border-radius: 1rem;
  background: hsl(var(--card));
  border: 1px solid hsl(var(--border));
  margin: 2rem auto;
  max-width: 600px;
`,Zle=b.button`
  background: hsl(var(--primary));
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-size: 1rem;
  font-weight: 500;
  margin-top: 1.5rem;
  cursor: pointer;
  transition: opacity 0.2s;
  
  &:hover {
    opacity: 0.9;
  }
`;function Jle(){const{currentUser:t,isLoading:e}=In(),n=Pt(),r=Gn(),[i,a]=k.useState([]),[l,d]=k.useState(!1),[f,m]=k.useState("new"),v=new URLSearchParams(r.search).get("ticketId");k.useEffect(()=>{t&&w(),v&&m("view")},[t,v]);const w=async()=>{if(t){d(!0);try{const T=await J2(t.uid);a(T)}catch(T){console.error("Error loading tickets:",T)}finally{d(!1)}}},x=T=>{w(),m("view")};return e?u.jsx(Tb,{children:u.jsxs(Qle,{children:[u.jsx(ia,{size:50}),u.jsx("p",{children:"Loading..."})]})}):t?u.jsxs(Tb,{children:[u.jsxs(Gj,{children:[u.jsx(Wj,{children:"Support Center"}),u.jsx(Yj,{children:"Get help with your RuneRaffle account, competitions, or prize collections."})]}),u.jsxs(Wle,{children:[u.jsxs(Yle,{children:[u.jsx(Kj,{active:f==="new",onClick:()=>m("new"),children:"Create New Ticket"}),u.jsx(Kj,{active:f==="view",onClick:()=>m("view"),children:"Your Tickets"})]}),u.jsxs(Kle,{children:[f==="new"&&u.jsx(wle,{onSuccess:x}),f==="view"&&u.jsx(Gle,{onTicketUpdate:w,initialTicketId:v||void 0})]})]})]}):u.jsxs(Tb,{children:[u.jsxs(Gj,{children:[u.jsx(Wj,{children:"Support Center"}),u.jsx(Yj,{children:"Get help with your RuneRaffle account, competitions, or prize collections."})]}),u.jsxs(Xle,{children:[u.jsx("h2",{children:"Please sign in to access support"}),u.jsx("p",{children:"You need to be logged in to create or view support tickets."}),u.jsx(Zle,{onClick:()=>n("/login"),children:"Sign In"})]})]})}const ece=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,tce=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  text-align: center;
`,nce=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 2rem;
  text-align: center;
`,Qj=b.div`
  background-color: hsl(var(--muted) / 0.1);
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 2rem;
  font-weight: 500;
`,Pn=b.section`
  margin-bottom: 2rem;
`,Un=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: hsl(var(--primary));
`,En=b.div`
  margin-bottom: 1rem;
`,jr=b.ul`
  padding-left: 1.5rem;
  margin-bottom: 1rem;
`,Be=b.li`
  margin-bottom: 0.5rem;
`;function rce(){const t=new Date().toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return u.jsxs(ece,{children:[u.jsx(tce,{children:"TERMS & CONDITIONS"}),u.jsxs(nce,{children:["Last Updated: ",t]}),u.jsx(En,{children:u.jsx("p",{children:'These Terms & Conditions ("Terms") govern your use of the RuneRaffle website (the "Site") and participation in any competitions, prize draws, or skill-based challenges ("Competitions") hosted on the Site. By accessing or using the Site, or by entering any Competition, you agree to these Terms. If you do not agree, do not use this Site.'})}),u.jsxs(Qj,{children:[u.jsx("strong",{children:"Important:"}),' We are not affiliated with or endorsed by Jagex Ltd. ("Jagex") or RuneScape in any way. RuneScape is a trademark of Jagex. The Site is an independent, fan-operated platform.']}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"1. Operator Information"}),u.jsxs(En,{children:[u.jsx("p",{children:'Website Operator: RuneRaffle Ltd. ("We," "Us," "Our").'}),u.jsx("p",{children:"Registered Address: 123 Gaming Street, London, UK."}),u.jsx("p",{children:"Contact Email: support@runeraffle.com."}),u.jsx("p",{children:"Please note we are not a gambling operator. Our Competitions are designed as skill-based prize competitions with a free entry route, intended to comply with the Gambling Act 2005 (UK). If you have any queries about these Terms, please contact us at the email above."})]})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"2. Eligibility"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Age Requirement:"})," You must be at least 18 years old to enter Competitions on this Site. By registering or participating, you confirm that you meet this requirement."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Residency:"})," Competitions are primarily open to residents of the United Kingdom. Participants from outside the UK may be subject to additional verification or restrictions, at Our sole discretion."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Exclusions:"})," Employees, agents, affiliates, or family members of RuneRaffle Ltd. may be excluded from entering or winning Competitions, at Our discretion."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"3. Nature of Competitions"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Skill Component:"}),' Our Competitions require participants to answer a question, puzzle, or other skill-based task ("Skill Question") correctly in order to be entered into a prize draw. Only correct entries proceed to the final selection stage.']}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Free Entry Route:"})," A free entry method is available to all participants. You can post a written entry request to our registered address, including your full name, email address, and your answer to the Skill Question. No purchase is necessary to enter via this route. All free entries have an equal chance of winning."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Chance Element:"})," Among all correct entries, a random process (e.g. a draw or random number generator) is used to determine the winner. While random selection is used, the overall Competition is classified as skill-based due to the requirement of answering the Skill Question correctly."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"4. Tickets, Entry & Payments"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Tickets:"})," Where tickets are offered for entry (paid or free), these represent your entries into the Competition once you have correctly answered the Skill Question."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Payment (If Any):"})," Currently, we do not accept real-money payments for entries. We may offer optional paid entry methods in future. In that event, these Terms will be updated and you will be notified."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Real-World Value:"})," Prizes are in-game RuneScape items and are considered to have no real-world monetary value. They cannot be exchanged for cash or any other real currency."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"5. Conduct & Compliance"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Accurate Information:"})," You are responsible for providing true, accurate, and complete information during registration and Competition entry (including your RuneScape username if applicable)."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"One Account:"})," You must not create multiple accounts or attempt to circumvent entry limits."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Cheating or Fraud:"})," Any manipulation, hacking, or fraudulent activity to gain unfair advantage may result in disqualification, account termination, or legal action."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Legal Compliance:"})," You agree to comply with all applicable local, national, and international laws and regulations relating to your participation in the Competitions."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"6. Winners & Prizes"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Selection of Winners:"})," At the close of each Competition, all correct entries will be placed into a random draw. The winner(s) will be selected using a provably fair or random algorithm."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Announcement:"})," Winners will be notified by email and may be announced on the Site (e.g., username/first name) for transparency. You consent to limited publication of your username or first name for promotional purposes."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Prize Delivery:"})," Prizes are RuneScape in-game items. Arrangements for in-game delivery (trade) will be communicated. We are not responsible for any restrictions or conditions imposed by Jagex."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Cash Alternative:"})," Prizes cannot be exchanged for real money or other real-world items."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"7. Disclaimers"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"No Affiliation:"})," We are not endorsed by or associated with Jagex, and Jagex has no responsibility or liability for our Site or Competitions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Guarantee of Uninterrupted Service:"})," While we strive for continuous availability, the Site may be subject to downtime, maintenance, or technical issues. We are not liable for lost entries or technical malfunctions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Compliance with RuneScape Terms:"})," You are responsible for following RuneScape's Terms of Service regarding item trades. We disclaim liability if Jagex imposes restrictions or penalties on your account due to prize acceptance."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Not Gambling:"})," We have designed these Competitions as skill-based, with a free entry route, to ensure compliance with UK law. We do not accept liability if any regulatory body reclassifies our Competitions as gambling."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"8. Limitation of Liability"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Extent of Liability:"})," To the fullest extent permitted by law, We and our affiliates, officers, employees, or agents shall not be liable for any indirect, incidental, special, or consequential damages arising from your use of the Site or participation in Competitions."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Prize Fulfilment:"})," We shall make all reasonable efforts to deliver in-game items but shall not be responsible for circumstances outside our control, such as game server downtime or game policy changes affecting trades."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"No Guarantee of Winnings:"})," Participation does not guarantee winning a prize. All entries are subject to random selection from among eligible participants."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"9. Data Protection & Privacy"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Personal Data:"})," We collect and store your personal data (name, email, RuneScape username, etc.) only as necessary to operate Competitions and maintain user accounts."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Compliance:"})," We process personal data in accordance with UK GDPR and other relevant data protection laws."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Privacy Policy:"})," Please see our Privacy Policy for full details on how we handle and protect your data."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"10. Termination & Disqualification"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Site Termination:"})," We reserve the right to discontinue or suspend the Site or any Competition at any time without prior notice if circumstances necessitate."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Disqualification:"})," We reserve the right to disqualify any participant for breaching these Terms, providing false information, or engaging in fraudulent or illegal activities."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"11. Changes to These Terms"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Updates:"}),' We may update or revise these Terms at any time. When we do, we will post the revised Terms with a new "Last Updated" date.']}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Acceptance of Revisions:"})," Continued use of the Site after updates constitutes acceptance of the revised Terms."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"12. Governing Law & Dispute Resolution"}),u.jsx(En,{children:u.jsxs(jr,{children:[u.jsxs(Be,{children:[u.jsx("strong",{children:"Governing Law:"})," These Terms and any dispute or claim arising out of or in connection with them (including non-contractual disputes or claims) shall be governed by and construed in accordance with the laws of England and Wales."]}),u.jsxs(Be,{children:[u.jsx("strong",{children:"Jurisdiction:"})," You agree that courts of England and Wales shall have exclusive jurisdiction to settle any disputes related to these Terms, the Site, or any Competitions."]})]})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"13. Severability"}),u.jsx(En,{children:u.jsx("p",{children:"If any provision of these Terms is held to be invalid or unenforceable, such provision shall be struck out and the remaining provisions shall remain in full force and effect."})})]}),u.jsxs(Pn,{children:[u.jsx(Un,{children:"14. Contact Us"}),u.jsxs(En,{children:[u.jsx("p",{children:"If you have any questions or complaints about these Terms, please contact us at:"}),u.jsx("p",{children:"Email: support@runeraffle.com"}),u.jsx("p",{children:"Address: 123 Gaming Street, London, UK"})]})]}),u.jsxs(Qj,{children:[u.jsx("strong",{children:"Disclaimer:"})," This document is a general example and does not constitute legal advice. For specific guidance, consult a qualified legal professional knowledgeable in UK law."]})]})}const ice=b.div`
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 1rem;
`,sce=b.h1`
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 1rem;
  text-align: center;
`,oce=b.p`
  font-size: 0.875rem;
  color: hsl(var(--muted-foreground));
  margin-bottom: 2rem;
  text-align: center;
`,Xj=b.div`
  background-color: hsl(var(--muted) / 0.1);
  border: 1px solid hsl(var(--border));
  border-radius: 0.5rem;
  padding: 1rem;
  margin-bottom: 2rem;
  font-weight: 500;
`,Wr=b.section`
  margin-bottom: 2rem;
`,Yr=b.h2`
  font-size: 1.25rem;
  font-weight: bold;
  margin-bottom: 1rem;
  color: hsl(var(--primary));
`,Dr=b.div`
  margin-bottom: 1rem;
`,Nl=b.ul`
  padding-left: 1.5rem;
  margin-bottom: 1rem;
`,it=b.li`
  margin-bottom: 0.5rem;
`;function ace(){const t=new Date().toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return u.jsxs(ice,{children:[u.jsx(sce,{children:"PRIVACY POLICY"}),u.jsxs(oce,{children:["Last Updated: ",t]}),u.jsx(Dr,{children:u.jsx("p",{children:'This Privacy Policy explains how RuneRaffle ("we", "us", "our") collects, uses, and protects your personal information when you visit our website or use our services. We are committed to ensuring that your privacy is protected.'})}),u.jsxs(Xj,{children:[u.jsx("strong",{children:"Important:"}),' We are not affiliated with or endorsed by Jagex Ltd. ("Jagex") or RuneScape in any way. RuneScape is a trademark of Jagex. RuneRaffle is an independent, fan-operated platform.']}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"1. Information We Collect"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"We may collect the following information:"}),u.jsxs(Nl,{children:[u.jsx(it,{children:"Personal information such as name and email address"}),u.jsx(it,{children:"RuneScape username/in-game identity"}),u.jsx(it,{children:"Account information and preferences"}),u.jsx(it,{children:"IP address and basic device information"}),u.jsx(it,{children:"Website usage data through cookies and similar technologies"})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"2. Why We Collect Your Information"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"We collect your information for the following purposes:"}),u.jsxs(Nl,{children:[u.jsx(it,{children:"To provide and maintain our services"}),u.jsx(it,{children:"To verify your identity and manage your account"}),u.jsx(it,{children:"To process competition entries and distribute prizes"}),u.jsx(it,{children:"To communicate with you about competitions, updates, and support"}),u.jsx(it,{children:"To improve our website and user experience"}),u.jsx(it,{children:"To prevent fraud and ensure compliance with our Terms of Service"})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"3. How We Use Your Information"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"We use your information in the following ways:"}),u.jsxs(Nl,{children:[u.jsxs(it,{children:[u.jsx("strong",{children:"Account Management:"})," We use your email and personal details to create and maintain your account, verify your identity, and provide customer support."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Competition Administration:"})," We use your information to process your competition entries, notify you of results, and arrange delivery of prizes."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Communications:"})," We may contact you regarding prize notifications, account updates, service announcements, and customer support."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Service Improvement:"})," We analyze usage patterns to improve our website functionality and user experience."]})]})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"4. How We Store and Protect Your Information"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"We are committed to ensuring that your information is secure. We have implemented suitable physical, electronic, and managerial procedures to safeguard and secure the information we collect online."}),u.jsx("p",{children:"Your data is stored securely on Firebase servers (Google Cloud Platform) with industry-standard security measures. We retain your personal information only for as long as necessary to fulfill the purposes outlined in this Privacy Policy."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"5. Cookies and Tracking"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"Our website uses cookies to enhance your browsing experience. Cookies are small files stored on your device that help us provide you with a better website by enabling us to monitor which pages you find useful."}),u.jsx("p",{children:"We use cookies for:"}),u.jsxs(Nl,{children:[u.jsx(it,{children:"Authentication and maintaining your login session"}),u.jsx(it,{children:"Understanding how you use our website"}),u.jsx(it,{children:"Remembering your preferences"})]}),u.jsx("p",{children:"You can choose to accept or decline cookies. Most web browsers automatically accept cookies, but you can usually modify your browser settings to decline cookies if you prefer."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"6. Third-Party Services"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"We may use third-party services to help operate our business and the website or administer activities on our behalf. These third-party services include:"}),u.jsxs(Nl,{children:[u.jsx(it,{children:"Google Firebase (authentication, hosting, and database)"}),u.jsx(it,{children:"Email service providers for notifications"}),u.jsx(it,{children:"Analytics services to improve our website"})]}),u.jsx("p",{children:"These services may collect or access your information for the purposes of supporting our services. All third-party providers have their own privacy policies governing how they use this information."})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"7. Your Rights"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"Under data protection laws, you have rights regarding your personal data including:"}),u.jsxs(Nl,{children:[u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Access:"})," You can request copies of your personal data."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Rectification:"})," You can request that we correct inaccurate personal data."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Erasure:"})," You can request that we delete your personal data in certain circumstances."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Restrict Processing:"})," You can request we restrict the processing of your personal data."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Data Portability:"})," You can request the transfer of your personal data to you or a third party."]}),u.jsxs(it,{children:[u.jsx("strong",{children:"Right to Object:"})," You can object to processing of your personal data in certain circumstances."]})]}),u.jsx("p",{children:'To exercise any of these rights, please contact us using the information in the "Contact Us" section below.'})]})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"8. Children's Privacy"}),u.jsx(Dr,{children:u.jsx("p",{children:"Our services are not intended for individuals under 18 years of age. We do not knowingly collect personal information from children under 18. If you are a parent or guardian and believe your child has provided us with personal information, please contact us, and we will delete such information from our systems."})})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"9. Changes to This Privacy Policy"}),u.jsx(Dr,{children:u.jsx("p",{children:"We may update this Privacy Policy from time to time by posting a new version on our website. You should check this page occasionally to ensure you are happy with any changes. If we make significant changes to this Privacy Policy, we will notify you through a prominent notice on our website or by email."})})]}),u.jsxs(Wr,{children:[u.jsx(Yr,{children:"10. Contact Us"}),u.jsxs(Dr,{children:[u.jsx("p",{children:"If you have any questions about this Privacy Policy or how we handle your personal information, please contact us at:"}),u.jsx("p",{children:"Email: support@runeraffle.com"}),u.jsx("p",{children:"Address: 123 Gaming Street, London, UK"})]})]}),u.jsxs(Xj,{children:[u.jsx("strong",{children:"Disclaimer:"})," This document is a general example and does not constitute legal advice. For specific guidance, consult a qualified legal professional knowledgeable in data protection law."]})]})}const lce=b.div`
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
`,cce=b.main`
  flex: 1;
  width: 100%;
`;function uce(){return u.jsx(tO,{children:u.jsx(NY,{children:u.jsxs(lce,{children:[u.jsx(vQ,{}),u.jsx(cce,{children:u.jsxs(RL,{children:[u.jsx(_t,{path:"/",element:u.jsx(PK,{})}),u.jsx(_t,{path:"/profile",element:u.jsx(cX,{})}),u.jsx(_t,{path:"/referrals",element:u.jsx(PX,{})}),u.jsx(_t,{path:"/competitions",element:u.jsx(fZ,{})}),u.jsx(_t,{path:"/competition/:id",element:u.jsx(rJ,{})}),u.jsx(_t,{path:"/winners",element:u.jsx(IJ,{})}),u.jsx(_t,{path:"/how-it-works",element:u.jsx(Nie,{})}),u.jsx(_t,{path:"/verification/:id",element:u.jsx(mle,{})}),u.jsx(_t,{path:"/login",element:u.jsx(mj,{mode:"login"})}),u.jsx(_t,{path:"/register",element:u.jsx(mj,{mode:"register"})}),u.jsx(_t,{path:"/admin",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/admin/support",element:u.jsx(DL,{to:"/admin?tab=support",replace:!0})}),u.jsx(_t,{path:"/admin/edit-competition/:id",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/admin/competitions",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/admin/users",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/admin/winners",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/admin/analytics",element:u.jsx(Dl,{})}),u.jsx(_t,{path:"/support",element:u.jsx(Jle,{})}),u.jsx(_t,{path:"/terms",element:u.jsx(rce,{})}),u.jsx(_t,{path:"/privacy",element:u.jsx(ace,{})})]})}),u.jsx(OQ,{})]})})})}z8.createRoot(document.getElementById("root")).render(u.jsx(Jj.StrictMode,{children:u.jsx(uce,{})}));export{st as d};
