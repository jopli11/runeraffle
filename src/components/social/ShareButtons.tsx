import React, { useState } from 'react';
import styled from '@emotion/styled';

interface ShareButtonsProps {
  title: string;
  url: string;
  description?: string;
  image?: string;
  vertical?: boolean;
}

const ShareContainer = styled.div<{ vertical: boolean }>`
  display: flex;
  flex-direction: ${props => props.vertical ? 'column' : 'row'};
  gap: 0.75rem;
  margin: 1rem 0;
`;

const ShareButton = styled.button<{ bgColor: string }>`
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  background-color: ${props => props.bgColor};
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s;
  
  &:hover {
    opacity: 0.9;
    transform: translateY(-2px);
  }
  
  svg {
    width: 1.25rem;
    height: 1.25rem;
  }
`;

const TwitterButton = ({ url, title }: { url: string; title: string }) => {
  const handleClick = () => {
    const shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`;
    window.open(shareUrl, '_blank', 'noopener,noreferrer');
  };
  
  return (
    <ShareButton onClick={handleClick} bgColor="#1DA1F2">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M22 5.8C21.2483 6.1263 20.4534 6.34419 19.64 6.45C20.4982 5.92831 21.1413 5.12621 21.45 4.19C20.6438 4.66 19.7593 4.99469 18.84 5.18C18.2245 4.52484 17.405 4.0759 16.5098 3.90723C15.6147 3.73857 14.6945 3.85958 13.8938 4.2531C13.093 4.64661 12.4569 5.29455 12.0852 6.09405C11.7135 6.89354 11.6273 7.79301 11.84 8.65C10.2094 8.57305 8.61444 8.16651 7.15865 7.45839C5.70287 6.75027 4.41885 5.75739 3.39 4.53C3.02914 5.15798 2.83952 5.86882 2.84 6.59C2.83872 7.26149 3.00422 7.92163 3.32176 8.51342C3.63929 9.10521 4.09752 9.60936 4.66 9.98C4.00798 9.96031 3.36989 9.7822 2.8 9.46V9.51C2.8036 10.4383 3.12129 11.3372 3.7199 12.0613C4.31851 12.7854 5.15615 13.2893 6.07 13.49C5.46409 13.6544 4.8285 13.6778 4.21 13.56C4.46168 14.3612 4.96624 15.0598 5.6562 15.5703C6.34617 16.0808 7.18675 16.3776 8.06 16.42C6.6172 17.5491 4.83588 18.1747 3 18.29C3.69472 18.8003 4.4681 19.193 5.28491 19.4527C6.10172 19.7124 6.9483 19.8355 7.8 19.8173C11.9486 19.7417 15.558 16.8846 17.001 13.01C17.3389 12.2254 17.5857 11.4043 17.736 10.561C18.5161 9.96318 19.1863 9.23099 19.72 8.39C18.9668 8.73161 18.1575 8.95841 17.33 9.06C18.1932 8.5367 18.8409 7.73654 19.15 6.8C18.3236 7.27212 17.4392 7.60818 16.52 7.79C15.9182 7.18744 15.1337 6.78146 14.2875 6.63193C13.4412 6.48239 12.5696 6.59789 11.7961 6.96121C11.0225 7.32453 10.3884 7.91593 9.98728 8.65608C9.58613 9.39622 9.43645 10.2466 9.56 11.08H9.28C9.05141 11.0852 8.82328 11.0734 8.598 11.045C8.598 8.768 10.438 6.856 12.731 6.714C12.928 6.7 13.124 6.7 13.32 6.7C15.498 6.7 17.308 8.233 17.641 10.27C17.641 10.27 17.673 10.367 17.673 10.464C17.7182 10.8271 17.7408 11.1927 17.741 11.559L17.726 11.912C17.726 15.043 15.186 17.611 12.055 17.642H12.002C11.8942 17.642 11.7864 17.642 11.6787 17.642C9.651 17.642 7.859 16.701 6.7 15.251C8.23118 15.1171 9.68342 14.5156 10.8486 13.5274C12.0138 12.5392 12.8354 11.2148 13.205 9.754C12.5595 9.75619 11.9309 9.56953 11.4046 9.21779C10.8783 8.86606 10.4808 8.36807 10.272 7.788C10.9752 7.76732 11.668 7.60154 12.302 7.3C11.7388 7.05067 11.2509 6.67464 10.8794 6.20288C10.5079 5.73112 10.2643 5.1787 10.17 4.593C10.816 4.91 11.536 5.097 12.271 5.135C11.1256 4.3766 10.4185 3.02791 10.44 1.593C10.44 1.201 10.496 0.827 10.593 0.473C12.6574 2.96681 15.7044 4.48586 18.97 4.72C18.9466 4.47595 18.9342 4.23062 18.933 3.985C18.933 1.782 20.722 0 22.925 0H22.939C23.9702 0.0152816 24.9525 0.459188 25.673 1.221C26.5016 1.05358 27.2987 0.741367 28.033 0.296C27.7648 1.18349 27.1757 1.94152 26.372 2.425C27.1383 2.33715 27.8869 2.14078 28.593 1.845C28.0367 2.6153 27.357 3.29123 26.581 3.835C26.6543 4.31703 26.6907 4.80395 26.69 5.292C26.69 13.485 20.569 23 10.361 23C7.80286 23.0014 5.29285 22.2975 3.106 20.968L3 20.904C5.05151 20.9433 7.07241 20.3773 8.838 19.26L9 19.156L8.635 19.063C6.54037 18.6175 4.71326 17.3417 3.612 15.543L3.458 15.267L3.581 15.283C4.30539 15.3528 5.03884 15.2533 5.72 14.992L6.127 14.826L5.687 14.767C3.41354 14.3701 1.61178 12.5667 1.219 10.294L1.178 10.024L1.425 10.112C2.08084 10.3921 2.78562 10.53 3.498 10.516L3.87 10.516L3.538 10.298C1.75269 9.11397 0.749609 7.0311 1.02432 4.9327C1.29903 2.8343 2.80973 1.07396 4.882 0.351L5.147 0.259L5.332 0.454C7.98998 3.38325 11.6118 5.1017 15.44 5.24C15.5463 5.24228 15.6523 5.2345 15.758 5.217L15.875 5.2L15.862 5.082C15.687 3.53 16.221 2.001 17.3 0.908C18.0432 0.15654 19.0333 -0.225698 20.0539 -0.147398C21.0744 -0.0690983 22.0002 0.461458 22.602 1.299L22.687 1.416L22.822 1.389C23.698 1.278 24.5593 1.06855 25.388 0.766L26.08 0.511L25.698 1.143C25.4753 1.49784 25.2025 1.81954 24.889 2.095L24.386 2.531L24.982 2.388C25.3631 2.30049 25.737 2.1855 26.1 2.044L26.872 1.787L26.353 2.422C25.8515 3.01882 25.2954 3.56744 24.693 4.062C24.6277 4.67737 24.5337 5.28952 24.411 5.895C24.3303 7.32594 24.0382 8.73682 23.544 10.083C23.0503 11.4325 22.3609 12.7015 21.5 13.843C20.639 14.9861 19.5975 15.9772 18.419 16.774C16.3576 18.2058 13.9539 19.0258 11.463 19.13H11.427C9.08065 19.13 6.81856 18.2911 5.053 16.793L4.846 16.602L5.113 16.694C5.90106 16.9513 6.72554 17.0837 7.556 17.086H7.605C7.557 17.057 7.515 17.022 7.471 16.985C6.40526 16.0761 5.68656 14.81 5.45596 13.4147C5.22537 12.0195 5.49896 10.5851 6.221 9.399L6.42 9.093L6.067 9.293C5.24134 9.74936 4.49616 10.3514 3.87 11.068L3.515 11.468L3.837 11.022C3.84761 10.5221 3.89259 10.0233 3.972 9.528C3.97725 9.46084 3.98491 9.39382 3.995 9.327C3.64043 9.46017 3.29821 9.6228 2.976 9.812L2.347 10.233L3.02 9.632C2.80296 8.83865 2.75304 8.00813 2.874 7.195L3.097 5.854L1.967 6.801C1.61444 7.09342 1.3255 7.45468 1.116 7.861L0.966 8.145L1.094 7.832C1.18207 7.62137 1.28271 7.4176 1.395 7.221L1.605 6.856L1.342 7.186C1.12 7.434 0.944 7.723 0.824 8.038L0.664 8.462L0.789 8.021C0.85 7.827 0.923 7.638 1.008 7.455L1.191 7.08L0.937 7.417C0.77 7.641 0.649 7.893 0.579 8.161L0.465 8.592L0.558 8.148C0.686971 7.65491 0.909894 7.19324 1.214 6.788L1.613 6.245L1.111 6.702C0.788 7.002 0.54 7.365 0.384 7.764L0.131 8.389L0.347 7.748C0.451 7.429 0.597 7.124 0.782 6.843L1.157 6.305L0.687 6.812C0.58 6.929 0.501 7.064 0.454 7.21L0.378 7.45L0.417 7.202C0.476 6.849 0.631 6.518 0.86 6.244L1.414 5.577L0.729 6.201C0.604 6.317 0.491 6.444 0.39 6.581L0.224 6.795L0.354 6.6C0.437065 6.46989 0.530045 6.34655 0.632 6.231L0.966 5.86L0.551 6.239C0.395 6.383 0.292 6.573 0.259 6.78L0.215 7.052L0.214 6.773C0.214 6.615 0.252 6.459 0.326 6.317L0.498 6.012L0.296 6.293C0.220729 6.40767 0.164094 6.53435 0.128 6.667L0.076 6.861L0.083 6.658C0.0957336 6.52566 0.129903 6.39646 0.184 6.276L0.303 6.039L0.178 6.267C0.124 6.371 0.091 6.485 0.081 6.602L0.067 6.773L0.053 6.592C0.0466406 6.32041 0.123726 6.05465 0.271 5.831L0.505 5.503L0.244 5.844C0.15 5.972 0.093 6.121 0.079 6.277L0.06 6.491L0.044 6.269C0.0356654 6.1541 0.0448436 6.03866 0.0712 5.92723C0.0975564 5.81581 0.140561 5.70996 0.198 5.615L0.384 5.362L0.175 5.626C0.115 5.709 0.07 5.803 0.042 5.902L0 6.055L0.007 5.9C0.0119349 5.81718 0.0283116 5.7353 0.056 5.656L0.125 5.483L0.041 5.653C0.0159342 5.71412 0.0021402 5.77817 1.12764e-07 5.843L-0.003 5.956L-0.001 5.84C0.00133171 5.75653 0.0185033 5.67429 0.05 5.599L0.107 5.461L0.049 5.59C0.0187223 5.67414 0.00192402 5.76084 0 5.848L0 5.957L0 5.847C-6.04546e-05 5.7754 0.0147021 5.70453 0.0437 5.638L0.114 5.483L0.037 5.651C0.0124273 5.72999 0.0002182 5.81166 0 5.894L0.003 6L0 5.893C0.00266466 5.8061 0.0194323 5.7211 0.05 5.642L0.121 5.491L0.04 5.658C0.0130511 5.74144 0.000205079 5.82798 0 5.915L0.004 6.018L0 5.911C0.00225869 5.82336 0.0191525 5.73748 0.05 5.658L0.119 5.504L0.039 5.67C0.0117511 5.75745 -0.00131225 5.84726 0.000139117 5.937L0.004 6.037L0 5.933C0.0033277 5.8298 0.0293555 5.72903 0.076 5.637L0.182 5.444L0.05 5.663C0.0178435 5.75897 0.000782188 5.85794 0 5.957L0.004 6.072L0 5.953C0.00410598 5.83959 0.0319093 5.72875 0.081 5.628L0.188 5.434L0.054 5.655C0.0183755 5.7522 -0.000110984 5.85301 9.95727e-08 5.954L0.004 6.072L-0.001 5.951C0.00322566 5.83717 0.0309991 5.72592 0.08 5.625L0.188 5.429L0.053 5.652C0.0181054 5.74981 0.000100156 5.84975 0 5.95L0.004 6.067L0 5.95L0.004 5.834L0 5.95L0.004 6.067Z" fill="currentColor"/>
      </svg>
      Twitter
    </ShareButton>
  );
};

const FacebookButton = ({ url, title }: { url: string; title: string }) => {
  const handleClick = () => {
    const shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(title)}`;
    window.open(shareUrl, '_blank', 'noopener,noreferrer');
  };
  
  return (
    <ShareButton onClick={handleClick} bgColor="#1877F2">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M24 12.073C24 5.404 18.627 0 12 0C5.37 0 0 5.404 0 12.073C0 18.065 4.388 23.04 10.125 23.952V15.563H7.078V12.073H10.125V9.415C10.125 6.39 11.917 4.717 14.658 4.717C15.97 4.717 17.344 4.953 17.344 4.953V7.925H15.83C14.34 7.925 13.875 8.85 13.875 9.803V12.073H17.203L16.67 15.563H13.875V23.952C19.612 23.04 24 18.065 24 12.073Z" fill="currentColor"/>
      </svg>
      Facebook
    </ShareButton>
  );
};

const LinkedInButton = ({ url, title, description }: { url: string; title: string; description?: string }) => {
  const handleClick = () => {
    const shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}&title=${encodeURIComponent(title)}${description ? `&summary=${encodeURIComponent(description)}` : ''}`;
    window.open(shareUrl, '_blank', 'noopener,noreferrer');
  };
  
  return (
    <ShareButton onClick={handleClick} bgColor="#0A66C2">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M20.447 20.452H16.893V14.883C16.893 13.555 16.866 11.846 15.041 11.846C13.188 11.846 12.905 13.291 12.905 14.785V20.452H9.35103V9H12.765V10.561H12.811C13.288 9.661 14.448 8.711 16.181 8.711C19.782 8.711 20.448 11.081 20.448 14.166V20.452H20.447ZM5.33903 7.433C4.19303 7.433 3.27403 6.509 3.27403 5.368C3.27403 4.227 4.19403 3.305 5.33903 3.305C6.48003 3.305 7.40003 4.227 7.40003 5.368C7.40003 6.509 6.47903 7.433 5.33903 7.433ZM7.11703 20.452H3.56103V9H7.11703V20.452Z" fill="currentColor"/>
      </svg>
      LinkedIn
    </ShareButton>
  );
};

const WhatsAppButton = ({ url, title }: { url: string; title: string }) => {
  const handleClick = () => {
    const shareUrl = `https://wa.me/?text=${encodeURIComponent(`${title} ${url}`)}`;
    window.open(shareUrl, '_blank', 'noopener,noreferrer');
  };
  
  return (
    <ShareButton onClick={handleClick} bgColor="#25D366">
      <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.472 14.382C17.204 14.248 15.739 13.527 15.493 13.438C15.246 13.35 15.066 13.305 14.887 13.573C14.707 13.842 14.133 14.518 13.975 14.697C13.816 14.877 13.658 14.899 13.39 14.766C13.122 14.632 12.132 14.315 10.97 13.278C10.055 12.462 9.445 11.462 9.287 11.193C9.128 10.925 9.27 10.777 9.404 10.641C9.526 10.518 9.673 10.321 9.809 10.163C9.945 10.005 9.99 9.894 10.078 9.714C10.166 9.534 10.122 9.377 10.055 9.243C9.99 9.109 9.383 7.642 9.158 7.106C8.941 6.584 8.721 6.656 8.556 6.646C8.397 6.637 8.217 6.637 8.038 6.637C7.858 6.637 7.567 6.702 7.32 6.97C7.074 7.238 6.309 7.959 6.309 9.426C6.309 10.893 7.381 12.316 7.518 12.496C7.654 12.676 9.442 15.429 12.171 16.729C12.833 17.022 13.348 17.203 13.75 17.338C14.412 17.557 15.013 17.528 15.485 17.461C16.01 17.386 17.218 16.749 17.443 16.125C17.667 15.501 17.667 14.965 17.601 14.853C17.535 14.742 17.355 14.675 17.087 14.541M12.04 21.933H12.035C10.2422 21.9334 8.48473 21.4504 6.931 20.527L6.586 20.327L2.855 21.336L3.879 17.695L3.658 17.339C2.65082 15.7382 2.11493 13.8829 2.116 11.987C2.118 6.491 6.544 2.066 12.04 2.066C14.691 2.066 17.178 3.078 19.042 4.944C19.9651 5.86371 20.6988 6.95356 21.1992 8.15591C21.6997 9.35826 21.9566 10.6485 21.954 11.953C21.952 17.45 17.527 21.933 12.04 21.933M20.494 3.492C19.3376 2.32837 17.9595 1.40929 16.4418 0.796438C14.924 0.183584 13.2951 -0.112069 11.66 -0.0749934C5.287 -0.0749934 0.115 5.093 0.112 11.466C0.110545 13.4775 0.633001 15.447 1.625 17.183L0 23L5.947 21.41C7.62514 22.3129 9.51882 22.7849 11.444 22.785H11.45C17.823 22.785 22.995 17.616 22.998 11.243C23.0359 9.60953 22.7408 7.9824 22.0995 6.46482C21.4583 4.94723 20.5119 3.5655 19.333 2.401" fill="currentColor"/>
      </svg>
      WhatsApp
    </ShareButton>
  );
};

const CopyLinkButton = ({ url }: { url: string }) => {
  const [copied, setCopied] = useState(false);
  
  const handleClick = () => {
    navigator.clipboard.writeText(url).then(() => {
      setCopied(true);
      setTimeout(() => setCopied(false), 2000);
    });
  };
  
  return (
    <ShareButton onClick={handleClick} bgColor={copied ? "#22c55e" : "#64748b"}>
      {copied ? (
        <>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 16.17L4.83 12L3.41 13.41L9 19L21 7L19.59 5.59L9 16.17Z" fill="currentColor"/>
          </svg>
          Copied!
        </>
      ) : (
        <>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="currentColor"/>
          </svg>
          Copy Link
        </>
      )}
    </ShareButton>
  );
};

export default function ShareButtons({ title, url, description, image, vertical = false }: ShareButtonsProps) {
  return (
    <ShareContainer vertical={vertical}>
      <TwitterButton url={url} title={title} />
      <FacebookButton url={url} title={title} />
      <LinkedInButton url={url} title={title} description={description} />
      <WhatsAppButton url={url} title={title} />
      <CopyLinkButton url={url} />
    </ShareContainer>
  );
} 